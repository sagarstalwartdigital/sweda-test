(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./node_modules/webpack/hot sync ^\\.\\/log$":
/*!*************************************************!*\
  !*** (webpack)/hot sync nonrecursive ^\.\/log$ ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./log": "./node_modules/webpack/hot/log.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) { // check for number or string
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return id;
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/webpack/hot sync ^\\.\\/log$";

/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/*!**********************************************************!*\
  !*** ./src/$$_lazy_route_resource lazy namespace object ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./src/app/_helper/formatCurrency.ts":
/*!*******************************************!*\
  !*** ./src/app/_helper/formatCurrency.ts ***!
  \*******************************************/
/*! exports provided: FormatCurrency */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormatCurrency", function() { return FormatCurrency; });
function FormatCurrency(price, format, showPlus) {
    var precision = isNaN(format.precision = Math.abs(format.precision)) ? 2 : format.precision;
    var requiredPrecision = isNaN(format.requiredPrecision = Math.abs(format.requiredPrecision)) ? 2 : format.requiredPrecision;
    //for now we don't need this difference so precision is requiredPrecision
    precision = requiredPrecision;
    var integerRequired = isNaN(format.integerRequired = Math.abs(format.integerRequired)) ? 1 : format.integerRequired;
    var decimalSymbol = format.decimalSymbol == undefined ? "," : format.decimalSymbol;
    var groupSymbol = format.groupSymbol == undefined ? "." : format.groupSymbol;
    var groupLength = format.groupLength == undefined ? 3 : format.groupLength;
    var s = '';
    var j;
    var re;
    var i;
    if (showPlus == undefined || showPlus == true) {
        s = price < 0 ? "-" : (showPlus ? "+" : "");
    }
    else if (showPlus == false) {
        s = '';
    }
    i = parseInt(price = Math.abs(+price || 0).toFixed(precision)) + "";
    var pad = (i.length < integerRequired) ? (integerRequired - i.length) : 0;
    while (pad) {
        i = '0' + i;
        pad--;
    }
    j = (j = i.length) > groupLength ? j % groupLength : 0;
    re = new RegExp("(\\d{" + groupLength + "})(?=\\d)", "g");
    /**
     * replace(/-/, 0) is only for fixing Safari bug which appears
     * when Math.abs(0).toFixed() executed on "0" number.
     * Result is "0.-0"
     */
    var r;
    r = (j ? i.substr(0, j) + groupSymbol : "") + i.substr(j).replace(re, "$1" + groupSymbol) + (precision ? decimalSymbol + Math.abs(price - i).toFixed(precision).replace(/-/, '0').slice(2) : "");
    var pattern = '';
    if (format.pattern.indexOf('{sign}') == -1) {
        pattern = s + format.pattern;
    }
    else {
        pattern = format.pattern.replace('{sign}', s);
    }
    return pattern.replace('%s', r).replace(/^\s\s*/, '').replace(/\s\s*$/, '');
}


/***/ }),

/***/ "./src/app/_helper/must-match.validator.ts":
/*!*************************************************!*\
  !*** ./src/app/_helper/must-match.validator.ts ***!
  \*************************************************/
/*! exports provided: MustMatch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MustMatch", function() { return MustMatch; });
// custom validator to check that two fields match
function MustMatch(controlName, matchingControlName) {
    return function (formGroup) {
        var control = formGroup.controls[controlName];
        var matchingControl = formGroup.controls[matchingControlName];
        if (matchingControl.errors && !matchingControl.errors.mustMatch) {
            // return if another validator has already found an error on the matchingControl
            return;
        }
        // set error on matchingControl if validation fails
        if (control.value !== matchingControl.value) {
            matchingControl.setErrors({ mustMatch: true });
        }
        else {
            matchingControl.setErrors(null);
        }
    };
}


/***/ }),

/***/ "./src/app/app.component.html":
/*!************************************!*\
  !*** ./src/app/app.component.html ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div loader #loaderComponent></div>\n<div class=\"byi-wrap\" (contextmenu)=\"rightClickEventCheck($event)\">\n\t<div name-number *ngIf=\"designService.mainService.nameNumber || designService.mainService.isGenerateSVGDesign\" [loadContent]=\"'adminNameNumber'\"></div>\n    <header [hidden]=\"designService.mainService.nameNumber || designService.mainService.isGenerateSVGDesign\"></header>\n    <div class=\"generate-image-block\" *ngIf=\"designService.mainService.isGenerateSVGDesign\">\n         <button class=\"generate-image-btn\" (click)=\"designService.generateSVGDesign()\">Generate Image</button>\n    </div>\n    <div product-template></div>\n    <div class=\"byi-designboard\">\n     <tabs [hidden]=\"designService.mainService.nameNumber || designService.mainService.isGenerateSVGDesign\"></tabs>\n     <design-area></design-area>\n     <right-panel [hidden]=\"designService.mainService.nameNumber || designService.mainService.isGenerateSVGDesign\"></right-panel>\n </div>\n <translate></translate>\n <footer [hidden]=\"designService.mainService.nameNumber || designService.mainService.isGenerateSVGDesign\"></footer>\n</div>"

/***/ }),

/***/ "./src/app/app.component.scss":
/*!************************************!*\
  !*** ./src/app/app.component.scss ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/app.component.ts":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _components_loader_loader_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_design_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/design.service */ "./src/app/services/design.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");








var AppComponent = /** @class */ (function () {
    function AppComponent(designService, eventService, canvasService, translate) {
        this.designService = designService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.translate = translate;
        this.title = 'basic';
        this.data = [];
        this.checkLandscape();
    }
    AppComponent.prototype.checkLandscape = function () {
        var activeDom = document.activeElement.tagName;
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && window.matchMedia("(orientation: landscape)").matches && activeDom != 'INPUT') {
            sweetalert2__WEBPACK_IMPORTED_MODULE_6___default.a.fire({
                customClass: 'potrait-mode-popup',
                title: this.translate.instant("Alert"),
                text: this.translate.instant("Please select Portrait Mode to see Product Designer Tool in action."),
                showConfirmButton: false,
                allowOutsideClick: false
            });
            return;
        }
        else {
            sweetalert2__WEBPACK_IMPORTED_MODULE_6___default.a.close();
        }
    };
    AppComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.subscribeEvents();
        this.getColors();
        this.eventService.$sub('windowResize', function () {
            _this.checkLandscape();
        });
    };
    AppComponent.prototype.getColors = function () {
        var _this = this;
        var params = {}, url = 'productdesigner/index/getColor', cacheKey = 'getColors' + this.designService.mainService.baseUrl;
        this.designService.mainService.getData(url, params, cacheKey).then(function (colorData) {
            _this.designService.mainService.colorData = colorData;
            _this.eventService.$pub('getColors', (colorData));
        }).catch(function (err) { return console.log(err); });
    };
    AppComponent.prototype.subscribeEvents = function () {
        var _this = this;
        // Subscribe product zoom
        this.eventService.$sub('showMainLoader', function () {
            _this.loaderComponent.showMainLoader = true;
        });
        // Subscribe product zoom
        this.eventService.$sub('hideMainLoader', function () {
            _this.loaderComponent.showMainLoader = false;
        });
    };
    AppComponent.prototype.rightClickEventCheck = function (event) {
        return false;
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _components_loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], AppComponent.prototype, "loaderComponent", void 0);
    AppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: 'app-root',
            template: __webpack_require__(/*! ./app.component.html */ "./src/app/app.component.html"),
            styles: [__webpack_require__(/*! ./app.component.scss */ "./src/app/app.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_design_service__WEBPACK_IMPORTED_MODULE_3__["DesignService"], angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"], _services_canvas_service__WEBPACK_IMPORTED_MODULE_5__["CanvasService"], _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__["TranslateService"]])
    ], AppComponent);
    return AppComponent;
}());



/***/ }),

/***/ "./src/app/app.module.ts":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: HttpLoaderFactory, AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpLoaderFactory", function() { return HttpLoaderFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngx-bootstrap/tooltip */ "./node_modules/ngx-bootstrap/tooltip/fesm5/ngx-bootstrap-tooltip.js");
/* harmony import */ var ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngx-bootstrap/modal */ "./node_modules/ngx-bootstrap/modal/fesm5/ngx-bootstrap-modal.js");
/* harmony import */ var ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-bootstrap/dropdown */ "./node_modules/ngx-bootstrap/dropdown/fesm5/ngx-bootstrap-dropdown.js");
/* harmony import */ var ngx_bootstrap_accordion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-bootstrap/accordion */ "./node_modules/ngx-bootstrap/accordion/fesm5/ngx-bootstrap-accordion.js");
/* harmony import */ var node_modules_angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! node_modules/@angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var ngx_bootstrap_tabs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-bootstrap/tabs */ "./node_modules/ngx-bootstrap/tabs/fesm5/ngx-bootstrap-tabs.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ngx-translate/http-loader */ "./node_modules/@ngx-translate/http-loader/fesm5/ngx-translate-http-loader.js");
/* harmony import */ var ng_recaptcha__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ng-recaptcha */ "./node_modules/ng-recaptcha/index.js");
/* harmony import */ var ng_recaptcha__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(ng_recaptcha__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./app.component */ "./src/app/app.component.ts");
/* harmony import */ var _components_header_header_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/header/header.component */ "./src/app/components/header/header.component.ts");
/* harmony import */ var _components_products_products_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/products/products.component */ "./src/app/components/products/products.component.ts");
/* harmony import */ var _components_preview_preview_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./components/preview/preview.component */ "./src/app/components/preview/preview.component.ts");
/* harmony import */ var _components_save_design_save_design_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./components/save-design/save-design.component */ "./src/app/components/save-design/save-design.component.ts");
/* harmony import */ var _components_download_download_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./components/download/download.component */ "./src/app/components/download/download.component.ts");
/* harmony import */ var _components_customer_login_customer_login_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./components/customer-login/customer-login.component */ "./src/app/components/customer-login/customer-login.component.ts");
/* harmony import */ var _components_tabs_tabs_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./components/tabs/tabs.component */ "./src/app/components/tabs/tabs.component.ts");
/* harmony import */ var _components_footer_footer_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./components/footer/footer.component */ "./src/app/components/footer/footer.component.ts");
/* harmony import */ var _components_design_area_design_area_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./components/design-area/design-area.component */ "./src/app/components/design-area/design-area.component.ts");
/* harmony import */ var _components_image_sides_image_sides_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./components/image-sides/image-sides.component */ "./src/app/components/image-sides/image-sides.component.ts");
/* harmony import */ var _components_cropper_cropper_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./components/cropper/cropper.component */ "./src/app/components/cropper/cropper.component.ts");
/* harmony import */ var _components_clipart_clipart_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./components/clipart/clipart.component */ "./src/app/components/clipart/clipart.component.ts");
/* harmony import */ var _components_plain_text_plain_text_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./components/plain-text/plain-text.component */ "./src/app/components/plain-text/plain-text.component.ts");
/* harmony import */ var _components_image_upload_image_upload_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./components/image-upload/image-upload.component */ "./src/app/components/image-upload/image-upload.component.ts");
/* harmony import */ var _components_background_color_background_color_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./components/background-color/background-color.component */ "./src/app/components/background-color/background-color.component.ts");
/* harmony import */ var _components_product_options_product_options_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./components/product-options/product-options.component */ "./src/app/components/product-options/product-options.component.ts");
/* harmony import */ var _components_font_font_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./components/font/font.component */ "./src/app/components/font/font.component.ts");
/* harmony import */ var _components_right_panel_right_panel_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./components/right-panel/right-panel.component */ "./src/app/components/right-panel/right-panel.component.ts");
/* harmony import */ var _components_common_tabs_common_tabs_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./components/common-tabs/common-tabs.component */ "./src/app/components/common-tabs/common-tabs.component.ts");
/* harmony import */ var _components_image_effects_image_effects_component__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./components/image-effects/image-effects.component */ "./src/app/components/image-effects/image-effects.component.ts");
/* harmony import */ var _components_my_designs_my_designs_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./components/my-designs/my-designs.component */ "./src/app/components/my-designs/my-designs.component.ts");
/* harmony import */ var _components_opacity_opacity_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./components/opacity/opacity.component */ "./src/app/components/opacity/opacity.component.ts");
/* harmony import */ var _components_drop_shadow_drop_shadow_component__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./components/drop-shadow/drop-shadow.component */ "./src/app/components/drop-shadow/drop-shadow.component.ts");
/* harmony import */ var _components_designarea_controls_designarea_controls_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./components/designarea-controls/designarea-controls.component */ "./src/app/components/designarea-controls/designarea-controls.component.ts");
/* harmony import */ var _components_stroke_stroke_component__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./components/stroke/stroke.component */ "./src/app/components/stroke/stroke.component.ts");
/* harmony import */ var _components_tooltip_tooltip_component__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./components/tooltip/tooltip.component */ "./src/app/components/tooltip/tooltip.component.ts");
/* harmony import */ var _components_arc_arc_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./components/arc/arc.component */ "./src/app/components/arc/arc.component.ts");
/* harmony import */ var _components_skew_skew_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./components/skew/skew.component */ "./src/app/components/skew/skew.component.ts");
/* harmony import */ var _components_layer_management_layer_management_component__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./components/layer-management/layer-management.component */ "./src/app/components/layer-management/layer-management.component.ts");
/* harmony import */ var _components_cart_cart_component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./components/cart/cart.component */ "./src/app/components/cart/cart.component.ts");
/* harmony import */ var _components_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./components/context-menu/context-menu.component */ "./src/app/components/context-menu/context-menu.component.ts");
/* harmony import */ var _components_loader_loader_component__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./components/loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _components_conf_product_attr_conf_product_attr_component__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./components/conf-product-attr/conf-product-attr.component */ "./src/app/components/conf-product-attr/conf-product-attr.component.ts");
/* harmony import */ var _components_translate_translate_component__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./components/translate/translate.component */ "./src/app/components/translate/translate.component.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var _components_object_position_object_position_component__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./components/object-position/object-position.component */ "./src/app/components/object-position/object-position.component.ts");
/* harmony import */ var _components_custom_options_custom_options_component__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./components/custom-options/custom-options.component */ "./src/app/components/custom-options/custom-options.component.ts");
/* harmony import */ var _components_price_price_component__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./components/price/price.component */ "./src/app/components/price/price.component.ts");
/* harmony import */ var ngx_filesaver__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ngx-filesaver */ "./node_modules/ngx-filesaver/fesm5/ngx-filesaver.js");
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! @angular/platform-browser/animations */ "./node_modules/@angular/platform-browser/fesm5/animations.js");
/* harmony import */ var _components_object_alignment_position_object_alignment_position_component__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./components/object-alignment-position/object-alignment-position.component */ "./src/app/components/object-alignment-position/object-alignment-position.component.ts");
/* harmony import */ var _components_object_lock_object_lock_component__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./components/object-lock/object-lock.component */ "./src/app/components/object-lock/object-lock.component.ts");
/* harmony import */ var _modules_custom_color_picker_custom_color_picker_module__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./modules/custom-color-picker/custom-color-picker.module */ "./src/app/modules/custom-color-picker/custom-color-picker.module.ts");
/* harmony import */ var _modules_social_media_sharing_social_media_sharing_module__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./modules/social-media-sharing/social-media-sharing.module */ "./src/app/modules/social-media-sharing/social-media-sharing.module.ts");
/* harmony import */ var _modules_social_media_import_social_media_import_module__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./modules/social-media-import/social-media-import.module */ "./src/app/modules/social-media-import/social-media-import.module.ts");
/* harmony import */ var _components_placeholder_loader_placeholder_loader_component__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./components/placeholder-loader/placeholder-loader.component */ "./src/app/components/placeholder-loader/placeholder-loader.component.ts");
/* harmony import */ var ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ngx-infinite-scroll */ "./node_modules/ngx-infinite-scroll/modules/ngx-infinite-scroll.es5.js");
/* harmony import */ var _components_design_templates_design_templates_component__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./components/design-templates/design-templates.component */ "./src/app/components/design-templates/design-templates.component.ts");
/* harmony import */ var _components_printing_methods_printing_methods_component__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./components/printing-methods/printing-methods.component */ "./src/app/components/printing-methods/printing-methods.component.ts");
/* harmony import */ var _components_name_number_name_number_component__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./components/name-number/name-number.component */ "./src/app/components/name-number/name-number.component.ts");
/* harmony import */ var _components_distribute_vertical_horizontal_alignment_distribute_vertical_horizontal_alignment_component__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component */ "./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.ts");
/* harmony import */ var _components_object_grouping_object_grouping_component__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./components/object-grouping/object-grouping.component */ "./src/app/components/object-grouping/object-grouping.component.ts");
/* harmony import */ var _modules_product_template_product_template_module__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./modules/product-template/product-template.module */ "./src/app/modules/product-template/product-template.module.ts");
/* harmony import */ var _demostore_product_demo_product_demo_component__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./demostore/product-demo/product-demo.component */ "./src/app/demostore/product-demo/product-demo.component.ts");

/* Modules */













/* Components */



































/* Services */




















function HttpLoaderFactory(httpClient) {
    return new _ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_12__["TranslateHttpLoader"](httpClient);
}
var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["NgModule"])({
            declarations: [
                _app_component__WEBPACK_IMPORTED_MODULE_14__["AppComponent"],
                _components_header_header_component__WEBPACK_IMPORTED_MODULE_15__["HeaderComponent"],
                _components_products_products_component__WEBPACK_IMPORTED_MODULE_16__["ProductsComponent"],
                _components_preview_preview_component__WEBPACK_IMPORTED_MODULE_17__["PreviewComponent"],
                _components_save_design_save_design_component__WEBPACK_IMPORTED_MODULE_18__["SaveDesignComponent"],
                _components_download_download_component__WEBPACK_IMPORTED_MODULE_19__["DownloadComponent"],
                _components_customer_login_customer_login_component__WEBPACK_IMPORTED_MODULE_20__["CustomerLoginComponent"],
                _components_tabs_tabs_component__WEBPACK_IMPORTED_MODULE_21__["TabsComponent"],
                _components_footer_footer_component__WEBPACK_IMPORTED_MODULE_22__["FooterComponent"],
                _components_design_area_design_area_component__WEBPACK_IMPORTED_MODULE_23__["DesignAreaComponent"],
                _components_image_sides_image_sides_component__WEBPACK_IMPORTED_MODULE_24__["ImageSidesComponent"],
                _components_clipart_clipart_component__WEBPACK_IMPORTED_MODULE_26__["ClipartComponent"],
                _components_plain_text_plain_text_component__WEBPACK_IMPORTED_MODULE_27__["PlainTextComponent"],
                _components_image_upload_image_upload_component__WEBPACK_IMPORTED_MODULE_28__["ImageUploadComponent"],
                _components_background_color_background_color_component__WEBPACK_IMPORTED_MODULE_29__["BackgroundColorComponent"],
                _components_product_options_product_options_component__WEBPACK_IMPORTED_MODULE_30__["ProductOptionsComponent"],
                _components_font_font_component__WEBPACK_IMPORTED_MODULE_31__["FontComponent"],
                _components_right_panel_right_panel_component__WEBPACK_IMPORTED_MODULE_32__["RightPanelComponent"],
                _components_common_tabs_common_tabs_component__WEBPACK_IMPORTED_MODULE_33__["CommonTabsComponent"],
                _components_image_effects_image_effects_component__WEBPACK_IMPORTED_MODULE_34__["ImageEffectsComponent"],
                _components_my_designs_my_designs_component__WEBPACK_IMPORTED_MODULE_35__["MyDesignsComponent"],
                _components_opacity_opacity_component__WEBPACK_IMPORTED_MODULE_36__["OpacityComponent"],
                _components_drop_shadow_drop_shadow_component__WEBPACK_IMPORTED_MODULE_37__["DropShadowComponent"],
                _components_designarea_controls_designarea_controls_component__WEBPACK_IMPORTED_MODULE_38__["DesignareaControlsComponent"],
                _components_stroke_stroke_component__WEBPACK_IMPORTED_MODULE_39__["StrokeComponent"],
                _components_cropper_cropper_component__WEBPACK_IMPORTED_MODULE_25__["CropperComponent"],
                _components_tooltip_tooltip_component__WEBPACK_IMPORTED_MODULE_40__["TooltipComponent"],
                _components_arc_arc_component__WEBPACK_IMPORTED_MODULE_41__["ArcComponent"],
                _components_skew_skew_component__WEBPACK_IMPORTED_MODULE_42__["SkewComponent"],
                _components_layer_management_layer_management_component__WEBPACK_IMPORTED_MODULE_43__["LayerManagementComponent"],
                _components_cart_cart_component__WEBPACK_IMPORTED_MODULE_44__["CartComponent"],
                _components_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_45__["ContextMenuComponent"],
                _components_loader_loader_component__WEBPACK_IMPORTED_MODULE_46__["LoaderComponent"],
                _components_object_position_object_position_component__WEBPACK_IMPORTED_MODULE_50__["ObjectPositionComponent"],
                _components_custom_options_custom_options_component__WEBPACK_IMPORTED_MODULE_51__["CustomOptionsComponent"],
                _components_conf_product_attr_conf_product_attr_component__WEBPACK_IMPORTED_MODULE_47__["ConfProductAttrComponent"],
                _components_price_price_component__WEBPACK_IMPORTED_MODULE_52__["PriceComponent"],
                _components_translate_translate_component__WEBPACK_IMPORTED_MODULE_48__["TranslateComponent"],
                _components_object_lock_object_lock_component__WEBPACK_IMPORTED_MODULE_56__["ObjectLockComponent"],
                _components_object_alignment_position_object_alignment_position_component__WEBPACK_IMPORTED_MODULE_55__["ObjectAlignmentPositionComponent"],
                _components_placeholder_loader_placeholder_loader_component__WEBPACK_IMPORTED_MODULE_60__["PlaceholderLoaderComponent"],
                _components_design_templates_design_templates_component__WEBPACK_IMPORTED_MODULE_62__["DesignTemplatesComponent"],
                _components_printing_methods_printing_methods_component__WEBPACK_IMPORTED_MODULE_63__["PrintingMethodsComponent"],
                _components_name_number_name_number_component__WEBPACK_IMPORTED_MODULE_64__["NameNumberComponent"],
                _components_distribute_vertical_horizontal_alignment_distribute_vertical_horizontal_alignment_component__WEBPACK_IMPORTED_MODULE_65__["DistributeVerticalHorizontalAlignmentComponent"],
                _components_object_grouping_object_grouping_component__WEBPACK_IMPORTED_MODULE_66__["ObjectGroupingComponent"],
                _demostore_product_demo_product_demo_component__WEBPACK_IMPORTED_MODULE_68__["ProductDemoComponent"]
            ],
            imports: [
                _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["BrowserModule"],
                _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_54__["BrowserAnimationsModule"],
                ngx_bootstrap_tabs__WEBPACK_IMPORTED_MODULE_9__["TabsModule"].forRoot(),
                angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubModule"].forRoot(),
                node_modules_angular_forms__WEBPACK_IMPORTED_MODULE_8__["FormsModule"],
                node_modules_angular_forms__WEBPACK_IMPORTED_MODULE_8__["ReactiveFormsModule"],
                ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_4__["TooltipModule"].forRoot(),
                ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_6__["BsDropdownModule"].forRoot(),
                ngx_bootstrap_accordion__WEBPACK_IMPORTED_MODULE_7__["AccordionModule"].forRoot(),
                ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_5__["ModalModule"].forRoot(),
                _angular_common_http__WEBPACK_IMPORTED_MODULE_10__["HttpClientModule"],
                _ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__["TranslateModule"].forRoot({
                    loader: {
                        provide: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__["TranslateLoader"],
                        useFactory: HttpLoaderFactory,
                        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_10__["HttpClient"]]
                    }
                }),
                ngx_filesaver__WEBPACK_IMPORTED_MODULE_53__["FileSaverModule"],
                _modules_custom_color_picker_custom_color_picker_module__WEBPACK_IMPORTED_MODULE_57__["CustomColorPickerModule"],
                _modules_social_media_sharing_social_media_sharing_module__WEBPACK_IMPORTED_MODULE_58__["SocialMediaSharingModule"],
                _modules_social_media_import_social_media_import_module__WEBPACK_IMPORTED_MODULE_59__["SocialMediaImportModule"],
                ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_61__["InfiniteScrollModule"],
                _modules_product_template_product_template_module__WEBPACK_IMPORTED_MODULE_67__["ProductTemplateModule"],
                ng_recaptcha__WEBPACK_IMPORTED_MODULE_13__["RecaptchaModule"]
            ],
            providers: [
                ng2_cache__WEBPACK_IMPORTED_MODULE_49__["CacheService"],
                { provide: ng2_cache__WEBPACK_IMPORTED_MODULE_49__["CacheStorageAbstract"], useClass: ng2_cache__WEBPACK_IMPORTED_MODULE_49__["CacheLocalStorage"] },
            ],
            bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_14__["AppComponent"]]
        })
    ], AppModule);
    return AppModule;
}());



/***/ }),

/***/ "./src/app/components/arc/arc.component.html":
/*!***************************************************!*\
  !*** ./src/app/components/arc/arc.component.html ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<accordion-group class=\"byi-accord\" *ngIf=\"!mainService.isResponsive\" [hidden]=\"componentHide\">\n  <button class=\"byi-accordion-title btn btn-link btn-block clearfix\" accordion-heading>\n    <span>{{'Arc' | translate}}</span>\n  </button>\n  <div class=\"byi-accord-content\">\n    <ng-container [ngTemplateOutlet]=\"arc\"></ng-container>\n  </div>\n</accordion-group>\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('arc')\" [attr.hidden]=\"componentHide\">\n  <ng-template tabHeading>\n    <span>{{'Arc' | translate}}</span>\n  </ng-template>\n  <ng-container [ngTemplateOutlet]=\"arc\"></ng-container>\n</tab>\n<ng-template #arc>\n  <div class=\"byie-option\">\n    <div class=\"byi-range-box byie-count-wrap byi-range-top-option\">\n      <div class=\"byie-option-right byie-arc-reverse\">\n        <label class=\"byi-checkbox\">\n          <input type=\"checkbox\" (checked)=\"isReverse\" (click)=\"reverseArc(!isReverse)\" [disabled]=\"disableElement\">\n          <span></span>\n          {{'Reverse' | translate}}\n        </label>\n      </div>\n      <div class=\"byi-rb-input\">\n        <span class=\"byie-count\">{{ \"(\" + fontArc +\")\" }}</span>\n        <input type=\"range\" [(ngModel)]=\"fontArc\" (change)=\"changeFontArc()\" step=\"1\" min=\"0\" max=\"360\" class=\"slider\"\n          [disabled]=\"disableElement\">\n      </div>\n    </div>\n    <div class=\"byie-arc-effect byie-dropdown\">\n      <div class=\"byi-dropdown\">\n        <div class=\"btn-group\" dropdown>\n          <button id=\"button-basic\" dropdownToggle type=\"button\" class=\"btn btn-primary dropdown-toggle\"\n            aria-controls=\"dropdown-basic\" [disabled]=\"disableElement\">\n            {{'Effects' | translate}} <span class=\"caret\"></span>\n          </button>\n          <ul id=\"dropdown-basic\" *dropdownMenu class=\"dropdown-menu\" role=\"menu\" aria-labelledby=\"button-basic\">\n            <li role=\"menuitem\" *ngFor=\"let effetctDataObj of effectsData\" (click)=\"changeFontEffect(effetctDataObj)\">\n              <a href=\"javascript:void(0)\">{{effetctDataObj.label}}</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/arc/arc.component.scss":
/*!***************************************************!*\
  !*** ./src/app/components/arc/arc.component.scss ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvYXJjL2FyYy5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/arc/arc.component.ts":
/*!*************************************************!*\
  !*** ./src/app/components/arc/arc.component.ts ***!
  \*************************************************/
/*! exports provided: ArcComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArcComponent", function() { return ArcComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_update_object_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services/update-object.service */ "./src/app/services/update-object.service.ts");
/* harmony import */ var _services_insert_object_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../services/insert-object.service */ "./src/app/services/insert-object.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_remove_object_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../services/remove-object.service */ "./src/app/services/remove-object.service.ts");









// import { fabric } from 'fabric';
var ArcComponent = /** @class */ (function () {
    function ArcComponent(canvasService, eventService, removeObjectService, insertObjectService, updateObjectService, mainService, tabsService) {
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.removeObjectService = removeObjectService;
        this.insertObjectService = insertObjectService;
        this.updateObjectService = updateObjectService;
        this.mainService = mainService;
        this.tabsService = tabsService;
        this.componentHide = true;
        this.tabsService.registerTabs('arc', 'plain-text');
    }
    ArcComponent.prototype.ngOnInit = function () {
        this.init();
        this.subscribeEvents();
    };
    ArcComponent.prototype.init = function () {
        this.disableElement = this.shouldDisableElemets();
        this.fontArc = this.getDefaultFontArc();
        this.isReverse = false;
        this.effectsData = [].concat(this.getEffectsData());
        this.activeEffect = this.effectsData[0].label;
    };
    ArcComponent.prototype.shouldDisableElemets = function () {
        var obj = this.canvasService.getActiveObject();
        return (!(obj && obj.objType == "text"));
    };
    ArcComponent.prototype.getDefaultFontArc = function () {
        var obj = this.canvasService.getActiveObject();
        if (obj == false)
            return 0;
        var arcValue = 0;
        if (obj.objType == 'text' && obj.radius && obj.radius > 0)
            arcValue = obj.radius;
        return arcValue;
    };
    ArcComponent.prototype.getEffectsData = function () {
        var effectsData = [].concat([
            {
                label: "Curved"
            }
        ], [
            {
                label: "Arc"
            }
        ], [
            {
                label: "STRAIGHT"
            }
        ], [
            {
                label: "smallToLarge"
            }
        ], [
            {
                label: "largeToSmallTopped"
            }
        ], [
            {
                label: "largeToSmallBottom"
            }
        ], [
            {
                label: "bulge"
            }
        ]);
        return effectsData;
    };
    ArcComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectAdded', function (obj) {
            _this.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            _this.componentHide = true;
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            _this.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.componentHide = true;
        });
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            /*if(this.canvasService.getObjectType(obj,"text")){*/
            if (obj.type == 'activeSelection') {
                var isObjText = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type != 'text'; }));
                if (isObjText == -1) {
                    _this.componentHide = null;
                }
                else {
                    _this.componentHide = true;
                }
            }
            else {
                if (obj.type == "text" && obj.ultimatelock != true) {
                    _this.componentHide = null;
                }
            }
            _this.init();
        });
    };
    ArcComponent.prototype.reverseArc = function (isReverse) {
        // let CurvedText = new fabric.CurvedText('CurvedText'),
        //   properties = {
        //     left: 100,
        //     top: 100,
        //     textAlign: 'center',
        //     fill: '#0000FF',
        //     radius: -16.4,
        //     fontSize: 20,
        //     spacing: 5
        //   };
        //   let params = {
        //    obj : CurvedText,
        //    properties : properties,
        //    crudServiceString : 'this.insertObjectService',
        //   };
        // this.canvasService.objectCRUD(params);
        this.isReverse = isReverse;
    };
    ArcComponent.prototype.changeFontArc = function () {
        // let textObj = this.canvasService.getActiveObject();
        // if (textObj.isArc) {
        //   let property: any = {
        //     range: this.fontArc
        //   };
        //   let params = {
        //    obj : textObj,
        //    properties : properties,
        //    crudServiceString : 'this.updateObjectService',
        //   };
        //   this.canvasService.objectCRUD(params);
        // } else {
        // let params = {
        //    obj : null,
        //    properties : null,
        //    crudServiceString : 'this.removeObjectService',
        //   };
        //   this.canvasService.objectCRUD(params);
        //   this.addCurvedText(textObj);
        // }
    };
    ArcComponent.prototype.addCurvedText = function (textObjProperties) {
        // textObjProperties = Object.assign(textObjProperties, { isArc: true });
        // let curvedText = new fabric.CurvedText(textObjProperties.text, textObjProperties);
        // let params = {
        //   obj: curvedText,
        //   properties: textObjProperties,
        //   crudServiceString: 'this.insertObjectService',
        //   isCenter: false,
        // };
        // this.canvasService.objectCRUD(params);
    };
    ArcComponent.prototype.changeFontEffect = function (effetctDataObj) {
        this.activeEffect = effetctDataObj.label;
    };
    ArcComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
            selector: '[arc]',
            template: __webpack_require__(/*! ./arc.component.html */ "./src/app/components/arc/arc.component.html"),
            styles: [__webpack_require__(/*! ./arc.component.scss */ "./src/app/components/arc/arc.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_7__["PubSubService"],
            _services_remove_object_service__WEBPACK_IMPORTED_MODULE_8__["RemoveObjectService"],
            _services_insert_object_service__WEBPACK_IMPORTED_MODULE_2__["InsertObjectService"],
            _services_update_object_service__WEBPACK_IMPORTED_MODULE_1__["UpdateObjectService"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_5__["MainService"], _services_tabs_service__WEBPACK_IMPORTED_MODULE_6__["TabsService"]])
    ], ArcComponent);
    return ArcComponent;
}());



/***/ }),

/***/ "./src/app/components/background-color/background-color.component.html":
/*!*****************************************************************************!*\
  !*** ./src/app/components/background-color/background-color.component.html ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div loader #loaderComponent></div>\n<common-tabs [subTabsData]=\"subTabsData\" [activeAccordion]=\"accordianId\" *ngIf=\"!loadContent\"></common-tabs>\n<div *ngIf=\"loaderComponent.showSubLoader === false && loadContent\" class=\"byi-colors-list\">\n    <ul class=\"byie-custom-color\" *ngIf=\"isChildColorComponentLoad\" custom-color-picker [type]=\"'background'\" [activeColor]=\"selectedColor\" [hideColorToggle]=\"hideColorToggleBackground\" (colorPickerToggle)=\"colorPickerToggleBackground($event)\" (changeColorEvent)=\"changeBackgroundColor($event)\" (resetBackgroundEvent)=\"resetBackground()\"></ul> \n</div>"

/***/ }),

/***/ "./src/app/components/background-color/background-color.component.scss":
/*!*****************************************************************************!*\
  !*** ./src/app/components/background-color/background-color.component.scss ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvYmFja2dyb3VuZC1jb2xvci9iYWNrZ3JvdW5kLWNvbG9yLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/background-color/background-color.component.ts":
/*!***************************************************************************!*\
  !*** ./src/app/components/background-color/background-color.component.ts ***!
  \***************************************************************************/
/*! exports provided: BackgroundColorComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BackgroundColorComponent", function() { return BackgroundColorComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");







var BackgroundColorComponent = /** @class */ (function () {
    function BackgroundColorComponent(mainService, cacheService, pubsub, canvasService) {
        var _this = this;
        this.mainService = mainService;
        this.cacheService = cacheService;
        this.pubsub = pubsub;
        this.canvasService = canvasService;
        this.currentTab = 4;
        this.hideColorToggleBackground = 1;
        this.accordianId = 0;
        this.isChildColorComponentLoad = false;
        this.pubsub.$sub('getSubTabs', function (mainTabId) {
            if (mainTabId == _this.currentTab && !_this.subTabsData) {
                _this.getSubTabs(mainTabId);
            }
            _this.getCurrentTabName = _this.mainService.getAllTabs[_this.currentTab]['label'];
        });
        this.pubsub.$sub('canvasBackgroundChange', function () {
            _this.selectedColor = _this.canvasService.currentCanvas.backgroundColor;
        });
    }
    BackgroundColorComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.pubsub.$sub('imageSideChanged', function () {
            _this.selectedColor = '#fffff';
            _this.selectedColor = _this.canvasService.currentCanvas.backgroundColor;
        });
        this.pubsub.$sub('closeColorPicker', function () {
            _this.hideColorToggleBackground = 1;
        });
        this.isChildColorComponentLoad = true;
    };
    BackgroundColorComponent.prototype.closeLoader = function () {
        if (this.loaderComponent && this.loaderComponent.showSubLoader) {
            this.loaderComponent.showSubLoader = false;
        }
    };
    BackgroundColorComponent.prototype.getSubTabs = function (mainTabId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                data = this.mainService.tabsFlow[mainTabId];
                this.subTabsData = this.mainService.setSubTabsData(data, mainTabId);
                if (this.subTabsData && this.subTabsData.length > 0) {
                    this.accordianId = this.subTabsData[0].id;
                }
                return [2 /*return*/];
            });
        });
    };
    BackgroundColorComponent.prototype.changeBackgroundColor = function (color) {
        this.selectedColor = color.color_code;
        var params = {
            properties: {
                backgroundColor: color.color_code
            },
            crudServiceString: 'this.canvasUpdateService',
            isHistory: true,
        };
        this.canvasService.objectCRUD(params);
        this.canvasService.usedColorsCounter();
    };
    BackgroundColorComponent.prototype.resetBackground = function () {
        this.selectedColor = null;
        var params = {
            properties: {
                backgroundColor: null
            },
            crudServiceString: 'this.canvasUpdateService',
            isHistory: true,
        };
        this.canvasService.objectCRUD(params);
        this.canvasService.usedColorsCounter();
    };
    BackgroundColorComponent.prototype.colorPickerToggleBackground = function (event) {
        if (this.hideColorToggleBackground == 1) {
            this.hideColorToggleBackground = 0;
        }
        else if (this.hideColorToggleBackground == 0) {
            this.hideColorToggleBackground = 1;
        }
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], BackgroundColorComponent.prototype, "loadContent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], BackgroundColorComponent.prototype, "loaderComponent", void 0);
    BackgroundColorComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            // tslint:disable-next-line:component-selector
            selector: '[background-color]',
            // tslint:disable-next-line:indent
            template: __webpack_require__(/*! ./background-color.component.html */ "./src/app/components/background-color/background-color.component.html"),
            styles: [__webpack_require__(/*! ./background-color.component.scss */ "./src/app/components/background-color/background-color.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_5__["CacheService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"]])
    ], BackgroundColorComponent);
    return BackgroundColorComponent;
}());



/***/ }),

/***/ "./src/app/components/cart/cart.component.html":
/*!*****************************************************!*\
  !*** ./src/app/components/cart/cart.component.html ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<button *ngIf=\"!mainService.isResponsive && mainService.isAdmin == false\" type=\"button\" class=\"byi-atc-btn\"\n  (click)=\"openModal(template)\">{{'Add to\n  Cart' | translate}}</button>\n<button *ngIf=\"mainService.isResponsive\" type=\"button\" class=\"byiu-right-icon\" (click)=\"openModal(template)\">\n  <svg class=\"icon icon-cart\" viewBox=\"0 0 30 30\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-cart\"></use>\n  </svg>\n</button>\n\n<ng-template #template>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title pull-left\">{{'Add to Cart' | translate}}</h4>\n    <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"closeModal()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"byi-addtocart-box \">\n\n\n      <!-- Custom Options Section -->\n      <div class=\"byi-cart-custom\" custom-options *ngIf=\"customOptionsData && customOptionsData.length\">\n      </div>\n      <form [formGroup]=\"customForm\" name=\"customForm\" id=\"customForm\">\n        <div printing-methods [parentFormGroup]=\"customForm\" [isClickedAddtoCart]=\"isClickedAddtoCart\"></div>\n      </form>\n      <!-- END OF Custom Options Section -->\n\n      <!-- Simple Product Section -->\n      <div class=\"qty-container\" *ngIf=\"mainService.productType == 'simple'\">\n        <label>{{'Quantity' | translate}}</label>\n        <input class=\"byi-input size-qty\" name=\"qty\" [(ngModel)]=\"qty\" type=\"text\"\n          (keypress)=\"confProductService.keyPress($event)\" (input)=\"simpleProductQtyUpdated($event.target.value)\">\n        <span *ngIf=\"qty <= 0\" class=\"text-danger\">\n          Invalid Quantity\n        </span>\n      </div>\n      <!-- END OF Simple product section -->\n\n\n      <!-- Product Attribute Selection section -->\n      <div *ngIf=\"showConfigurableOptions()\" conf-product-attr [confProductOptionsObject]=\"confProductOptionsObject\">\n      </div>\n      <!-- END OF Product Attribute Selection section -->\n\n      <div class=\"byi-cart-note\">\n        <label>Add Note</label>\n        <input class=\"byi-input\" type=\"textarea\" name=\"note\" [(ngModel)]=\"addnote\">\n      </div>\n      <div class=\"byi-used-colors\" *ngIf=\"canvasService.usedColorCounter\">\n        <label>Used Colors <span>{{ '(' + canvasService.usedColorCounter + ')'}}</span></label>\n      </div>\n\n      <!-- Cart Footer Section -->\n      <div class=\"byi-cart-footer\">\n        <div class=\"byic-left\">\n          <span class=\"byic-price\">{{priceService.getPrice()}}</span>\n          <span *ngIf=\"showBothPrices\">(Excl. Tax: {{productPriceExclTax}})</span>\n        </div>\n        <div class=\"byic-right\">\n          <button type=\"button\" class=\"byi-atc-btn\" (click)=\"validateCartData()\">{{'Add to Cart' | translate}}</button>\n        </div>\n      </div>\n      <div *ngIf=\"tierPriceData && tierPriceData.length > 0\" class=\"byi-tierprice-info\">\n        <p *ngFor=\"let data of tierPriceData\">Buy {{data.price_qty}} for {{formatCurrency(data.price_with_Tax)}} <span\n            *ngIf=\"showBothPrices\">(Excl. Tax:{{formatCurrency(data.website_price)}})</span> each and save\n          {{data.percentage_value}}%</p>\n      </div>\n      <!-- END OF Cart Footer Section -->\n\n    </div>\n  </div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/cart/cart.component.scss":
/*!*****************************************************!*\
  !*** ./src/app/components/cart/cart.component.scss ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY2FydC9jYXJ0LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/cart/cart.component.ts":
/*!***************************************************!*\
  !*** ./src/app/components/cart/cart.component.ts ***!
  \***************************************************/
/*! exports provided: CartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CartComponent", function() { return CartComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _price_price_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../price/price.service */ "./src/app/components/price/price.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _custom_options_custom_options_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../custom-options/custom-options.service */ "./src/app/components/custom-options/custom-options.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_design_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/design.service */ "./src/app/services/design.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _helper_formatCurrency__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../_helper/formatCurrency */ "./src/app/_helper/formatCurrency.ts");
/* harmony import */ var _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../conf-product-attr/conf-product-attr.service */ "./src/app/components/conf-product-attr/conf-product-attr.service.ts");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_12__);













var CartComponent = /** @class */ (function () {
    /**
     * Dependancy Injector
     *
     * @param mainService
     * @param eventService
     */
    function CartComponent(mainService, eventService, designService, confProductService, translate, customOptionsService, canvasService, priceService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.designService = designService;
        this.confProductService = confProductService;
        this.translate = translate;
        this.customOptionsService = customOptionsService;
        this.canvasService = canvasService;
        this.priceService = priceService;
        this.isLessPrintingMinmumQty = false;
        //usedColorCounter: any;
        this.isClickedAddtoCart = false;
        this.lastSavedDesignId = [];
    }
    /**
     * Angular Init function
     */
    CartComponent.prototype.ngOnInit = function () {
        this.customForm = new _angular_forms__WEBPACK_IMPORTED_MODULE_11__["FormGroup"]({
            method: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__["FormControl"]()
        });
        this.init();
    };
    CartComponent.prototype.formatCurrency = function (price) {
        if (price != null) {
            return Object(_helper_formatCurrency__WEBPACK_IMPORTED_MODULE_8__["FormatCurrency"])(price, this.confProductService.priceFormat, '');
        }
    };
    /**
     * Assign default values here
     */
    CartComponent.prototype.init = function () {
        this.qty = 0;
        this.customOptionsData = [];
        this.customOptionsFileData = [];
        this.defaultSelectedAttributes = {};
        this.subscribeEvents();
    };
    /**
     * Subscrine events and perform actions for  the same
     */
    CartComponent.prototype.subscribeEvents = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                /*Get Cart Data From Price Component*/
                this.eventService.$sub('getCartData', function (data) {
                    _this.confProductService.priceFormat = data.priceFormat;
                    _this.confProductService.finalPrice = data.finalPrice;
                    _this.confProductService.cartTotalAmount = Object(_helper_formatCurrency__WEBPACK_IMPORTED_MODULE_8__["FormatCurrency"])(data.finalPrice, data.priceFormat, '');
                    _this.tierPriceData = data.tierPriceData;
                    _this.showBothPrices = data.showBothPrices;
                    _this.productPriceExclTax = data.productPriceExclTax;
                });
                // subscribe event when product options data is fetched
                this.eventService.$sub('productOptionsFetched', function (resp) {
                    _this.confProductOptionsObject = Object.assign({}, resp);
                    // set initial default selected super attributes
                    _this.confProductService.defaultSelectedOptions = Object.assign({}, resp.selectedOptions);
                });
                // when user changes product
                this.eventService.$sub('productChanged', function (resp) {
                    // set new super attributes
                    _this.confProductService.resetMe = true;
                    _this.confProductService.defaultSelectedOptions = Object.assign({}, resp.defaultSelectedOptions);
                    _this.confProductService.defaultSelectedOptionsValues = Object.assign({}, resp.defaultSelectedOptionsValues);
                    _this.confProductService.fixDefaultSelectedOptions = Object.assign({}, resp.defaultSelectedOptionsValues);
                });
                this.eventService.$sub('resetCart', function (removedNameNumberObj) {
                    _this.confProductService.init();
                    if (_this.confProductService.isNameNumber && removedNameNumberObj != null && _this.confProductService.cartData && _this.confProductService.cartData.length > 0) {
                        if (removedNameNumberObj.hasOwnProperty('nameNumberData') && removedNameNumberObj.hasOwnProperty('type'))
                            removedNameNumberObj.nameNumberData.filter(function (removedObj) {
                                _this.confProductService.nameNumberReset(removedObj, removedNameNumberObj.type);
                            });
                        else if (removedNameNumberObj.hasOwnProperty('id')) {
                            _this.confProductService.nameNumberReset(removedNameNumberObj);
                        }
                    }
                    else {
                        _this.confProductService.totalRows = [];
                        _this.confProductService.cartData = [];
                        if (_this.confProductService.nameNumberService.newRow.length > 0) {
                            // set reset price flag
                            var resetPrice = (removedNameNumberObj && removedNameNumberObj.hasOwnProperty('resetPrice')) ? removedNameNumberObj.resetPrice : false, 
                            // set default qty to set based on reset price flag
                            // if reset price flag is true, default qty to sub will be total name number rows - 1
                            defaultQtyToSubtract = (resetPrice) ? _this.confProductService.nameNumberService.newRow.length - 1 : 1;
                            // calc new total qty
                            _this.priceService.totalQty -= (_this.priceService.totalQty > 1) ? defaultQtyToSubtract : 0;
                            // set extra product price
                            _this.priceService.extraPriceToBeAdded.productPrice -= (_this.priceService.extraPriceToBeAdded.productPrice <= 0) ? 0 : (_this.priceService.defaultPrice * (defaultQtyToSubtract));
                            // finally recalculate price
                            _this.priceService.addThisPrice();
                        }
                        else {
                            _this.priceService.totalQty = 1;
                            _this.priceService.extraPriceToBeAdded.productPrice = 0;
                            _this.priceService.addThisPrice();
                        }
                    }
                });
                this.eventService.$sub('objectAdded', function (obj) {
                    obj = (Array.isArray(obj)) ? obj[0] : obj;
                    if (_this.confProductService.isNameNumber && _this.confProductService.cartData && _this.confProductService.cartData.length && _this.confProductService.totalRows && _this.confProductService.totalRows.length && obj.hasOwnProperty('addObj') && (obj.addObj == 'name' || obj.addObj == 'number')) {
                        _this.updateCartObject(obj.addObj, obj.text);
                    }
                });
                this.eventService.$sub('objectUpdated', function (obj) {
                    if (!_this.confProductService.cartData || !_this.confProductService.cartData.length)
                        return;
                    obj = (Array.isArray(obj)) ? obj[0] : obj;
                    if (obj.hasOwnProperty('addObj') && (obj.addObj == 'name' || obj.addObj == 'number')) {
                        var newText = obj.text, oldText = obj._stateProperties.text, type = obj.addObj;
                        if (newText != oldText) {
                            _this.updateCartObject(type, newText);
                        }
                    }
                });
                return [2 /*return*/];
            });
        });
    };
    CartComponent.prototype.updateCartObject = function (type, newText) {
        var nameNumberId = this.confProductService.nameNumberService.newRow.find(function (nameNumberObj) { return (nameNumberObj[type] == newText); });
        if (nameNumberId) {
            nameNumberId = nameNumberId.id;
            var findCartItem = null, totalCart = this.confProductService.cartData.length, tmpCartItem = void 0, index = void 0;
            for (var i = 0; i < totalCart; i++) {
                tmpCartItem = this.confProductService.cartData[i];
                if (tmpCartItem.hasOwnProperty('additional_options') && tmpCartItem.additional_options.length) {
                    index = tmpCartItem.additional_options.indexOf(tmpCartItem.additional_options.find(function (additionalOpt) { return (additionalOpt.id == nameNumberId); }));
                    if (index >= 0) {
                        findCartItem = tmpCartItem;
                        findCartItem.additional_options[index][type] = newText;
                        break;
                    }
                }
            }
            if (findCartItem != null) {
                this.confProductService.cartData[this.confProductService.cartData.indexOf(findCartItem)] = findCartItem;
            }
        }
    };
    /**
     * Custom Options File upload process
     * We are returning promise here, as there could be more than one files, add to cart proccess needs to wait till this process is finished
     *
     * @param fileList
     */
    CartComponent.prototype.uploadFilesToServer = function (fileList) {
        var _this = this;
        // declare promise here
        return new Promise(function (resolve, reject) {
            // if no files are found, return from here
            if (!fileList || fileList.length == 0)
                resolve(true);
            // variable declaration
            var formData = new FormData(), url = "productdesigner/Cart/uploadCustomOptionFile", totalFiles = fileList.length, totalProccessed = 0, tmpFileObj;
            // travers file object one by one
            fileList.filter(function (file) {
                // initialize fresh form data object
                formData = new FormData();
                // prepare form data
                formData.append('file', file);
                formData.append('allowedExtensions', file.allowedExtensions);
                // send post request with above data
                // as we are not performing any process after file is uploaded successfully
                // we are dealing with finally() directly 
                // logic here is, as soon as totalFiles matches with totalProccessed, we will return from here 
                _this.mainService.postFile(url, formData)
                    .then(function (resp) {
                    tmpFileObj = {
                        fileName: resp.name,
                        filePath: resp.url
                    };
                    tmpFileObj = Object.assign(tmpFileObj, file.fileInfo);
                    _this.customOptionsFileData.push(tmpFileObj);
                }).finally(function () {
                    formData = null;
                    totalProccessed++;
                    if (totalProccessed == totalFiles)
                        resolve(true);
                });
            });
        });
    };
    /**
     * Open add to cart popup
     * @param template
     */
    CartComponent.prototype.openModal = function (template) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.canvasService.hasCanvasObjectOrBackgroundAll()) {
                            this.mainService.swal(this.translate.instant('Alert'), this.translate.instant('Please design the product !'), "warning");
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.getCustomOptions()];
                    case 1:
                        _a.sent();
                        this.modalRef = this.mainService.openThisModal(template, 'byi-cart-modal');
                        this.canvasService.deselectAllObjects();
                        this.confProductService.init();
                        //allow add more in add to cart
                        /*let self = this;
                        setTimeout(() => {
                          self.confProductService.displayAddMore = self.allowAddMore;
                        }, 500);*/
                        this.confProductService.displayAddMore = this.allowAddMore;
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Get custom options
     */
    CartComponent.prototype.getCustomOptions = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var url, param;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = "productdesigner/Cart/getCustomOptions", param = {
                            product_id: this.mainService.productId
                        };
                        // check if item id is present
                        if (this.mainService.itemId)
                            param = Object.assign(param, { itemId: this.mainService.itemId });
                        // get custom option data from here
                        return [4 /*yield*/, this.mainService.getData(url, param, 'cartCustomOptions-' + this.mainService.productId + '-' + this.mainService.itemId, null, true)
                                .then(function (response) {
                                // if no data is returned or error occured, display error message and return from here
                                if ((response && response.status == "failure") || !(response && response.custom_options && response.status == "Success")) {
                                    var msg = (response && response.log) ? response.log : _this.translate.instant("Something went wrong");
                                    _this.mainService.swal(_this.translate.instant("Error"), _this.translate.instant(msg), "error");
                                    return;
                                }
                                _this.allowAddMore = response.allow_add_more;
                                // else store custom options data into variable
                                _this.customOptionsData = [].concat(response.customOptionsData);
                                // set custom options data to custom options component via it's service
                                _this.customOptionsService.setCustomOptionsData(response);
                                // if edit design is set, get qty from response
                                var selectedQty = (response && response.selectedCustomOptions && response.selectedCustomOptions.qty) ? response.selectedCustomOptions.qty : null;
                                // if user has set qty and then hit on Design it button
                                if (selectedQty == null) {
                                    selectedQty = document.getElementsByClassName('qty');
                                    if (selectedQty && selectedQty[0] && selectedQty[0].value) {
                                        selectedQty = selectedQty[0].value;
                                    }
                                    else {
                                        selectedQty = null;
                                    }
                                }
                                // if none of the above, set default qty to 1
                                selectedQty = (selectedQty == null) ? 1 : selectedQty;
                                // set qty for simple product
                                if (_this.mainService.productType == 'simple')
                                    _this.qty = _this.priceService.totalQty > 1 ? _this.priceService.totalQty : selectedQty;
                                // set qty for configurable product
                                else if (_this.mainService.productType == 'configurable')
                                    _this.confProductService.defaultQty = selectedQty;
                                // this.confProductService.qtyUpdated(selectedQty);
                            }).catch(function (err) { return console.log(_this.translate.instant("get Custom Options Catch::::"), err); })];
                    case 1:
                        // get custom option data from here
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * As soon as user clicks on add to cart button this function is triggered,
     * if custom option is detected, we will publish an event that will validate custom options data
     * in custom options component and will return the response for the same
     */
    CartComponent.prototype.validateCartData = function () {
        if (this.customForm) {
            this.isClickedAddtoCart = true;
            if (!this.customForm.valid) {
                this.eventService.$pub('showError', true);
                return;
            }
            else {
                if (parseFloat(this.priceService.printingMethodMinimumQty) > parseFloat(this.priceService.totalQty)) {
                    this.isLessPrintingMinmumQty = true;
                    sweetalert2__WEBPACK_IMPORTED_MODULE_12___default.a.fire({
                        customClass: 'potrait-mode-popup',
                        title: this.translate.instant("Error"),
                        text: this.translate.instant('Minimum quantity required is ' + this.priceService.printingMethodMinimumQty),
                        confirmButtonText: this.translate.instant('OK'),
                        allowOutsideClick: false
                    });
                    return;
                }
            }
        }
        // set configurable product flag
        this.isProductConf = (this.mainService.productType == 'configurable') ? true : false;
        // if product is configurable, check for it's validation
        if (this.isProductConf) {
            var error = this.confProductService.isConfDataInvalid();
            // if error found, return from here only
            if (error === true)
                return;
        }
        this.isClickedAddtoCart = false;
        this.isLessPrintingMinmumQty = false;
        // if no custom option data is found, call save design and add to cart directly
        if (!this.customOptionsData || this.customOptionsData.length == 0) {
            this.saveDesign();
            return;
        }
        // else validate custom options data and proceed further
        this.validateCustomOptionsData();
    };
    /**
     * Validate custom options data
     */
    CartComponent.prototype.validateCustomOptionsData = function () {
        var _this = this;
        // show main loader
        this.eventService.$pub('showMainLoader');
        // and check for validation process
        var validationResp = this.customOptionsService.validateCustomOptionsData();
        // if validation check returns true, display message accordingly
        if (validationResp.isInvalid == true) {
            setTimeout(function () {
                _this.eventService.$pub('hideMainLoader');
            }, 500);
        }
        // here we will manage file upload
        // if any error occured, will display error for the same here
        else {
            this.uploadFilesToServer(validationResp.files).then(function () {
                _this.saveDesign(validationResp.customOptions);
            });
        }
    };
    /**
     * This method will save the current design and then add product into cart
     */
    CartComponent.prototype.saveDesign = function (customOptionsData) {
        if (customOptionsData === void 0) { customOptionsData = null; }
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data, self, msg;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        // if product type is simple
                        if (this.isCartInvalid()) {
                            this.eventService.$pub('hideMainLoader');
                            return [2 /*return*/];
                        }
                        ;
                        // if no error found
                        if (this.isProductConf)
                            this.configurableAttributeData = this.confProductService.getCartData();
                        data = {
                            sweetAlert: false
                        };
                        self = this;
                        /**
                         * This method first save all the canvases data url into text file
                         */
                        return [4 /*yield*/, this.designService.saveAllSidesCanvasData().then(function (resp) {
                                data.canvas_dataurl_file = resp.timestamp;
                            }).catch(function (err) { return console.log(err); })];
                    case 1:
                        /**
                         * This method first save all the canvases data url into text file
                         */
                        _a.sent();
                        /**
                         * This method fetch the all canvases json file and save the first image data url
                         */
                        data.cartData = this.configurableAttributeData;
                        this.lastSavedDesignId = [];
                        data.addnote = this.addnote;
                        if (this.customOptionsService.selectedCustomOptionsTotal > 0) {
                            data.customOptionsPrice = this.customOptionsService.selectedCustomOptionsTotal;
                        }
                        if (this.mainService.productType == 'simple') {
                            data.qty = this.qty;
                        }
                        return [4 /*yield*/, this.designService.saveDesignData(data).then(function (resp) {
                                for (var i = 0; i < Object.keys(resp).length; i++) {
                                    var design = resp[i];
                                    if (!design) {
                                        break;
                                    }
                                    self.lastSavedDesignId.push(design.designId);
                                }
                            }).catch(function (err) { return console.log(err); })];
                    case 2:
                        _a.sent();
                        /**
                        * This method add product to cart
                        */
                        if (this.lastSavedDesignId.length > 0) {
                            this.addToCart(customOptionsData);
                        }
                        else {
                            msg = this.translate.instant("Something went wrong");
                            this.mainService.swal(this.translate.instant("Error"), msg, "error");
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * This function will validate cart data ie. attributes(in case of configurable), qty etc
     *
     * @param validationInProcess in case of custom option validation, we are showing main loader, so we need to hide the same
     */
    CartComponent.prototype.addToCart = function (customOptionsData) {
        var _this = this;
        if (customOptionsData === void 0) { customOptionsData = null; }
        // process for cart validation
        var url = "productdesigner/Cart/Save", params = {
            productId: this.mainService.productId,
            qty: this.qty,
            designId: this.lastSavedDesignId,
            printingMethodId: this.customForm.get('method').value,
        };
        // set custom options into params if available
        if (customOptionsData != null) {
            this.eventService.$pub('hideMainLoader');
            params = Object.assign(params, { customOptions: customOptionsData });
            params = Object.assign(params, { customOptionPrice: this.customOptionsService.selectedCustomOptionsTotal });
        }
        // set additional price if available
        if (this.priceService.additionalPrice && this.priceService.additionalPrice > 0) {
            params = Object.assign(params, { additionalPrice: this.priceService.additionalPrice });
        }
        // set custom options file upload data to params
        if (this.customOptionsFileData && this.customOptionsFileData.length > 0) {
            params = Object.assign(params, { customOptionFile: this.customOptionsFileData });
        }
        // if configurable attribute
        if (this.isProductConf) {
            params = Object.assign(params, { confProductData: this.configurableAttributeData });
        }
        // if item id is present
        params = (this.mainService.itemId) ? Object.assign(params, { itemId: this.mainService.itemId }) : params;
        // add to cart
        this.mainService.post(url, params, true).then(function (resp) {
            if (resp && resp.status == "success") {
                window.addEventListener("beforeunload", function (t) {
                });
                // reset custom options file upload data object
                _this.customOptionsFileData = [];
                _this.customOptionsService.selectedCustomOptionsTotal = 0;
                _this.mainService.swal(_this.translate.instant("Success"), _this.translate.instant("Product added to cart successfully"), "success").finally(function () {
                    _this.canvasService.disableAddToCartAlert = true;
                    if (window.location != window.parent.location) {
                        window.top.location.href = resp.url;
                    }
                    else {
                        window.location.href = resp.url;
                    }
                });
                return;
            }
            var msg = (resp && resp.message) ? resp.message : _this.translate.instant("Something went wrong");
            _this.mainService.swal(_this.translate.instant("Error"), _this.translate.instant(msg), "error");
        }).catch(function (err) { return console.log(_this.translate.instant("Error in add to cart: "), err); });
    };
    /**
     *
     */
    CartComponent.prototype.isCartInvalid = function () {
        if (this.mainService.productType == 'simple' && this.qty <= 0) {
            this.mainService.swal(this.translate.instant("Error"), this.translate.instant("Please enter valid quantity first!"), 'error');
            return true;
        }
    };
    /**
     * return true if product type is configurable and configurable attr obj is ready
     */
    CartComponent.prototype.showConfigurableOptions = function () {
        return (this.mainService.productType == 'configurable' && this.confProductOptionsObject && this.defaultSelectedAttributes);
    };
    /**
     *
     * @param qty
     */
    CartComponent.prototype.simpleProductQtyUpdated = function (qty) {
        if (qty >= 1) {
            var price = this.confProductService.getProductPrice(this.mainService.productId, qty);
            if (price != this.priceService.defaultPrice)
                this.priceService.defaultPrice = price;
            price *= (qty - 1);
            this.priceService.extraPriceToBeAdded.productPrice = price;
            this.priceService.totalQty = parseInt(qty);
            this.priceService.addThisPrice();
            // this.confProductService.qtyUpdated(1, price);
        }
    };
    /**
     * Close add to cart popup
     */
    CartComponent.prototype.closeModal = function () {
        this.isClickedAddtoCart = false;
        this.isLessPrintingMinmumQty = false;
        this.confProductService.fixDefaultSelectedOptions = {};
        this.modalRef.hide();
    };
    CartComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_7__["Component"])({
            selector: 'cart',
            template: __webpack_require__(/*! ./cart.component.html */ "./src/app/components/cart/cart.component.html"),
            styles: [__webpack_require__(/*! ./cart.component.scss */ "./src/app/components/cart/cart.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_5__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            _services_design_service__WEBPACK_IMPORTED_MODULE_6__["DesignService"],
            _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_9__["ConfProductAttrService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__["TranslateService"],
            _custom_options_custom_options_service__WEBPACK_IMPORTED_MODULE_3__["CustomOptionsService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_2__["CanvasService"],
            _price_price_service__WEBPACK_IMPORTED_MODULE_1__["PriceService"]])
    ], CartComponent);
    return CartComponent;
}());



/***/ }),

/***/ "./src/app/components/clipart/clipart.component.html":
/*!***********************************************************!*\
  !*** ./src/app/components/clipart/clipart.component.html ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<common-tabs [subTabsData]=\"subTabsData\" [activeAccordion]=\"accordianId\" *ngIf=\"!loadContent\"></common-tabs>\n<div loader #subtabLoader></div>\n<div class=\"byi-accord-content\" *ngIf=\"loadContent\">\n   <div class=\"byi-top-filters\">\n      <ng-container *ngIf=\"mainService.isResponsive\" [attr.hidden]=\"componentHide\">\n         <div class=\"byi-fullview-toggle\">\n            <button type=\"button\" (click)=\"showFonts(showAllFonts)\">\n               <span></span>\n               <span></span>\n               <span></span>\n            </button>\n         </div>\n      </ng-container>\n      <div class=\"byi-dropdown\">\n         <div class=\"btn-group\" dropdown>\n            <button dropdownToggle type=\"button\" class=\"btn btn-primary dropdown-toggle\">\n               {{SelectedClipartCat?.name}}<span class=\"caret\"></span>\n            </button>\n            <ul *dropdownMenu class=\"dropdown-menu\" role=\"menu\">\n               <li role=\"menuitem\" *ngFor=\"let clipArtCat of clipArtcategories\"\n                  [ngClass]=\"clipArtCat.level == 0 ? 'main-product-category' : 'sub-product-category'\"\n                  [class.selected]=\"clipArtCat.id === SelectedClipartCat.id\" (click)=\"changeClipartCat(clipArtCat)\">\n                  <a class=\"dropdown-item\" href=\"javascript:void(0)\">\n                     <span *ngFor=\"let i of getNumberArray(clipArtCat.level)\">-</span>\n                     {{clipArtCat.name}}</a>\n               </li>\n            </ul>\n         </div>\n      </div>\n\n      <div class=\"byi-search\">\n         <input class=\"byi-input\" name=\"searchText\" (input)=\"searchCliprt($event)\" placeholder=\"{{'Search Clipart' | translate}}\"\n            type=\"text\">\n         <button class=\"byi-search-btn\">\n            <svg class=\"icon icon-search\" viewBox=\"0 0 50 50\">\n               <use xlink:href=\"assets/img/sprite.svg#icon-search\"></use>\n            </svg>\n         </button>\n      </div>\n   </div>\n   <div class=\"byi-norecord\"\n      *ngIf=\"loaderComponent.showSubLoader === false && clipArtmedia && clipArtmedia.length == 0\">\n      {{'No Cliparts Found' | translate}}\n   </div>\n   <div *ngIf=\"clipArtmedia.length > 0\" #mainSection class=\"byi-tab-cats byi-tab-cats-clipart\">\n      <ul infiniteScroll [horizontal]=\"true\" [infiniteScrollDistance]=\"0\" [infiniteScrollThrottle]=\"1000\"\n         [scrollWindow]=\"false\" [infiniteScrollDisabled]=\"!isEnableloadmore || !allowPlaceholderLoader\"\n         (scrolled)=\"loadMoreClipArt()\" #scrollToBottom>\n         <li *ngFor=\"let media of clipArtmedia\"\n            [attr.hidden]=\"(showPlaceholder && allowPlaceholderLoader) ? true : null\">\n            <a [ngClass]=\"{'image-only': !media.label && !media.price, 'image-with-text': !media.label && media.price || media.label && !media.price}\"\n               href=\"javascript:void(0)\" (click)=\"addClipartToCanvas(media.medium_url,media.price)\">\n               <span><img [src]=\"media.image_path\" (error)=\"getDefaultImage(media)\"></span>\n               <label *ngIf=\"media.label\">{{media.label}}</label>\n               <label *ngIf=\"media.price\" class=\"byi-cats-price\">{{formatCurrency(media.price)}}</label>\n            </a>\n         </li>\n         <li [attr.hidden]=\"(!showPlaceholder || !allowPlaceholderLoader) ? true : null\"\n            *ngFor=\"let temp of mainService.customPlaceholderArr\" placeholder-loader [loaderHeight]='84'\n            [loaderWidth]='84'></li>\n      </ul>\n      <div class=\"byi-apply-all\" apply-images [files]=\"clipArtmedia\" [byitab]=\"'clipart'\"></div>\n      <div\n         *ngIf=\"loadContent && isEnableloadmore && (!mainService.isResponsive || (mainService.isResponsive && showAllFonts))\"\n         class=\"loadmore-action\">\n         <input class=\"loadmore-btn\" type=\"button\" value=\"{{'Load More' | translate}}\" (click)=\"loadMoreClipArt()\">\n      </div>\n   </div>\n</div>\n<div loader #loaderComponent></div>"

/***/ }),

/***/ "./src/app/components/clipart/clipart.component.scss":
/*!***********************************************************!*\
  !*** ./src/app/components/clipart/clipart.component.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY2xpcGFydC9jbGlwYXJ0LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/clipart/clipart.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/components/clipart/clipart.component.ts ***!
  \*********************************************************/
/*! exports provided: ClipartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClipartComponent", function() { return ClipartComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_add_image_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../services/add-image.service */ "./src/app/services/add-image.service.ts");
/* harmony import */ var _helper_formatCurrency__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../_helper/formatCurrency */ "./src/app/_helper/formatCurrency.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _placeholder_loader_placholder_loader_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../placeholder-loader/placholder-loader.service */ "./src/app/components/placeholder-loader/placholder-loader.service.ts");













var ClipartComponent = /** @class */ (function () {
    function ClipartComponent(cacheService, mainService, pubsub, translate, addImageService, tabsService, canvasService, cdr, placholderLoaderService) {
        this.cacheService = cacheService;
        this.mainService = mainService;
        this.pubsub = pubsub;
        this.translate = translate;
        this.addImageService = addImageService;
        this.tabsService = tabsService;
        this.canvasService = canvasService;
        this.cdr = cdr;
        this.placholderLoaderService = placholderLoaderService;
        this.clipartCategoriesCacheKey = "";
        this.clipArtcategories = [];
        this.clipArtmedia = [];
        this.limit = 12;
        this.loadmore = 1;
        this.isEnableloadmore = false;
        this.tempData = [];
        this.finalArray = [];
        this.currentTab = 2;
        this.accordianId = 0;
        this.clipartHtml = "";
        this.checkClipartScroll = false;
        this.searchText = "";
        this.showAllFonts = false;
        // infinite scroll
        this.customPlaceholderArr = [];
    }
    /**
     *
     * @param mainTabId
     */
    ClipartComponent.prototype.getSubTabs = function (mainTabId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                data = this.mainService.tabsFlow[mainTabId];
                this.subTabsData = this.mainService.setSubTabsData(data, mainTabId);
                if (this.subTabsData && this.subTabsData.length > 0) {
                    this.accordianId = this.subTabsData[0].id;
                }
                if (this.subtabLoader && this.subtabLoader.showSubLoader)
                    this.subtabLoader.showSubLoader = false;
                return [2 /*return*/];
            });
        });
    };
    /**
     *
     */
    ClipartComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.pubsub.$sub('getSubTabs', function (mainTabId) {
            if (mainTabId == _this.currentTab && !_this.subTabsData) {
                _this.getSubTabs(mainTabId);
            }
            _this.getCurrentTabName = _this.mainService.getAllTabs[_this.currentTab]['label'];
        });
        this.clipartCategoriesCacheKey = 'clipartCategories-' + this.mainService.productId + '-' + this.mainService.baseUrl;
        this.subscribeEvents();
        if (this.loadContent == true) {
            this.getCliparts();
        }
        this.pubsub.$sub('closeFullView', function (showAllFonts) {
            _this.showAllFonts = showAllFonts;
            _this.showFonts(_this.showAllFonts);
        });
        this.allowPlaceholderLoader = this.mainService.isResponsive;
        this.mainService.prepareTempArrForPlaceholder(this.limit);
    };
    /**
     *
     */
    ClipartComponent.prototype.ngAfterViewInit = function () {
        this.cdr.detectChanges();
        if (!this.loadContent)
            this.subtabLoader.showSubLoader = true;
        if (this.loadContent) {
            this.loaderComponent.showSubLoader = true;
        }
        this.cdr.detectChanges();
    };
    /**
     *
     */
    ClipartComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.pubsub.$sub('objectSelectionUpdated', function (obj) {
            if (obj.tab == 'clipart') {
                if (_this.mainService.isResponsive) {
                    _this.pubsub.$pub('getActiveTabId', _this.currentTab);
                    var self_1 = _this;
                    setTimeout(function () {
                        var currentSelectedObj = self_1.canvasService.getActiveObjectFromAllCanvases();
                        if (currentSelectedObj && currentSelectedObj.tab == obj.tab) {
                            self_1.tabsService.showChildTabs('clipart');
                        }
                    }, 100);
                }
                else {
                    _this.pubsub.$pub('getActiveTabId', _this.currentTab);
                }
            }
        });
        this.pubsub.$sub('objectSelectionCreated', function (obj) {
            var showSubChilds = false, childTabs;
            if (obj.type == 'activeSelection') {
                var nonClipartObj = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.tab == 'clipart'; }));
                if (nonClipartObj != -1) {
                    showSubChilds = true;
                    var findNonImgObj = (obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.objType != 'image'; })) >= 0) ? true : false, findNonSvg = (obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.isSvg != true; })) >= 0) ? true : false, findNonPng = (obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.isSvg == true; })) >= 0) ? true : false;
                    if (!findNonImgObj && (findNonSvg && !findNonPng) || (findNonPng && !findNonSvg)) {
                        childTabs = 'clipart';
                    }
                    else {
                        childTabs = 'common';
                    }
                }
            }
            else if (obj.tab == 'clipart') {
                showSubChilds = true;
                childTabs = 'clipart';
            }
            if (_this.mainService.isResponsive && showSubChilds == true) {
                var self_2 = _this;
                setTimeout(function () {
                    var currentSelectedObj = self_2.canvasService.getActiveObjectFromAllCanvases();
                    if (currentSelectedObj && currentSelectedObj.tab == obj.tab) {
                        self_2.tabsService.showChildTabs('clipart');
                    }
                }, 100);
                _this.pubsub.$pub('getActiveTabId', _this.currentTab);
            }
        });
        this.pubsub.$sub('objectRemoved', function (obj) {
            if (obj.tab == 'clipart') {
                _this.pubsub.$pub('getActiveTabId', _this.currentTab);
            }
        });
    };
    /**
     *
     */
    ClipartComponent.prototype.scrollToBottom = function () {
        try {
            if (!this.mainService.isResponsive)
                this.ScrollContainer.nativeElement.scrollTop = this.ScrollContainer.nativeElement.scrollHeight;
            else if (this.mainService.isResponsive && !this.allowPlaceholderLoader)
                this.mainSection.nativeElement.scrollTop = this.mainSection.nativeElement.scrollHeight;
            else {
                var scrollWidth = this.ScrollContainer.nativeElement.scrollWidth;
                scrollWidth = scrollWidth - ((scrollWidth * 25) / 100);
                this.ScrollContainer.nativeElement.scrollLeft = scrollWidth;
            }
            // this.ScrollContainer.nativeElement.scrollTo({ left: (this.ScrollContainer.nativeElement.scrollWidth), behavior: 'smooth' })
            // this.ScrollContainer.nativeElement.scrollLeft = this.ScrollContainer.nativeElement.scrollWidth;;
        }
        catch (err) { }
    };
    /**
     *
     * @param price
     */
    ClipartComponent.prototype.formatCurrency = function (price) {
        if (price != null) {
            return Object(_helper_formatCurrency__WEBPACK_IMPORTED_MODULE_8__["FormatCurrency"])(price, this.priceFormat, '');
        }
    };
    /**
     *
     */
    ClipartComponent.prototype.getCliparts = function () {
        var _this = this;
        /*if(this.mainService.clipartRequest == true){*/
        this.mainService.clipartRequest = false;
        var params = { 'limit': this.limit, 'search': '', 'product_id': this.mainService.productId, 'page': this.loadmore }, url = 'productdesigner/cliparts/getClipartCategories', cacheKey = this.clipartCategoriesCacheKey;
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            _this.mainService.clipartRequest = true;
            _this.cacheService.set(_this.clipartCategoriesCacheKey, data, { maxAge: 15 * 60 });
            var defaultCacheData = {
                clipart_images: data.default_clipart_images,
                priceFormat: data.priceFormat,
                loadMoreFlag: data.loadMoreFlag,
                page: 1
            };
            var defaultCategoryCacheKey = "clipartImages - " + data.default_category_id + _this.loadmore + _this.limit;
            ;
            _this.cacheService.set(defaultCategoryCacheKey, defaultCacheData, { maxAge: 15 * 60 });
            _this.processClipartsData(data);
        }).catch(function (err) { return console.log(err); });
        /*}*/
    };
    /**
     *
     * @param value
     */
    ClipartComponent.prototype.getNumberArray = function (value) {
        var items = [];
        for (var i = 1; i <= value; i++) {
            items.push(i);
        }
        return items;
    };
    /**
     *
     * @param data
     */
    ClipartComponent.prototype.processClipartsData = function (data) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.priceFormat = data.priceFormat;
                this.clipArtcategories = data.clipArtcategories;
                this.isEnableloadmore = (data.loadMoreFlag == 0) ? false : true;
                this.setImagesData(data.default_clipart_images, true);
                this.currentClipArtId = data.default_category_id;
                this.SelectedClipartCat = {
                    id: data.default_category_id,
                    name: data.default_clipart_label
                };
                this.clipartLimitEnable = data.clipart_limit;
                this.clipartImageLimit = data.clipart_upload_limit;
                this.clipartAlert = data.clipart_alert;
                return [2 /*return*/];
            });
        });
    };
    /**
     *
     * @param ImgData
     */
    ClipartComponent.prototype.setImagesData = function (ImgData, resetMedia) {
        if (resetMedia === true)
            this.clipArtmedia = [];
        for (var i = 0; i < ImgData.length; i++) {
            this.clipArtmedia.push(ImgData[i]);
        }
        if (this.loadContent && this.loaderComponent && this.loaderComponent.showSubLoader) {
            this.loaderComponent.showSubLoader = false;
            this.cdr.detectChanges();
        }
    };
    /**
     *
     * @param data
     */
    ClipartComponent.prototype.processClipartsMedia = function (data, resetMedia) {
        this.priceFormat = data.priceFormat;
        this.isEnableloadmore = (data.loadMoreFlag == 0) ? false : true;
        this.setImagesData(data.clipart_images, resetMedia);
        if (this.loadContent && this.loaderComponent && this.loaderComponent.showMainLoader)
            this.loaderComponent.showSubLoader = false;
        this.showPlaceholder = false;
        if (this.checkClipartScroll && resetMedia === false) {
            this.cdr.detectChanges();
            this.scrollToBottom();
        }
    };
    /**
     *
     * @param $event
     */
    ClipartComponent.prototype.searchCliprt = function ($event) {
        if (!$event || !$event.target || !$event.target.value) {
            this.loadmore = 1;
        }
        ;
        this.searchText = $event.target.value.toString();
        this.getClipArtImages(this.currentClipArtId, null, this.searchText);
    };
    /**
     * get clipart by category or by search
     *
     * @param clipartId
     * @param cacheKey
     * @param searchText
     */
    ClipartComponent.prototype.getClipArtImages = function (clipartId, cacheKey, searchText, resetMedia) {
        var _this = this;
        if (cacheKey === void 0) { cacheKey = null; }
        if (searchText === void 0) { searchText = ""; }
        if (resetMedia === void 0) { resetMedia = true; }
        // show placeholder loader
        if (this.mainService.isResponsive && !this.showAllFonts)
            this.showPlaceholder = true;
        else
            this.loaderComponent.showSubLoader = true;
        this.cdr.detectChanges();
        // prepare params and url
        var params = {
            'clipart_id': clipartId,
            'limit': this.limit,
            'search': searchText,
            'product_id': this.mainService.productId,
            'page': this.loadmore
        }, url = 'productdesigner/cliparts/getClipartImages';
        cacheKey = "clipartImages - " + clipartId + searchText + this.loadmore + this.limit;
        // if cahcekey is not null that means user has changed clipart category
        /*if (cacheKey != null && searchText == "") {*/
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            _this.cacheService.set(cacheKey, data, { maxAge: 15 * 60 });
            _this.processClipartsMedia(data, resetMedia);
        }).catch(function (err) { return console.log(err); });
        /*}*/
        // else user is trying to search specific clipart
        /*else {
            // api request
            this.mainService.post(url, params).then(data => {
                if (resetMedia === true) this.clipArtmedia = [];
                this.processClipartsMedia(data, resetMedia);
            }).catch(err => console.log(err)).finally(() => {
                if (this.loaderComponent && this.loaderComponent.showSubLoader) this.loaderComponent.showSubLoader = false
            });
        }*/
    };
    /**
     *
     * @param clipArtCat
     */
    ClipartComponent.prototype.changeClipartCat = function (clipArtCat) {
        this.clipArtmedia = [];
        this.loadmore = 1;
        this.clipartHtml = "";
        this.SelectedClipartCat = clipArtCat;
        this.currentClipArtId = clipArtCat.id;
        this.clipArtmediaCacheKey = 'clipartMedia' + '-' + clipArtCat.id + '-' + this.loadmore;
        /*this.getClipArtImages(this.currentClipArtId, this.clipArtmediaCacheKey);*/
        this.getClipArtImages(this.currentClipArtId, this.clipArtmediaCacheKey);
    };
    /**
     *
     */
    ClipartComponent.prototype.loadMoreClipArt = function () {
        this.loadmore++;
        this.clipArtmediaCacheKey = 'clipartMedia' + '-' + this.currentClipArtId;
        this.cacheService.set(this.clipArtmediaCacheKey, '');
        this.checkClipartScroll = true;
        this.getClipArtImages(this.currentClipArtId, this.clipArtmediaCacheKey, this.searchText, false);
    };
    /**
     *
     * @param img
     * @param clipartPrice
     */
    ClipartComponent.prototype.addClipartToCanvas = function (img, clipartPrice) {
        var getTotalClipart = this.canvasService.getObjectCount('clipart');
        if ((this.clipartLimitEnable == 1) && parseInt(getTotalClipart) >= parseInt(this.clipartImageLimit)) {
            sweetalert2__WEBPACK_IMPORTED_MODULE_10___default.a.fire({
                title: this.translate.instant('Error'),
                text: this.translate.instant(this.clipartAlert),
                type: "warning",
                confirmButtonText: this.translate.instant('OK'),
            });
        }
        else {
            var properties = { tab: 'clipart', price: clipartPrice };
            this.addImageService.addImage(img, properties);
            this.showFonts(true);
        }
    };
    /**
     *
     * @param showAllFonts
     */
    ClipartComponent.prototype.showFonts = function (showAllFonts) {
        this.showAllFonts = !showAllFonts;
        this.allowPlaceholderLoader = showAllFonts;
        this.pubsub.$pub('showFonts', { showAllFonts: this.showAllFonts, title: 'Clipart' });
    };
    /**
     *
     * @param currentObj
     */
    ClipartComponent.prototype.getDefaultImage = function (currentObj) {
        var found = this.clipArtmedia.find(function (clipartMediaObj) { return (clipartMediaObj.image_id == currentObj.image_id && clipartMediaObj.clipart_id && currentObj.clipart_id); });
        found.image_path = found.medium_url;
        this.clipArtmedia[this.clipArtmedia.indexOf(found)] = found;
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ClipartComponent.prototype, "loadContent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('loaderComponent'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], ClipartComponent.prototype, "loaderComponent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('subtabLoader'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], ClipartComponent.prototype, "subtabLoader", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('scrollToBottom'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"])
    ], ClipartComponent.prototype, "ScrollContainer", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('mainSection'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"])
    ], ClipartComponent.prototype, "mainSection", void 0);
    ClipartComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[clipart]',
            template: __webpack_require__(/*! ./clipart.component.html */ "./src/app/components/clipart/clipart.component.html"),
            styles: [__webpack_require__(/*! ./clipart.component.scss */ "./src/app/components/clipart/clipart.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [ng2_cache__WEBPACK_IMPORTED_MODULE_3__["CacheService"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__["PubSubService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__["TranslateService"],
            _services_add_image_service__WEBPACK_IMPORTED_MODULE_7__["AddImageService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__["TabsService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_9__["CanvasService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"],
            _placeholder_loader_placholder_loader_service__WEBPACK_IMPORTED_MODULE_12__["PlacholderLoaderService"]])
    ], ClipartComponent);
    return ClipartComponent;
}());



/***/ }),

/***/ "./src/app/components/common-tabs/common-tabs.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/components/common-tabs/common-tabs.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byip-subTabs\">\n\t<accordion [closeOthers]=\"true\" *ngIf=\"!mainService.isResponsive\" class=\"byi-accordion\">\n\t\t<accordion-group (click)=\"setAccordion(subTab.id)\" class=\"byi-accord byi-tooltip-{{subTab.component}}\" *ngFor=\"let subTab of subTabsData;\" [isOpen]=\"activeAccordion == subTab.id\">\n\t\t\t<button class=\"byi-accordion-title btn btn-link btn-block clearfix\" accordion-heading>\n\t\t\t\t<span>{{subTab.label | translate}}</span>\n\t\t\t</button>\n\t\t\t<div class=\"byi-accord-content\">\n\t\t\t\t<ng-container [ngTemplateOutlet]=\"tabs\" [ngTemplateOutletContext]=\"{subTab:subTab}\">\n\t\t\t\t</ng-container>\n\t\t\t</div>\n\t\t</accordion-group>\n\t</accordion>\n\t<tabset *ngIf=\"mainService.isResponsive\" [hidden]=\"tabsService.showChild\">\n\t\t<ng-container *ngFor=\"let subTab of subTabsData;\">\n\t\t\t<tab [active]=\"subTab.id == activeAccordion\" (selectTab)=\"selectTab(subTab.id)\">\n\t\t\t\t<ng-template tabHeading>\n\t\t\t\t\t<span>{{subTab.label}}</span>\n\t\t\t\t</ng-template>\n\t\t\t\t<ng-container [ngTemplateOutlet]=\"tabs\" [ngTemplateOutletContext]=\"{subTab:subTab}\">\n\t\t\t\t</ng-container>\n\t\t\t</tab>\n\t\t</ng-container>\n\t</tabset>\n\t<ng-template #tabs let-subTab='subTab'>\n\t\t<div class=\"byi-accord-inner\" plain-text *ngIf=\"subTab.id == 1\" [loadContent]=\"true\"></div>\n\t\t<div class=\"byi-accord-inner\" clipart *ngIf=\"subTab.id == 2\" [loadContent]=\"true\"></div>\n\t\t<div class=\"byi-accord-inner\" image-upload *ngIf=\"subTab.id == 3\" [loadContent]=\"true\"></div>\n\t\t<div class=\"byi-accord-inner\" background-color *ngIf=\"subTab.id == 4\" [loadContent]=\"true\"></div>\n\t\t<div class=\"byi-accord-inner\" my-designs *ngIf=\"subTab.id == 5\" [loadContent]=\"true\"></div>\n\t\t<div class=\"byi-accord-inner\" my-templates *ngIf=\"subTab.id == 5\" [loadContent]=\"true\"></div>\n\t\t<div class=\"byi-accord-inner\" name-number *ngIf=\"subTab.id == 6\" [loadContent]=\"true\"></div>\n\t\t<div class=\"byi-accord-inner\" design-templates *ngIf=\"subTab.id == 7\" [loadContent]=\"true\"></div>\n\t</ng-template>\n\t<tabset *ngIf=\"mainService.isResponsive\" [hidden]=\"!tabsService.showChild\">\n\t\t<button type=\"button\" class=\"byi-back-btn\" (click)=\"tabsService.backTab();cdr.detectChanges();\"\n\t\t\t*ngIf=\"!backArrow\">\n\t\t\t<span></span>\n\t\t</button>\n\t\t<button type=\"button\" class=\"byi-close-btn\" (click)=\"closeFullView(backArrow)\" *ngIf=\"backArrow\">\n\t\t\t<span></span>\n\t\t</button>\n\t\t<div class=\"byie-option-wrap\" font></div>\n\t\t<div class=\"byie-option-wrap\" stroke></div>\n\t\t<div class=\"byie-option-wrap\" drop-shadow></div>\n\t\t<div class=\"byie-option-wrap\" image-effects></div>\n\t\t<div class=\"byie-option-wrap\" opacity></div>\n\t\t<!-- <div class=\"byie-option-wrap\" arc></div> -->\n\t\t<div class=\"byie-option-wrap\" skew></div>\n\t\t<div class=\"byie-option-wrap\" object-position></div>\n\t</tabset>\n</div>"

/***/ }),

/***/ "./src/app/components/common-tabs/common-tabs.component.scss":
/*!*******************************************************************!*\
  !*** ./src/app/components/common-tabs/common-tabs.component.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uLXRhYnMvY29tbW9uLXRhYnMuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/common-tabs/common-tabs.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/common-tabs/common-tabs.component.ts ***!
  \*****************************************************************/
/*! exports provided: CommonTabsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CommonTabsComponent", function() { return CommonTabsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");







var CommonTabsComponent = /** @class */ (function () {
    /**
     * dependancy injector
     */
    function CommonTabsComponent(cacheService, mainService, pubsub, tabsService, cdr) {
        this.cacheService = cacheService;
        this.mainService = mainService;
        this.pubsub = pubsub;
        this.tabsService = tabsService;
        this.cdr = cdr;
        this.backArrow = false;
        this.isActiveTabId = false;
    }
    CommonTabsComponent.prototype.setAccordion = function (id) {
        this.activeAccordion = id;
    };
    /**
     * angular lifecycle init function
     */
    CommonTabsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.init();
        var self = this;
        this.pubsub.$sub('getActiveTabId', function (Id) {
            if (Id != "" && Id != 0) {
                self.activeAccordion = Id;
                self.cdr.detectChanges();
                _this.isActiveTabId = true;
            }
        });
        this.pubsub.$sub('getSubTabs', function (Id) {
            if (Id != "" && Id != 0 && _this.isActiveTabId == false) {
                self.activeAccordion = Id;
                self.cdr.detectChanges();
            }
            else {
                _this.isActiveTabId = false;
            }
            var index = self.mainService.tabsFlow[Id].filter(function (data) { return data == self.activeAccordion; });
            if (index.length == 0) {
                _this.activeAccordion = Id;
            }
        });
        this.pubsub.$sub('introTabActive', function (Id) {
            if (Id != "" && Id != 0) {
                self.activeAccordion = Id;
                self.openIntroAccordian = Id;
            }
        });
        this.pubsub.$sub('activeTabOnLoadDesign', function (Id) {
            /*   let obj = "";
                 if (this.mainService.canvasService.currentCanvas.getActiveObject()){
                     obj = this.mainService.canvasService.currentCanvas.getActiveObject();
                 }*/
            var obj = _this.mainService.canvasService.currentCanvas.getActiveObject();
            Id = _this.getSelectedObjTabId(obj);
            if (Id != "" && Id != 0) {
                Id = (obj && obj.hasOwnProperty('tab')) ? _this.getSelectedObjTabId(obj) : Id;
                _this.activeAccordion = Id;
            }
        });
        this.pubsub.$sub('showFonts', function (resp) {
            _this.backArrow = resp.showAllFonts;
        });
    };
    CommonTabsComponent.prototype.getSelectedObjTabId = function (obj) {
        var tab = obj.tab, tabId = 0;
        switch (tab) {
            case 'text':
                tabId = 1;
                break;
            case 'clipart':
                tabId = 2;
                break;
            case 'upload':
                tabId = 3;
                break;
            case 'namenumber':
                tabId = 6;
                break;
        }
        return tabId;
    };
    /**
     * show loader on init
     */
    CommonTabsComponent.prototype.init = function () { };
    /**
     * as we have used @Input.. we can only access this variable after ng view content initialization is complete
     * we can insure that response is done on ng after content init function
     *
     * NOTE: Need to handle if no subtabs are recieved
     */
    CommonTabsComponent.prototype.selectTab = function (id) {
        this.activeAccordion = id;
    };
    CommonTabsComponent.prototype.closeFullView = function (backArrow) {
        this.pubsub.$pub('closeFullView', backArrow);
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", String)
    ], CommonTabsComponent.prototype, "subTabsData", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CommonTabsComponent.prototype, "activeAccordion", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], CommonTabsComponent.prototype, "loaderComponent", void 0);
    CommonTabsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: 'common-tabs',
            template: __webpack_require__(/*! ./common-tabs.component.html */ "./src/app/components/common-tabs/common-tabs.component.html"),
            styles: [__webpack_require__(/*! ./common-tabs.component.scss */ "./src/app/components/common-tabs/common-tabs.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [ng2_cache__WEBPACK_IMPORTED_MODULE_3__["CacheService"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__["PubSubService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__["TabsService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"]])
    ], CommonTabsComponent);
    return CommonTabsComponent;
}());



/***/ }),

/***/ "./src/app/components/conf-product-attr/conf-product-attr.component.html":
/*!*******************************************************************************!*\
  !*** ./src/app/components/conf-product-attr/conf-product-attr.component.html ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-attr-tables\" *ngIf=\"confAttrs\">\n  <div class=\"byi-attr-wrapper\">\n\n    <!-- Name Number -->\n    <ng-container *ngIf=\"confProductService.isNameNumber\">\n      <accordion [closeOthers]=\"true\" class=\"byi-accordion\">\n        <accordion-group class=\"byi-accord byi-attr-content\"\n          *ngFor=\"let nameNumberData of confProductService.cartData;let i = index\">\n          <button class=\"byi-accordion-title btn btn-link btn-block clearfix\" accordion-heading>\n            <span\n              *ngIf=\"confProductService.nameNumberService.addName && confProductService.nameNumberService.addNumber\">{{nameNumberData?.additional_options[0]?.name + \"-\" + nameNumberData?.additional_options[0]?.number}}</span>\n            <span\n              *ngIf=\"confProductService.nameNumberService.addName && !confProductService.nameNumberService.addNumber\">{{nameNumberData?.additional_options[0]?.name}}</span>\n            <span\n              *ngIf=\"!confProductService.nameNumberService.addName && confProductService.nameNumberService.addNumber\">{{nameNumberData?.additional_options[0]?.number}}</span>\n          </button>\n          <div class=\"byi-accord-content\">\n            <ng-container [ngTemplateOutlet]=\"confAttributeSelection\" [ngTemplateOutletContext]=\"{i:i}\">\n            </ng-container>\n          </div>\n        </accordion-group>\n      </accordion>\n    </ng-container>\n\n    <!-- Not Name Number -->\n    <ng-container *ngIf=\"!confProductService.isNameNumber\">\n      <div class=\"byi-attr-content\" *ngFor=\"let row of confProductService.totalRows; let i = index;\">\n        <button class=\"byi-attr-delete\" *ngIf=\"confProductService.totalRows.length > 1\" (click)=\"removeRow(i)\">\n          <span></span>\n        </button>\n        <ng-container [ngTemplateOutlet]=\"confAttributeSelection\" [ngTemplateOutletContext]=\"{i:i}\">\n        </ng-container>\n      </div>\n    </ng-container>\n\n    <!-- Conf Product Attr Selection -->\n    <ng-template #confAttributeSelection let-i=\"i\">\n      <!-- swatch section -->\n      <div class=\"byi-swatch-container\" *ngIf=\"hasSwatch\">\n        <div class=\"byi-swatch-item\" *ngFor=\"let confAttrObj of confAttrs; let j = index\">\n          <label>{{'Select ' + filterLabel(confAttrObj.label) + ' Value' | translate}}</label>\n          <div class=\"byi-colors-list\">\n            <ul>\n              <ng-container *ngFor=\"let optionValueObj of confAttrObj.values\">\n                <li class=\"byi-swatch\"\n                  [ngClass]=\"{'active': confProductService.cartData[i].super_attribute[confAttrObj.id] == optionValueObj.value_index, disabled: disableMe(optionValueObj.value_index, i, j)}\"\n                  (click)=\"setSelectedOptions(optionValueObj.value_index, confAttrObj.id, i, j)\">\n                  <span *ngIf=\"optionValueObj.type == 'color'\" class=\"swatch-color\"\n                    [style.background]=\"optionValueObj.value\"></span>\n                  <img *ngIf=\"optionValueObj.type == 'image'\" class=\"swatch-image\" [src]=\"optionValueObj.value\">\n                </li>\n              </ng-container>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <!-- Swatch is false -->\n      <div class=\"byi-attr-row\" *ngIf=\"!hasSwatch\">\n        <div class=\"byi-attr-item\" *ngFor=\"let confAttrObj of confAttrs; let j = index\">\n          <label>{{'Select ' + filterLabel(confAttrObj.label) + ' Value' | translate}}</label>\n          <div class=\"byi-select\">\n            <select name=\"brand\" [(ngModel)]=\"confProductService.cartData[i].super_attribute[confAttrObj.id]\"\n              (change)=\"setSelectedOptions($event.target.value, confAttrObj.id, i, j)\"\n              [id]=\"'dropdown_' + i + '_' + confAttrObj.id\">\n              <option *ngFor=\"let optionValueObj of confAttrObj.values\" [value]=\"optionValueObj.value_index\"\n                [disabled]=\"disableMe(optionValueObj.value_index, i, j)\">\n                {{optionValueObj.label | translate}}\n              </option>\n            </select>\n            <span class=\"caret\"></span>\n          </div>\n          <!-- error for specific attribute dropdown -->\n          <span class=\"text-danger\" *ngIf=\"confProductService.isSubmitted && getCartObj(i, confAttrObj.id) == 'null'\">\n            {{'This Attribute is required' | translate}}\n          </span>\n        </div>\n      </div>\n\n      <!-- QTY Container -->\n      <div class=\"qty-container\">\n        <label>{{'Quantity' | translate}}</label>\n        <input class=\"byi-input size-qty\" type=\"text\" [(ngModel)]=\"confProductService.cartData[i].qty\"\n          (keypress)=\"confProductService.keyPress($event)\" (input)=\"qtyUpdated($event.target.value)\"\n          [attr.data-productid]=\"confProductService.cartData[i].productId\">\n\n        <!-- error for qty -->\n        <span class=\"text-danger\" *ngIf=\"confProductService.isSubmitted && confProductService.cartData[i].qty <= 0\">\n          {{'Invalid Qty' | translate}}\n        </span>\n        <button class=\"btn-add-more\"\n          *ngIf=\"i == confProductService.totalRows.length - 1 && confProductService.displayAddMore && !confProductService.isNameNumber\"\n          (click)=\"addRow()\">\n          <span class=\"icon icon-plus\"></span>\n          <span>{{'Add More' | translate}}</span>\n        </button>\n      </div>\n      <!-- End of qty container -->\n    </ng-template>\n  </div>\n</div>"

/***/ }),

/***/ "./src/app/components/conf-product-attr/conf-product-attr.component.scss":
/*!*******************************************************************************!*\
  !*** ./src/app/components/conf-product-attr/conf-product-attr.component.scss ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29uZi1wcm9kdWN0LWF0dHIvY29uZi1wcm9kdWN0LWF0dHIuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/conf-product-attr/conf-product-attr.component.ts":
/*!*****************************************************************************!*\
  !*** ./src/app/components/conf-product-attr/conf-product-attr.component.ts ***!
  \*****************************************************************************/
/*! exports provided: ConfProductAttrComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfProductAttrComponent", function() { return ConfProductAttrComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _price_price_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../price/price.service */ "./src/app/components/price/price.service.ts");
/* harmony import */ var _custom_options_custom_options_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../custom-options/custom-options.service */ "./src/app/components/custom-options/custom-options.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _conf_product_attr_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./conf-product-attr.service */ "./src/app/components/conf-product-attr/conf-product-attr.service.ts");
/* harmony import */ var _name_number_name_number_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../name-number/name-number.service */ "./src/app/components/name-number/name-number.service.ts");







var ConfProductAttrComponent = /** @class */ (function () {
    /**
     * Dependancy Injection
     */
    function ConfProductAttrComponent(confProductService, eventService, cdr, customOptionService, priceService, nameNumberService) {
        this.confProductService = confProductService;
        this.eventService = eventService;
        this.cdr = cdr;
        this.customOptionService = customOptionService;
        this.priceService = priceService;
        this.nameNumberService = nameNumberService;
        // this will indicate how many rows to add initially
        this.numberOfTimes = 0;
    }
    /**
     * Angular Init Function
     */
    ConfProductAttrComponent.prototype.ngOnInit = function () {
        this.subscribeEvents();
        this.reset();
    };
    /**
     * Assign Default Values
     */
    ConfProductAttrComponent.prototype.reset = function () {
        this.confProductService.totalRows = (this.confProductService.totalRows && this.confProductService.totalRows.length > 0 && this.confProductService.resetMe == false) ? this.confProductService.totalRows : [];
        this.confProductService.cartData = (this.confProductService.cartData && this.confProductService.cartData.length > 0) ? this.confProductService.cartData : [];
        this.confProductService.selectedOptionString = (this.confProductService.selectedOptionString && this.confProductService.selectedOptionString.length > 0) ? this.confProductService.selectedOptionString : [];
    };
    /**
     * Subscribe Events
     */
    ConfProductAttrComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('qtyUpdated', function () {
            _this.qtyUpdated();
        });
    };
    /**
     * Access @Input Values here
    */
    ConfProductAttrComponent.prototype.ngAfterViewInit = function () {
        this.init();
        if (this.confProductService.totalRows.length == 0 && !this.confProductService.isNameNumber)
            this.addRow();
    };
    /**
     *
     */
    ConfProductAttrComponent.prototype.init = function () {
        // if no prod options is not found in response object, return
        if (!this.confProductOptionsObject || !this.confProductOptionsObject.productOptions || !this.confProductOptionsObject.productsCombination)
            return;
        // else set data
        this.confAttrs = Object.assign([], this.confProductOptionsObject.productOptions);
        this.hasSwatch = (this.confAttrs.indexOf(this.confAttrs.find(function (confAttrObj) { return confAttrObj.hasSwatch === 0; })) >= 0) ? false : true;
        this.confProductService.productsCombination = Object.assign({}, this.confProductOptionsObject.productsCombination);
        // 
        if (this.confProductService.totalRows && this.confProductService.totalRows.length <= 0 && (this.confProductService.resetMe == true || this.confProductService.resetMe == null)) {
            this.confProductService.resetMe = false;
        }
        // in case of name number 
        if (this.confProductService.nameNumberService.addName || this.confProductService.nameNumberService.addNumber) {
            // check if any new row is added in name number
            var totalNameNumbers = this.confProductService.nameNumberService.newRow.length, totalCartItems = this.confProductService.cartData.length;
            // if not added, create newly added name/number rows in cart
            if (totalNameNumbers != totalCartItems) {
                // find the difference
                this.numberOfTimes = totalNameNumbers - totalCartItems;
                // add name number one by one
                for (var i = 0; i < this.numberOfTimes; i++) {
                    this.addRow();
                }
            }
        }
        // this.customOptionService.calcPrice();
    };
    /**
     * Add new row on init/each time user clicks on add row button
     */
    ConfProductAttrComponent.prototype.addRow = function () {
        if (this.confProductService.cartData && this.confProductService.isConfDataInvalid())
            return;
        var rowIndex = this.confProductService.totalRows.length;
        this.confProductService.totalRows.push(1);
        this.confProductService.selectedOptionString[rowIndex] = {};
        this.confProductService.initCartObject(rowIndex, this.confAttrs);
        this.initSelectionValues(rowIndex);
        this.qtyUpdated();
    };
    /**
     * this variables will keep track of selected attribute values
     */
    ConfProductAttrComponent.prototype.initSelectionValues = function (index) {
        this.confProductService.selectedOptionString[index] = Object.values(this.confProductService.fixDefaultSelectedOptions).join("_");
    };
    /**
     * remove specified row
     *
     * @param rowIndex row number
     */
    ConfProductAttrComponent.prototype.removeRow = function (rowIndex) {
        // then remove that row from html
        this.confProductService.totalRows.splice(rowIndex, 1);
        // remove cart data first
        this.confProductService.removeRow(rowIndex);
        // 
        this.confProductService.selectedOptionString.splice(rowIndex, 1);
        this.qtyUpdated();
    };
    /**
     * to save complexity in html, we will be preparing cart object from service and return the same
     *
     * @param rowIndex current row index
     * @param id conf attr id
     */
    ConfProductAttrComponent.prototype.getCartObj = function (rowIndex, id) {
        return this.confProductService.cartData[rowIndex].super_attribute[id];
    };
    /**
     * When user changes attribute selection, we will call this function and will update selectionsoptions object
     *
     * @param value value_index of selected attribute
     * @param attId attribute id(eg. id of color, size)
     * @param rowIndex current row number
     */
    ConfProductAttrComponent.prototype.setSelectedOptions = function (value, attId, rowIndex, attrIndex) {
        // if swatch is enabled, we need to manually add selected data to our cart object
        if (this.hasSwatch) {
            this.confProductService.cartData[rowIndex].super_attribute[attId] = value;
        }
        // we will created fresh new array of selected options    
        var selectedOptions = this.confProductService.selectedOptionString[rowIndex].split("_");
        selectedOptions[attrIndex] = value;
        this.confProductService.selectedOptionString[rowIndex] = Object.values(selectedOptions).join("_");
        // check for duplicate selection
        // if (this.confProductService.totalRows.length > 1) this.checkForDuplicateSelection();
        // this object will keep the track of current selected super attributes 
        // in array format
        // this is been used for fetching product id based on current selected super attributes
        this.confProductService.allDefaultSelectedAttrs[rowIndex][attrIndex] = value;
        // fetch and set product id for current selected super attributes
        if (this.confProductService.cartData[rowIndex] && this.confProductService.cartData[rowIndex].productId) {
            // fetch new product id, and store old product id into local variable
            var productId = this.confProductService.getProductId(rowIndex), oldProductId = this.confProductService.cartData[rowIndex].productId;
            // if old and new id's don't match
            // update new product id in cart and recalculate price
            if (oldProductId != productId) {
                this.confProductService.cartData[rowIndex].productId = productId;
                this.qtyUpdated();
            }
        }
    };
    /**
     * as per html default behavior, even if ngModel has different value, html by default takes previous dropdown value
     * so we manually need to reselect values after removing duplicate dropdown section
     *
     * @param rowIndex index been removed
     */
    ConfProductAttrComponent.prototype.setSelection = function (rowIndex) {
        if (!this.confProductService || !this.confProductService.cartData || !this.confProductService.cartData[rowIndex] || !this.confProductService.cartData[rowIndex].super_attribute)
            return;
        var keys = Object.keys(this.confAttrs), totalAttr = keys.length, i, dropDownIdLabel, domElement, selectedVal, superAttrObj = this.confProductService.cartData[rowIndex].super_attribute;
        for (i = 0; i < totalAttr; i++) {
            dropDownIdLabel = 'dropdown_' + rowIndex + '_' + this.confAttrs[i].id;
            domElement = document.getElementById(dropDownIdLabel);
            selectedVal = superAttrObj[this.confAttrs[i].id];
            domElement.selectedIndex = this.confAttrs[i].values.find(function (optionValueObj) { return optionValueObj.value_index == selectedVal; });
        }
    };
    /**
     * this function is called each time for assigning disable class/attribute to respective dom element
     *
     * @param currentValue current value index
     * @param rowIndex row index
     * @param optionIndex option index
     */
    ConfProductAttrComponent.prototype.disableMe = function (currentValue, rowIndex, optionIndex) {
        if (!this.confProductService.selectedOptionString || !this.confProductService.selectedOptionString[rowIndex] || Object.keys(this.confProductService.selectedOptionString[rowIndex]).length == 0)
            return false;
        // get current row selected attributes
        var selectedOptions = this.confProductService.selectedOptionString[rowIndex].split("_");
        // set current specifed value index to our confProductService.selectedOptionString array
        selectedOptions[optionIndex] = currentValue;
        // rejoin the same by '_'
        var currentOption = selectedOptions.join("_");
        // returns true if current specifed pair does not exist in product combination object
        var combination = Object.values(this.confProductService.productsCombination);
        if (combination.indexOf(currentOption) == -1) {
            return true;
        }
        // false if combination found
        return false;
    };
    /**
     * for configurable product we need to pass total number of qty
     */
    ConfProductAttrComponent.prototype.qtyUpdated = function (qty) {
        var _this = this;
        if (qty === void 0) { qty = null; }
        if (qty != null && qty < 1)
            return;
        var finalPrice = 0, foundPrice;
        this.confProductService.cartData.filter(function (cartItem) {
            foundPrice = _this.confProductService.getProductPrice(cartItem.productId, cartItem.qty);
            finalPrice += (foundPrice * parseInt(cartItem.qty));
        });
        this.priceService.totalQty = this.getTotalQty();
        if (finalPrice >= this.priceService.defaultPrice)
            this.priceService.extraPriceToBeAdded.productPrice = finalPrice - this.priceService.defaultPrice;
        this.priceService.addThisPrice();
    };
    /**
     * calculate total price
     */
    ConfProductAttrComponent.prototype.getTotalQty = function () {
        // variable declaration
        var qty = 0;
        // calculate qty
        this.confProductService.cartData.filter(function (cartObj) {
            qty += parseInt(cartObj.qty);
        });
        qty = (qty <= 0) ? 1 : qty;
        // return qty
        return parseInt(qty);
    };
    /**
     * Replace '_' with white space in label and
     * also make uppercase to each first character of the same
     *
     * @param label
     */
    ConfProductAttrComponent.prototype.filterLabel = function (label) {
        // replace underscore with white space
        label = label.replace("_", " ");
        // uppercase each first character of string
        label = label.toLowerCase().replace(/\b[a-z]/g, function (letter) {
            return letter.toUpperCase();
        });
        // return final o/p
        return label;
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"])('confProductOptionsObject'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ConfProductAttrComponent.prototype, "confProductOptionsObject", void 0);
    ConfProductAttrComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
            selector: '[conf-product-attr]',
            template: __webpack_require__(/*! ./conf-product-attr.component.html */ "./src/app/components/conf-product-attr/conf-product-attr.component.html"),
            styles: [__webpack_require__(/*! ./conf-product-attr.component.scss */ "./src/app/components/conf-product-attr/conf-product-attr.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_5__["ConfProductAttrService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ChangeDetectorRef"],
            _custom_options_custom_options_service__WEBPACK_IMPORTED_MODULE_2__["CustomOptionsService"],
            _price_price_service__WEBPACK_IMPORTED_MODULE_1__["PriceService"],
            _name_number_name_number_service__WEBPACK_IMPORTED_MODULE_6__["NameNumberService"]])
    ], ConfProductAttrComponent);
    return ConfProductAttrComponent;
}());



/***/ }),

/***/ "./src/app/components/conf-product-attr/conf-product-attr.service.ts":
/*!***************************************************************************!*\
  !*** ./src/app/components/conf-product-attr/conf-product-attr.service.ts ***!
  \***************************************************************************/
/*! exports provided: ConfProductAttrService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfProductAttrService", function() { return ConfProductAttrService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _helper_formatCurrency__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../_helper/formatCurrency */ "./src/app/_helper/formatCurrency.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _name_number_name_number_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../name-number/name-number.service */ "./src/app/components/name-number/name-number.service.ts");






var ConfProductAttrService = /** @class */ (function () {
    /**
     * Dependancy injection
     */
    function ConfProductAttrService(mainService, eventService, nameNumberService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.nameNumberService = nameNumberService;
        this.isSubmitted = false;
        this.defaultQty = 1;
        this.allDefaultSelectedAttrs = [];
        // flag that will force cart to reset
        this.resetMe = null;
        this.displayAddMore = false;
        this.subscribeEvents();
    }
    /**
     *
     */
    ConfProductAttrService.prototype.init = function () {
        this.isNameNumber = (this.nameNumberService.addName || this.nameNumberService.addNumber) ? true : false;
    };
    /**
     *
     */
    ConfProductAttrService.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('addCustomPriceToTotal', function () {
            _this.qtyUpdated(1);
        });
    };
    /**
     * Initialize cart object to null for each attribute index
     *
     * @param rowIndex Row Index
     * @param confAttrs configurable attributes array
     */
    ConfProductAttrService.prototype.initCartObject = function (rowIndex, confAttrs) {
        var _this = this;
        // as default options values changes each time,
        // we will be storing it's values for the first time in our variable
        // this variable will be used each time when new row needs to be added
        if (!this.fixDefaultSelectedOptions ||
            Object.keys(this.fixDefaultSelectedOptions).length == 0)
            this.fixDefaultSelectedOptions = Object.assign({}, this.defaultSelectedOptionsValues);
        // reset isSubmitted flag to false each time new row is added
        this.isSubmitted = false;
        // initialize cart data object for current row index
        this.cartData[rowIndex] = { super_attribute: {} };
        // if name number
        if (this.isNameNumber) {
            // initialize empty name number object
            var additional_options = [{}];
            // set id first
            additional_options[0] = Object.assign(additional_options[0], { id: this.nameNumberService.newRow[rowIndex].id });
            // check if name exists
            if (this.nameNumberService.addName)
                additional_options[0] = Object.assign(additional_options[0], { name: this.nameNumberService.newRow[rowIndex].name });
            // check if number exists
            if (this.nameNumberService.addNumber)
                additional_options[0] = Object.assign(additional_options[0], { number: this.nameNumberService.newRow[rowIndex].number });
            // finally add this object to cartData object
            this.cartData[rowIndex] = Object.assign(this.cartData[rowIndex], { additional_options: additional_options });
        }
        // store fix default options into tmp variable
        var tmpSelectedValues = Object.assign({}, this.fixDefaultSelectedOptions);
        // filter conf attr array to get attr id
        confAttrs.filter(function (confAttrArr, index) {
            _this.cartData[rowIndex].super_attribute[confAttrArr.id] = tmpSelectedValues[index];
        });
        // store selected values to all default selected 
        this.allDefaultSelectedAttrs[rowIndex] = Object.assign({}, tmpSelectedValues);
        // delete tmpSelectedValues;
        var productId = this.getProductId(rowIndex);
        this.cartData[rowIndex] = Object.assign(this.cartData[rowIndex], { productId: productId });
        // finally assign qty object to cart data object
        this.cartData[rowIndex] = Object.assign(this.cartData[rowIndex], { qty: this.defaultQty });
    };
    /**
     * This function is triggered when name/number row is removed
     * Here we will remove that row too from cart item
     * and subtract the price of the same
     *
     * @param removedNameNumberObj
     */
    ConfProductAttrService.prototype.nameNumberReset = function (removedNameNumberObj, selectedKey) {
        if (selectedKey === void 0) { selectedKey = null; }
        // if no cart data found, return
        if (!this.cartData || !this.cartData.length)
            return;
        // when key is not specified
        // we will manually determine the key
        if (selectedKey == null) {
            // if both name and number selected
            if (this.nameNumberService.addName && this.nameNumberService.addNumber) {
                selectedKey = 'both';
            }
            // if only name is selected
            else if (this.nameNumberService.addName && !this.nameNumberService.addNumber) {
                selectedKey = 'name';
            }
            // if only number is selected
            else if (!this.nameNumberService.addName && this.nameNumberService.addNumber) {
                selectedKey = 'number';
            }
        }
        // if key is specified(eg. name)
        else {
            // determine the other key(eg. number)
            var otherKey = (selectedKey == 'addName') ? 'addNumber' : 'addName';
            // check if other key is enabled
            // eg if user had selected both name and number and then he deselects name
            // in this case this function will also been triggered
            // so we are checking if number is still checked, skip the process
            if (this.nameNumberService[otherKey] == true) {
                selectedKey = null;
            }
            // if selected key is not null
            // determine the key value
            selectedKey = (selectedKey != null && selectedKey == 'addName') ? 'name' : 'number';
        }
        // if key is null, return
        if (selectedKey == null)
            return;
        // variable declaration    
        var additionalOptions, foundCartItem = null, totalCartItems = this.cartData.length, cartItem;
        // loop traversal
        for (var i = 0; i < totalCartItems && foundCartItem == null; i++) {
            // store cart data to custom var
            cartItem = this.cartData[i];
            // get addition option object
            additionalOptions = cartItem.additional_options[0];
            // check if removed name number id matches to current name number id
            if (removedNameNumberObj.id == additionalOptions.id) {
                // check key value for both name and number selection
                if (selectedKey == 'both' && (removedNameNumberObj.name == additionalOptions.name && removedNameNumberObj.number == additionalOptions.number)) {
                    foundCartItem = cartItem;
                }
                // else check with specific key
                else if ((removedNameNumberObj[selectedKey] == additionalOptions[selectedKey])) {
                    foundCartItem = cartItem;
                }
            }
        }
        // if found cart item is not null
        // remove that item from cart
        // subtract price of that item as well
        if (foundCartItem != null) {
            this.totalRows.splice(this.cartData.indexOf(foundCartItem), 1);
            this.cartData.splice(this.cartData.indexOf(foundCartItem), 1);
            this.eventService.$pub('qtyUpdated');
        }
    };
    /**
     *
     * @param superAttribute
     */
    ConfProductAttrService.prototype.getProductId = function (rowIndex) {
        var superAttribute = this.allDefaultSelectedAttrs[rowIndex], selectedAttrs = Object.values(superAttribute).join('_'), productIds = Object.keys(this.productsCombination), productAttrs = Object.values(this.productsCombination), index;
        index = productAttrs.indexOf(selectedAttrs);
        return productIds[index];
    };
    /**
     * remove cart object on click on remove icon
     *
     * @param rowIndex
     */
    ConfProductAttrService.prototype.removeRow = function (rowIndex, cartData) {
        if (cartData === void 0) { cartData = null; }
        if (cartData != null) {
            if (cartData && cartData[rowIndex])
                cartData.splice(rowIndex, 1);
        }
        else {
            if (this.cartData && this.cartData[rowIndex])
                this.cartData.splice(rowIndex, 1);
        }
    };
    /**
     * cart data validation
     *
     * @return boolean value(true if cart is )
     */
    ConfProductAttrService.prototype.isConfDataInvalid = function () {
        // set is submitted flag to true to display error messages
        this.isSubmitted = true;
        // variable declaration
        var i, error = false, totalCartData = this.cartData.length, cartObj, superAttribute;
        // as we need to stop iteration as soon as we found error in any of the validation,
        // we are using for loop here
        for (i = 0; i < totalCartData && error === false; i++) {
            // store current cart data object to local variable      
            cartObj = this.cartData[i];
            // if cart data obj is not initialized,
            // or qty is not initialized
            // or qty is <= 0
            // or super attribute object is not assigned, set error to true and break loop
            if (!cartObj || !cartObj.qty || cartObj.qty <= 0 || !cartObj.super_attribute) {
                error = true;
                break;
            }
            // store super attribute to local variable
            superAttribute = cartObj.super_attribute;
            // traverse each super attribute one by one
            for (var key in superAttribute) {
                // check if any of the attribute has null value,
                // if yes, then set error to true and stop iteration
                if (superAttribute.hasOwnProperty(key) && superAttribute[key] == "null") {
                    error = true;
                    break;
                }
            }
        }
        // return true/false based on above actions
        return error;
    };
    /**
     * simply just set method to return cart data object
     */
    ConfProductAttrService.prototype.getCartData = function () {
        var customCartData = [];
        this.cartData.filter(function (cartItem) {
            customCartData.push(JSON.parse(JSON.stringify(cartItem)));
        });
        if (this.isNameNumber)
            customCartData = this.addQtyToAdditionalOptions(customCartData);
        customCartData = this.checkForDuplicateSelection(customCartData);
        return customCartData;
    };
    /**
     *
     */
    ConfProductAttrService.prototype.addQtyToAdditionalOptions = function (customCartData) {
        var qtyToBeAssigned, additionalOptions;
        customCartData.filter(function (cartItemObj) {
            qtyToBeAssigned = parseInt(cartItemObj.qty);
            if (cartItemObj.hasOwnProperty('additional_options')) {
                additionalOptions = cartItemObj.additional_options[0];
                additionalOptions = Object.assign(additionalOptions, { qty: qtyToBeAssigned });
                cartItemObj.additional_options[0] = additionalOptions;
            }
        });
        return customCartData;
    };
    /**
     * check for duplicate selected pairs and remove duplicate one and add it's qty to matching pair
     */
    ConfProductAttrService.prototype.checkForDuplicateSelection = function (customCartData) {
        var i, j, totalCartData = customCartData.length, tmp = [], removedItemQty;
        for (i = 0; i < totalCartData; i++) {
            removedItemQty = 0;
            for (j = 1; j < totalCartData; j++) {
                if (i === j)
                    continue;
                if (this.isCommon(customCartData[i].super_attribute, customCartData[j].super_attribute)) {
                    removedItemQty = parseInt(customCartData[j].qty);
                    customCartData[i].qty = parseInt(customCartData[i].qty) + removedItemQty;
                    if (customCartData[i].hasOwnProperty('additional_options')) {
                        customCartData[i].additional_options = customCartData[i].additional_options.concat(customCartData[j].additional_options);
                    }
                    this.removeRow(j, customCartData);
                    totalCartData--;
                    j--;
                }
            }
        }
        // customCartData.filter(cartItem => {
        //   cartItem.additional_options = JSON.stringify(cartItem.additional_options);
        // });
        return customCartData;
    };
    /**
     * Check both objects for matching values
     *
     * @param obj1
     * @param obj2
     */
    ConfProductAttrService.prototype.isCommon = function (obj1, obj2) {
        obj1 = Object.values(obj1);
        obj2 = Object.values(obj2);
        var totalValues = obj1.length, matchCounter = 0, i = 0;
        for (i = 0; i < totalValues; i++) {
            if (obj1[i] == obj2[i])
                matchCounter++;
        }
        return (matchCounter == totalValues) ? true : false;
    };
    /**
     * prevent user from entering invalid keys in qty input
     *
     * @param event
     */
    ConfProductAttrService.prototype.keyPress = function (event) {
        var pattern = /[0-9\+\-\ ]/;
        var inputChar = String.fromCharCode(event.charCode);
        if (event.keyCode != 8 && !pattern.test(inputChar)) {
            event.preventDefault();
        }
    };
    ConfProductAttrService.prototype.qtyUpdated = function (qtyVal, priceToBeCount) {
        if (priceToBeCount === void 0) { priceToBeCount = 0; }
        if (qtyVal <= 0)
            qtyVal = 1;
        var finalPrice = (priceToBeCount > 0) ? (priceToBeCount) : this.mainService.calcFinalPrice(qtyVal);
        this.cartTotalAmount = Object(_helper_formatCurrency__WEBPACK_IMPORTED_MODULE_3__["FormatCurrency"])(finalPrice, this.priceFormat, '');
        this.eventService.$pub('setPrice', finalPrice);
    };
    /**
     * get product price based on product id
     * if tier price is set, same will be return, product price will be returned otherwise
     *
     * @param productId
     * @param qty
     */
    ConfProductAttrService.prototype.getProductPrice = function (productId, qty) {
        var keys, values, price = null;
        if (this.tierPrice && Object.keys(this.tierPrice).length > 0) {
            keys = Object.keys(this.tierPrice);
            values = Object.values(this.tierPrice);
            price = values[keys.indexOf(productId)];
            // if tier price found
            if (price && price.length > 0) {
                var found_1;
                price.filter(function (tierPriceObj) {
                    if (parseInt(qty) >= parseInt(tierPriceObj.price_qty))
                        found_1 = tierPriceObj;
                });
                price = ((found_1 && found_1.price)) ? found_1.price : null;
            }
            else {
                price = null;
            }
        }
        // if tier price not found
        if (price == null) {
            keys = Object.keys(this.productPrice);
            values = Object.values(this.productPrice);
            price = values[keys.indexOf(productId)];
        }
        return price;
    };
    ConfProductAttrService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_1__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            _name_number_name_number_service__WEBPACK_IMPORTED_MODULE_5__["NameNumberService"]])
    ], ConfProductAttrService);
    return ConfProductAttrService;
}());



/***/ }),

/***/ "./src/app/components/context-menu/context-menu.component.html":
/*!*********************************************************************!*\
  !*** ./src/app/components/context-menu/context-menu.component.html ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"context-menu\" style=\"position:absolute;z-index:9999;display: block;width: 20px\">\n\t<ul class=\"context-menu-list context-menu-root\" [attr.hidden]=\"hideContextMenu\">\n\t\t<li class=\"context-menu-item labels context-menu-visible\" (click)=\"canvasService.Flip('horizontal')\">\n\t\t\t<label title=\"{{'Horizantal Flip' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-flip-v\" viewBox=\"0 0 30 30\" title=\"{{'Vertical Flip' | translate}}\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-flip-v\"></use>\n\t\t\t\t</svg>\n\t\t\t</label>\n\t\t</li>\n\t\t<li class=\"context-menu-item labels\" (click)=\"canvasService.Flip('vertical')\">\n\t\t\t<label title=\"{{'Vertical Flip' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-flip-h\" viewBox=\"0 0 30 30\" title=\"{{'Horizantal Flip' | translate}}\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-flip-h\"></use>\n\t\t\t\t</svg>\n\t\t\t</label>\n\t\t</li>\n\t\t<li class=\"context-menu-item labels\" (click)=\"canvasService.ObjectLayer('forward')\"\n\t\t\t[ngClass]=\"{'disabled': rightPanelService.enableForMultipleObj == true || rightPanelService.disabledLayers.indexOf('bringToFront') != -1}\">\n\t\t\t<label title=\"{{'Front' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-layer-top\" viewBox=\"0 0 30 30\" title=\"{{'Front' | translate}}\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-layer-top\"></use>\n\t\t\t\t</svg>\n\t\t\t</label>\n\t\t</li>\n\t\t<li class=\"context-menu-item labels\" (click)=\"canvasService.ObjectLayer('backward')\"\n\t\t[ngClass]=\"{'disabled': rightPanelService.enableForMultipleObj == true || rightPanelService.disabledLayers.indexOf('sendToBack') != -1}\">\n\t\t\t<label title=\"{{'Back' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-layer-bottom\" viewBox=\"0 0 30 30\" title=\"{{'Back' | translate}}\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-layer-bottom\"></use>\n\t\t\t\t</svg>\n\t\t\t</label>\n\t\t</li>\n\t\t<li class=\"context-menu-item labels\" (click)=\"canvasService.deleteObject()\">\n\t\t\t<label title=\"{{'Delete' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-t-delete\" viewBox=\"0 0 30 30\" title=\"{{'Delete' | translate}}\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-t-delete\"></use>\n\t\t\t\t</svg>\n\t\t\t</label>\n\t\t</li>\n\t</ul>\n</div>"

/***/ }),

/***/ "./src/app/components/context-menu/context-menu.component.scss":
/*!*********************************************************************!*\
  !*** ./src/app/components/context-menu/context-menu.component.scss ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29udGV4dC1tZW51L2NvbnRleHQtbWVudS5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/context-menu/context-menu.component.ts":
/*!*******************************************************************!*\
  !*** ./src/app/components/context-menu/context-menu.component.ts ***!
  \*******************************************************************/
/*! exports provided: ContextMenuComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuComponent", function() { return ContextMenuComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _right_panel_right_panel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../right-panel/right-panel.service */ "./src/app/components/right-panel/right-panel.service.ts");





var ContextMenuComponent = /** @class */ (function () {
    function ContextMenuComponent(eventService, canvasService, rightPanelService) {
        var _this = this;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.rightPanelService = rightPanelService;
        this.hideContextMenu = true;
        this.eventService.$sub('updateContextMenu', function (obj) {
            _this.hideContextMenu = (_this.hideContextMenu == true) ? null : true;
            if (_this.hideContextMenu) {
                if (document.getElementsByClassName("total-sides").length > 0) {
                    document.getElementsByClassName("total-sides")[0].classList.remove("context-menu-open");
                }
            }
            else {
                if (document.getElementsByClassName("total-sides").length > 0) {
                    document.getElementsByClassName("total-sides")[0].classList.add("context-menu-open");
                }
            }
            _this.updateContextMenu(obj);
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            if (obj.length > 0) {
                _this.updateContextMenu(obj[0]);
            }
            else {
                _this.updateContextMenu(obj);
            }
        });
        this.eventService.$sub('canvasObjectMoving', function (obj) {
            _this.removeContextMenu();
        });
        this.eventService.$sub('objectRemoved', function () {
            _this.removeContextMenu();
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.removeContextMenu();
        });
        this.eventService.$sub('objectSelectionUpdated', function () {
            _this.removeContextMenu();
        });
        this.eventService.$sub('imageSideChanged', function () {
            if (_this.canvasService && _this.canvasService.currentCanvas) {
                var obj = _this.canvasService.currentCanvas.getActiveObject();
                if (!obj) {
                    _this.removeContextMenu();
                }
            }
        });
    }
    ContextMenuComponent.prototype.ngOnInit = function () {
    };
    ContextMenuComponent.prototype.removeContextMenu = function () {
        this.hideContextMenu = true;
        if (document.getElementsByClassName("total-sides").length > 0) {
            document.getElementsByClassName("total-sides")[0].classList.remove("context-menu-open");
        }
    };
    ContextMenuComponent.prototype.updateContextMenu = function (obj) {
        this.rightPanelService.enableForMultipleObject();
        this.rightPanelService.manageFlagForEnableDisable();
        if (!obj)
            return;
        var contextMenu = document.querySelector(".context-menu");
        var element = document.querySelector(".product-designer-main-content.active");
        var dim = this.canvasService.currentCanvas.dim;
        var left = element.offsetLeft + ((parseFloat(dim.x1) - this.canvasService.clipX[dim.designareaId] / 2) / this.canvasService.scaleFactor);
        var top = element.offsetTop + ((parseFloat(dim.y1) - this.canvasService.clipY[dim.designareaId] / 2) / this.canvasService.scaleFactor);
        var matrix = obj.calcTransformMatrix();
        var absCoords = {
            left: matrix[4],
            top: obj.top + (obj.height * obj.scaleY)
        };
        if (obj.angle) {
            absCoords.left = obj.oCoords.mb.x,
                absCoords.top = obj.oCoords.mb.y;
        }
        contextMenu.style.left = (left + absCoords.left - 10) + 'px';
        contextMenu.style.top = (top + absCoords.top) + 'px';
    };
    ContextMenuComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'context-menu',
            template: __webpack_require__(/*! ./context-menu.component.html */ "./src/app/components/context-menu/context-menu.component.html"),
            styles: [__webpack_require__(/*! ./context-menu.component.scss */ "./src/app/components/context-menu/context-menu.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            _right_panel_right_panel_service__WEBPACK_IMPORTED_MODULE_4__["RightPanelService"]])
    ], ContextMenuComponent);
    return ContextMenuComponent;
}());



/***/ }),

/***/ "./src/app/components/cropper/cropper-update.service.ts":
/*!**************************************************************!*\
  !*** ./src/app/components/cropper/cropper-update.service.ts ***!
  \**************************************************************/
/*! exports provided: CropperUpdateService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CropperUpdateService", function() { return CropperUpdateService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var CropperUpdateService = /** @class */ (function () {
    function CropperUpdateService() {
        /**
         * Init the service for operation : It initialise the variables
         */
        this.init = function (params) {
            var obj = params.obj, newSrc = params.newSrc, canvasService = params.service, eventService = params.eventService;
            // if no object is passed, we will get active object
            if (obj == null)
                obj = canvasService.getActiveObject();
            // if no active object found, return from here
            if (obj == false)
                return;
            // if (isCenter === true) obj.center();
            // fetch object's current property in array
            var oldSrc = obj.getSrc();
            return {
                /**
                 * this function is used when special operation needs to be performed on objects(eg. bold/italic on text)
                 *
                 */
                exec: function () {
                    // if no active object found, return from here
                    if (obj == false)
                        return;
                    obj.setSrc(newSrc, function () {
                        canvasService.currentCanvas.renderAll();
                        eventService.$pub('imageCropped');
                    });
                },
                /**
                 * This function is used to revert back the last updated object while using undo redo
                 */
                unexec: function () {
                    var canvas = canvasService.currentCanvas;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    // return of obj is null
                    if (!obj)
                        return;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    obj.setSrc(oldSrc, function () {
                        canvasService.currentCanvas.renderAll();
                        eventService.$pub('objectUpdated', obj);
                    });
                }
            };
        };
    }
    CropperUpdateService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], CropperUpdateService);
    return CropperUpdateService;
}());



/***/ }),

/***/ "./src/app/components/cropper/cropper.component.html":
/*!***********************************************************!*\
  !*** ./src/app/components/cropper/cropper.component.html ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-template #cropperModal>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title pull-left\">{{'Crop Image' | translate}}</h4>\n    <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"modalRef.hide()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"byi-img-crop\">\n      <img [src]=\"currentImage\" #currentCanvasImage id=\"currentCanvasImage\" class=\"cropper-image\" height=\"auto\" width=\"auto\"\n      crossOrigin=\"Anonymous\">\n    </div>\n    <div class=\"byi-ic-action\">\n      <button class=\"byi-btn\" (click)=\"saveCroppedImage()\">{{'Apply Crop' | translate}}</button>\n    </div>\n  </div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/cropper/cropper.component.scss":
/*!***********************************************************!*\
  !*** ./src/app/components/cropper/cropper.component.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY3JvcHBlci9jcm9wcGVyLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/cropper/cropper.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/components/cropper/cropper.component.ts ***!
  \*********************************************************/
/*! exports provided: CropperComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CropperComponent", function() { return CropperComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_add_image_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../services/add-image.service */ "./src/app/services/add-image.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var cropperjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! cropperjs */ "./node_modules/cropperjs/dist/cropper.js");
/* harmony import */ var cropperjs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(cropperjs__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");







var CropperComponent = /** @class */ (function () {
    function CropperComponent(addImageService, mainService, cdr, canvasSevice, translate) {
        this.addImageService = addImageService;
        this.mainService = mainService;
        this.cdr = cdr;
        this.canvasSevice = canvasSevice;
        this.translate = translate;
    }
    CropperComponent.prototype.ngOnInit = function () {
        this.initData();
    };
    CropperComponent.prototype.initData = function () {
        var _this = this;
        this.cropperSettings = {
            checkCrossOrigin: false,
            viewMode: 2,
            background: false,
            zoomOnWheel: false,
            minContainerWidth: 100,
            minContainerHeight: 150,
            ready: function () {
                _this.applyCustomClassesToCropper();
            }
        };
    };
    CropperComponent.prototype.cropImage = function (imageUrl) {
        // this.cropperModal.show();
        var obj = this.canvasSevice.getActiveObject();
        this.currentImage = obj.getSrc();
        this.modalRef = this.mainService.openThisModal(this.cropperModal, 'byi-img-crop-popup');
        this.setCropper();
    };
    CropperComponent.prototype.setCropper = function () {
        var _this = this;
        var self = this;
        setTimeout(function () {
            var img = document.getElementById('currentCanvasImage');
            var image = new Image();
            image.src = img.src;
            image.crossOrigin = 'Anonymous';
            image.onload = function () {
                self.cropper = new cropperjs__WEBPACK_IMPORTED_MODULE_5___default.a(img, _this.cropperSettings);
                self.cdr.detectChanges();
            };
        }, 100);
    };
    CropperComponent.prototype.saveCroppedImage = function () {
        var _this = this;
        this.canvasSevice.eventService.$pub('showMainLoader');
        this.croppedImage = this.cropper.getCroppedCanvas().toDataURL();
        var params = {
            imageData: this.croppedImage
        }, url = "productdesigner/index/saveCroppedImage", self = this;
        this.mainService.post(url, params).then(function (resp) {
            self.addCroppedImageToCanvas(resp.outputImage);
        }).catch(function (err) {
            console.log(_this.translate.instant("Error in save cropped image: "), err);
        }).finally(function () {
            _this.canvasSevice.eventService.$pub('hideMainLoader');
        });
    };
    CropperComponent.prototype.addCroppedImageToCanvas = function (croppedImage) {
        var img = croppedImage;
        // let img = "assets/img/15559082051519329576.png";
        this.addImageService.updateImage(img);
        this.modalRef.hide();
    };
    CropperComponent.prototype.applyCustomClassesToCropper = function () {
        var cropperModal = document.getElementsByClassName('cropper-modal'), cropperImg = document.getElementsByClassName('cropper-hide');
        if (cropperModal && cropperModal[0] && cropperModal[0].classList) {
            cropperModal[0].setAttribute('style', 'background: #ccc');
        }
        if (cropperImg && cropperImg[0] && cropperImg[0].classList) {
            cropperImg[0].setAttribute('style', 'border: dotted 1px #f00');
        }
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])('cropperModal'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CropperComponent.prototype, "cropperModal", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])('currentCanvasImage'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CropperComponent.prototype, "image", void 0);
    CropperComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
            selector: 'cropper',
            template: __webpack_require__(/*! ./cropper.component.html */ "./src/app/components/cropper/cropper.component.html"),
            styles: [__webpack_require__(/*! ./cropper.component.scss */ "./src/app/components/cropper/cropper.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_add_image_service__WEBPACK_IMPORTED_MODULE_2__["AddImageService"],
            src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ChangeDetectorRef"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_1__["CanvasService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__["TranslateService"]])
    ], CropperComponent);
    return CropperComponent;
}());



/***/ }),

/***/ "./src/app/components/custom-options/custom-options.component.html":
/*!*************************************************************************!*\
  !*** ./src/app/components/custom-options/custom-options.component.html ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!-- check if form group object is ready -->\n<ng-container *ngIf=\"customOptionsService.customOptionFormGroup\"\n  [formGroup]=\"customOptionsService.customOptionFormGroup\">\n\n  <!-- Traversal -->\n  <ng-container *ngFor=\"let customOptionObj of customOptionsService.customOptionsData; let i = index\">\n\n    <!-- This section will display input type fields like text, date, datetime, time, file -->\n    <div *ngIf=\"customOptionsService.typeCheck(customOptionObj.type, 'input')\" class=\"byi-cart-option byi-float-label\">\n      <label>{{customOptionObj.title | translate}}{{(customOptionObj.isRequire) ? '*' : ''}}</label>\n      <input [type]=\"customOptionsService.getInputType(customOptionObj.type)\" [id]=\"customOptionObj.id\"\n        [formControlName]=\"customOptionsService.getControlName(customOptionObj)\"\n        (input)=\"customOptionsService.calcPrice()\">\n      <span class=\"text-danger\" *ngIf=\"isError(customOptionObj)\">{{'This field is\n        required' | translate}}</span>\n    </div>\n\n    <!-- As input type file field requires addition operations and validation we need to specify it here -->\n    <div *ngIf=\"customOptionObj.type == 'file'\" class=\"byi-cart-option byi-float-label\">\n      <label>{{customOptionObj.title | translate}}{{(customOptionObj.isRequire) ? '*' : ''}}</label>\n      <input type=\"file\" [id]=\"customOptionObj.title + '_' + customOptionObj.id\"\n        (change)=\"handleFileUpload(customOptionObj, $event)\">\n      <span *ngIf=\"customOptionObj.fileTypeError\" class=\"text-danger\">{{'Invalid File' | translate}}</span>\n    </div>\n\n    <!-- This section will display select fields like dropdown, multiple dropdown -->\n    <div *ngIf=\"customOptionObj.type == 'drop_down'\" class=\"byi-cart-option\">\n      <label>{{customOptionObj.title | translate}}{{(customOptionObj.isRequire) ? '*' : ''}}</label>\n      <div class=\"byi-select\">\n        <select [id]=\"customOptionObj.id\" [formControlName]=\"customOptionsService.getControlName(customOptionObj)\"\n          (change)=\"customOptionsService.calcPrice()\">\n          <option value=\"\">{{'None' | translate}}</option>\n          <option *ngFor=\"let dropdownObj of customOptionObj.options_values\" [value]=\"dropdownObj.optionTypeId\">\n            {{dropdownObj.valueTitle}}</option>\n        </select>\n        <span class=\"caret\"></span>\n      </div>\n      <span class=\"byi-error\" *ngIf=\"isError(customOptionObj)\">{{'This field is\n        required' | translate}}</span>\n    </div>\n\n    <!-- This section will display select fields like dropdown, multiple dropdown -->\n    <div *ngIf=\"customOptionObj.type == 'multiple'\" class=\"byi-cart-option\">\n      <label>{{customOptionObj.title | translate}}{{(customOptionObj.isRequire) ? '*' : ''}}</label>\n      <div class=\"byi-select\">\n        <select [id]=\"customOptionObj.id\" [formControlName]=\"customOptionsService.getControlName(customOptionObj)\"\n          multiple (change)=\"checkForDropdownValues(customOptionObj, $event)\">\n          <option value=\"\">{{'None' | translate}}</option>\n          <option *ngFor=\"let dropdownObj of customOptionObj.options_values\"\n            [id]=\"customOptionObj.id + '_' + dropdownObj.optionTypeId\">\n            {{dropdownObj.valueTitle}}</option>\n        </select>\n      </div>\n      <!-- Error -->\n      <span class=\"byi-error\" *ngIf=\"isError(customOptionObj)\">{{'This field is\n        required' | translate}}</span>\n    </div>\n\n    <!-- This section will display selection boxes like radio button and checkbox -->\n    <div *ngIf=\"customOptionsService.typeCheck(customOptionObj.type, 'selectionBox')\"\n      class=\"byi-cart-option byi-float-checkbox\">\n      <!-- <label>{{'Select' | translate}} {{customOptionObj.title}}</label> -->\n      <label>{{'Select ' + customOptionObj.title | translate}}{{(customOptionObj.isRequire) ? '*' : ''}}</label>\n      <ng-container *ngFor=\"let selectionOptionObj of customOptionObj.options_values\">\n        <div class=\"byi-cr-option\">\n          <label class=\"byi-checkbox\">\n            <input [type]='customOptionObj.type' [id]='selectionOptionObj.optionTypeId'\n              [attr.value]='selectionOptionObj.optionTypeId'\n              [name]=\"customOptionsService.getControlName(customOptionObj)\"\n              [formControlName]=\"customOptionsService.getControlName(customOptionObj)\"\n              (change)=\"setSelectionBoxVal(customOptionObj, $event.target.checked, selectionOptionObj.optionTypeId)\"\n              [checked]=\"isChecked(customOptionObj, selectionOptionObj.optionTypeId)\">\n            <span></span>{{selectionOptionObj.valueTitle}}\n          </label>\n        </div>\n      </ng-container>\n\n      <!-- Error -->\n      <span class=\"byi-error\" *ngIf=\"isError(customOptionObj)\">{{'This field is\n        required' | translate}}</span>\n    </div>\n  </ng-container>\n</ng-container>"

/***/ }),

/***/ "./src/app/components/custom-options/custom-options.component.scss":
/*!*************************************************************************!*\
  !*** ./src/app/components/custom-options/custom-options.component.scss ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".byi-float-label input[type='file'] {\n  width: 100%;\n  height: 35px;\n  padding: 4px;\n  box-shadow: none;\n  border-radius: 4px;\n  font-size: 13px;\n  border: 1px solid #cccccc; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvd3d3L2h0bWwvQllJVjIvbWFnMjI4L2FuZ3VsYXIvc3JjL2FwcC9jb21wb25lbnRzL2N1c3RvbS1vcHRpb25zL2N1c3RvbS1vcHRpb25zLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBVztFQUNYLFlBQVk7RUFDWixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YseUJBQXlCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL2N1c3RvbS1vcHRpb25zL2N1c3RvbS1vcHRpb25zLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJ5aS1mbG9hdC1sYWJlbCBpbnB1dFt0eXBlPSdmaWxlJ10ge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMzVweDtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2NjY2M7XG59Il19 */"

/***/ }),

/***/ "./src/app/components/custom-options/custom-options.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/components/custom-options/custom-options.component.ts ***!
  \***********************************************************************/
/*! exports provided: CustomOptionsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomOptionsComponent", function() { return CustomOptionsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _custom_options_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./custom-options.service */ "./src/app/components/custom-options/custom-options.service.ts");




var CustomOptionsComponent = /** @class */ (function () {
    function CustomOptionsComponent(cdr, customOptionsService, eventService) {
        this.cdr = cdr;
        this.customOptionsService = customOptionsService;
        this.eventService = eventService;
    }
    /**
     * Angular lifecycle init function
     */
    CustomOptionsComponent.prototype.ngOnInit = function () {
        this.customOptionsService.init();
        this.customOptionsService.prepareFormGroup();
        // if error occured, scroll to top
        this.eventService.$sub('validationError', function () {
            var elem = document.getElementsByClassName('byi-cart-custom');
            elem = (elem && elem[0]) ? elem[0] : null;
            if (elem)
                setTimeout(function () {
                    elem.scrollIntoView({ behavior: "smooth" });
                }, 500);
        });
    };
    /**
     * When component is getting closd, reset data
     */
    CustomOptionsComponent.prototype.ngOnDestroy = function () {
        this.customOptionsService.init();
    };
    /**
     * this function is triggered as soon as user selects any file
     *
     * @param customOptionObj current option object
     * @param eve event
     */
    CustomOptionsComponent.prototype.handleFileUpload = function (customOptionObj, eve) {
        // if event object does not contain file, return
        if (!eve || !eve.target || !eve.target.files || !eve.target.files[0])
            return;
        // get file object from eve
        var file = eve.target.files[0];
        // check for file validation
        // here we are checking for file extensions
        // if any error occured, will return false, array of allowed exntesions otherwise
        var checkedValidationResponse = this.checkForImageValidation(customOptionObj, file);
        // if error occured, assign fileTypeError property to show error
        if (checkedValidationResponse == false) {
            customOptionObj = Object.assign(customOptionObj, { fileTypeError: true });
            return;
        }
        // if no errors found, assign allowedExtensions flag value to file object to send it in request param
        file = Object.assign(file, { allowedExtensions: checkedValidationResponse });
        // assign other important info
        file = Object.assign(file, {
            fileInfo: {
                optionId: customOptionObj.id,
                optiontitle: customOptionObj.title
            }
        });
        // push current file object to our fileList object(for final operation)
        this.customOptionsService.fileList.push(file);
        // if current object contains fileTypeError property, remove the same
        if (customOptionObj && customOptionObj.fileTypeError)
            delete customOptionObj.fileTypeError;
        // set price for the same
        this.customOptionsService.calcPrice();
    };
    /**
     * Check if current uploaded file has any errors
     * we are just checking for file extensions
     *
     * @param customOptionObj
     * @param file
     */
    CustomOptionsComponent.prototype.checkForImageValidation = function (customOptionObj, file) {
        // determine file type by file's extension
        var fileType = (file && file.type) ? file.name.substr(file.name.lastIndexOf('.') + 1) : '', 
        // prepare array of allowedExtensions string
        allowedExtensions = (customOptionObj && customOptionObj.file_extension) ? customOptionObj.file_extension.replace(/ /g, "").split(",") : [];
        // if file type is not found, return false(assuming invalid file)
        if (!fileType || fileType == '')
            return false;
        // check whether current file type is present in allowedExtensions,
        // if no, return false
        if (allowedExtensions &&
            allowedExtensions.length &&
            allowedExtensions.indexOf(fileType) < 0)
            return false;
        // else return allowedExtensions
        return allowedExtensions;
    };
    /**
     * as in case of multiple dropdown, form control failes to validate the same
     * so we need to validate it by our end
     *
     * @param customOptionObj current custom option object
     * @param eve event
     */
    CustomOptionsComponent.prototype.checkForDropdownValues = function (customOptionObj, eve) {
        // determine the value object
        var val = (eve && eve.target && eve.target.value) ? eve.target.value : [], 
        // get control name
        controlName = this.customOptionsService.getControlName(customOptionObj);
        // find value in custom option object and store response in temp object
        var temp = customOptionObj.options_values.find(function (customOptionChildObj) { return customOptionChildObj.valueTitle == val; });
        // if temp object is undefined, set error for the same
        if (!temp)
            this.cf[controlName].setErrors({ required: true });
        // set price for the same
        this.customOptionsService.calcPrice();
    };
    /**
     * This function is called when radio button/checkbox is selected
     * as in form control sometimes it does not detect values automatically, so we are doing it manually here
     *
     * @param customOptionObj current custom option object
     * @param isChecked boolean value whether is checked or not
     * @param val value of selected checkbox/radio button
     */
    CustomOptionsComponent.prototype.setSelectionBoxVal = function (customOptionObj, isChecked, val) {
        // store selected value to temp var
        var selectedVal = val;
        // determine the value, if isChecked is false we need to declare val as empty
        val = (isChecked === true) ? val : '';
        // get control name by current object
        var controlName = this.customOptionsService.getControlName(customOptionObj);
        // check if it's checkbox
        if (customOptionObj.type == 'checkbox') {
            var tmp = [].concat(this.cf[controlName].value);
            if (isChecked && tmp.indexOf(val) == -1)
                tmp.push(val);
            else if (!isChecked)
                tmp.splice(tmp.indexOf(selectedVal), 1);
            val = [].concat(tmp);
        }
        // assign value to form control object
        this.cf[controlName].setValue(val);
        // set price for the same
        this.customOptionsService.calcPrice();
    };
    /**
      * this function will check for error for current object and will return true if found any
      *
      * @param customOptionObj object of custom options
      */
    CustomOptionsComponent.prototype.isError = function (customOptionObj) {
        return customOptionObj.type != 'file' && this.customOptionsService.isSubmitted === true && this.cf[this.customOptionsService.getControlName(customOptionObj)].errors && this.cf[this.customOptionsService.getControlName(customOptionObj)].errors.required;
    };
    /**
     * checks radio buttons and checkboxes
     */
    CustomOptionsComponent.prototype.isChecked = function (customOptionObj, val) {
        var formValue = this.cf[this.customOptionsService.getControlName(customOptionObj)].value;
        if (customOptionObj.type == 'radio')
            return formValue == val;
        else if (customOptionObj.type == 'checkbox')
            return formValue.indexOf(val) >= 0;
    };
    Object.defineProperty(CustomOptionsComponent.prototype, "cf", {
        // instance to use for current form control
        get: function () { return this.customOptionsService.cf; },
        enumerable: true,
        configurable: true
    });
    CustomOptionsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[custom-options]',
            template: __webpack_require__(/*! ./custom-options.component.html */ "./src/app/components/custom-options/custom-options.component.html"),
            styles: [__webpack_require__(/*! ./custom-options.component.scss */ "./src/app/components/custom-options/custom-options.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"],
            _custom_options_service__WEBPACK_IMPORTED_MODULE_3__["CustomOptionsService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__["PubSubService"]])
    ], CustomOptionsComponent);
    return CustomOptionsComponent;
}());



/***/ }),

/***/ "./src/app/components/custom-options/custom-options.service.ts":
/*!*********************************************************************!*\
  !*** ./src/app/components/custom-options/custom-options.service.ts ***!
  \*********************************************************************/
/*! exports provided: CustomOptionsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomOptionsService", function() { return CustomOptionsService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _price_price_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../price/price.service */ "./src/app/components/price/price.service.ts");
/* harmony import */ var _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../conf-product-attr/conf-product-attr.service */ "./src/app/components/conf-product-attr/conf-product-attr.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");






var CustomOptionsService = /** @class */ (function () {
    /**
     *
     */
    function CustomOptionsService(eventService, confProductService, priceService) {
        this.eventService = eventService;
        this.confProductService = confProductService;
        this.priceService = priceService;
        // Declaration
        this.fileList = [];
        // selected custom options
        this.selectedCustomOptions = {};
        // selected custom options total
        this.selectedCustomOptionsTotal = 0;
        // in case of configurable product, we will keep total qty here for final calculations
        // for simple product, qty is already been assigned in price service
        this.qtyToBeUsed = 1;
    }
    /**
      * Assign default values here
      */
    CustomOptionsService.prototype.init = function () {
        this.isSubmitted = false;
        this.fileList = (this.fileList && this.fileList.length > 0) ? this.fileList : [];
        this.initTypeCheckObject();
    };
    /**
      * Initialize typecheck object
      */
    CustomOptionsService.prototype.initTypeCheckObject = function () {
        if (this.typeCheckValues && this.typeCheckValues.length > 0)
            return;
        this.typeCheckValues = {
            input: ['field', 'date', 'date_time', 'time'],
            selectionBox: ['checkbox', 'radio'],
            dropDown: ['drop_down', 'multiple']
        };
    };
    /**
     * Prepare custom form group
     */
    CustomOptionsService.prototype.prepareFormGroup = function () {
        var _this = this;
        if (this.customOptionFormGroup && this.customOptionFormGroup.controls)
            return;
        var group = {}, formControlName, isRequire;
        this.customOptionsData.filter(function (customOptionObj) {
            formControlName = _this.getControlName(customOptionObj);
            isRequire = (customOptionObj.type == 'file') ? false : customOptionObj.isRequire;
            group[formControlName] = _this.generateFormControl(isRequire, customOptionObj.type);
        });
        this.customOptionFormGroup = new _angular_forms__WEBPACK_IMPORTED_MODULE_4__["FormGroup"](group);
        (this.selectedCustomOptions) ? this.setSelectedCustomOptionsData() : this.checkForExistingOptions();
    };
    /**
     *
     */
    CustomOptionsService.prototype.setSelectedCustomOptionsData = function () {
        var _this = this;
        var selectedCustomOptions = this.selectedCustomOptions, objKeys = Object.keys(selectedCustomOptions), currentOptionObjVal, foundObj;
        objKeys.filter(function (key) {
            if (key != 'qty') {
                currentOptionObjVal = selectedCustomOptions[key];
                foundObj = _this.customOptionsData.find(function (customOptionObj) { return customOptionObj.id == key; });
                // if datetime, check if value is null, if so, skip
                if (foundObj.type == "date" || foundObj.type == "time" || foundObj.type == "date_time") {
                    if (currentOptionObjVal.date_internal)
                        delete currentOptionObjVal.date_internal;
                    if (Object.values(currentOptionObjVal).indexOf(null) >= 0)
                        currentOptionObjVal = false;
                }
                if (currentOptionObjVal != false)
                    _this.setSelectedCustomOptionValue(foundObj, currentOptionObjVal);
            }
        });
    };
    /**
    * Custom selected options
    */
    CustomOptionsService.prototype.checkForExistingOptions = function () {
        var customOptionsData = document.getElementsByClassName("options"), val, foundObj, super_attribute;
        // traverse through array
        for (var i = 0; i < customOptionsData.length; i++) {
            // fetch instance one by one
            super_attribute = customOptionsData[i];
            // check if value exists, return if not
            if (!super_attribute.value || super_attribute.value == '')
                continue;
            // search and return custom option object by id
            foundObj = this.customOptionsData.find(function (customOptionObj) { return customOptionObj.id == super_attribute.dataset.attrId; });
            val = super_attribute.value;
            if (foundObj.type == 'date') {
                val = val.split(",");
                val = {
                    day: val[1],
                    month: val[0],
                    year: val[2]
                };
            }
            else if (foundObj.type == "time") {
                val = val.split(",");
                val = {
                    hour: val[0],
                    minute: val[1],
                    dayPart: val[2]
                };
            }
            else if (foundObj.type == "date_time") {
                val = val.split(",");
                val = {
                    day: val[1],
                    month: val[0],
                    year: val[2],
                    hour: val[3],
                    minute: val[4],
                    dayPart: val[5] || '',
                };
            }
            // 
            this.setSelectedCustomOptionValue(foundObj, val);
        }
    };
    /**
     *
     * @param foundObj
     * @param selectedVal
     */
    CustomOptionsService.prototype.setSelectedCustomOptionValue = function (foundObj, selectedVal) {
        var val, typeArrayObj = ['multiple', 'date', 'time', 'date_time'];
        // set value, if type is dropdown, value should be in array format, original otherwise
        val = (foundObj.type == 'drop_down') ? [].concat(selectedVal) : selectedVal;
        // convert comma separated values into array
        val = (val && val.constructor == String && val.indexOf(",") >= 0) ? val.split(",") : val;
        // if type is multiple and only one value is assigned, change it to array
        val = (foundObj.type == 'multiple' && Array.isArray(val) === false) ? [].concat(val) : val;
        // few types like datetime or multiple consist array of values
        // so before procceeding ahead we will check if it's not an empty array
        if (typeArrayObj.indexOf(foundObj.type) >= 0) {
            // if object type is multiple, fetch value title and set selected to respective element
            if (foundObj.type == 'multiple') {
                // declare variables
                var tmpVal_1 = [], tmp_1, elem_1 = [];
                // as our value will be an array,
                // traverse one by one
                val.filter(function (v) {
                    // get obj having same id as val
                    tmp_1 = foundObj.options_values.find(function (optionValObj) { return optionValObj.optionTypeId == v; });
                    // if found, push it to elem array for further use
                    // and save value title to local variable which will be then replace val object
                    if (tmp_1) {
                        elem_1.push(foundObj.id + '_' + tmp_1.optionTypeId);
                        tmpVal_1.push(tmp_1.valueTitle);
                    }
                });
                // replace tmp val object with val
                val = tmpVal_1;
                // as popup takes some time to load, we need to set it after 0.5 sec
                setTimeout(function () {
                    elem_1.filter(function (ele) { return document.getElementById(ele).setAttribute('selected', 'true'); });
                }, 500);
            }
            // if type is date
            else if (foundObj.type == "date") {
                var yyyy = void 0, MM = void 0, dd = void 0;
                yyyy = val.year;
                MM = val.month;
                MM = (MM < 10) ? "0" + MM : MM;
                dd = val.day;
                dd = (dd < 10) ? "0" + dd : dd;
                val = yyyy + "-" + MM + "-" + dd;
            }
            // if type is time
            else if (foundObj.type == "time") {
                var hr = parseInt(val.hour), min = parseInt(val.minute);
                hr = (hr < 10) ? "0" + hr : hr;
                hr = (hr == 12 && val.dayPart == 'am') ? "00" : hr;
                min = (min < 10) ? "0" + min : min;
                val = hr + ":" + min;
            }
            // if type is dateTime
            else if (foundObj.type == "date_time") {
                var yyyy = void 0, MM = void 0, dd = void 0;
                yyyy = val.year;
                MM = val.month;
                MM = (MM < 10) ? "0" + MM : MM;
                dd = val.day;
                dd = (dd < 10) ? "0" + dd : dd;
                var date = yyyy + "-" + MM + "-" + dd + "T", hr = parseInt(val.hour), min = parseInt(val.minute);
                hr = (hr < 10) ? "0" + hr : hr;
                hr = (hr == 12 && val.dayPart == 'am') ? "00" : hr;
                min = (min < 10) ? "0" + min : min;
                val = date + hr + ":" + min;
            }
        }
        // finally assign these values to each form controller object
        this.cf[this.getControlName(foundObj)].setValue(val);
        this.calculateCustomOptionPrice(foundObj, val);
    };
    /**
     * parepre/get controller name based on object
     * we are using title and id of the object to prepare control name
     *
     * @param customOptionObj object of custom form
     */
    CustomOptionsService.prototype.getControlName = function (customOptionObj) {
        var formControlName = (customOptionObj.title + '_' + customOptionObj.id).split(" ").join("_");
        return formControlName;
    };
    /**
    * This function will generate and return form control object
    *
    * @param isRequired flag value that indicates whether or not required validation is required to add or not
    */
    CustomOptionsService.prototype.generateFormControl = function (isRequired, customOptionObjType) {
        var validationRule = (isRequired == true) ? _angular_forms__WEBPACK_IMPORTED_MODULE_4__["Validators"].required : '', formControlDefaultVal = '';
        if (customOptionObjType == 'multiple' || customOptionObjType == 'checkbox')
            formControlDefaultVal = [];
        return new _angular_forms__WEBPACK_IMPORTED_MODULE_4__["FormControl"](formControlDefaultVal, validationRule);
    };
    /**
     *
     */
    CustomOptionsService.prototype.validateCustomOptionsData = function () {
        var self = this, eventResponse = {
            isInvalid: self.isCustomFormHasErrors(),
            files: this.fileList
        };
        if (self.isCustomFormHasErrors() == false)
            eventResponse = Object.assign(eventResponse, {
                customOptions: this.prepareCustomOptions()
            });
        return eventResponse;
    };
    /**
    * this function performs following actions:
    * i. set isSubmitted flag to true(to display error messages)
    * ii. check for uploaded file errors
    */
    CustomOptionsService.prototype.isCustomFormHasErrors = function () {
        // IF ON LOAD CHECK IS DONE
        if (!this.customOptionFormGroup)
            return true;
        // set submit flag to true that will show errors
        this.isSubmitted = true;
        // here we will check if uploaded file has any errors    
        var uploadedFileError = this.getUploadedFileError();
        // store error flag to local variable
        var isError = (this.customOptionFormGroup && this.customOptionFormGroup.invalid) || uploadedFileError;
        // if error occured, publish an event for the same
        if (isError)
            this.eventService.$pub('validationError');
        // finally return boolean value(true if error found)
        return isError;
    };
    /**
     * check for uploaded file errors
     * if any file upload dom element has errors, we have assigned fileTypeError object to custom option object variable
     */
    CustomOptionsService.prototype.getUploadedFileError = function () {
        // variable declaration
        var totalData = this.customOptionsData.length, foundError = false, i;
        // traverse through all custom options variable
        for (i = 0; i < totalData && foundError == false; i++) {
            // if obj type is not file, skip
            if (this.customOptionsData[i].type != 'file')
                continue;
            // check if object has fileTypeError property set, change flag value and break the loop
            if (this.customOptionsData[i] && this.customOptionsData[i].fileTypeError) {
                foundError = true;
                break;
            }
        }
        // return true if errors found 
        return foundError;
    };
    /**
      * Prepare custom options payload
      */
    CustomOptionsService.prototype.prepareCustomOptions = function () {
        var _this = this;
        // set default values
        this.selectedCustomOptions = 0;
        this.selectedCustomOptionsTotal = 0;
        var formControlObj, customOptionsData = {}, val, tmp, dateArr = ["date", "date_time", "time"];
        // traversal
        this.customOptionsData.filter(function (customOptionsObj) {
            // as we are not checking file
            if (customOptionsObj.type != 'file') {
                // 
                formControlObj = Object.assign(_this.cf[_this.getControlName(customOptionsObj)]);
                // when the input type is text or date
                val = formControlObj.value;
                if (val != "" || dateArr.indexOf(customOptionsObj.type) >= 0) {
                    // when element is select
                    if (customOptionsObj.type == 'multiple') {
                        tmp = [];
                        val.filter(function (v) {
                            var tt = customOptionsObj.options_values.find(function (customOptionsObj) { return customOptionsObj.valueTitle == v; });
                            if (tt)
                                tmp.push(tt.optionTypeId);
                        });
                        val = tmp;
                    }
                    // when element if date
                    if (customOptionsObj.type == 'date') {
                        var date = new Date(val);
                        val = {
                            month: (date && date.getMonth()) ? date.getMonth() + 1 : null,
                            day: (date && date.getDate()) ? date.getDate() : null,
                            year: (date && date.getFullYear()) ? date.getFullYear() : null
                        };
                    }
                    // when element is dateTime
                    if (customOptionsObj.type == 'date_time') {
                        var date = _this.parseDateString(val), hour = (date && date.getHours()) ? date.getHours() : null, dayPart = 'am';
                        if (hour != null && hour >= 12) {
                            hour -= 12;
                            dayPart = 'pm';
                        }
                        ;
                        val = {
                            month: (date && date.getMonth()) ? date.getMonth() + 1 : null,
                            day: (date && date.getDate()) ? date.getDate() : null,
                            year: (date && date.getFullYear()) ? date.getFullYear() : null,
                            hour: hour,
                            minute: (date && date.getMinutes()) ? date.getMinutes() : null,
                            day_part: dayPart
                        };
                    }
                    // when element is time
                    if (customOptionsObj.type == 'time') {
                        if (!val) {
                            val = {
                                hour: null,
                                minute: null,
                                day_part: null
                            };
                        }
                        else {
                            var time = (val && val.indexOf(":") > 0) ? val.split(":") : val, hour = (time && time[0]) ? time[0] : null, min = (time && time[1]) ? time[1] : null, dayPart = 'am';
                            dayPart = (hour >= 12) ? 'pm' : 'am';
                            hour = (hour > 12) ? hour - 12 : hour;
                            val = {
                                hour: hour,
                                minute: min,
                                day_part: dayPart
                            };
                        }
                    }
                    // store value to custom options data object
                    if (val) {
                        if (dateArr.indexOf(customOptionsObj.type) >= 0) {
                            var values = void 0, found = void 0;
                            values = Object.values(val);
                            found = values.indexOf(null);
                            if (found == -1) {
                                _this.calculateCustomOptionPrice(customOptionsObj, val);
                            }
                        }
                        else {
                            _this.calculateCustomOptionPrice(customOptionsObj, val);
                        }
                        customOptionsData[customOptionsObj.id] = val;
                    }
                }
            }
        });
        return customOptionsData;
    };
    /**
     *
     * @param customOptionObj
     * @param selectedVal
     */
    CustomOptionsService.prototype.calculateCustomOptionPrice = function (customOptionObj, selectedVal) {
        var _this = this;
        var price;
        if (customOptionObj && customOptionObj.price) {
            price = customOptionObj.price;
            price = (price.indexOf("$") >= 0) ? parseFloat(price.substr(1)) : parseFloat(price);
            if (price > 0)
                this.selectedCustomOptionsTotal += price;
        }
        else if (customOptionObj && customOptionObj.options_values) {
            var tmp_2;
            if (Array.isArray(selectedVal)) {
                selectedVal.filter(function (val) {
                    tmp_2 = customOptionObj.options_values.find(function (optionValObj) { return optionValObj.optionTypeId == val; });
                    if (tmp_2 && tmp_2.price) {
                        price = tmp_2.price;
                        price = (price.indexOf("$") >= 0) ? parseFloat(price.substr(1)) : parseFloat(price);
                        if (price > 0)
                            _this.selectedCustomOptionsTotal += price;
                    }
                });
            }
            else {
                tmp_2 = customOptionObj.options_values.find(function (optionValObj) { return optionValObj.optionTypeId == selectedVal; });
                if (tmp_2 && tmp_2.price) {
                    price = tmp_2.price;
                    price = (price.indexOf("$") >= 0) ? parseFloat(price.substr(1)) : parseFloat(price);
                    if (price > 0)
                        this.selectedCustomOptionsTotal += price;
                }
            }
        }
    };
    /**
     *
     * @param date
     */
    CustomOptionsService.prototype.parseDateString = function (date) {
        if (date.indexOf('T') < 0)
            return null;
        date = date.replace('T', '-');
        var parts = date.split('-');
        var timeParts = parts[3].split(':');
        // new Date(year, month [, day [, hours[, minutes[, seconds[, ms]]]]])
        return new Date(parts[0], parts[1] - 1, parts[2], timeParts[0], timeParts[1]); // Note: months are 0-based
    };
    /**
     * as backend does'nt provide exact input type field, we need to manupulate the type
     * this function checks the type and return the input type for the same
     *
     * @param customOptionObjType custom options object
     */
    CustomOptionsService.prototype.getInputType = function (customOptionObjType) {
        return (customOptionObjType == 'field') ? 'text' : ((customOptionObjType == 'date_time') ? 'datetime-local' : customOptionObjType);
    };
    /**
     * this function is helpful to decide what dom element to use(eg. input, select)
     *
     * @param customOptionObjType current object type(field, drop_down, date_time etc)
     * @param typeCheckVal typecheck val category(input, dropDown, selectionBox)
     */
    CustomOptionsService.prototype.typeCheck = function (customOptionObjType, typeCheckVal) {
        return (this.typeCheckValues[typeCheckVal] && this.typeCheckValues[typeCheckVal].indexOf(customOptionObjType) >= 0);
    };
    Object.defineProperty(CustomOptionsService.prototype, "cf", {
        // instance to use for current form control
        get: function () { return this.customOptionFormGroup.controls; },
        enumerable: true,
        configurable: true
    });
    /**
     * set customOptionsData
     *
     * @param customOptionsData customOptionsData
     */
    CustomOptionsService.prototype.setCustomOptionsData = function (customOptionsDataResp) {
        this.customOptionsData = customOptionsDataResp.custom_options;
        this.selectedCustomOptions = (customOptionsDataResp.selectedCustomOptions) ? Object.assign({}, customOptionsDataResp.selectedCustomOptions) : false;
    };
    /**
     * here we will calculate custom options price each time user makes changes to custom options elements
     * finally we will call qtyUpdated function that will calculate final price by adding custom options price
     */
    CustomOptionsService.prototype.calcPrice = function () {
        this.prepareCustomOptions();
        this.priceService.extraPriceToBeAdded.customOptionsPrice = this.selectedCustomOptionsTotal;
        this.priceService.addThisPrice();
    };
    CustomOptionsService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_2__["ConfProductAttrService"],
            _price_price_service__WEBPACK_IMPORTED_MODULE_1__["PriceService"]])
    ], CustomOptionsService);
    return CustomOptionsService;
}());



/***/ }),

/***/ "./src/app/components/customer-login/customer-login.component.html":
/*!*************************************************************************!*\
  !*** ./src/app/components/customer-login/customer-login.component.html ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<button *ngIf=\"mainService.isAdmin == false\" (click)=\"openModal()\" class=\"byiu-right-icon\"\n  [class.byiu-logout-icon]=\"mainService.userLoggedIn === true\" type=\"button\"\n  tooltip=\"{{(mainService.userLoggedIn === true) ? 'Logout' : 'Customer Login' | translate}}\" placement=\"bottom\">\n  <svg class=\"icon icon-user\" *ngIf=\"mainService.userLoggedIn === false\" viewBox=\"0 0 30 30\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-user\"></use>\n  </svg>\n  <svg class=\"icon icon-logout\" *ngIf=\"mainService.userLoggedIn === true\" viewBox=\"0 0 30 30\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-logout\"></use>\n  </svg>\n</button>\n\n<!-- Login Form Modal -->\n<ng-template #loginModal>\n  <form [formGroup]=\"loginForm\" (ngSubmit)=\"loginCustomer()\">\n\n    <!-- Modal header section -->\n    <div class=\"modal-header\">\n      <h4 class=\"modal-title pull-left\">{{'Customer Login' | translate}}</h4>\n      <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"closeModal()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n\n    <!-- Modal body section -->\n    <div class=\"modal-body\">\n      <div class=\"byi-login-tab\">\n        <div class=\"byi-float-form\">\n\n          <!-- Login Email Section -->\n          <div class=\"byi-float-label\">\n            <label>{{'Email' | translate}}*</label>\n            <input type=\"text\" name=\"loginEmail\" [(ngModel)]=\"loginEmail\" placeholder=\"{{'Email' | translate}}\"\n              formControlName=\"loginEmail\" [ngClass]=\"{ 'is-invalid': submitted && lf.loginEmail.errors }\" />\n            <!-- Login Email Error Message -->\n            <div *ngIf=\"submitted && lf.loginEmail.errors\" class=\"byi-error\">\n              <ng-container *ngIf=\"lf.loginEmail.errors.required\">{{'Email is required' | translate}}</ng-container>\n              <ng-container *ngIf=\"lf.loginEmail.errors.email\">{{'Invalid Email' | translate}}</ng-container>\n            </div>\n          </div>\n\n          <!-- Login Password Section -->\n          <div class=\"byi-float-label\">\n            <label>{{'Password' | translate}}*</label>\n            <input type=\"password\" name=\"loginPassword\" [(ngModel)]=\"loginPassword\"\n              placeholder=\"{{'Password' | translate}}\" formControlName=\"loginPassword\"\n              [ngClass]=\"{ 'is-invalid': lf.loginPassword.errors }\" />\n\n            <!-- Login Password Error -->\n            <div *ngIf=\"submitted && lf.loginPassword.errors\" class=\"byi-error\">\n              <ng-container *ngIf=\"lf.loginPassword.errors.required\">{{'Password is required' | translate}}\n              </ng-container>\n            </div>\n          </div>\n\n          <!-- Button Section -->\n          <div class=\"byi-form-action\">\n            <button class=\"byi-btn\" type=\"submit\">{{'Login' | translate}}</button>\n            <p class=\"byifa-link\">\n              <a class=\"register-popup\" href=\"javascript:void(0)\"\n                (click)=\"openModal(true,isSave)\">{{'Create An Account' | translate}}</a>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End of modal body -->\n  </form>\n</ng-template>\n\n<!-- Registration Form Modal -->\n<ng-template #registerModal>\n  <form [formGroup]=\"registerForm\" (ngSubmit)=\"registerCustomer()\">\n\n    <!-- Modal header section -->\n    <div class=\"modal-header\">\n      <h4 class=\"modal-title pull-left\">{{'Customer Registration' | translate}}</h4>\n      <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"closeModal()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n\n    <!-- Modal body section -->\n    <div class=\"modal-body\">\n      <div class=\"byi-login-tab\">\n        <div class=\"byi-float-form\">\n\n          <!-- First Name Section -->\n          <div class=\"byi-float-label\">\n            <label>{{'First Name' | translate}}*</label>\n            <input type=\"text\" name=\"firstName\" [(ngModel)]=\"firstName\" placeholder=\"{{'First Name' | translate}}\"\n              formControlName=\"firstName\" [ngClass]=\"{ 'is-invalid': submitted && rf.firstName.errors }\" />\n            <!-- First Name Error Message -->\n            <div *ngIf=\"submitted && rf.firstName.errors\" class=\"byi-error\">\n              <ng-container *ngIf=\"rf.firstName.errors.required\">{{'First Name is required' | translate}}</ng-container>\n            </div>\n          </div>\n\n          <!-- Last Name Section -->\n          <div class=\"byi-float-label\">\n            <label>{{'Last Name' | translate}}*</label>\n            <input type=\"text\" name=\"lastName\" [(ngModel)]=\"lastName\" placeholder=\"{{'Last Name' | translate}}\"\n              formControlName=\"lastName\" [ngClass]=\"{ 'is-invalid': submitted && rf.lastName.errors }\" />\n\n            <!-- Last Name Error Message -->\n            <div *ngIf=\"submitted && rf.lastName.errors\" class=\"byi-error\">\n              <ng-container *ngIf=\"rf.lastName.errors.required\">{{'Last Name is required' | translate}}</ng-container>\n            </div>\n          </div>\n\n          <!-- Registration Email Section -->\n          <div class=\"byi-float-label\">\n            <label>{{'Email' | translate}}*</label>\n            <input type=\"text\" name=\"email\" [(ngModel)]=\"email\" placeholder=\"{{'Email' | translate}}\"\n              formControlName=\"email\" [ngClass]=\"{ 'is-invalid': submitted && rf.email.errors }\" />\n\n            <!-- Registration Email Error Message -->\n            <div *ngIf=\"submitted && rf.email.errors\" class=\"byi-error\">\n              <ng-container *ngIf=\"rf.email.errors.required\">{{'Email is required' | translate}}</ng-container>\n              <ng-container *ngIf=\"rf.email.errors.email\">{{'Invalid Email' | translate}}</ng-container>\n            </div>\n          </div>\n\n          <!-- Signup for newsletter section -->\n          <div class=\"byi-float-checkbox\">\n            <label class=\"byi-checkbox\">\n              <input name=\"newsletter\" type=\"checkbox\" (click)=\"isSubscribe = !isSubscribe\">\n              <span></span>\n              {{'Sign Up for Newsletter' | translate}}\n            </label>\n          </div>\n\n          <!-- Password Section -->\n          <div class=\"byi-float-label\">\n            <label>{{'Password' | translate}}*</label>\n            <input type=\"password\" name=\"password\" [(ngModel)]=\"password\" placeholder=\"{{'Password' | translate}}\"\n              formControlName=\"password\" [ngClass]=\"{ 'is-invalid': rf.password.errors }\" />\n\n            <!-- Password Error -->\n            <div *ngIf=\"submitted && rf.password.errors\" class=\"byi-error\">\n              <ng-container *ngIf=\"rf.password.errors.required\">{{'Password is required' | translate}}</ng-container>\n              <ng-container *ngIf=\"rf.password.errors.minlength\">\n                {{'Minimum length of this field must be equal or greater than 8 symbols' | translate}}\n              </ng-container>\n            </div>\n          </div>\n\n          <!-- Confirm Password Section -->\n          <div class=\"byi-float-label\">\n            <label>{{'Confirm Password' | translate}}*</label>\n            <input type=\"password\" name=\"confirmPassword\" [(ngModel)]=\"confirmPassword\"\n              placeholder=\"{{'Confirm Password' | translate}}\" formControlName=\"confirmPassword\"\n              [ngClass]=\"{ 'is-invalid': rf.confirmPassword.errors }\" />\n\n            <!-- Confirm Password Error -->\n            <div *ngIf=\"submitted && rf.confirmPassword.errors\" class=\"byi-error\">\n              <ng-container *ngIf=\"rf.confirmPassword.errors.required\">{{'Confirm Password is required' | translate}}\n              </ng-container>\n              <ng-container *ngIf=\"rf.confirmPassword.errors.mustMatch\">\n                {{'Confirm Password must match with password field' | translate}}\n              </ng-container>\n            </div>\n          </div>\n\n          <!-- Button Section -->\n          <div class=\"byi-form-action\">\n            <button class=\"byi-btn\" type=\"submit\">{{'Sign Up' | translate}}</button>\n            <p class=\"byifa-link\">\n              <a href=\"javascript:void(0)\" (click)=\"openModal(false,isSave)\">{{'Back' | translate}}</a>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End of Modal header section -->\n  </form>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/customer-login/customer-login.component.scss":
/*!*************************************************************************!*\
  !*** ./src/app/components/customer-login/customer-login.component.scss ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY3VzdG9tZXItbG9naW4vY3VzdG9tZXItbG9naW4uY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/customer-login/customer-login.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/components/customer-login/customer-login.component.ts ***!
  \***********************************************************************/
/*! exports provided: CustomerLoginComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomerLoginComponent", function() { return CustomerLoginComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _helper_must_match_validator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../_helper/must-match.validator */ "./src/app/_helper/must-match.validator.ts");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");









var CustomerLoginComponent = /** @class */ (function () {
    /**
     * Dependancy Injector
     *
     * @param modalService
     * @param eventService
     * @param formBuilder
     * @param mainService
     */
    function CustomerLoginComponent(eventService, formBuilder, mainService, translate, cdr, canvasService) {
        this.eventService = eventService;
        this.formBuilder = formBuilder;
        this.mainService = mainService;
        this.translate = translate;
        this.cdr = cdr;
        this.canvasService = canvasService;
        this.submitted = false;
        this.isSubscribe = false;
        this.isSave = false;
    }
    /**
     * Init Actions
     */
    CustomerLoginComponent.prototype.ngOnInit = function () {
        this.init();
        this.subscribeEvents();
        this.checkForCustomerLogin();
    };
    /**
     * This method check for customer whether it is login or not
     * @return {[type]} [description]
     */
    CustomerLoginComponent.prototype.checkForCustomerLogin = function () {
        var _this = this;
        // prepare url and payload
        var url = 'productdesigner/Customer/checkForLogin', param = {};
        // hit post request
        this.mainService.post(url, param, true).then(function (resp) {
            // if customer is logged in
            if (resp && resp.status == "success") {
                if (resp.customer_login) {
                    _this.mainService.userLoggedIn = true;
                    _this.eventService.$pub('customerLoggedIn', false);
                    _this.mainService.loggedInUserId = resp.customer_id;
                }
            }
        }).catch(function (err) {
            console.log(_this.translate.instant("Error in logging in: "), err);
        });
    };
    /**
     *
     */
    CustomerLoginComponent.prototype.init = function () {
        this.passwordMinLength = 8;
        this.initFormGroup();
        this.initData();
    };
    /**
     * Prepare register and login form group objects
     */
    CustomerLoginComponent.prototype.initFormGroup = function () {
        // register form builder
        this.registerForm = this.formBuilder.group({
            firstName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].required],
            lastName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].required],
            email: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].required, _angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].email]],
            subscribe: [''],
            password: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].required, _angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].minLength(this.passwordMinLength)]],
            confirmPassword: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].required]]
        }, {
            validator: Object(_helper_must_match_validator__WEBPACK_IMPORTED_MODULE_6__["MustMatch"])('password', 'confirmPassword')
        });
        // Login form builder
        this.loginForm = this.formBuilder.group({
            loginEmail: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].required, _angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].email]],
            loginPassword: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_5__["Validators"].required]
        });
    };
    /**
     * Subscribe events
     */
    CustomerLoginComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('openLoginModal').subscribe(function (isSave) { return _this.openModal(false, isSave); });
    };
    /**
     * Open Modal
     * @param isReg
     */
    CustomerLoginComponent.prototype.openModal = function (isReg, isSave) {
        if (isReg === void 0) { isReg = false; }
        if (isSave === void 0) { isSave = false; }
        // save design flag
        this.isSave = isSave;
        // if user already logged in
        if (this.mainService.userLoggedIn === true) {
            this.mainService.logout();
            this.mainService.lastSavedData = [];
            return;
        }
        // set submitted flag to false to hide error message from current modal
        this.submitted = false;
        // determine template object based in isReg parametere
        var template = (isReg === false) ? this.loginModalTemplate : this.registerModalTemplate, 
        // determine modal class based on isReg parameter
        modalClass = (isReg === false) ? "byi-login-modal" : "byi-register:modal";
        // if modalRef is already there, ie. if modal is already open, close it first
        // this happens when clicking on Register button in login popup
        if (this.modalRef != undefined)
            this.closeModal();
        // open modal
        this.modalRef = this.mainService.openThisModal(template, modalClass);
    };
    /**
     * Reset
     */
    CustomerLoginComponent.prototype.initData = function () {
        // // reset Login form and errors
        // this.loginForm.reset();
        // for (let i in this.loginForm.controls) {
        //   this.loginForm.controls[i].setErrors(null);
        // }
        // // reste registration form and errors
        // this.registerForm.reset();
        // for (let i in this.registerForm.controls) {
        //   this.registerForm.controls[i].setErrors(null);
        // }
        // as subscribe for newsletters is not form control object
        // we manually need to set it false
        this.loginEmail = '';
        this.loginPassword = '';
        this.firstName = '';
        this.lastName = '';
        this.email = '';
        this.password = '';
        this.confirmPassword = '';
        this.isSubscribe = false;
    };
    /**
     * When user hits on login button
     */
    CustomerLoginComponent.prototype.loginCustomer = function () {
        var _this = this;
        // set flag
        this.submitted = true;
        // stop here if form is invalid
        if (this.loginForm.invalid) {
            return;
        }
        // prepare url and payload
        var url = 'productdesigner/Customer/login', param = {
            customer_email: this.loginEmail,
            customer_password: this.loginPassword
        };
        // hit post request
        this.mainService.post(url, param, true).then(function (resp) {
            // if login was successfull
            if (resp && resp.status == "success") {
                _this.setCustomerLoginData(resp);
                if (!_this.isSave) {
                    _this.mainService.swal(_this.translate.instant("Success"), _this.translate.instant("Logged in successfully"), 'success').finally(function () { return _this.closeModal(); });
                }
                else {
                    _this.closeModal();
                }
                _this.init();
                _this.eventService.$pub('customerLoggedIn', _this.isSave);
            }
            // if something went wrong with login process
            else {
                var msg = resp.log;
                if (msg.lastIndexOf("-") >= 0)
                    msg = msg.substr(msg.lastIndexOf("-") + 2);
                _this.mainService.swal(_this.translate.instant("Error"), _this.translate.instant(msg), 'error');
            }
        }).catch(function (err) {
            console.log(_this.translate.instant("Error in logging in: "), err);
        });
    };
    /**
     * When user hits on register button
     */
    CustomerLoginComponent.prototype.registerCustomer = function () {
        var _this = this;
        // set flag to true for displaying error message(if any)
        this.submitted = true;
        // if form is invalid, return from here
        if (this.registerForm.invalid) {
            return;
        }
        // prepare url and payload
        var url = "productdesigner/Customer/Register", param = {
            firstname: this.firstName,
            lastname: this.lastName,
            email: this.email,
            password: this.password,
            password_confirmation: this.confirmPassword,
            isSubscribed: this.isSubscribe,
            customer_action: 'registration'
        };
        // hit post request
        this.mainService.post(url, param, true).then(function (resp) {
            // if registration was successfull
            if (resp && resp.status == "success") {
                _this.setCustomerLoginData(resp);
                if (!_this.isSave) {
                    _this.mainService.swal(_this.translate.instant("Registered"), _this.translate.instant("Registered Successfully!"), "success").finally(function () { return _this.closeModal(); });
                }
                else {
                    _this.closeModal();
                }
                _this.init();
                _this.eventService.$pub('customerLoggedIn', _this.isSave);
            }
            // if registration failed
            else {
                var errorMsg = resp.message;
                //if (errorMsg.lastIndexOf("-") >= 0) errorMsg.substr(errorMsg.lastIndexOf("-") + 2);
                _this.mainService.swal("Error", errorMsg, "error");
            }
        }).catch(function (err) {
            console.log(_this.translate.instant("Error in registering user: "), err);
        });
    };
    /**
     * After successfully loggedin/registered, we will set logged in user's data
     *
     * @param resp response object
     */
    CustomerLoginComponent.prototype.setCustomerLoginData = function (resp) {
        this.submitted = false;
        this.mainService.userLoggedIn = true;
        this.mainService.loggedInUserId = resp.customer_id;
    };
    /**
     * Close Modal
     */
    CustomerLoginComponent.prototype.closeModal = function () {
        this.modalRef.hide();
    };
    Object.defineProperty(CustomerLoginComponent.prototype, "lf", {
        // get control object for login form
        get: function () { return this.loginForm.controls; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CustomerLoginComponent.prototype, "rf", {
        // get control object for register form
        get: function () { return this.registerForm.controls; },
        enumerable: true,
        configurable: true
    });
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ViewChild"])('loginModal'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomerLoginComponent.prototype, "loginModalTemplate", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ViewChild"])('registerModal'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomerLoginComponent.prototype, "registerModalTemplate", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], CustomerLoginComponent.prototype, "loaderComponent", void 0);
    CustomerLoginComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_4__["Component"])({
            selector: '[customer-login]',
            template: __webpack_require__(/*! ./customer-login.component.html */ "./src/app/components/customer-login/customer-login.component.html"),
            styles: [__webpack_require__(/*! ./customer-login.component.scss */ "./src/app/components/customer-login/customer-login.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormBuilder"],
            src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__["TranslateService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_4__["ChangeDetectorRef"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_8__["CanvasService"]])
    ], CustomerLoginComponent);
    return CustomerLoginComponent;
}());



/***/ }),

/***/ "./src/app/components/design-area/design-area.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/components/design-area/design-area.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-output\">\n\t<div class=\"byi-design\">\n\t\t<div class=\"print-area-warning\" [hidden]=\"mainService.nameNumber || mainService.isGenerateSVGDesign\" [class.show]=\"displayWarning\" *ngIf=\"displayWarning\">\n\t\t\t<span>{{print_warning | translate}}</span>\n\t\t</div>\n\t\t<div class=\"low-resolution-warning\" [hidden]=\"mainService.nameNumber || mainService.isGenerateSVGDesign\" [class.show]=\"lowresolution\" *ngIf=\"lowresolution\">\n\t\t\t<span>{{resolution_warning | translate}}</span>\n\t\t</div>\n\t\t<layer-management [hidden]=\"mainService.nameNumber || mainService.isGenerateSVGDesign\"></layer-management>\t\t\n\t\t<product-options [hidden]=\"mainService.nameNumber || mainService.isGenerateSVGDesign\" *ngIf=\"productType == 'configurable'\" [selected_super_attributes]=\"selected_super_attributes\">\n\t\t</product-options>\n\t\t<ng-container *ngIf=\"allImageDimensions != undefined\">\n\t\t\t<div class=\"byi-svg-editor-box\"\n\t\t\t\t[ngStyle]=\"{'height':calCulateDragContainer('height')+'px','width':calCulateDragContainer('width')+'px'}\"\n\t\t\t\t[ngClass]=\"{'dragscroll': activeDrag }\">\n\t\t\t\t<ng-container *ngFor=\"let currentImageDimensions of allImageDimensions\">\n\t\t\t\t\t<div id=\"productdesigner-image-{{currentImageDimensions.image_id}}\"\n\t\t\t\t\t\tclass=\"product-designer-main-content\"\n\t\t\t\t\t\t[ngStyle]=\"{'background': 'url(' + currentImageDimensions.url + ') center center / 100% no-repeat','height':calCulateImageHeightWidth(currentImageDimensions,'height')+'px','width':calCulateImageHeightWidth(currentImageDimensions,'width')+'px'}\"\n\t\t\t\t\t\t[ngClass]=\"{active: currentImageDimensions.image_id === activeImageId}\">\n\n\t\t\t\t\t\t<div class=\"design-container\" id=\"designArea-{{dim.designareaId}}\"\n\t\t\t\t\t\t\tattr.selection_area=\"@{{dim.image_id}}&{{dim.designareaId}}\"\n\t\t\t\t\t\t\tattr.designareaid=\"{{dim.designareaId}}\" *ngFor=\"let dim of currentImageDimensions.dim\"\n\t\t\t\t\t\t\t[ngStyle]=\"{'height':calCulateDimWithCanvasRatio(dim,'height')+ 'px','width':calCulateDimWithCanvasRatio(dim,'width')+ 'px','margin-left':calCulateDimWithCanvasRatio(dim,'left')+ 'px','margin-top':calCulateDimWithCanvasRatio(dim,'top')+ 'px','position':'absolute'}\"\n\t\t\t\t\t\t\t(click)=\"setActiveCanvas(dim.image_id , dim.designareaId)\">\n\t\t\t\t\t\t\t<canvas id=\"canvas-{{dim.designareaId}}\" style=\"z-index: 9999\"></canvas>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ng-container>\n\t\t\t\t<context-menu></context-menu>\n\t\t\t</div>\n\t\t</ng-container>\n\t</div>\n\t<image-sides *ngIf=\"allImageIds != undefined\" [activeImageId]=\"activeImageId\">\n\t</image-sides>\n</div>\n<div object-alignment-position></div>"

/***/ }),

/***/ "./src/app/components/design-area/design-area.component.scss":
/*!*******************************************************************!*\
  !*** ./src/app/components/design-area/design-area.component.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZGVzaWduLWFyZWEvZGVzaWduLWFyZWEuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/design-area/design-area.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/design-area/design-area.component.ts ***!
  \*****************************************************************/
/*! exports provided: DesignAreaComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DesignAreaComponent", function() { return DesignAreaComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../conf-product-attr/conf-product-attr.service */ "./src/app/components/conf-product-attr/conf-product-attr.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_design_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/design.service */ "./src/app/services/design.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! fabric */ "./node_modules/fabric/dist/fabric.js");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(fabric__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");









var DesignAreaComponent = /** @class */ (function () {
    function DesignAreaComponent(mainService, canvasService, cacheService, eventService, confProductService, designService) {
        var _this = this;
        this.mainService = mainService;
        this.canvasService = canvasService;
        this.cacheService = cacheService;
        this.eventService = eventService;
        this.confProductService = confProductService;
        this.designService = designService;
        this.allImageDimensions = [];
        this.allProductsData = [];
        this.allImageIds = [];
        this.activeDrag = true;
        this.clipX = {};
        this.clipY = {};
        this.selected_super_attributes = {};
        this.lowresolution = false;
        this.displayWarning = false;
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            _this.activeDrag = false;
            setTimeout(function () {
                dragscroll.reset();
            }, 100);
        });
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            _this.activeDrag = false;
            setTimeout(function () {
                dragscroll.reset();
            }, 100);
        });
        this.eventService.$sub('objectSelectionCleared', function (obj) {
            _this.activeDrag = true;
            setTimeout(function () {
                dragscroll.reset();
            }, 100);
        });
    }
    DesignAreaComponent.prototype.ngOnInit = function () {
        this.getProductParams();
        this.loadProduct(this.selected_super_attributes);
        this.subscribeEvents();
        this.getConfiguration();
    };
    DesignAreaComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.eventService.$sub('designLoaded', function (data) {
            if (_this.mainService.isGenerateSVGDesign) {
                for (var _i = 0, _a = Object.keys(_this.canvasService.containerCanvases); _i < _a.length; _i++) {
                    var key = _a[_i];
                    var canvas = _this.canvasService.containerCanvases[key];
                    var obj = void 0, canvasObjects = _this.canvasService.getObjects(canvas);
                    for (var _b = 0, canvasObjects_1 = canvasObjects; _b < canvasObjects_1.length; _b++) {
                        obj = canvasObjects_1[_b];
                        var properties = { selectable: false };
                        _this.canvasService.deselectAllObjects();
                        if (obj) {
                            var params = {
                                obj: obj,
                                properties: properties,
                                crudServiceString: 'this.updateObjectService',
                                canvas: canvas
                            };
                            _this.canvasService.objectCRUD(params);
                        }
                    }
                }
                var designArea = document.getElementsByClassName('design-container');
                for (var i = 0; i < designArea.length; i++) {
                    designArea[i].children[1].innerHTML = '<style></style>';
                }
            }
        });
    };
    /**
     * fetch Product's options
     * @return Object
     */
    DesignAreaComponent.prototype.getProductParams = function () {
        var super_attributes = document.getElementsByClassName("super_attribute");
        for (var i = 0; i < super_attributes.length; i++) {
            var super_attribute = super_attributes[i];
            if (super_attribute.value) {
                this.selected_super_attributes[super_attribute.dataset.attrId] = super_attribute.value;
            }
        }
        return this.selected_super_attributes;
    };
    /**
    * Events are been published from several components
    * Whichever events are required to be subscribed in this component, this method will handle it
    */
    DesignAreaComponent.prototype.subscribeEvents = function () {
        var _this = this;
        // For Low resolution Warning
        var self = this;
        this.eventService.$sub('canvasObjectScaled', function (obj) {
            _this.lowresolution = _this.canvasService.calculateLowResolutionWarning();
        });
        this.eventService.$sub('objectAdded', function (obj) {
            _this.lowresolution = _this.canvasService.calculateLowResolutionWarning();
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            _this.lowresolution = _this.canvasService.calculateLowResolutionWarning();
            _this.objOutsideDesignArea();
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            _this.lowresolution = _this.canvasService.calculateLowResolutionWarning();
            _this.displayWarning = false;
        });
        // Subscribe Image Side change event to set current image id
        this.eventService.$sub('imageSideChangeBefore', function (data) {
            // this.canvasService.deselectAllObjects();
            if (typeof data == 'object' && data.hasOwnProperty('image_id')) {
                _this.setCurrentImageId(data.image_id, data.design_area_id);
            }
            else {
                _this.setCurrentImageId(data);
            }
        });
        // Subscribe product change event to load associated product
        this.eventService.$sub('productChanged', function (selectedOption) {
            _this.eventService.$pub('showMainLoader');
            _this.loadSelectedAssociatedProduct(selectedOption);
        });
        // Subscribe product zoom
        this.eventService.$sub('zoomCanvas', function (zoom) {
            _this.reGenerateCanvas(zoom);
        });
        // Subscribe product zoom
        this.eventService.$sub('windowResize', function () {
            /**
             * This method will update canvas based on window size
             */
            _this.reGenerateCanvas(_this.canvasService.zoom);
        });
        this.eventService.$sub('canvasObjectModified', function (obj) {
            _this.lowresolution = _this.canvasService.calculateLowResolutionWarning();
            _this.objOutsideDesignArea();
        });
    };
    /**
    * [Load Product Images, Dimensions and image sides]
    */
    DesignAreaComponent.prototype.loadProduct = function (selectedOptions) {
        var _this = this;
        var selectedOptionsString = '';
        if (selectedOptions) {
            selectedOptionsString = this.mainService.joinObject(selectedOptions);
        }
        var designId = (this.designService.designId) ? this.designService.designId : '';
        /**
         * Dynamic Key
         */
        var optionCacheKey = '';
        for (var _i = 0, _a = this.mainService.otherOptions; _i < _a.length; _i++) {
            var option = _a[_i];
            var key = Object.keys(option)[0];
            var value = Object.values(option)[0];
            optionCacheKey += key + '_' + value;
        }
        var params = {
            'product_id': this.mainService.productId,
            'selectedOptions': selectedOptions,
            'otherOptions': this.mainService.otherOptions,
            'optionCacheKey': optionCacheKey
        }, url = 'productdesigner/index/loadProduct', cacheKey = 'loadProduct' + this.mainService.productId + '-' + this.mainService.baseUrl + selectedOptionsString + designId + optionCacheKey;
        params = (this.designService.designId) ? Object.assign(params, { designId: this.designService.designId }) : params;
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            if (data && data.productType)
                _this.mainService.productType = data.productType;
            if (data && data.associatedProductId)
                _this.canvasService.associatedProductId = data.associatedProductId;
            _this.confProductService.defaultSelectedOptionsValues = data.selectedOptionsValues;
            _this.processLoadProduct(data);
            _this.mainService.loadedProductData = data;
            _this.eventService.$pub('loadProduct', data);
            if (data.productType == "simple") {
                _this.cacheService.set("product-tooltip-data", false, { maxAge: 0 });
            }
        }).catch(function (err) { return console.log(err); });
    };
    /**
    Get Configuration
    **/
    DesignAreaComponent.prototype.getConfiguration = function () {
        var _this = this;
        var configPaths = [
            'productdesigner/dynamic_message/print_area_warning',
            'productdesigner/dynamic_message/low_resolution_warning'
        ];
        var params = { configPaths: configPaths, key: 'warning-messages' }, url = 'productdesigner/index/getConfiguration', cacheKey = 'configuration-warning-messages' + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            _this.print_warning = (data[0] != null) ? data[0] : 'Some objects are outside the printing area and should be adjusted';
            _this.resolution_warning = (data[1] != null) ? data[1] : 'Low Resolution Warning';
        }).catch(function (err) { return console.log(err); });
    };
    /**
    * [Process response data of load Product request]
    * @param {object} data [product image, dimesions, image sides data]
    */
    DesignAreaComponent.prototype.processLoadProduct = function (data) {
        this.productType = data.productType;
        if (data.dimensions.length > 0) {
            this.mainService.loadedProductData = data;
            this.canvasService.allImages = this.allImageDimensions = data.dimensions;
            this.mainService.associatedProductId = data.associatedProductId;
            this.selectedOptionsString = this.mainService.joinObject(data.selectedOptions);
            this.allProductsData[this.selectedOptionsString] = data;
            /**
             * [activeImageId set active image side]
             */
            this.canvasService.firstImageId = this.canvasService.activeImageId = this.activeImageId = data.dimensions[0].image_id;
            this.canvasRatio = data.canvasRatio;
            var self_1 = this;
            setTimeout(function () {
                self_1.createCanvas(data);
            }, 100);
        }
        this.eventService.$pub('processLoadProduct');
    };
    /**
    * [Create canvas based on load product data]
    * @param  data [dimension data]
    */
    DesignAreaComponent.prototype.createCanvas = function (data) {
        var _this = this;
        /**
         * [All images dimesions]
         */
        this.allImageIds = [];
        this.canvasService.containerCanvases = [];
        this.canvasService.allImagesWithIds = {};
        for (var key in this.allImageDimensions) {
            var currentImage = this.allImageDimensions[key];
            this.allImageIds.push(currentImage.image_id);
            this.canvasService.allImagesWithIds[currentImage.image_id] = currentImage;
            var counter = 0;
            for (var key_1 in currentImage.dim) {
                var dim = currentImage.dim[key_1];
                this.initCanvasRatio(dim, currentImage);
                var canvas = new fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].Canvas('canvas-' + dim.designareaId, {
                    selection: this.mainService.enableMultipleSelection
                });
                canvas.setHeight(this.calCulateDimWithCanvasRatio(dim, 'height'));
                canvas.setWidth(this.calCulateDimWithCanvasRatio(dim, 'width'));
                canvas.renderAll();
                this.setCanvasProperties(canvas, dim, currentImage);
                this.clipCanvas(canvas, dim);
                if (dim.mask) {
                    this.applyMakig(canvas, dim);
                }
                this.eventService.$pub('canvasCreated', canvas);
                /**
                 * [All dimensions of single image]
                 */
                this.canvasService.containerCanvases['@' + currentImage.image_id + '&' + dim.designareaId] = canvas;
                /**
                 * Set design area black border
                 */
                this.setDesignAreaBorder(dim, '');
                /**
                 * [if image id is active image side and first dimension]
                 */
                if (currentImage.image_id == this.activeImageId && counter == 0) {
                    this.canvasService.currentCanvas = canvas;
                    this.activeDesignAreaId = dim.designareaId;
                    this.setDesignAreaBorderCurrentCanvas(dim.designareaId);
                }
                counter++;
            }
        }
        this.eventService.$pub('allcanvasCreated', this.allImageIds);
        setTimeout(function () {
            _this.eventService.$pub('hideMainLoader');
        }, 300);
    };
    /**
    * [set properites of canvas]
    * @param  canvas       [current canvas]
    * @param  dim          [current dimension]
    * @param  currentImage [current image data]
    */
    DesignAreaComponent.prototype.setCanvasProperties = function (canvas, dim, currentImage) {
        canvas.controlsAboveOverlay = true;
        canvas.preserveObjectStacking = true;
        canvas.stateful = true;
        canvas.designarea_id = dim.designareaId;
        canvas.image_id = dim.image_id;
        canvas.image_side = currentImage.image_side;
        canvas.dim = dim;
        canvas.size = currentImage.size;
        canvas.url = currentImage.url;
        fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].Object.NUM_FRACTION_DIGITS = 17;
    };
    /**
    * [Clip canvas based on clip value]
    * @param  canvas [current canvas]
    * @param  dim    [dimension]
    */
    DesignAreaComponent.prototype.clipCanvas = function (canvas, dim) {
        //if(!(this.canvasService.clipX[dim.designareaId] == 0 && this.canvasService.clipY[dim.designareaId] == 0)){
        var position = this.calCulateBorderPosition(dim);
        var rect = new fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].Rect({
            left: position['left'],
            top: position['top'],
            width: parseFloat(dim.width) / this.canvasService.scaleFactor,
            height: parseFloat(dim.height) / this.canvasService.scaleFactor,
            fill: 'transparent',
            objectCaching: false,
            selectable: false,
            originX: 'left',
            originY: 'top',
        });
        /*canvas.clipTo = function (ctx) {
            ctx.save();
            ctx.transform(canvas.getZoom(), 0, 0, canvas.getZoom(), 0, 0);
            rect.render(ctx);
            ctx.restore();
        };*/
        canvas.clipPath = rect;
    };
    DesignAreaComponent.prototype.applyMakig = function (canvas, dim) {
        var _this = this;
        var self = this;
        if (!dim.pathMasking && dim.mask) {
            fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].loadSVGFromURL(dim.mask, function (svgImgObject, options) {
                var imgObj = fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].util.groupSVGElements(svgImgObject, options);
                var weight = canvas.width - _this.clipX[dim.designareaId];
                var height = canvas.height - _this.clipY[dim.designareaId];
                imgObj.left = _this.clipX[dim.designareaId] / 2;
                imgObj.top = _this.clipY[dim.designareaId] / 2;
                imgObj.fill = 'transparent';
                imgObj.objectCaching = false;
                imgObj.scaleY = (height) / imgObj.height;
                imgObj.scaleX = (weight) / imgObj.width;
                /*canvas.clipTo = function (ctx) {
                    ctx.save();
                    ctx.transform(canvas.getZoom(), 0, 0, canvas.getZoom(), 0, 0);
                    imgObj.render(ctx);
                    ctx.restore();
                };*/
                canvas.clipPath = imgObj;
                canvas.renderAll();
            });
        }
    };
    /**
    * [initiate canvasRatio value based on product dimension]
    * @param  dim          [dimension]
    * @param  currentImage [current image data]
    */
    DesignAreaComponent.prototype.initCanvasRatio = function (dim, currentImage) {
        if (currentImage.enable_handles == true) {
            if (parseFloat(dim.width) + parseFloat(this.canvasRatio) > currentImage.width) {
                this.canvasService.clipX[dim.designareaId] = this.clipX[dim.designareaId] = currentImage.width / parseFloat(dim.width);
            }
            else {
                this.canvasService.clipX[dim.designareaId] = this.clipX[dim.designareaId] = parseFloat(this.canvasRatio);
            }
            if (parseFloat(dim.height) + parseFloat(this.canvasRatio) > currentImage.height) {
                this.canvasService.clipY[dim.designareaId] = this.clipY[dim.designareaId] = currentImage.height / parseFloat(dim.height);
            }
            else {
                this.canvasService.clipY[dim.designareaId] = this.clipY[dim.designareaId] = parseFloat(this.canvasRatio);
            }
        }
        else {
            this.canvasService.clipX[dim.designareaId] = this.clipX[dim.designareaId] = 0;
            this.canvasService.clipY[dim.designareaId] = this.clipY[dim.designareaId] = 0;
        }
    };
    /**
    * [Set black dashed border to all canvases]
    * @param {object} dim [dimension of processed canvas]
    */
    DesignAreaComponent.prototype.setDesignAreaBorder = function (dim, action) {
        var designArea = document.getElementById('designArea-' + dim.designareaId);
        if (!designArea) {
            return;
        }
        var position = this.calCulateBorderPosition(dim);
        var html = '#designArea-' + dim.designareaId + ':after{height:' + (parseFloat(dim.height) / this.canvasService.scaleFactor + 2) + 'px;width:' + (parseFloat(dim.width) / this.canvasService.scaleFactor + 2) + 'px;border:1px dashed black;position: absolute;left:' + position['left'] + 'px;top:' + position['top'] + 'px;float: left;content:""}';
        if (action == 'update') {
            designArea.children[1].innerHTML = html;
        }
        else {
            var style = document.createElement('style');
            style.type = 'text/css';
            style.innerHTML = html;
            designArea.appendChild(style);
        }
    };
    DesignAreaComponent.prototype.calCulateBorderPosition = function (dim) {
        var position = [];
        position['left'] = ((parseFloat(dim.width) + this.clipX[dim.designareaId] - parseFloat(dim.width)) / 2) / this.canvasService.scaleFactor;
        position['top'] = ((parseFloat(dim.height) + this.clipY[dim.designareaId] - parseFloat(dim.height)) / 2) / this.canvasService.scaleFactor;
        return position;
    };
    /**
    * [change canvas on click]
    * @param  imageId      [image id of current side]
    * @param  designAreaId [designAreaId of clicked canvas]
    */
    DesignAreaComponent.prototype.setActiveCanvas = function (imageId, designAreaId) {
        if (imageId == this.activeImageId && designAreaId == this.activeDesignAreaId)
            return;
        if (designAreaId == '') {
            var designarea = document.querySelectorAll('#productdesigner-image-' + imageId + ' .design-container');
            designAreaId = designarea[0].getAttribute('designareaid');
        }
        this.removeOtherActiveCanvases();
        this.setDesignAreaBorderCurrentCanvas(designAreaId);
        this.changeActiveCanvas(imageId, designAreaId);
        //setTimeout(() => {
        this.eventService.$pub('imageSideChanged', { imageId: imageId, designAreaId: designAreaId });
        //}, 200);
    };
    /**
    * [Change global var current canvas value and published event]
    * @param  imageId      [current image id]
    * @param  designAreaId [current designAreaId]
    */
    DesignAreaComponent.prototype.changeActiveCanvas = function (imageId, designAreaId) {
        this.activeDesignAreaId = designAreaId;
        this.canvasService.currentCanvas = this.canvasService.containerCanvases['@' + imageId + '&' + designAreaId];
        var id = '@' + imageId + '&' + designAreaId;
        var oldActive = this.canvasService.currentCanvas.getActiveObject();
        for (var _i = 0, _a = Object.keys(this.canvasService.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            this.canvasService.containerCanvases[key].discardActiveObject().renderAll();
        }
        this.canvasService.currentCanvas.setActiveObject(oldActive).renderAll();
    };
    /**
    * [Change red border to black of all canvases on click of canvas]
    */
    DesignAreaComponent.prototype.removeOtherActiveCanvases = function () {
        var designAreas = document.getElementsByClassName('design-container');
        for (var i = 0; i < designAreas.length; i++) {
            var designArea = designAreas[i];
            if (designArea.children[1]) {
                var html = designArea.children[1].innerHTML.replace("red", "black");
                designArea.children[1].innerHTML = html;
            }
        }
    };
    /**
    * [Set red border of design area ::after element]
    * @param  designAreaId [designAreaId of clicked canvas]
    */
    DesignAreaComponent.prototype.setDesignAreaBorderCurrentCanvas = function (designAreaId) {
        var designArea = document.getElementById('designArea-' + designAreaId);
        var html = designArea.children[1].innerHTML.replace("black", "red");
        designArea.children[1].innerHTML = html;
    };
    /**
    * [Set current Image id clicked through side changed]
    * @param  image_id [image id of clicked side]
    */
    DesignAreaComponent.prototype.setCurrentImageId = function (image_id, designAreaId) {
        if (designAreaId === void 0) { designAreaId = ''; }
        this.canvasService.activeImageId = this.activeImageId = image_id;
        this.setActiveCanvas(image_id, designAreaId);
    };
    /**
    * [Calculate canvas height, width, left, top with canvasRatio]
    * @param {any}    dim  [dimension value]
    * @param  type [width/height/left/top]
    */
    DesignAreaComponent.prototype.calCulateDimWithCanvasRatio = function (dim, type) {
        if (dim && this.clipX && this.clipY) {
            if (type == 'width') {
                var width = (parseFloat(dim.width) + this.clipX[dim.designareaId]) / this.canvasService.scaleFactor;
                return parseFloat(width);
            }
            else if (type == 'height') {
                var height = (parseFloat(dim.height) + this.clipY[dim.designareaId]) / this.canvasService.scaleFactor;
                return parseFloat(height);
            }
            else if (type == 'left') {
                return (dim.x1 - ((parseFloat(dim.width) + this.clipX[dim.designareaId] - parseFloat(dim.width)) / 2)) / this.canvasService.scaleFactor;
            }
            else if (type == 'top') {
                return (dim.y1 - ((parseFloat(dim.height) + this.clipY[dim.designareaId] - parseFloat(dim.height)) / 2)) / this.canvasService.scaleFactor;
            }
        }
    };
    DesignAreaComponent.prototype.calCulateImageHeightWidth = function (imageData, type) {
        if (type == 'width') {
            var width = parseFloat(imageData.width) / this.canvasService.scaleFactor;
            return parseFloat(width);
        }
        else if (type == 'height') {
            var height = parseFloat(imageData.height) / this.canvasService.scaleFactor;
            return parseFloat(height);
        }
    };
    /**
    * [load Associated Product combination as per selected options]
    * @param  selectedOptions [Options which are selected from proudct option component]
    */
    DesignAreaComponent.prototype.loadSelectedAssociatedProduct = function (selectedOptions) {
        selectedOptions = (selectedOptions.defaultSelectedOptions) ? selectedOptions.defaultSelectedOptions : selectedOptions;
        var selectedOptionsString = this.mainService.joinObject(selectedOptions);
        if (selectedOptionsString != this.selectedOptionsString) {
            if (!this.allProductsData[selectedOptionsString]) {
                this.loadProduct(selectedOptions);
            }
            else {
                this.processLoadProduct(this.allProductsData[selectedOptionsString]);
            }
        }
        else {
            this.eventService.$pub("hideMainLoader");
        }
    };
    /**
    * [Modify current canvas properties as per zoom value]
    * @param  zoom [zoom value]
    */
    DesignAreaComponent.prototype.reGenerateCanvas = function (zoom) {
        this.canvasService.zoom = zoom;
        this.canvasService.scaleFactor = this.canvasService.initScaleFactor();
        this.updateCanvasSize();
    };
    /**
 * [Update canvas size with scaleFactor]
 */
    DesignAreaComponent.prototype.updateCanvasSize = function () {
        for (var key in this.canvasService.containerCanvases) {
            var canvas = this.canvasService.containerCanvases[key];
            canvas.setHeight(this.calCulateDimWithCanvasRatio(canvas.dim, 'height'));
            canvas.setWidth(this.calCulateDimWithCanvasRatio(canvas.dim, 'width'));
            this.setDesignAreaBorder(canvas.dim, 'update');
            if (this.canvasService.currentCanvas == canvas) {
                this.setDesignAreaBorderCurrentCanvas(canvas.dim.designareaId);
            }
            this.clipCanvas(canvas, canvas.dim);
            if (canvas.dim.mask) {
                this.applyMakig(canvas, canvas.dim);
            }
            this.canvasService.resizeCanvasObjects(canvas);
            canvas.renderAll();
            // Timeout due to delay while updating variables
            var self_2 = this;
            //setTimeout(function () {
            self_2.eventService.$pub('zoomCanvasUpdated', canvas);
            //}, 50);
        }
    };
    /**
    * [calculate width of drag container]
    * @return
    */
    DesignAreaComponent.prototype.calCulateDragContainer = function (type) {
        if (!this.activeDrag) {
            return null;
        }
        var element = document.querySelector(".byi-output");
        if (type == 'width') {
            return element.clientWidth;
        }
        else if (type == 'height') {
            return element.clientHeight - 45;
        }
    };
    DesignAreaComponent.prototype.objOutsideDesignArea = function () {
        var n = 0;
        var self = this;
        self.canvasService.currentCanvas.forEachObject(function (o) {
            if (o.group) {
                o = o.group;
            }
            var l = o.getBoundingRect().left;
            var t = o.getBoundingRect().top;
            /*var w = (o.getBoundingRect().width < o.width) ? o.getBoundingRect().width : o.width;
            var h = (o.getBoundingRect().height < o.height) ? o.getBoundingRect().height : o.height;*/
            var w = o.width * o.scaleX;
            var h = o.height * o.scaleY;
            var f = false;
            if (l < ((o.canvas.width - (o.canvas.width - self.canvasService.clipX[o.canvas.designarea_id])) / 2))
                f = true;
            if (t < ((o.canvas.height - (o.canvas.height - self.canvasService.clipY[o.canvas.designarea_id])) / 2))
                f = true;
            if (parseFloat(t) + parseFloat(h) > (o.canvas.height - (self.canvasService.clipY[o.canvas.designarea_id] / 2)))
                f = true;
            if (parseFloat(l) + parseFloat(w) > (o.canvas.width - (self.canvasService.clipX[o.canvas.designarea_id] / 2)))
                f = true;
            if (f) {
                n++;
            }
            if (n > 0) {
                self.displayWarning = true;
            }
            else {
                self.displayWarning = false;
            }
        });
    };
    DesignAreaComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: 'design-area',
            template: __webpack_require__(/*! ./design-area.component.html */ "./src/app/components/design-area/design-area.component.html"),
            styles: [__webpack_require__(/*! ./design-area.component.scss */ "./src/app/components/design-area/design-area.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_6__["CacheService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_8__["PubSubService"],
            _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_1__["ConfProductAttrService"],
            _services_design_service__WEBPACK_IMPORTED_MODULE_5__["DesignService"]])
    ], DesignAreaComponent);
    return DesignAreaComponent;
}());



/***/ }),

/***/ "./src/app/components/design-templates/design-templates.component.html":
/*!*****************************************************************************!*\
  !*** ./src/app/components/design-templates/design-templates.component.html ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!-- loadContent == header , It means it is called from header -->\n<ng-container *ngIf=\"mainService.isAdmin == true && loadContent =='header'\">\n    <a href=\"javascript:void(0)\" (click)=\"openSaveTemplate()\" tooltip=\"{{'Save Template' | translate}}\">\n        <svg class=\"icon icon-save\" viewBox=\"0 0 30 30\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-save\"></use>\n        </svg>\n    </a>\n    <!-- Save Design Modal -->\n    <ng-template #saveTemplateModal>\n        <form #saveTemplateForm=\"ngForm\" [formGroup]=\"designTemplateForm\" (ngSubmit)=\"saveTemplate()\">\n            <div class=\"modal-header\">\n                <h4 class=\"modal-title pull-left\">{{'Save Template' | translate}}</h4>\n                <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"modalRef.hide()\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <div class=\"byi-login-tab byi-save-template\">\n                    <div class=\"byi-float-form\">\n                        <div class=\"byi-float-label\">\n                            <label>{{'Template Name' | translate}} *</label>\n                            <input type=\"text\" name=\"templateTitle\" formControlName=\"templateTitle\" />\n                            <div *ngIf=\"saveTemplateForm.submitted && dfref.templateTitle.errors\" class=\"byi-error\">\n                                <ng-container *ngIf=\"dfref.templateTitle.errors.required\">\n                                    {{'This field is required' | translate}}\n                                </ng-container>\n                            </div>\n                        </div>\n                        <div class=\"byi-float-checkbox\">\n                            <label class=\"byi-checkbox\">\n                                <input class=\"is-pre-loaded\" name=\"isPreLoaded\" type=\"checkbox\"\n                                    [(ngModel)]=\"templateService.isPreLoaded\" [ngModelOptions]=\"{standalone: true}\">\n                                {{'Set as Preloaded Template for this product.' | translate}}\n                                <span></span>\n                            </label>\n                        </div>\n                        <div class=\"byi-float-label\">\n                            <label>{{\"Choose Category\" | translate}} *</label>\n                            <select class=\"byi-dropdown\" multiple name=\"templatecategory[]\" id=\"templatecategory\"\n                                formControlName=\"templateCategory\">\n                                <ng-container *ngFor=\"let category of templateCategories\">\n                                    <option [ngValue]=\"category.id\"\n                                        [ngClass]=\"category.level == 0 ? 'main-category' : 'sub-category'\">\n                                        <span *ngFor=\"let i of getNumberArray(category.level)\">-</span>\n                                        {{category.title}}\n                                    </option>\n                                </ng-container>\n                            </select>\n                            <div *ngIf=\"saveTemplateForm.submitted && dfref.templateCategory.errors\" class=\"byi-error\">\n                                <ng-container *ngIf=\"dfref.templateCategory.errors.required\">\n                                    {{'This field is required' | translate}}\n                                </ng-container>\n                            </div>\n                            <div class=\"byi-form-action\">\n                                <button class=\"byi-btn\" type=\"submit\">{{'Save' | translate}}</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </ng-template>\n</ng-container>\n<ng-container *ngIf=\"mainService.isAdmin == false && loadContent != 'header'\">\n    <common-tabs #commonTabs *ngIf=\"!loadContent\" [subTabsData]=\"subTabsData\" [activeAccordion]=\"accordianId\">\n    </common-tabs>\n    <div class=\"byi-accord-content\" *ngIf=\"loadContent == true\">\n        <div class=\"byi-top-filters\" *ngIf=\"templateCategories && templateCategories.length > 0\">\n            <ng-container *ngIf=\"mainService.isResponsive\">\n                <div class=\"byi-fullview-toggle\">\n                    <button type=\"button\" (click)=\"showFonts(showAllFonts)\">\n                        <span></span>\n                        <span></span>\n                        <span></span>\n                    </button>\n                </div>\n            </ng-container>\n            <div class=\"byi-dropdown\">\n                <div class=\"btn-group\" dropdown>\n                    <button dropdownToggle type=\"button\" class=\"btn btn-primary dropdown-toggle\">\n                        {{selectedTemplateCat?.title}}<span class=\"caret\"></span>\n                    </button>\n                    <ul *dropdownMenu class=\"dropdown-menu\" role=\"menu\">\n                        <li role=\"menuitem\" *ngFor=\"let templateCat of templateCategories\"\n                            [ngClass]=\"templateCat.level == 0 ? 'main-category' : 'sub-category'\"\n                            [class.selected]=\"templateCat.id === selectedTemplateCat.id\"\n                            (click)=\"changeTemplateCat(templateCat)\">\n                            <a class=\"dropdown-item\" href=\"javascript:void(0)\">\n                                <span *ngFor=\"let i of getNumberArray(templateCat.level)\">-</span>\n                                {{templateCat.title}}\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class=\"byi-search\">\n                <input class=\"byi-input\" name=\"searchText\" (keyup)=\"searchTemplate($event)\"\n                    placeholder=\"{{'Search Template' | translate}}\" type=\"text\">\n                <button class=\"byi-search-btn\">\n                    <svg class=\"icon icon-search\" viewBox=\"0 0 50 50\">\n                        <use xlink:href=\"assets/img/sprite.svg#icon-search\"></use>\n                    </svg>\n                </button>\n            </div>\n        </div>\n        <div class=\"byi-norecord\" *ngIf=\"loaderComponent.showSubLoader === false && templates && templates.length == 0\">\n            {{'No Templates Found' | translate}}\n        </div>\n        <div *ngIf=\"templates.length > 0\" #mainSection class=\"byi-tab-cats byi-tab-cats-clipart\">\n            <ul infiniteScroll [horizontal]=\"true\" [infiniteScrollDistance]=\"0\" [infiniteScrollThrottle]=\"1000\"\n                [scrollWindow]=\"false\" [infiniteScrollDisabled]=\"!isEnableloadmore || !allowPlaceholderLoader\"\n                (scrolled)=\"loadMoreClipArt()\" #scrollToBottom>\n                <li *ngFor=\"let template of templates\"\n                    [attr.hidden]=\"(showPlaceholder && allowPlaceholderLoader) ? true : null\"\n                    (click)='loadTemplate(template.designtemplates_id)'>\n                    <a [ngClass]=\"{'image-only': !template.template_title, 'image-with-text': !template.template_title || template.template_title }\"\n                        href=\"javascript:void(0)\" title=\"{{template.template_title}}\">\n                        <span><img [src]=\"templateImgUrl+template.designtemplates_id+'/base/'+template.image\" /></span>\n                        <label *ngIf=\"template.template_title\">{{template.template_title}}</label>\n                    </a>\n                </li>\n                <li [attr.hidden]=\"(!showPlaceholder || !allowPlaceholderLoader) ? true : null\"\n                    *ngFor=\"let temp of mainService.customPlaceholderArr\" placeholder-loader [loaderHeight]='84'\n                    [loaderWidth]='84'>\n                </li>\n            </ul>\n        </div>\n\n    </div>\n    <div loader #loaderComponent></div>\n</ng-container>"

/***/ }),

/***/ "./src/app/components/design-templates/design-templates.component.scss":
/*!*****************************************************************************!*\
  !*** ./src/app/components/design-templates/design-templates.component.scss ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZGVzaWduLXRlbXBsYXRlcy9kZXNpZ24tdGVtcGxhdGVzLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/design-templates/design-templates.component.ts":
/*!***************************************************************************!*\
  !*** ./src/app/components/design-templates/design-templates.component.ts ***!
  \***************************************************************************/
/*! exports provided: DesignTemplatesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DesignTemplatesComponent", function() { return DesignTemplatesComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _template_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./template.service */ "./src/app/components/design-templates/template.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");









var DesignTemplatesComponent = /** @class */ (function () {
    function DesignTemplatesComponent(mainService, templateService, eventService, cacheService, cdr, translate, formBuilder) {
        var _this = this;
        this.mainService = mainService;
        this.templateService = templateService;
        this.eventService = eventService;
        this.cacheService = cacheService;
        this.cdr = cdr;
        this.translate = translate;
        this.formBuilder = formBuilder;
        this.currentTab = 7;
        this.selectedTemplateCat = [];
        this.searchText = "";
        this.loadmore = 1;
        this.templates = [];
        this.templateImgUrl = '';
        this.isEnableloadmore = false;
        this.checkScroll = false;
        this.limit = 12;
        // infinite scroll
        this.customPlaceholderArr = [];
        this.allowPlaceholderLoader = false;
        this.showAllFonts = false;
        this.eventService.$sub('getSubTabs', function (mainTabId) {
            if (mainTabId == _this.currentTab && !_this.subTabsData) {
                _this.getSubTabs(mainTabId);
            }
            _this.getCurrentTabName = _this.mainService.getAllTabs[_this.currentTab]['label'];
        });
    }
    DesignTemplatesComponent.prototype.ngOnInit = function () {
        if (this.mainService.isAdmin) {
            this.init();
        }
        if ((this.mainService.isAdmin == true && this.loadContent == 'header') || (this.mainService.isAdmin == false && this.loadContent == true)) {
            this.fetchDesignTemplateCategories();
        }
    };
    DesignTemplatesComponent.prototype.fetchDesignTemplateCategories = function () {
        var _this = this;
        var params = {
            isTemplate: this.loadContent,
            productId: this.mainService.productId
        }, url = 'designtemplates/designtemplates/fetchTemplateCategories', cacheKey = 'fetchTemplateCategories' + this.mainService.productId;
        this.mainService.getData(url, params, cacheKey, null, true).then(function (templateCategoriesData) {
            if (templateCategoriesData.status == 'success') {
                _this.templateCategories = templateCategoriesData.templateCategories;
                _this.selectedTemplateCat = templateCategoriesData.defaultTemplateCategory;
                if (_this.mainService.isAdmin == false) {
                    _this.processTemplates(templateCategoriesData, true);
                }
            }
        }).catch(function (err) { return console.log(err); });
    };
    DesignTemplatesComponent.prototype.getNumberArray = function (value) {
        var items = [];
        for (var i = 1; i <= value; i++) {
            items.push(i);
        }
        return items;
    };
    DesignTemplatesComponent.prototype.init = function () {
        this.templateService.templateTitle = '';
        this.subscribeEvents();
        this.prepareFormGroup();
    };
    DesignTemplatesComponent.prototype.prepareFormGroup = function () {
        // Login form builder
        this.designTemplateForm = this.formBuilder.group({
            templateTitle: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]],
            templateCategory: [[], [_angular_forms__WEBPACK_IMPORTED_MODULE_1__["Validators"].required]]
        });
    };
    DesignTemplatesComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('setTemplateData', function (templateData) {
            _this.designTemplateForm.controls.templateTitle.setValue(templateData.template_title);
            _this.designTemplateForm.controls.templateCategory.setValue(templateData.selectedTemplateCategories);
        });
    };
    DesignTemplatesComponent.prototype.openSaveTemplate = function () {
        if (this.mainService.canvasService.hasCanvasObjectOrBackgroundAll()) {
            this.modalRef = this.mainService.openThisModal(this.saveTemplateModal);
        }
        else {
            this.mainService.swal(this.translate.instant('Alert'), this.translate.instant('Please design the product !'), "warning");
        }
    };
    DesignTemplatesComponent.prototype.saveTemplate = function () {
        var _this = this;
        if (this.designTemplateForm.invalid)
            return;
        var data = {
            title: this.designTemplateForm.controls.templateTitle.value,
            selectedTemplateCategories: this.designTemplateForm.controls.templateCategory.value
        };
        this.templateService.saveTemplate(data).then(function (resp) {
            if (resp.status == 'success') {
                _this.init();
                _this.modalRef.hide();
            }
        });
    };
    /**
     * Fetching subtabs
     */
    DesignTemplatesComponent.prototype.getSubTabs = function (mainTabId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                data = this.mainService.tabsFlow[mainTabId];
                this.subTabsData = this.mainService.setSubTabsData(data, mainTabId);
                if (this.subTabsData && this.subTabsData.length > 0) {
                    this.accordianId = this.subTabsData[0].id;
                }
                if (this.loaderComponent && this.loaderComponent.showSubLoader)
                    this.loaderComponent.showSubLoader = false;
                return [2 /*return*/];
            });
        });
    };
    DesignTemplatesComponent.prototype.changeTemplateCat = function (templateCat) {
        this.selectedTemplateCat = templateCat;
        this.templates = [];
        this.loadmore = 1;
        var templatesCacheKey = 'templates' + '-' + this.selectedTemplateCat.id + '-' + this.loadmore;
        this.getTemplates(templatesCacheKey);
    };
    DesignTemplatesComponent.prototype.loadMoreTemplates = function () {
        this.loadmore++;
        var templatesCacheKey = 'templates' + '-' + this.selectedTemplateCat.id + '-' + this.loadmore;
        this.cacheService.set(templatesCacheKey, '');
        this.checkScroll = true;
        this.getTemplates(templatesCacheKey, this.searchText, false);
    };
    DesignTemplatesComponent.prototype.getTemplates = function (cacheKey, searchText, resetTemplates) {
        var _this = this;
        if (cacheKey === void 0) { cacheKey = null; }
        if (searchText === void 0) { searchText = ""; }
        if (resetTemplates === void 0) { resetTemplates = true; }
        var templateCatId = this.selectedTemplateCat.id;
        // show placeholder loader
        this.showPlaceholder = true;
        this.loaderComponent.showSubLoader = true;
        this.cdr.detectChanges();
        // prepare params and url
        var params = {
            'templateCatId': templateCatId,
            'limit': this.limit,
            'searchText': searchText,
            'productId': this.mainService.productId,
            'page': this.loadmore
        }, url = 'designtemplates/designtemplates/fetchTemplates';
        cacheKey = 'fetchTemplates' + searchText + templateCatId;
        // if cahcekey is not null that means user has changed template category
        /*if (cacheKey != null && searchText == "") {*/
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            _this.cacheService.set(cacheKey, data, { maxAge: 15 * 60 });
            if (resetTemplates === true)
                _this.templates = [];
            _this.processTemplates(data, resetTemplates);
        }).catch(function (err) { return console.log(err); });
        /*}*/
        /*// else user is trying to search specific template
        else {

            // api request
            this.mainService.post(url, params).then(data => {
                if (resetTemplates === true) this.templates = [];
                this.processTemplates(data, resetTemplates);
            }).catch(err => console.log(err)).finally(() => {
                if (this.loaderComponent && this.loaderComponent.showSubLoader) this.loaderComponent.showSubLoader = false
            });
        }*/
    };
    DesignTemplatesComponent.prototype.searchTemplate = function ($event) {
        if (!$event || !$event.target || !$event.target.value) {
            this.loadmore = 1;
        }
        ;
        if (this.searchText == $event.target.value.toString()) {
            return;
        }
        this.searchText = $event.target.value.toString();
        this.getTemplates(null, this.searchText);
    };
    DesignTemplatesComponent.prototype.processTemplates = function (data, resetTemplates) {
        this.templateImgUrl = data.templateImgUrl;
        this.isEnableloadmore = (data.loadMoreFlag == 0) ? false : true;
        this.setImagesData(data.templates);
        if (this.loadContent && this.loaderComponent && this.loaderComponent.showMainLoader)
            this.loaderComponent.showSubLoader = false;
        this.showPlaceholder = false;
        if (this.checkScroll && resetTemplates === false) {
            this.cdr.detectChanges();
            this.scrollToBottom();
        }
    };
    DesignTemplatesComponent.prototype.setImagesData = function (data) {
        for (var i = 0; i < data.length; i++) {
            this.templates.push(data[i]);
        }
        if (this.loadContent && this.loaderComponent && this.loaderComponent.showSubLoader) {
            this.loaderComponent.showSubLoader = false;
            this.cdr.detectChanges();
        }
    };
    DesignTemplatesComponent.prototype.scrollToBottom = function () {
        try {
            if (!this.mainService.isResponsive)
                this.ScrollContainer.nativeElement.scrollTop = this.ScrollContainer.nativeElement.scrollHeight;
            else if (this.mainService.isResponsive && !this.allowPlaceholderLoader)
                this.mainSection.nativeElement.scrollTop = this.mainSection.nativeElement.scrollHeight;
            else
                this.ScrollContainer.nativeElement.scrollLeft = (this.ScrollContainer.nativeElement.scrollWidth - 300);
        }
        catch (err) { }
    };
    DesignTemplatesComponent.prototype.loadTemplate = function (id) {
        this.templateService.loadTemplate(btoa(id));
    };
    DesignTemplatesComponent.prototype.showFonts = function (showAllFonts) {
        this.showAllFonts = !showAllFonts;
        this.eventService.$pub('showFonts', { showAllFonts: this.showAllFonts, title: 'Show all images' });
    };
    Object.defineProperty(DesignTemplatesComponent.prototype, "dfref", {
        get: function () { return this.designTemplateForm.controls; },
        enumerable: true,
        configurable: true
    });
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])('saveTemplateModal'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], DesignTemplatesComponent.prototype, "saveTemplateModal", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], DesignTemplatesComponent.prototype, "loadContent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_7__["LoaderComponent"])
    ], DesignTemplatesComponent.prototype, "loaderComponent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])('scrollToBottom'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ElementRef"])
    ], DesignTemplatesComponent.prototype, "ScrollContainer", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])('mainSection'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ElementRef"])
    ], DesignTemplatesComponent.prototype, "mainSection", void 0);
    DesignTemplatesComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
            selector: '[design-templates]',
            template: __webpack_require__(/*! ./design-templates.component.html */ "./src/app/components/design-templates/design-templates.component.html"),
            styles: [__webpack_require__(/*! ./design-templates.component.scss */ "./src/app/components/design-templates/design-templates.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            _template_service__WEBPACK_IMPORTED_MODULE_5__["TemplateService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__["PubSubService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_8__["CacheService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ChangeDetectorRef"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__["TranslateService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormBuilder"]])
    ], DesignTemplatesComponent);
    return DesignTemplatesComponent;
}());



/***/ }),

/***/ "./src/app/components/design-templates/template.service.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/design-templates/template.service.ts ***!
  \*****************************************************************/
/*! exports provided: TemplateService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateService", function() { return TemplateService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");






var TemplateService = /** @class */ (function () {
    function TemplateService(mainService, eventService, canvasService, translate) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.translate = translate;
        this.selectedTemplateCategories = [];
        // if design is already loaded flag
        this.isDesignLoaded = false;
        var params = this.mainService.getUrlParams(['template']);
        this.templateId = params['template'];
        var self = this;
        this.eventService.$sub('allcanvasCreated', function (allImageIds) {
            if (self.templateId && self.isDesignLoaded == false) {
                self.loadTemplate(self.templateId);
                self.isDesignLoaded = true;
            }
        });
    }
    /**
* Save Template
*/
    TemplateService.prototype.saveTemplate = function (data) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var imageId = _this.canvasService.firstImageId;
            var images = _this.canvasService.getCanvasDataUrl(imageId);
            var containerCanvasesJson = _this.canvasService.getCanvasToJson();
            data.sweetAlert = data.hasOwnProperty('sweetAlert') ? data.sweetAlert : true;
            var params = {
                'templateId': _this.templateId,
                'dataUrl': images,
                'product_image_data': _this.canvasService.allImagesWithIds[imageId],
                'product_id': _this.mainService.productId,
                'canvasJson': btoa(unescape(encodeURIComponent(JSON.stringify(containerCanvasesJson)))),
                'associated_product_id': _this.mainService.associatedProductId,
                'title': data.hasOwnProperty('title') ? data.title : '',
                'isPreLoaded': _this.isPreLoaded,
                'selectedTemplateCategories': data.hasOwnProperty('selectedTemplateCategories') ? data.selectedTemplateCategories : ''
            }, url = 'designtemplates/designtemplates/SaveTemplate?isAjax=true';
            _this.eventService.$pub("showMainLoader");
            _this.mainService.post(url, params).then(function (resp) {
                _this.eventService.$pub("hideMainLoader");
                if (resp && resp.status == "success" && data.sweetAlert == true) {
                    _this.canvasService.clearHistory();
                    _this.eventService.$pub('undoRedo');
                    _this.mainService.swal(_this.translate.instant("Success"), resp.message, "success");
                    resp.product_id = _this.mainService.productId;
                    /*	this.selectedTemplateCategories = [];
                        this.templateTitle = '';
                        this.isPreLoaded = false;*/
                    _this.eventService.$pub('designSaved', resp);
                }
                else if (resp && resp.status == 'error' && resp.hasOwnProperty('isExists') && resp.isExists == true && data.sweetAlert == true) {
                    _this.mainService.swal(_this.translate.instant("Success"), resp.message, "success");
                }
                resolve(resp);
            });
        });
    };
    TemplateService.prototype.loadTemplate = function (templateId) {
        var _this = this;
        var params = { 'templateId': templateId }, url = 'designtemplates/designtemplates/LoadTemplate', cacheKey = 'LoadTemplate' + templateId + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey, null, true).then(function (templateData) {
            if (templateData.status == 'success') {
                _this.setTemplateData(templateData);
                _this.canvasService.clearCanvas();
                templateData.currentProductId = _this.mainService.associatedProductId;
                _this.canvasService.loadDesign(templateData);
                _this.mainService.lastSavedData.json_objects = templateData.json_objects;
            }
        }).catch(function (err) { return console.log(err); });
    };
    TemplateService.prototype.setTemplateData = function (templateData) {
        this.eventService.$pub('setTemplateData', templateData);
        // this.templateTitle = templateData.template_title;
        // this.selectedTemplateCategories = templateData.selectedTemplateCategories;
        if (templateData.isPreLoaded == 'true') {
            this.isPreLoaded = true;
        }
        else {
            this.isPreLoaded = false;
        }
    };
    TemplateService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__["TranslateService"]])
    ], TemplateService);
    return TemplateService;
}());



/***/ }),

/***/ "./src/app/components/designarea-controls/designarea-controls.component.html":
/*!***********************************************************************************!*\
  !*** ./src/app/components/designarea-controls/designarea-controls.component.html ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ul class=\"byig-control\">\n\t<li [ngClass]=\"{'disabled': disableUndo == true}\">\n\t\t<a href=\"javascript:void(0)\" (click)=\"undo()\" tooltip=\"{{'Undo' | translate}}\">\n\t\t\t<svg class=\"icon icon-undo\" viewBox=\"0 0 30 30\">\n\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-undo\"></use>\n\t\t\t</svg> \n\t\t</a>\n\t</li>\n\t<li [ngClass]=\"{'disabled': disableRedo == true}\">\n\t\t<a href=\"javascript:void(0)\" (click)=\"redo()\" tooltip=\"{{'Redo' | translate}}\">\n\t\t\t<svg class=\"icon icon-redo\" viewBox=\"0 0 30 30\">\n\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-redo\"></use>\n\t\t\t</svg>\n\t\t</a>\n\t</li>\n\t<li>\n\t\t<span dropdown>\n\t\t\t<a href=\"javascript:void(0)\" dropdownToggle (click)=\"false\" tooltip=\"{{'Zoom' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-zoom\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-zoom\"></use>\n\t\t\t\t</svg>\n\t\t\t</a>\n\t\t\t<div *dropdownMenu class=\"dropdown-menu zoom-control\">\n\t\t\t\t<label class=\"zoom-counter\">{{ canvasService.zoom }}</label>\n\t\t\t\t<input type=\"range\" [(ngModel)]=\"canvasService.zoom\" (input)=\"changeZoom()\" step=\"0.1\" min=\"-0.5\" max=\"0.5\"  class=\"slider\">\n\t\t\t\t<a href=\"javascript:void(0)\" class=\"byi-reset-zoom\" (click)=\"changeZoom(true)\" title=\"{{'Reset Zoom' | translate}}\">\n\t\t\t\t\t<svg class=\"icon icon-reset\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-reset\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</span>\n\t</li>\n\t<li>\n\t\t<a href=\"javascript:void(0)\" (click)=\"resetDesign()\" tooltip=\"{{'Reset' | translate}}\">\n\t\t\t<svg class=\"icon icon-reset\" viewBox=\"0 0 30 30\">\n\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-reset\"></use>\n\t\t\t</svg>\n\t\t</a>\n\t</li>\n</ul>\n<div *ngIf=\"mainService.isResponsive\" class=\"byi-mob-output-action\" [class.open]=\"isToggle\">\n\t<a class=\"byi-more-btn\" href=\"javascript:void(0)\" (click)=\"hideFab(); isToggle = !isToggle\">\n\t\t<svg class=\"icon icon-more-btn\" viewBox=\"0 0 30 30\">\n\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-more-btn\"></use>\n\t\t</svg>\n\t</a>\n\t<ul class=\"bta-link\">\n\t\t<li preview></li>\n\t\t<li social-media-sharing></li>\n\t\t<li *ngIf=\"mainService.isAdmin == false\" save-design></li>\n\t\t<li design-templates [loadContent]=\"'header'\"></li>\n\t\t<li download></li>\n\t</ul>\n</div>"

/***/ }),

/***/ "./src/app/components/designarea-controls/designarea-controls.component.scss":
/*!***********************************************************************************!*\
  !*** ./src/app/components/designarea-controls/designarea-controls.component.scss ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZGVzaWduYXJlYS1jb250cm9scy9kZXNpZ25hcmVhLWNvbnRyb2xzLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/designarea-controls/designarea-controls.component.ts":
/*!*********************************************************************************!*\
  !*** ./src/app/components/designarea-controls/designarea-controls.component.ts ***!
  \*********************************************************************************/
/*! exports provided: DesignareaControlsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DesignareaControlsComponent", function() { return DesignareaControlsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_history_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/history.service */ "./src/app/services/history.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_6__);







var DesignareaControlsComponent = /** @class */ (function () {
    function DesignareaControlsComponent(mainService, eventService, historyService, canvasService) {
        var _this = this;
        this.mainService = mainService;
        this.eventService = eventService;
        this.historyService = historyService;
        this.canvasService = canvasService;
        this.disableUndo = true;
        this.disableRedo = true;
        this.isToggle = false;
        this.eventService.$sub('closeHeaderIcon', function () {
            _this.isToggle = false;
        });
        this.eventService.$sub('undoRedo', function () {
            _this.toggleUndoRedo();
        });
        this.eventService.$sub('imageSideChanged', function () {
            _this.toggleUndoRedo();
        });
    }
    DesignareaControlsComponent.prototype.toggleUndoRedo = function () {
        var designarea_id = this.canvasService.currentCanvas.designarea_id;
        if (this.historyService.undoStack[designarea_id] && this.historyService.undoStack[designarea_id].length > 0) {
            this.disableUndo = false;
        }
        else {
            this.disableUndo = true;
        }
        if (this.historyService.redoStack[designarea_id] && this.historyService.redoStack[designarea_id].length > 0) {
            this.disableRedo = false;
        }
        else {
            this.disableRedo = true;
        }
    };
    DesignareaControlsComponent.prototype.ngOnInit = function () { };
    DesignareaControlsComponent.prototype.changeZoom = function (reset) {
        if (reset) {
            this.canvasService.zoom = 0;
        }
        this.eventService.$pub('zoomCanvas', this.canvasService.zoom);
    };
    DesignareaControlsComponent.prototype.resetDesign = function () {
        var _this = this;
        sweetalert2__WEBPACK_IMPORTED_MODULE_6___default.a.fire({
            title: 'Are you sure to reset?',
            text: "It will remove the unsaved designs from the design area.",
            type: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes'
        }).then(function (resetDesign) {
            if (resetDesign.value) {
                _this.canvasService.clearCanvas(null);
                if (Object.keys(_this.mainService.lastSavedData).length > 0) {
                    _this.canvasService.loadDesign(_this.mainService.lastSavedData);
                }
                _this.canvasService.clearHistory();
                _this.toggleUndoRedo();
            }
        });
    };
    DesignareaControlsComponent.prototype.undo = function () {
        this.historyService.undo();
        this.toggleUndoRedo();
    };
    DesignareaControlsComponent.prototype.redo = function () {
        this.historyService.redo();
        this.toggleUndoRedo();
    };
    DesignareaControlsComponent.prototype.hideFab = function () {
        document.querySelector('.byi-fab').classList.toggle("hide");
    };
    DesignareaControlsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'designarea-controls',
            template: __webpack_require__(/*! ./designarea-controls.component.html */ "./src/app/components/designarea-controls/designarea-controls.component.html"),
            styles: [__webpack_require__(/*! ./designarea-controls.component.scss */ "./src/app/components/designarea-controls/designarea-controls.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_5__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"],
            _services_history_service__WEBPACK_IMPORTED_MODULE_3__["HistoryService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"]])
    ], DesignareaControlsComponent);
    return DesignareaControlsComponent;
}());



/***/ }),

/***/ "./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.html":
/*!*****************************************************************************************************************************!*\
  !*** ./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.html ***!
  \*****************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-template #verticalTemplate>\n  <div [innerHtml]=\"verticalTooltip\"></div>\n</ng-template>\n<li (click)=\"topObjectSpacing()\" tooltip=\"{{'Distribute Vertically (must select 3 or more objects)' | translate}}\" container=\"body\" [ngClass]=\"{'disabled': enableForThreeObjects == true}\">\n  <svg class=\"icon icon-align-vertical\" viewBox=\"0 0 30 30\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-align-vertical\"></use>\n  </svg>\n</li>\n<ng-template #horizontalTemplate>\n  <div [innerHtml]=\"horizontalTooltip\"></div>\n</ng-template>\n<li (click)=\"leftObjectSpacing()\" tooltip=\"{{'Distribute Horizontally (must select 3 or more objects)' | translate}}\" container=\"body\" [ngClass]=\"{'disabled': enableForThreeObjects == true}\">\n  <svg class=\"icon icon-align-horizontal\" viewBox=\"0 0 30 30\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-align-horizontal\"></use>\n  </svg>\n</li>"

/***/ }),

/***/ "./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.scss":
/*!*****************************************************************************************************************************!*\
  !*** ./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.scss ***!
  \*****************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZGlzdHJpYnV0ZS12ZXJ0aWNhbC1ob3Jpem9udGFsLWFsaWdubWVudC9kaXN0cmlidXRlLXZlcnRpY2FsLWhvcml6b250YWwtYWxpZ25tZW50LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.ts":
/*!***************************************************************************************************************************!*\
  !*** ./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.ts ***!
  \***************************************************************************************************************************/
/*! exports provided: DistributeVerticalHorizontalAlignmentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DistributeVerticalHorizontalAlignmentComponent", function() { return DistributeVerticalHorizontalAlignmentComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _right_panel_right_panel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../right-panel/right-panel.service */ "./src/app/components/right-panel/right-panel.service.ts");
/* harmony import */ var src_app_services_update_object_service_before_undo_redo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/app/services/update-object.service_before-undo-redo */ "./src/app/services/update-object.service_before-undo-redo.ts");






var DistributeVerticalHorizontalAlignmentComponent = /** @class */ (function () {
    /**
     *
     * @param canvasService
     * @param eventService
     * @param rightPanelService
     */
    function DistributeVerticalHorizontalAlignmentComponent(canvasService, eventService, rightPanelService, updateObjectService) {
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.rightPanelService = rightPanelService;
        this.updateObjectService = updateObjectService;
        // tooltip messages
        this.horizontalTooltip = 'Distribute Horizontally' + '<br/>' + '(must select 3 or more objects)';
        this.verticalTooltip = 'Distribute Vertically' + '<br/>' + '(must select 3 or more objects)';
    }
    /**
     *
     */
    DistributeVerticalHorizontalAlignmentComponent.prototype.ngOnInit = function () {
        this.init();
        this.subscribeEvents();
    };
    /**
     *
     */
    DistributeVerticalHorizontalAlignmentComponent.prototype.init = function () {
        this.enableForThreeObjects = this.enableForThreeObjectsFun();
    };
    /**
     * Subscribe events and perform action here
     */
    DistributeVerticalHorizontalAlignmentComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectSelectionCreated', function () {
            _this.init();
        });
        this.eventService.$sub('objectSelectionUpdated', function () {
            _this.init();
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.init();
        });
        this.eventService.$sub('objectUpdated', function () {
            _this.init();
        });
    };
    /**
     *
     */
    DistributeVerticalHorizontalAlignmentComponent.prototype.enableForThreeObjectsFun = function () {
        var totalAddedObjects = (this.canvasService.currentCanvas && this.canvasService.currentCanvas.getActiveObjects()) ? this.canvasService.currentCanvas.getActiveObjects().length : 0;
        if (totalAddedObjects > 2)
            return false;
        return true;
    };
    /**
     *
     */
    DistributeVerticalHorizontalAlignmentComponent.prototype.topObjectSpacing = function () {
        var _this = this;
        // return if disabled
        if (this.enableForThreeObjects)
            return;
        // variable declaration
        var canvas = this.canvasService.currentCanvas, activeGroup = canvas.getActiveObject(), allObjs = canvas.getActiveObjects(), topMostObj = this.rightPanelService.findObjMargin(allObjs, false, 'top'), bottomMostObj = this.rightPanelService.findObjMargin(allObjs, true, 'top'), totalHeight = this.calcTotalHeightOfAllObj(allObjs), properties = {}, params = {};
        // calculate difference
        var diff = (activeGroup.height - totalHeight) / (allObjs.length - 1), prevObj = topMostObj;
        // traverse array of all selected objects
        // set top value of each object except top and bottom most objects
        allObjs.filter(function (obj) {
            if (obj.id != topMostObj.id && obj.id != bottomMostObj.id) {
                // prepare property value
                properties = { top: diff + (prevObj.height * prevObj.scaleY) + prevObj.top };
                _this.rightPanelService.mainService.updateObjectProperties(obj, properties);
                // set current object as prev object
                // we will assign current object's top value based on
                // prev object's top and height values
                prevObj = obj;
            }
        });
    };
    /**
     *
     * @param allObjs
     */
    DistributeVerticalHorizontalAlignmentComponent.prototype.calcTotalHeightOfAllObj = function (allObjs) {
        // init totalHeight variable 
        var totalHeight = 0;
        // traverse through selected objects
        // and calculate total height
        allObjs.filter(function (obj) {
            totalHeight += (obj.height * obj.scaleY);
        });
        // finally return
        return totalHeight;
    };
    /**
     *
     */
    DistributeVerticalHorizontalAlignmentComponent.prototype.leftObjectSpacing = function () {
        var _this = this;
        // return if disabled
        if (this.enableForThreeObjects)
            return;
        // variable declaration
        var canvas = this.canvasService.currentCanvas, activeGroup = canvas.getActiveObject(), allObjs = canvas.getActiveObjects(), leftMostObj = this.rightPanelService.findObjMargin(allObjs, false, 'left'), rightMostObj = this.rightPanelService.findObjMargin(allObjs, true, 'left'), totalWidth = this.calcTotalWidthOfAllObj(allObjs), properties = {}, params = {};
        // calculate difference
        var diff = (activeGroup.width - totalWidth) / (allObjs.length - 1), prevObj = leftMostObj;
        // traverse array of all selected objects
        // set top value of each object except top and bottom most objects
        allObjs.filter(function (obj) {
            if (obj.id != leftMostObj.id && obj.id != rightMostObj.id) {
                // prepare property value
                properties = { left: diff + (prevObj.width * prevObj.scaleX) + prevObj.left };
                _this.rightPanelService.mainService.updateObjectProperties(obj, properties);
                // set current object as prev object
                // we will assign current object's top value based on
                // prev object's top and height values
                prevObj = obj;
            }
        });
    };
    /**
     *
     * @param allObjs
     */
    DistributeVerticalHorizontalAlignmentComponent.prototype.calcTotalWidthOfAllObj = function (allObjs) {
        // init totalHeight variable
        var totalWidth = 0;
        // traverse through selected objects
        // and calculate total height
        allObjs.filter(function (obj) {
            totalWidth += (obj.width * obj.scaleX);
        });
        // finally return
        return totalWidth;
    };
    DistributeVerticalHorizontalAlignmentComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
            selector: '[distribute-vertical-horizontal-alignment]',
            template: __webpack_require__(/*! ./distribute-vertical-horizontal-alignment.component.html */ "./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.html"),
            styles: [__webpack_require__(/*! ./distribute-vertical-horizontal-alignment.component.scss */ "./src/app/components/distribute-vertical-horizontal-alignment/distribute-vertical-horizontal-alignment.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_2__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__["PubSubService"],
            _right_panel_right_panel_service__WEBPACK_IMPORTED_MODULE_4__["RightPanelService"],
            src_app_services_update_object_service_before_undo_redo__WEBPACK_IMPORTED_MODULE_5__["UpdateObjectService"]])
    ], DistributeVerticalHorizontalAlignmentComponent);
    return DistributeVerticalHorizontalAlignmentComponent;
}());



/***/ }),

/***/ "./src/app/components/download/download.component.html":
/*!*************************************************************!*\
  !*** ./src/app/components/download/download.component.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div [attr.hidden]=\"(mainService.displayDownload) ? null : true\">\n\t<a href=\"javascript:void(0)\" tooltip=\"{{'Download' | translate}}\">\n\t\t<svg class=\"icon icon-download\" viewBox=\"0 0 30 30\" (click)=\"onDownloadClick()\">\n\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-download\"></use>\n\t\t</svg>\n\t</a>\n</div>"

/***/ }),

/***/ "./src/app/components/download/download.component.scss":
/*!*************************************************************!*\
  !*** ./src/app/components/download/download.component.scss ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZG93bmxvYWQvZG93bmxvYWQuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/download/download.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/components/download/download.component.ts ***!
  \***********************************************************/
/*! exports provided: DownloadComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DownloadComponent", function() { return DownloadComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_8__);









var DownloadComponent = /** @class */ (function () {
    // CONSTRUCTOR
    function DownloadComponent(canvasService, mainService, eventService, translate, sanitizer) {
        this.canvasService = canvasService;
        this.mainService = mainService;
        this.eventService = eventService;
        this.translate = translate;
        this.sanitizer = sanitizer;
        this.downloadLinks = "javascript:void(0)";
        this.doenload = false;
        this.enableDownload = 0;
        this.initEvents();
        this.downloadConfiguration();
    }
    DownloadComponent.prototype.downloadConfiguration = function () {
        var _this = this;
        var params = {}, url = 'productdesigner/index/downloadConfiguration', cacheKey = 'downloadConfiguration' + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey).then(function (downloadData) {
            _this.enableDownload = downloadData.enableDownload;
            if (_this.enableDownload == 1) {
                _this.mainService.displayDownload = true;
            }
        }).catch(function (err) { return console.log(err); });
    };
    DownloadComponent.prototype.initEvents = function () {
        var _this = this;
        this.eventService.$sub('allcanvasCreated', function (allImageIds) {
            _this.allImageIds = allImageIds;
            _this.activeImageId = allImageIds[0];
        });
    };
    DownloadComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.eventService.$sub('getCartData', function (data) {
            _this.productName = data.productName;
        });
    };
    DownloadComponent.prototype.onDownloadClick = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var url, currentImgUrl, extension, getImgName;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.canvasService.hasCanvasObjectOrBackground(this.canvasService.currentCanvas)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mainService.getCanvasDataUrl(true, "")];
                    case 1:
                        url = _a.sent();
                        currentImgUrl = this.canvasService.allImagesWithIds[this.canvasService.activeImageId]['url'];
                        extension = "";
                        if (currentImgUrl) {
                            getImgName = currentImgUrl.split('/');
                            extension = getImgName[getImgName.length - 1].split('.').pop();
                        }
                        this.mainService.downloadFiles(url, extension);
                        return [3 /*break*/, 3];
                    case 2:
                        sweetalert2__WEBPACK_IMPORTED_MODULE_8___default.a.fire({
                            title: this.translate.instant('Alert'),
                            text: this.translate.instant('Please design the product in order to download !'),
                            type: "warning",
                            confirmButtonText: this.translate.instant('OK'),
                        });
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('downloadLink'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"])
    ], DownloadComponent.prototype, "downloadLink", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('loaderComponent'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], DownloadComponent.prototype, "loaderComponent", void 0);
    DownloadComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[download]',
            template: __webpack_require__(/*! ./download.component.html */ "./src/app/components/download/download.component.html"),
            styles: [__webpack_require__(/*! ./download.component.scss */ "./src/app/components/download/download.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__["TranslateService"],
            _angular_platform_browser__WEBPACK_IMPORTED_MODULE_7__["DomSanitizer"]])
    ], DownloadComponent);
    return DownloadComponent;
}());



/***/ }),

/***/ "./src/app/components/drop-shadow/drop-shadow.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/components/drop-shadow/drop-shadow.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<accordion-group class=\"byi-accord\" *ngIf=\"!mainService.isResponsive\" [hidden]=\"componentHide\">\n\t<button class=\"byi-accordion-title\" accordion-heading>\n\t\t<span>{{'Drop Shadow' | translate}}</span>\n\t</button>\n\t<div class=\"byi-accord-content\">\n\t\t<ng-container [ngTemplateOutlet]=\"dropShadow\"></ng-container>\n\t</div>\n</accordion-group>\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('drop-shadow')\" [attr.hidden]=\"componentHide\">\n\t<ng-template tabHeading>\n\t\t<span>{{'Drop Shadow' | translate}}</span>\n\t</ng-template>\n\t<ng-container [ngTemplateOutlet]=\"dropShadow\"></ng-container>\n</tab>\n<ng-template #dropShadow>\n\t<div class=\"byie-option\">\n\t\t<div class=\"byi-global-reset\">\n\t\t\t<div class=\"byie-custom-color\">\n\t\t\t\t<div *ngIf=\"selectedColor\" [type]=\"'simple'\" custom-color-picker [activeColor]=\"selectedColor\"\n\t\t\t\t\t[hideColorToggle]=\"hideColorToggleShadow\" (colorPickerToggle)=\"colorPickerToggleShadow($event)\"\n\t\t\t\t\t(changeColorEvent)=\"changeColorShadow($event)\"></div>\n\t\t\t</div>\n\t\t\t<button class=\"byi-range-reset-link\" (click)=\"resetShadow()\" tooltip=\"{{'Reset' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-reset\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-reset\"></use>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class=\"byi-range-box byie-count-wrap\">\n\t\t\t<label>{{'X-offset' | translate}}</label>\n\t\t\t<div class=\"byi-rb-input\">\n\t\t\t\t<span class=\"byie-count\">{{offsetX}}</span>\n\t\t\t\t<input type=\"range\" [(ngModel)]=\"offsetX\" min=\"-25\" max=\"25\" step=\"1\" value='0' (input)=\"changeShadow()\"\n\t\t\t\t\t(mousedown)=\"setPrevValue('offsetX', offsetX)\" class=\"slider\" (change)=\"stackToUndo('offsetX')\"\n\t\t\t\t\tclass=\"slider\">\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"byi-range-box byie-count-wrap\">\n\t\t\t<label>{{'Y-offset' | translate}}</label>\n\t\t\t<div class=\"byi-rb-input\">\n\t\t\t\t<span class=\"byie-count\">{{offsetY}}</span>\n\t\t\t\t<input type=\"range\" [(ngModel)]=\"offsetY\" min=\"-25\" max=\"25\" step=\"1\" value='0'\n\t\t\t\t\t(input)=\"changeShadow(true)\" (mousedown)=\"setPrevValue('offsetY', offsetY)\" class=\"slider\"\n\t\t\t\t\t(change)=\"stackToUndo('offsetY')\" class=\"slider\">\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- <div class=\"byi-range-box byie-count-wrap\">\n\t\t\t<label>{{'Blur' | translate}}</label>\n\t\t\t<div class=\"byi-rb-input\">\n\t\t\t\t<span class=\"byie-count\">{{blur}}</span>\n\t\t\t\t<input type=\"range\" [(ngModel)]=\"blur\" min=\"0\" max=\"50\" step=\"1\" value='0' (input)=\"changeShadow()\"\n\t\t\t\tclass=\"slider\">\n\t\t\t</div>\n\t\t</div> -->\n\t</div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/drop-shadow/drop-shadow.component.scss":
/*!*******************************************************************!*\
  !*** ./src/app/components/drop-shadow/drop-shadow.component.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZHJvcC1zaGFkb3cvZHJvcC1zaGFkb3cuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/drop-shadow/drop-shadow.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/drop-shadow/drop-shadow.component.ts ***!
  \*****************************************************************/
/*! exports provided: DropShadowComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DropShadowComponent", function() { return DropShadowComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");






var DropShadowComponent = /** @class */ (function () {
    function DropShadowComponent(canvasService, eventService, mainService, tabsService) {
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.mainService = mainService;
        this.tabsService = tabsService;
        this.hideColorToggleShadow = 1;
        this.componentHide = true;
        // undo redo
        this.prevShadow = {};
        this.tabsService.registerTabs('drop-shadow', 'plain-text');
        this.tabsService.registerTabs('drop-shadow', 'name-number');
    }
    DropShadowComponent.prototype.ngOnInit = function () {
        this.initData();
        this.offsetX = '0';
        this.offsetY = '0';
        this.blur = '0';
        this.subscribeEvents();
    };
    DropShadowComponent.prototype.initData = function () {
        if (this.mainService.colorData.defaultColor) {
            this.selectedColor = Object.assign({}, this.mainService.colorData.defaultColor);
        }
        var shadow = this.canvasService.getActiveObjectValue('text', 'shadow');
        this.offsetX = (shadow && shadow.offsetX) ? shadow.offsetX : '0';
        this.offsetY = (shadow && shadow.offsetY) ? shadow.offsetY : '0';
    };
    DropShadowComponent.prototype.subscribeEvents = function () {
        var _this = this;
        var self = this;
        this.eventService.$sub('objectAdded', function (obj) {
            self.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            self.componentHide = true;
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.updateShadow(obj);
        });
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            /*if (self.canvasService.getObjectType(obj, "text")) {*/
            if (obj.type == 'activeSelection') {
                var isObjText = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type != 'text'; }));
                if (isObjText == -1) {
                    self.componentHide = null;
                }
                else {
                    self.componentHide = true;
                }
            }
            else {
                self.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
            }
            _this.updateShadow(obj);
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
            if (obj.type == 'activeSelection') {
                var isObjText = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type != 'text'; }));
                if (isObjText == -1) {
                    self.componentHide = null;
                }
                else {
                    self.componentHide = true;
                }
            }
            else {
                _this.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
            }
            _this.updateShadow(obj);
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.componentHide = true;
            _this.blur = '0';
            if (_this.mainService.colorData.defaultColor) {
                _this.selectedColor = Object.assign({}, _this.mainService.colorData.defaultColor);
            }
            _this.initData();
        });
        this.eventService.$sub('imageSideChanged', function () {
            _this.initData();
        });
        this.eventService.$sub('closeColorPicker', function () {
            _this.hideColorToggleShadow = 1;
        });
    };
    DropShadowComponent.prototype.changeShadow = function (changeShadowY) {
        var _this = this;
        if (changeShadowY === void 0) { changeShadowY = false; }
        var selectedObjects = this.canvasService.currentCanvas.getActiveObjects();
        if (selectedObjects.length > 0) {
            var shadow = {
                offsetX: this.offsetX,
                offsetY: this.offsetY,
                blur: this.blur,
                color: this.selectedColor,
            };
            var properties_1 = {
                shadow: shadow
            };
            selectedObjects.filter(function (obj) {
                obj = Object.assign(obj, properties_1);
                _this.canvasService.currentCanvas.renderAll();
            });
        }
    };
    DropShadowComponent.prototype.setPrevValue = function (key, value) {
        if (!this.prevShadow || this.prevShadow[key] == null) {
            this.prevShadow[key] = value;
        }
    };
    DropShadowComponent.prototype.stackToUndo = function (key) {
        // Init empty shadow object here
        var properties = { shadow: {} };
        // set selecte shadow value(eg. offsetX, offsetY)
        properties.shadow = Object.assign(properties.shadow, this.prevShadow);
        // determine other shadow key(eg. offsetX, offsetY)
        var otherKey = (key == 'offsetX') ? 'offsetY' : 'offsetX', 
        // determine other shadow value
        otherKeyVal = (otherKey == 'offsetX') ? this.offsetX : this.offsetY;
        // check if otherKyeVal is null, set it to 0
        // this will only occur on first time
        otherKeyVal = (!otherKeyVal) ? 0 : otherKeyVal;
        // set other shadow property to properties object
        properties.shadow[otherKey] = otherKeyVal;
        // finally pass the property object to rangeSliderUndoRedo
        this.canvasService.rangeSliderUndoRedo(properties);
        // set selected shadow to null
        this.prevShadow[key] = null;
    };
    DropShadowComponent.prototype.updateShadow = function (obj) {
        if (obj.length > 0) {
            if (obj[0]) {
                this.offsetX = (obj[0].shadow && obj[0].shadow.offsetX != undefined) ? obj[0].shadow.offsetX : 0;
                this.offsetY = (obj[0].shadow && obj[0].shadow.offsetY != undefined) ? obj[0].shadow.offsetY : 0;
                this.blur = (obj[0].shadow && obj[0].shadow.blur != undefined) ? obj[0].shadow.blur : 0;
                this.selectedColor = (obj[0].shadow && obj[0].shadow.color != undefined) ? obj[0].shadow.color : this.mainService.colorData.defaultColor.color_code;
                [0];
            }
            [0];
        }
        else {
            this.offsetX = (obj.shadow && obj.shadow.offsetX != undefined) ? obj.shadow.offsetX : 0;
            this.offsetY = (obj.shadow && obj.shadow.offsetY != undefined) ? obj.shadow.offsetY : 0;
            this.blur = (obj.shadow && obj.shadow.blur != undefined) ? obj.shadow.blur : 0;
            this.selectedColor = (obj.shadow && obj.shadow.color != undefined) ? obj.shadow.color : this.mainService.colorData.defaultColor.color_code;
        }
    };
    DropShadowComponent.prototype.resetShadow = function () {
        var _this = this;
        if (!this.canvasService.currentCanvas)
            return;
        var selectedObjs = this.canvasService.currentCanvas.getActiveObjects();
        selectedObjs.filter(function (obj) {
            _this.offsetX = '0';
            _this.offsetY = '0';
            _this.blur = '0';
            if (obj) {
                var shadow = {
                    offsetX: 0,
                    offsetY: 0,
                    blur: 0,
                    color: _this.mainService.colorData.defaultColor.color_code,
                };
                var properties = {
                    shadow: shadow
                };
                if (_this.mainService.colorData.defaultColor) {
                    _this.selectedColor = Object.assign({}, _this.mainService.colorData.defaultColor.color_code);
                }
                var params = {
                    obj: obj,
                    properties: properties,
                    crudServiceString: 'this.updateObjectService',
                };
                _this.canvasService.objectCRUD(params);
            }
        });
    };
    DropShadowComponent.prototype.colorPickerToggleShadow = function () {
        if (this.hideColorToggleShadow == 1) {
            this.hideColorToggleShadow = 0;
        }
        else if (this.hideColorToggleShadow == 0) {
            this.hideColorToggleShadow = 1;
        }
    };
    DropShadowComponent.prototype.changeColorShadow = function (shadowColor) {
        if (!this.canvasService.currentCanvas)
            return;
        this.selectedColor = shadowColor;
        var selectedObjs = this.canvasService.currentCanvas.getActiveObjects();
        var shadow = {
            offsetX: this.offsetX,
            offsetY: this.offsetY,
            blur: this.blur,
            color: shadowColor
        };
        var properties = {
            shadow: shadow
        };
        this.mainService.updateObjectProperties(selectedObjs, properties);
    };
    DropShadowComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[drop-shadow]',
            template: __webpack_require__(/*! ./drop-shadow.component.html */ "./src/app/components/drop-shadow/drop-shadow.component.html"),
            styles: [__webpack_require__(/*! ./drop-shadow.component.scss */ "./src/app/components/drop-shadow/drop-shadow.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_canvas_service__WEBPACK_IMPORTED_MODULE_2__["CanvasService"], angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubService"], _services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"], _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__["TabsService"]])
    ], DropShadowComponent);
    return DropShadowComponent;
}());



/***/ }),

/***/ "./src/app/components/font/font.component.html":
/*!*****************************************************!*\
  !*** ./src/app/components/font/font.component.html ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ul class=\"hide-fonts\">\n    <li *ngFor=\"let object of fontService.fontarr\">\n        <span [style.font-family]=\"object.font_label\"> </span>\n    </li>\n</ul>\n\n<accordion-group class=\"byi-accord\" *ngIf=\"!mainService.isResponsive\" [isOpen]=\"openAccordian\" [hidden]=\"componentHide\">\n    <button class=\"byi-accordion-title btn btn-link btn-block clearfix\" accordion-heading>\n        <span>{{'Font' | translate}}</span>\n    </button>\n    <div class=\"byi-accord-content byi-tooltip-font\">\n        <div class=\"byie-option byie-font-dropdown\">\n            <div class=\"byi-fonts\" [class.open]=\"isToggle\">\n                <button type=\"button\" class=\"byi-button\" (click)=\"isToggleOpen()\"\n                    tooltip=\"{{'Select Font' | translate}}\"> {{fontService.activeFontFamily?.font_label}}<span\n                        class=\"caret\"></span></button>\n                <ng-container [ngTemplateOutlet]=\"fontFamily\"></ng-container>\n            </div>\n            <ng-container [ngTemplateOutlet]=\"colors\"></ng-container>\n        </div>\n        <ng-container [ngTemplateOutlet]=\"fonts\"></ng-container>\n\n    </div>\n</accordion-group>\n\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('font')\" [attr.hidden]=\"componentHide\">\n    <ng-template tabHeading>\n        <span>{{'Font' | translate}}</span>\n    </ng-template>\n    <ng-container [ngTemplateOutlet]=\"fonts\"></ng-container>\n    <ng-container [ngTemplateOutlet]=\"colors\"></ng-container>\n</tab>\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('font')\" [attr.hidden]=\"componentHide\">\n    <ng-template tabHeading>\n        <span>{{'Font Family' | translate}}</span>\n    </ng-template>\n    <ng-container [ngTemplateOutlet]=\"fontFamily\"></ng-container>\n</tab>\n<ng-template #fontFamily>\n    <ng-container *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('font')\"\n        [attr.hidden]=\"componentHide\">\n        <div class=\"byi-fullview-toggle\">\n            <button type=\"button\" (click)=\"showFonts(showAllFonts,backArrow)\">\n                <span></span>\n                <span></span>\n                <span></span>\n            </button>\n        </div>\n    </ng-container>\n    <div class=\"byi-fonts-wrap\" [class.byi-fonts-wrap-mob]=\"mainService.isResponsive\">\n        <ul #scrollToBottom *ngIf=\"!mainService.isResponsive\">\n            <li tooltip=\"{{object.font_label}}\" role=\"menuitem\" *ngFor=\"let object of fontService.fontarr\"\n                (click)=\"changeFontFamily(object)\"\n                [ngClass]=\"{'selected': fontService.activeFontFamily.font_label == object.font_label }\"\n                class=\"font-item\">\n                <span *ngIf=\"!object.font_image\" [style.font-family]=\"object.font_label\">{{object.font_label}}</span>\n                <img [src]=\"object.font_image\" *ngIf=\"object.font_image\" />\n            </li>\n            <div *ngIf=\"isEnableloadmore && !mainService.isResponsive\" class=\"loadmore-action font-loadMore\">\n                <input class=\"loadmore-btn\" type=\"button\" value=\"{{'Load More' | translate}}\" (click)=\"loadMoreFont()\">\n            </div>\n        </ul>\n        <ul #scrollToBottom *ngIf=\"mainService.isResponsive\" infiniteScroll [horizontal]=\"true\"\n            [infiniteScrollDistance]=\"0\" [infiniteScrollThrottle]=\"1000\" [scrollWindow]=\"false\"\n            (scrolled)=\"loadMoreFont()\" #scrollToBottom\n            [infiniteScrollDisabled]=\"!isEnableloadmore || !allowPlaceholderLoader\">\n            <li tooltip=\"{{object.font_label}}\" role=\"menuitem\" *ngFor=\"let object of fontService.fontarr\"\n                (click)=\"changeFontFamily(object)\"\n                [ngClass]=\"{'selected': fontService.activeFontFamily.font_label == object.font_label }\"\n                class=\"font-item mobile\">\n                <span *ngIf=\"!object.font_image\" [style.font-family]=\"object.font_label\">{{object.font_label}}</span>\n                <img [src]=\"object.font_image\" *ngIf=\"object.font_image\" />\n            </li>\n            <li [attr.hidden]=\"(!showPlaceholder) ? true : null\" *ngFor=\"let temp of mainService.customPlaceholderArr\"\n                placeholder-loader [loaderHeight]='25' [loaderWidth]='100'></li>\n            <div *ngIf=\"isEnableloadmore && mainService.isResponsive && showAllFonts\"\n                class=\"loadmore-action font-loadMore\">\n                <input class=\"loadmore-btn\" type=\"button\" value=\"{{'Load More' | translate}}\" (click)=\"loadMoreFont()\">\n            </div>\n        </ul>\n    </div>\n    <div *ngIf=\"isEnableloadmore && !mainService.isResponsive && showAllFonts\" class=\"loadmore-action font-loadMore\">\n        <input class=\"loadmore-btn\" type=\"button\" value=\"{{'Load More' | translate}}\" (click)=\"loadMoreFont()\">\n    </div>\n</ng-template>\n<ng-template #colors>\n    <div class=\"byie-custom-color\">\n        <div custom-color-picker [type]=\"'simple'\" [activeColor]=\"selectedColor\" [hideColorToggle]=\"hideColorToggleFont\"\n            (colorPickerToggle)=\"colorPickerToggleFont($event)\" (changeColorEvent)=\"changeFontColor($event)\"></div>\n    </div>\n</ng-template>\n<ng-template #fonts>\n    <div class=\"byie-option byie-font-size\">\n        <label>{{'Size' | translate}}</label>\n        <div class=\"byi-range-box byie-count-wrap\">\n            <div class=\"byi-rb-input\">\n                <span class=\"byie-count\">{{fontSize}}</span>\n                <input type=\"range\" [(ngModel)]=\"fontSize\" (input)=\"changeFontSize()\"\n                    (mousedown)=\"setPrevValue($event.target.value)\" (change)=\"stackToUndo()\" step=\"1\" min=\"12\" max=\"60\"\n                    class=\"slider\">\n            </div>\n        </div>\n    </div>\n    <div class=\"byie-option byie-font-style\">\n        <ul class=\"byie-deco\">\n            <li>\n                <button class=\"byi-i byi-b\" (click)=\"changeFontStyle('bold')\"\n                    [ngClass]=\"{'selected': fontStyleArr.indexOf('bold') >= 0}\" tooltip=\"{{'Bold' | translate}}\">\n                    <svg class=\"icon icon-text-bold\" viewBox=\"0 0 30 30\">\n                        <use xlink:href=\"assets/img/sprite.svg#icon-text-bold\"></use>\n                    </svg>\n                </button>\n            </li>\n            <li>\n                <button class=\"byi-i byi-it\" (click)=\"changeFontStyle('italic')\"\n                    [ngClass]=\"{'selected': fontStyleArr.indexOf('italic') >= 0}\" tooltip=\"{{'Italic' | translate}}\">\n                    <svg class=\"icon icon-text-italic\" viewBox=\"0 0 30 30\">\n                        <use xlink:href=\"assets/img/sprite.svg#icon-text-italic\"></use>\n                    </svg>\n                </button>\n            </li>\n            <li>\n                <button class=\"byi-i byi-u\" (click)=\"changeFontStyle('underline')\"\n                    [ngClass]=\"{'selected': fontStyleArr.indexOf('underline') >= 0}\"\n                    tooltip=\"{{'Underline' | translate}}\">\n                    <svg class=\"icon icon-text-underline\" viewBox=\"0 0 30 30\">\n                        <use xlink:href=\"assets/img/sprite.svg#icon-text-underline\"></use>\n                    </svg>\n                </button>\n            </li>\n        </ul>\n        <ul class=\"byie-deco byie-text-align\">\n            <li>\n                <button [class.disabled]=\"enableForMultiLine\" class=\"byi-i byi-al\"\n                    [ngClass]=\"{'selected': textAlign == 'left' }\" (click)=\"setTextAlign('left')\"\n                    tooltip=\"{{'Left' | translate}}\">\n                    <svg class=\"icon icon-text-aleft\" viewBox=\"0 0 30 30\">\n                        <use xlink:href=\"assets/img/sprite.svg#icon-text-aleft\"></use>\n                    </svg>\n                </button>\n            </li>\n            <li>\n                <button class=\"byi-i byi-ac\" [ngClass]=\"{'selected': textAlign == 'center' }\"\n                    (click)=\"setTextAlign('center')\" [class.disabled]=\"enableForMultiLine\"\n                    tooltip=\"{{'Center' | translate}}\">\n                    <svg class=\"icon icon-text-acenter\" viewBox=\"0 0 30 30\">\n                        <use xlink:href=\"assets/img/sprite.svg#icon-text-acenter\"></use>\n                    </svg>\n                </button>\n            </li>\n            <li>\n                <button class=\"byi-i byi-ar\" [ngClass]=\"{'selected': textAlign == 'right' }\"\n                    (click)=\"setTextAlign('right')\" [class.disabled]=\"enableForMultiLine\"\n                    tooltip=\"{{'Right' | translate}}\">\n                    <svg class=\"icon icon-text-aright\" viewBox=\"0 0 30 30\">\n                        <use xlink:href=\"assets/img/sprite.svg#icon-text-aright\"></use>\n                    </svg>\n                </button>\n            </li>\n            <li>\n                <button class=\"byi-i byi-aj\" [ngClass]=\"{'selected': textAlign == 'justify' }\"\n                    (click)=\"setTextAlign('justify')\" [class.disabled]=\"enableForMultiLine\"\n                    tooltip=\"{{'Justify' | translate}}\">\n                    <svg class=\"icon icon-text-ajustify\" viewBox=\"0 0 30 30\">\n                        <use xlink:href=\"assets/img/sprite.svg#icon-text-ajustify\"></use>\n                    </svg>\n                </button>\n            </li>\n        </ul>\n    </div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/font/font.component.scss":
/*!*****************************************************!*\
  !*** ./src/app/components/font/font.component.scss ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZm9udC9mb250LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/font/font.component.ts":
/*!***************************************************!*\
  !*** ./src/app/components/font/font.component.ts ***!
  \***************************************************/
/*! exports provided: FontComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FontComponent", function() { return FontComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _font_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./font.service */ "./src/app/components/font/font.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _placeholder_loader_placholder_loader_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../placeholder-loader/placholder-loader.service */ "./src/app/components/placeholder-loader/placholder-loader.service.ts");









var FontComponent = /** @class */ (function () {
    function FontComponent(canvasService, eventService, mainService, tabsService, fontService, cdr, placholderLoaderService) {
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.mainService = mainService;
        this.tabsService = tabsService;
        this.fontService = fontService;
        this.cdr = cdr;
        this.placholderLoaderService = placholderLoaderService;
        this.fontFamily = 'select font style';
        this.isDisplay = false;
        this.fontSizeArray = ['12', '14', '16', '18', '20', '22'];
        this.fontStyleArr = [];
        this.colorarr = [];
        this.hideColorToggleFont = 1;
        this.componentHide = true;
        // Resolve sync issue for load fonts and load colors
        this.isColorLoaded = false;
        this.isToggle = false;
        this.fontImg = [];
        this.imageExists = true;
        this.notImg = false;
        this.showAllFonts = false;
        this.backArrow = false;
        this.loadPlaintext = false;
        this.openAccordian = false;
        this.loadmore = 0;
        this.isEnableloadmore = false;
        this.checkFontScroll = false;
        // infinite scroll
        this.customPlaceholderArr = [];
        this.tabsService.registerTabs('font', 'plain-text');
        this.tabsService.registerTabs('font', 'name-number');
        this.enableDisableAlignment();
    }
    FontComponent.prototype.enableDisableAlignment = function () {
        this.enableForMultiLine = this.enableForMultipleObject();
    };
    FontComponent.prototype.enableForSingleObj = function () {
        var obj = this.canvasService.getActiveObject();
        if (obj == false)
            return false;
        return true;
    };
    FontComponent.prototype.enableForMultipleObject = function () {
        var totalAddedObjects = (this.canvasService.currentCanvas && this.canvasService.currentCanvas.getActiveObject() && this.canvasService.currentCanvas.getActiveObject().type == "text") ? this.canvasService.currentCanvas.getActiveObject()._textLines.length : 0;
        if (this.enableForSingleObj() === true && totalAddedObjects > 1)
            return null;
        return true;
    };
    FontComponent.prototype.ngOnInit = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.allowPlaceholderLoader = this.mainService.isResponsive;
                this.loadMoreFont(true);
                /*if (!this.fontService.defaultFontFamily.length)
                    await this.fontService.getFonts(this.loadmore);
                if (this.fontService.fontarr && this.fontService.fontarr.length) {
                    this.updateProperties();
                    this.loadFonts();
                }*/
                this.subscribeEvents();
                this.eventService.$sub('closeFullView', function (backArrow) {
                    _this.showAllFonts = backArrow;
                    _this.showFonts(_this.showAllFonts);
                });
                return [2 /*return*/];
            });
        });
    };
    FontComponent.prototype.ngAfterViewChecked = function () {
        try {
            if (this.checkFontScroll) {
                this.scrollToBottom();
                this.checkFontScroll = false;
            }
        }
        catch (err) { }
    };
    FontComponent.prototype.scrollToBottom = function () {
        try {
            if (!this.mainService.isResponsive)
                this.ScrollContainer.nativeElement.scrollTop = this.ScrollContainer.nativeElement.scrollHeight;
        }
        catch (err) { }
    };
    FontComponent.prototype.updateProperties = function () {
        var _this = this;
        if (!this.canvasService.currentCanvas)
            return;
        var selectedObjs = this.canvasService.currentCanvas.getActiveObjects();
        this.isEnableloadmore = this.fontService.isEnableloadmore;
        selectedObjs.filter(function (obj) {
            if (obj.type != "text") {
                _this.resetFontProperties();
                return;
            }
            ;
            if (_this.fontService.isFontLoaded === true) {
                if (obj.fontFamily && _this.fontService.activeFontFamily.font_label != obj.fontFamily) {
                    _this.fontService.activeFontFamily.font_label = obj.fontFamily;
                    var originalIndex = _this.fontService.fontarr.findIndex(function (data) { return data.font_label === obj.fontFamily; });
                    if (originalIndex != -1) {
                        var tmp = _this.fontService.fontarr[0];
                        _this.fontService.fontarr[0] = _this.fontService.fontarr[originalIndex];
                        _this.fontService.fontarr[originalIndex] = tmp;
                    }
                }
                if (obj.fontSize && _this.fontSize != obj.fontSize) {
                    _this.fontSize = obj.fontSize;
                }
            }
            if (obj.textAlign && _this.textAlign != obj.textAlign) {
                _this.textAlign = obj.textAlign;
            }
            _this.fontStyleArr = [];
            if (obj.fontWeight == 'bold') {
                _this.fontStyleArr.push('bold');
            }
            if (obj.fontStyle == 'italic') {
                _this.fontStyleArr.push('italic');
            }
            if (obj.underline == true) {
                _this.fontStyleArr.push('underline');
            }
            if (obj) {
                _this.selectedColor = obj.fill;
                obj.dirty = true;
            }
        });
    };
    FontComponent.prototype.resetFontProperties = function () {
        if (this.mainService.colorData.defaultColor && this.mainService.colorData.defaultColor.color_code) {
            this.eventService.$pub('changedColor', this.mainService.colorData.defaultColor.color_code);
            this.selectedColor = this.mainService.colorData.defaultColor.color_code;
        }
    };
    FontComponent.prototype.loadMoreFont = function (resetArr) {
        if (resetArr === void 0) { resetArr = false; }
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.showPlaceholder = true;
                        this.loadmore++;
                        if (!!this.fontService.fontLoadRequested) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.fontService.getFonts(this.loadmore, resetArr)];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (this.fontService.fontarr && this.fontService.fontarr.length) {
                            this.updateProperties();
                            this.loadFonts();
                            this.checkFontScroll = true;
                            this.showPlaceholder = false;
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    FontComponent.prototype.subscribeEvents = function () {
        var _this = this;
        var self = this;
        this.eventService.$sub('objectAdded', function (obj) {
            self.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
            self.openAccordian = (obj.type == "text") ? true : null;
            _this.cdr.detectChanges();
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            if (obj && (obj.type == "text" || Array.isArray(obj) && obj[0] && obj[0].type == 'text')) {
                _this.resetFontProperties();
                self.openAccordian = null;
                self.componentHide = true;
            }
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            _this.enableDisableAlignment();
            _this.updateProperties();
            //this.enableTooltip();
        });
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            _this.enableDisableAlignment();
            /*if(self.canvasService.getObjectType(obj,"text") && !Array.isArray(obj)){*/
            if (obj.type == 'activeSelection') {
                var isObjText = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type != 'text'; }));
                if (isObjText == -1) {
                    self.componentHide = null;
                    self.openAccordian = true;
                }
                else {
                    self.componentHide = true;
                    self.openAccordian = null;
                }
            }
            else {
                self.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
                self.openAccordian = (obj.type == "text") ? true : null;
            }
            _this.cdr.detectChanges();
            _this.updateProperties();
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            _this.enableDisableAlignment();
            if (obj.type == 'activeSelection') {
                var isObjText = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type != 'text'; }));
                if (isObjText == -1) {
                    self.componentHide = null;
                    self.openAccordian = true;
                }
                else {
                    self.componentHide = true;
                    self.openAccordian = null;
                }
            }
            else {
                _this.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
                self.openAccordian = (obj.type == "text") ? true : null;
            }
            _this.updateProperties();
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.enableDisableAlignment();
            _this.componentHide = true;
            _this.openAccordian = null;
            _this.updateProperties();
        });
        this.eventService.$sub('imageSideChanged', function () {
            _this.updateProperties();
        });
        this.eventService.$sub('canvasObjectScaled', function () {
            _this.changeFontScale();
        });
        this.eventService.$sub('closeColorPicker', function () {
            _this.hideColorToggleFont = 1;
        });
        this.eventService.$sub('canvasObjectModified', function (obj) {
            _this.enableDisableAlignment();
            _this.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
            self.openAccordian = (obj.type == "text") ? true : null;
            _this.updateProperties();
        });
        this.eventService.$sub('closeFontWrapper', function () {
            _this.isToggle = false;
        });
    };
    FontComponent.prototype.loadFonts = function () {
        //to load fontfile 
        var fonts = this.fontService.fontarr;
        if (fonts) {
            var style_1 = document.createElement('style');
            style_1.type = 'text/css';
            var fontFamily_1 = '';
            fonts.filter(function (fontObj) {
                fontFamily_1 = fontObj.font_file;
                var css = " @font-face{ font-family:'" + fontObj.font_label + "'; src:url('" + fontFamily_1 + "'); }";
                var length = document.getElementsByTagName('style').length - 1;
                if (document.getElementsByTagName('style')[length].getAttribute("class") == "font-css") {
                    style_1.innerHTML += css;
                }
                else {
                    style_1.setAttribute("class", "font-css");
                    style_1.innerHTML += css;
                }
            });
            document.getElementsByTagName('head')[0].appendChild(style_1);
            // this.showPlaceholder = false;
            // this.loadPlaintext = true;
            // this.eventService.$pub('plaintextloader', this.loadPlaintext);
        }
    };
    FontComponent.prototype.changeFontFamily = function (object) {
        this.fontService.activeFontFamily = Object.assign({}, object);
        var selectedObjs = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        properties.fontFamily = this.fontService.activeFontFamily.font_label;
        properties.font_file = this.fontService.activeFontFamily.font_file;
        properties.dirty = true;
        this.mainService.updateObjectProperties(selectedObjs, properties);
        this.showFonts(true);
    };
    FontComponent.prototype.changeFontSize = function () {
        var selectedObjs = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        properties.fontSize = this.fontSize;
        this.mainService.updateObjectProperties(selectedObjs, properties);
    };
    FontComponent.prototype.changeFontStyle = function (fontStyle) {
        // variable declaration
        var selectedObjs = this.canvasService.currentCanvas.getActiveObjects(), found = this.fontStyleArr.indexOf(fontStyle);
        // if obj is found and specified font style exists in our stored fontStyleArr obj
        // remove the same from object, else push it into the object
        if (selectedObjs && found >= 0) {
            this.fontStyleArr.splice(found, 1);
        }
        else {
            this.fontStyleArr.push(fontStyle);
        }
        // style variable here works as a flag variable
        // that will toggle the font style,(apply/remove based on found variable)
        var style = (found >= 0) ? 'normal' : fontStyle, properties = {};
        // set property object
        switch (fontStyle) {
            case "bold":
                properties.fontWeight = style;
                break;
            case "italic":
                properties.fontStyle = style;
                break;
            case "underline":
                properties.underline = (style == 'normal') ? false : true;
                break;
        }
        // For underline
        properties.dirty = true;
        // Update canvas text object with new properties
        this.mainService.updateObjectProperties(selectedObjs, properties);
    };
    FontComponent.prototype.setTextAlign = function (align) {
        var obj = this.canvasService.getActiveObject(), properties = {};
        if (obj) {
            properties.textAlign = align;
            this.textAlign = align;
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
            };
            this.canvasService.objectCRUD(params);
        }
    };
    FontComponent.prototype.colorPickerToggleFont = function (event) {
        if (this.hideColorToggleFont == 1) {
            this.hideColorToggleFont = 0;
        }
        else if (this.hideColorToggleFont == 0) {
            this.hideColorToggleFont = 1;
        }
    };
    FontComponent.prototype.changeFontColor = function (color) {
        this.selectedColor = color;
        this.eventService.$pub('changedColor', color);
        var obj = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        if (obj) {
            properties.fill = color;
            properties.dirty = true;
            this.mainService.updateObjectProperties(obj, properties);
        }
    };
    FontComponent.prototype.changeFontScale = function () {
        var obj = this.canvasService.currentCanvas.getActiveObjects();
        if (obj && obj.type != "text")
            return;
        var scaleY = obj.scaleY, properties = {}, newfontsize = (obj.fontSize * obj.scaleX);
        properties.fontSize = parseInt(newfontsize, 10);
        this.fontSize = parseInt(newfontsize, 10);
        properties.scaleX = 1;
        properties.scaleY = 1;
        /*let params = {
            obj : obj,
            properties : properties,
            crudServiceString : 'this.updateObjectService',
        };
        this.canvasService.objectCRUD(params);*/
        obj.set(properties);
        this.canvasService.currentCanvas.renderAll();
    };
    FontComponent.prototype.isToggleOpen = function () {
        this.isToggle = !this.isToggle;
    };
    FontComponent.prototype.showFonts = function (showAllFonts) {
        this.showAllFonts = !showAllFonts;
        this.eventService.$pub('showFonts', { showAllFonts: this.showAllFonts, title: 'Change Font Family' });
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_7__["LoaderComponent"])
    ], FontComponent.prototype, "loaderComponent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('scrollToBottom'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"])
    ], FontComponent.prototype, "ScrollContainer", void 0);
    FontComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[font]',
            template: __webpack_require__(/*! ./font.component.html */ "./src/app/components/font/font.component.html"),
            styles: [__webpack_require__(/*! ./font.component.scss */ "./src/app/components/font/font.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_5__["MainService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_6__["TabsService"],
            _font_service__WEBPACK_IMPORTED_MODULE_1__["FontService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"],
            _placeholder_loader_placholder_loader_service__WEBPACK_IMPORTED_MODULE_8__["PlacholderLoaderService"]])
    ], FontComponent);
    return FontComponent;
}());



/***/ }),

/***/ "./src/app/components/font/font.service.ts":
/*!*************************************************!*\
  !*** ./src/app/components/font/font.service.ts ***!
  \*************************************************/
/*! exports provided: FontService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FontService", function() { return FontService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");




var FontService = /** @class */ (function () {
    function FontService(mainService, eventService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.fontarr = [];
        this.defaultFontFamily = [];
        this.isFontLoaded = false;
        this.isEnableloadmore = false;
        // if call is already made, 
        // don't repeat again,
        this.fontLoadRequested = false;
    }
    FontService.prototype.getFonts = function (page, resetArr) {
        if (page === void 0) { page = 1; }
        if (resetArr === void 0) { resetArr = false; }
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var params, url, cacheKey;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        /*if (this.fontLoadRequested) return;*/
                        this.fontLoadRequested = true;
                        if (resetArr === true)
                            this.fontarr = [];
                        params = { page: page }, url = 'productdesigner/text/getFonts', cacheKey = 'getFonts' + this.mainService.baseUrl + page;
                        return [4 /*yield*/, this.mainService.getData(url, params, cacheKey).then(function (fontData) {
                                _this.fontLoadRequested = false;
                                _this.isEnableloadmore = fontData.loadMoreFlag;
                                _this.fontarr = _this.fontarr.concat(fontData.fonts);
                                // if(this.isEnableloadmore == 1){
                                //   this.fontarr.push(Object.assign([{}], fontData.fonts));
                                // }else{
                                //   this.fontarr = Object.assign([{}], fontData.fonts);
                                // }
                                _this.defaultFontFamily = _this.activeFontFamily = fontData.defaultFontFamily;
                                _this.defaultFontSize = fontData.defaultFontSize;
                                _this.isFontLoaded = true;
                                _this.textLimitEnable = fontData.textLimitEnable;
                                _this.textLimitCounter = fontData.textLimitCounter;
                                _this.limitAlert = fontData.limitAlert;
                                // this.eventService.$pub('getFonts', (fontData));
                            }).catch(function (err) { return console.log(err); })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    FontService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__["PubSubService"]])
    ], FontService);
    return FontService;
}());



/***/ }),

/***/ "./src/app/components/footer/footer.component.html":
/*!*********************************************************!*\
  !*** ./src/app/components/footer/footer.component.html ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-footer\">\n  <div class=\"byi-footer-cta\" product-demo [loadContent]=\"'reqForDemo'\"></div>\n  <div class=\"design-area-footer\">\n    <designarea-controls></designarea-controls>\n  </div>\n  <div class=\"byif-right\">\n    <div class=\"byi-cart-wrap\">\n      <price></price>\n      <div class=\"byi-cart-action\">\n        <cart></cart>\n      </div>\n    </div>\n  </div>\n</div>"

/***/ }),

/***/ "./src/app/components/footer/footer.component.scss":
/*!*********************************************************!*\
  !*** ./src/app/components/footer/footer.component.scss ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvZm9vdGVyL2Zvb3Rlci5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/footer/footer.component.ts":
/*!*******************************************************!*\
  !*** ./src/app/components/footer/footer.component.ts ***!
  \*******************************************************/
/*! exports provided: FooterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FooterComponent", function() { return FooterComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");



var FooterComponent = /** @class */ (function () {
    function FooterComponent(eventService) {
        this.eventService = eventService;
    }
    FooterComponent.prototype.ngOnInit = function () {
    };
    FooterComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'footer',
            template: __webpack_require__(/*! ./footer.component.html */ "./src/app/components/footer/footer.component.html"),
            styles: [__webpack_require__(/*! ./footer.component.scss */ "./src/app/components/footer/footer.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"]])
    ], FooterComponent);
    return FooterComponent;
}());



/***/ }),

/***/ "./src/app/components/header/header.component.html":
/*!*********************************************************!*\
  !*** ./src/app/components/header/header.component.html ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngIf=\"!mainService.isResponsive\" class=\"byi-header\">\n\t<div class=\"byii-left\">\n\t\t<div class=\"byi-brand\">\n\t\t\t<h1>\n\t\t\t\t<a href=\"javascript:void(0)\" (click)=\"redirectHomePage(homePageLink)\">\n\t\t\t\t\t<img src=\"{{logoSrc}}\" alt=\"{{logoAlt}}\" tooltip=\"{{logoAlt}}\">\n\t\t\t\t</a>\n\t\t\t</h1>\n\t\t</div>\n\t\t<div products class=\"byi-products\"></div>\n\t</div>\n\t<div class=\"byi-output-action\">\n\t\t<ul class=\"bta-link\">\n\t\t\t<!-- <li class=\"bta-link__3d\" three-d-preview></li> -->\n\t\t\t<li preview></li>\n\t\t\t<li social-media-sharing></li>\n\t\t\t<li *ngIf=\"mainService.isAdmin == false\" save-design></li>\n\t\t\t<li design-templates [loadContent]=\"'header'\"></li>\n\t\t\t<li download></li>\n\t\t</ul>\n\t</div>\n\t<div class=\"byia-right\">\n\t\t<ul>\n\t\t\t<li product-demo [loadContent]=\"'pricePage'\"></li>\n\t\t\t<li class=\"byi-product-intro\" intro></li>\n\t\t\t<li class=\"byi-customer-info\" customer-login></li>\n\t\t</ul>\n\t</div>\n</div>\n\n<div *ngIf=\"mainService.isResponsive\" class=\"byi-header-mob\">\n\t<div class=\"byih-left\">\n\t\t<div class=\"byi-brand\">\n\t\t\t<h1>\n\t\t\t\t<a href=\"javascript:void(0)\" (click)=\"redirectHomePage(homePageLink)\">\n\t\t\t\t\t<img src=\"{{logoSrc}}\" alt=\"{{logoAlt}}\" title=\"{{logoAlt}}\">\n\t\t\t\t</a>\n\t\t\t</h1>\n\t\t</div>\n\t</div>\n\t<div class=\"byi-products-mob\">\n\t\t<div products class=\"byi-products-list\"></div>\n\t</div>\n\t<div class=\"byih-right\">\n\t\t<ul>\n\t\t\t<li class=\"byi-customer-info\" customer-login></li>\n\t\t\t<li class=\"byi-top-cart\">\n\t\t\t\t<cart></cart>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>"

/***/ }),

/***/ "./src/app/components/header/header.component.scss":
/*!*********************************************************!*\
  !*** ./src/app/components/header/header.component.scss ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvaGVhZGVyL2hlYWRlci5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/header/header.component.ts":
/*!*******************************************************!*\
  !*** ./src/app/components/header/header.component.ts ***!
  \*******************************************************/
/*! exports provided: HeaderComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HeaderComponent", function() { return HeaderComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");




var HeaderComponent = /** @class */ (function () {
    function HeaderComponent(mainService, eventService) {
        this.mainService = mainService;
        this.eventService = eventService;
        var logoUrl = this.mainService.baseUrl;
        if (this.mainService.isAdmin) {
            var elem = document.getElementsByName('redirectBackUrl');
            if (elem && elem[0] && elem[0].value) {
                logoUrl = elem[0].value;
            }
        }
        this.homePageLink = logoUrl;
    }
    HeaderComponent.prototype.getPageConfiguration = function () {
        var _this = this;
        var params = {}, url = 'productdesigner/index/getPageConfiguration', cacheKey = 'getPageConfiguration' + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey).then(function (pageData) {
            _this.logoSrc = pageData.logo_src;
            _this.logoAlt = pageData.logo_alt;
        }).catch(function (err) { return console.log(err); });
    };
    HeaderComponent.prototype.redirectHomePage = function (homePageLink) {
        if (window.location != window.parent.location) {
            window.top.location.href = homePageLink;
        }
        else {
            window.location.href = homePageLink;
        }
    };
    HeaderComponent.prototype.ngOnInit = function () {
        this.getPageConfiguration();
    };
    HeaderComponent.prototype.openLoginModal = function () {
        this.eventService.$pub('openLoginModal');
    };
    HeaderComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: 'header',
            template: __webpack_require__(/*! ./header.component.html */ "./src/app/components/header/header.component.html"),
            styles: [__webpack_require__(/*! ./header.component.scss */ "./src/app/components/header/header.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__["PubSubService"]])
    ], HeaderComponent);
    return HeaderComponent;
}());



/***/ }),

/***/ "./src/app/components/image-effects/image-effects.component.html":
/*!***********************************************************************!*\
  !*** ./src/app/components/image-effects/image-effects.component.html ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<accordion-group [isOpen]=\"openAccordian\" class=\"byi-accord\" *ngIf=\"!mainService.isResponsive\" [hidden]=\"componentHide\">\n   <button class=\"byi-accordion-title\" accordion-heading>\n      <span>{{'Image Effects' | translate}}</span>\n   </button>\n   <div class=\"byi-accord-content\">\n      <ng-container [ngTemplateOutlet]=\"imageEffectsRef\"></ng-container>\n   </div>\n</accordion-group>\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('image-effects')\" [attr.hidden]=\"componentHide\">\n   <ng-template tabHeading>\n      <span>{{'Image Effects' | translate}}</span>\n   </ng-template>\n   <ng-container [ngTemplateOutlet]=\"imageEffectsRef\"></ng-container>\n</tab>\n<ng-template #imageEffectsRef>\n   <div loader #loaderComponent></div>\n\n   <!-- For JPG,JPEG,PNG Image -->\n   <div class=\"byi-tab-cats byi-img-effect\" *ngIf=\"loaderComponent.showSubLoader === false && displayEffects\"\n      [ngClass]=\"displayEffects ? '' : 'disabled'\">\n      <ul>\n         <li *ngFor=\"let effect of imageEffects; let i = index\">\n            <a class=\"image-with-text\" [class.selected]=\"effectArray.indexOf(effect.effect_name) > -1\"\n               href=\"javascript:void(0)\" (click)=\"changeEffect(effect.effect_name)\">\n               <span><img src=\"{{effect.effect_image}}\"></span>\n               <label>{{effect.effect_name}}</label>\n            </a>            \n            <div class=\"byi-effect-slider\" *ngIf=\"effect.slider_value != null && effectArray.indexOf(effect.effect_name) > -1\">\n               <input class=\"slider\" value=\"effect.slider_value\" [(ngModel)]=\"sliderValue[effect.effect_name]\" (ngModelChange)=changeSlider(effect.effect_name,$event,i) [max]=\"effect.max\" [min]=\"effect.min\" [step]=\"effect.step\" type=\"range\">\n            </div>\n         </li>\n      </ul>\n   </div>\n   <!-- END For JPG,JPEG,PNG Image -->\n\n   <!-- For SVG Image -->\n   <div class=\"byie-option\" *ngIf=\"loaderComponent.showSubLoader === false && isSvgColorsDisplay\">\n      <div class=\"byi-colors-list byi-imagecolor-list\" #colorContainer>\n         <ul #svgColorContainer id='ul'>\n            <li class=\"byic_color_action\" [style.background]=\"color\" (click)=\"colorPickerToggle(color, $event);\"\n               *ngFor=\"let color of svgColorArr; let i = index\" [id] = \"'id_' + i\">\n            </li>\n         </ul>\n         <div *ngIf=\"!mainService.isResponsive\" id='picker' class=\"byic-colors-select byic-shadow-colors\" [attr.hidden]=\"hideColorToggle ? true : null\" [ngClass]=\"(isLeft) ? 'open-left' : 'open-right'\" #colorPickerContainer>\n            <div custom-color-picker [type]=\"'imageEffect'\" [activeColor]=\"selectedItem\" (changeColorEvent)=\"setFill($event)\"></div>\n         </div>\n         <div *ngIf=\"mainService.isResponsive\" class=\"byic-colors-select byic-shadow-colors\"\n            [attr.hidden]=\"hideColorToggle ? true : null\" [ngClass]=\"(isLeft) ? 'open-left' : 'open-right'\"\n            #colorPickerContainer>\n            <div custom-color-picker [type]=\"'imageEffect'\" [activeColor]=\"selectedItem\" (changeColorEvent)=\"setFill($event)\"></div>\n         </div>\n      </div>\n   </div>\n   <!--END For SVG Image -->\n</ng-template>"

/***/ }),

/***/ "./src/app/components/image-effects/image-effects.component.scss":
/*!***********************************************************************!*\
  !*** ./src/app/components/image-effects/image-effects.component.scss ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/* byi theme color main */\n/* true if dark mode is on */\n/* black */\n/* white */\n/* error color */\n/* warning color */\n/* byi fonts */\n/* default tab icon color */\n/* active tab icon color */\n/* header footer background color (used @ other places where it needs) */\n/* mobile sub header background color */\n/* main canvas background color */\n/* normal text color */\n/* default accordion text color */\n/* active accordion text color */\n/* accordion background color */\n/* accordion background color in product options */\n/* input item backgroud (input , select, textarea, etc.) */\n/* left and right panel background and active tab background */\n/* right panel dark icon color */\n/* right panel dark icon color hover */\n/* light icon color (header icons, footer icons, layer icon, etc.) */\n/* tooltip background color */\n/* tooltip text color */\n/* border color for input item dropdowns catagory list etc. */\n/* range selector background color */\n/* side change icon color canvas area */\n/*-------------------------------------\r\n        Color Scheme (Dark Theme)\r\n-------------------------------------- */\n/*----------------------------------\n        Image Effect Pro Version\n------------------------------------*/\n.byi-img-effect ul li a.selected:before {\n  content: '';\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 2;\n  border-radius: 4px;\n  background-color: rgba(255, 255, 255, 0.5); }\n.byi-img-effect .byi-effect-slider {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 20px;\n  z-index: 3;\n  padding: 5px;\n  margin: 0 5px; }\n.byi-img-effect .byi-effect-slider input[type=\"range\"] {\n    width: 100%; }\n@media screen and (max-width: 1024px) {\n  .byi-img-effect .byi-effect-slider {\n    margin: 0 15px 0 5px; } }\n\r\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvd3d3L2h0bWwvQllJVjIvbWFnMjI4L2FuZ3VsYXIvc3JjL2Fzc2V0cy9zYXNzL3RoZW1lLXN3aXRjaC5zY3NzIiwiL3Zhci93d3cvaHRtbC9CWUlWMi9tYWcyMjgvYW5ndWxhci9zcmMvYXNzZXRzL3Nhc3MvdmFyaWFibGVzLnNjc3MiLCJzcmMvYXBwL2NvbXBvbmVudHMvaW1hZ2UtZWZmZWN0cy9pbWFnZS1lZmZlY3RzLmNvbXBvbmVudC5zY3NzIiwiL3Zhci93d3cvaHRtbC9CWUlWMi9tYWcyMjgvYW5ndWxhci9zcmMvYXBwL2NvbXBvbmVudHMvaW1hZ2UtZWZmZWN0cy9pbWFnZS1lZmZlY3RzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFxQix5QkFBQTtBQUNLLDRCQUFBO0FDRFQsVUFBQTtBQUNDLFVBQUE7QUFDRyxnQkFBQTtBQUNFLGtCQUFBO0FBQ2EsY0FBQTtBQUVaLDJCQUFBO0FBQ1UsMEJBQUE7QUFDWCx3RUFBQTtBQUNPLHVDQUFBO0FBQ1YsaUNBQUE7QUFDTSxzQkFBQTtBQUNDLGlDQUFBO0FBQ1UsZ0NBQUE7QUFDZiwrQkFBQTtBQUNRLGtEQUFBO0FBQ1QsMERBQUE7QUFDRyw4REFBQTtBQUNBLGdDQUFBO0FBQ0csc0NBQUE7QUFDRixvRUFBQTtBQUNGLDZCQUFBO0FBQ0UsdUJBQUE7QUFDRyw2REFBQTtBQUNKLG9DQUFBO0FBQ08sdUNBQUE7QUFFL0I7O3dDQ0V3QztBQzFCeEM7O3FDRDZCcUM7QUMxQnJDO0VBSWdCLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLFVBQVU7RUFDVixrQkFBa0I7RUFDbEIsMENGakJBLEVBQUE7QUVLaEI7RUFpQlEsa0JBQWtCO0VBQ2xCLE9BQU87RUFDUCxRQUFRO0VBQ1IsU0FBUztFQUNULFVBQVU7RUFDVixZQUFZO0VBQ1osYUFBYSxFQUFBO0FBdkJyQjtJQXlCWSxXQUFXLEVBQUE7QUFHbkI7RUE1Qko7SUE4Qlksb0JBQW9CLEVBQUEsRUFDdkIiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL2ltYWdlLWVmZmVjdHMvaW1hZ2UtZWZmZWN0cy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiRieWktdGhlbWU6ICNmMDU5Mjk7IC8qIGJ5aSB0aGVtZSBjb2xvciBtYWluICovXG4kYnlpLWRhcmstc2NoZW1lOiBmYWxzZTsgIC8qIHRydWUgaWYgZGFyayBtb2RlIGlzIG9uICovXG4iLCIkYnlpLWRhcms6ICMwMDA7IC8qIGJsYWNrICovXHJcbiRieWktbGlnaHQ6ICNmZmY7IC8qIHdoaXRlICovXHJcbiRieWktZXJyb3I6ICNmMTJkMmQ7IC8qIGVycm9yIGNvbG9yICovXHJcbiRieWktd2FybmluZzogI0ZGRkY5OTsgLyogd2FybmluZyBjb2xvciAqL1xyXG4kYnlpLWZvbnQ6ICdPcGVuIFNhbnMnLCBzYW5zLXNlcmlmOyAvKiBieWkgZm9udHMgKi9cclxuXHJcbiRieWktdGFiLWljb246ICMyNjI2MjY7IC8qIGRlZmF1bHQgdGFiIGljb24gY29sb3IgKi9cclxuJGJ5aS10YWItaWNvbi1hY3RpdmU6ICRieWktdGhlbWU7IC8qIGFjdGl2ZSB0YWIgaWNvbiBjb2xvciAqL1xyXG4kYnlpLXRvb2xiYXItYmc6ICNmZmY7IC8qIGhlYWRlciBmb290ZXIgYmFja2dyb3VuZCBjb2xvciAodXNlZCBAIG90aGVyIHBsYWNlcyB3aGVyZSBpdCBuZWVkcykgKi9cclxuJGJ5aS1mb290ZXItbW9iLXRvcDogI2Y1ZjVmNTsgLyogbW9iaWxlIHN1YiBoZWFkZXIgYmFja2dyb3VuZCBjb2xvciAqL1xyXG4kYnlpLW1haW4tYmc6ICNmZmY7IC8qIG1haW4gY2FudmFzIGJhY2tncm91bmQgY29sb3IgKi9cclxuJGJ5aS10ZXh0LWNvbG9yOiAjMjYyNjI2OyAvKiBub3JtYWwgdGV4dCBjb2xvciAqL1xyXG4kYnlpLWFjY29yZC10ZXh0OiAjMjYyNjI2OyAvKiBkZWZhdWx0IGFjY29yZGlvbiB0ZXh0IGNvbG9yICovXHJcbiRieWktYWNjb3JkLXRleHQtYWN0aXZlOiAkYnlpLXRoZW1lOyAvKiBhY3RpdmUgYWNjb3JkaW9uIHRleHQgY29sb3IgKi9cclxuJGJ5aS1hY2NvcmQtYmc6ICNmZmY7IC8qIGFjY29yZGlvbiBiYWNrZ3JvdW5kIGNvbG9yICovXHJcbiRieWktYWNjb3JkLWJnLWRhcms6ICNmNWY1ZjU7IC8qIGFjY29yZGlvbiBiYWNrZ3JvdW5kIGNvbG9yIGluIHByb2R1Y3Qgb3B0aW9ucyAqL1xyXG4kYnlpLWlucHV0LWJnOiAjZmZmOyAvKiBpbnB1dCBpdGVtIGJhY2tncm91ZCAoaW5wdXQgLCBzZWxlY3QsIHRleHRhcmVhLCBldGMuKSAqL1xyXG4kYnlpLXBhbmVsLWJnOiAjZjVmNWY1OyAvKiBsZWZ0IGFuZCByaWdodCBwYW5lbCBiYWNrZ3JvdW5kIGFuZCBhY3RpdmUgdGFiIGJhY2tncm91bmQgKi9cclxuJGJ5aS1kYXJraWNvbjogIzRkNGM0YzsgLyogcmlnaHQgcGFuZWwgZGFyayBpY29uIGNvbG9yICovXHJcbiRieWktZGFya2ljb24taG92ZXI6ICMwMDA7IC8qIHJpZ2h0IHBhbmVsIGRhcmsgaWNvbiBjb2xvciBob3ZlciAqL1xyXG4kYnlpLWxpZ2h0aWNvbjogIzgwN2Y3ZjsgLyogbGlnaHQgaWNvbiBjb2xvciAoaGVhZGVyIGljb25zLCBmb290ZXIgaWNvbnMsIGxheWVyIGljb24sIGV0Yy4pICovXHJcbiRieWktdG9vbHRpcC1iZzogIzAwMDsgLyogdG9vbHRpcCBiYWNrZ3JvdW5kIGNvbG9yICovXHJcbiRieWktdG9vbHRpcC10ZXh0OiAjZmZmOyAvKiB0b29sdGlwIHRleHQgY29sb3IgKi9cclxuJGJ5aS1ib3JkZXItY29sb3I6ICNjY2NjY2M7IC8qIGJvcmRlciBjb2xvciBmb3IgaW5wdXQgaXRlbSBkcm9wZG93bnMgY2F0YWdvcnkgbGlzdCBldGMuICovXHJcbiRieWktcmFuZ2UtYmc6ICNiOGI4Yjg7IC8qIHJhbmdlIHNlbGVjdG9yIGJhY2tncm91bmQgY29sb3IgKi9cclxuJGJ5aS1zaWRlY2hhbmdlLWljb246ICNjY2NjY2M7IC8qIHNpZGUgY2hhbmdlIGljb24gY29sb3IgY2FudmFzIGFyZWEgKi9cclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIENvbG9yIFNjaGVtZSAoRGFyayBUaGVtZSlcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuQGlmIHZhcmlhYmxlLWV4aXN0cyhieWktZGFyay1zY2hlbWUpIGFuZCAkYnlpLWRhcmstc2NoZW1lPT10cnVlIHtcclxuICAgICAgICAkYnlpLXRhYi1pY29uOiAjYTVhNWE1O1xyXG4gICAgICAgICRieWktdGFiLWljb24tYWN0aXZlOiAjZmZmO1xyXG4gICAgICAgICRieWktdG9vbGJhci1iZzogIzMwMzAzMDtcclxuICAgICAgICAkYnlpLWZvb3Rlci1tb2ItdG9wOiAjMzAzMDMwO1xyXG4gICAgICAgICRieWktbWFpbi1iZzogIzI4MjgyODtcclxuICAgICAgICAkYnlpLXRleHQtY29sb3I6ICNmMGYwZjA7XHJcbiAgICAgICAgJGJ5aS1hY2NvcmQtdGV4dDogI2JiYjtcclxuICAgICAgICAkYnlpLWFjY29yZC10ZXh0LWFjdGl2ZTogI2YwZjBmMDtcclxuICAgICAgICAkYnlpLWFjY29yZC1iZzogIzMwMzAzMDtcclxuICAgICAgICAkYnlpLWFjY29yZC1iZy1kYXJrOiAjMzAzMDMwO1xyXG4gICAgICAgICRieWktaW5wdXQtYmc6ICM1MjUyNTI7XHJcbiAgICAgICAgJGJ5aS1wYW5lbC1iZzogIzQ3NDc0NztcclxuICAgICAgICAkYnlpLWRhcmtpY29uOiAjZjBmMGYwO1xyXG4gICAgICAgICRieWktZGFya2ljb24taG92ZXI6ICNmMGYwZjA7XHJcbiAgICAgICAgJGJ5aS1saWdodGljb246ICNmMGYwZjA7XHJcbiAgICAgICAgJGJ5aS10b29sdGlwLWJnOiAjMzMzO1xyXG4gICAgICAgICRieWktdG9vbHRpcC10ZXh0OiAjRkZGO1xyXG4gICAgICAgICRieWktYm9yZGVyLWNvbG9yOiAjNjc2NzY3O1xyXG4gICAgICAgICRieWktcmFuZ2UtYmc6IGxpZ2h0ZW4oIzQ3NDc0NywgMTUlKTtcclxuICAgICAgICAkYnlpLXNpZGVjaGFuZ2UtaWNvbjogI2YwZjBmMDtcclxufSIsIi8qIGJ5aSB0aGVtZSBjb2xvciBtYWluICovXG4vKiB0cnVlIGlmIGRhcmsgbW9kZSBpcyBvbiAqL1xuLyogYmxhY2sgKi9cbi8qIHdoaXRlICovXG4vKiBlcnJvciBjb2xvciAqL1xuLyogd2FybmluZyBjb2xvciAqL1xuLyogYnlpIGZvbnRzICovXG4vKiBkZWZhdWx0IHRhYiBpY29uIGNvbG9yICovXG4vKiBhY3RpdmUgdGFiIGljb24gY29sb3IgKi9cbi8qIGhlYWRlciBmb290ZXIgYmFja2dyb3VuZCBjb2xvciAodXNlZCBAIG90aGVyIHBsYWNlcyB3aGVyZSBpdCBuZWVkcykgKi9cbi8qIG1vYmlsZSBzdWIgaGVhZGVyIGJhY2tncm91bmQgY29sb3IgKi9cbi8qIG1haW4gY2FudmFzIGJhY2tncm91bmQgY29sb3IgKi9cbi8qIG5vcm1hbCB0ZXh0IGNvbG9yICovXG4vKiBkZWZhdWx0IGFjY29yZGlvbiB0ZXh0IGNvbG9yICovXG4vKiBhY3RpdmUgYWNjb3JkaW9uIHRleHQgY29sb3IgKi9cbi8qIGFjY29yZGlvbiBiYWNrZ3JvdW5kIGNvbG9yICovXG4vKiBhY2NvcmRpb24gYmFja2dyb3VuZCBjb2xvciBpbiBwcm9kdWN0IG9wdGlvbnMgKi9cbi8qIGlucHV0IGl0ZW0gYmFja2dyb3VkIChpbnB1dCAsIHNlbGVjdCwgdGV4dGFyZWEsIGV0Yy4pICovXG4vKiBsZWZ0IGFuZCByaWdodCBwYW5lbCBiYWNrZ3JvdW5kIGFuZCBhY3RpdmUgdGFiIGJhY2tncm91bmQgKi9cbi8qIHJpZ2h0IHBhbmVsIGRhcmsgaWNvbiBjb2xvciAqL1xuLyogcmlnaHQgcGFuZWwgZGFyayBpY29uIGNvbG9yIGhvdmVyICovXG4vKiBsaWdodCBpY29uIGNvbG9yIChoZWFkZXIgaWNvbnMsIGZvb3RlciBpY29ucywgbGF5ZXIgaWNvbiwgZXRjLikgKi9cbi8qIHRvb2x0aXAgYmFja2dyb3VuZCBjb2xvciAqL1xuLyogdG9vbHRpcCB0ZXh0IGNvbG9yICovXG4vKiBib3JkZXIgY29sb3IgZm9yIGlucHV0IGl0ZW0gZHJvcGRvd25zIGNhdGFnb3J5IGxpc3QgZXRjLiAqL1xuLyogcmFuZ2Ugc2VsZWN0b3IgYmFja2dyb3VuZCBjb2xvciAqL1xuLyogc2lkZSBjaGFuZ2UgaWNvbiBjb2xvciBjYW52YXMgYXJlYSAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgQ29sb3IgU2NoZW1lIChEYXJrIFRoZW1lKVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIEltYWdlIEVmZmVjdCBQcm8gVmVyc2lvblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi5ieWktaW1nLWVmZmVjdCB1bCBsaSBhLnNlbGVjdGVkOmJlZm9yZSB7XG4gIGNvbnRlbnQ6ICcnO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgei1pbmRleDogMjtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7IH1cblxuLmJ5aS1pbWctZWZmZWN0IC5ieWktZWZmZWN0LXNsaWRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMjBweDtcbiAgei1pbmRleDogMztcbiAgcGFkZGluZzogNXB4O1xuICBtYXJnaW46IDAgNXB4OyB9XG4gIC5ieWktaW1nLWVmZmVjdCAuYnlpLWVmZmVjdC1zbGlkZXIgaW5wdXRbdHlwZT1cInJhbmdlXCJdIHtcbiAgICB3aWR0aDogMTAwJTsgfVxuXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMDI0cHgpIHtcbiAgLmJ5aS1pbWctZWZmZWN0IC5ieWktZWZmZWN0LXNsaWRlciB7XG4gICAgbWFyZ2luOiAwIDE1cHggMCA1cHg7IH0gfVxuIiwiQGltcG9ydCBcIi4uLy4uLy4uL2Fzc2V0cy9zYXNzL3RoZW1lLXN3aXRjaC5zY3NzXCI7XG5AaW1wb3J0IFwiLi4vLi4vLi4vYXNzZXRzL3Nhc3MvdmFyaWFibGVzLnNjc3NcIjtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIEltYWdlIEVmZmVjdCBQcm8gVmVyc2lvblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi5ieWktaW1nLWVmZmVjdCB7XG4gICAgdWwgbGkgYSB7XG4gICAgICAgICYuc2VsZWN0ZWQge1xuICAgICAgICAgICAgJjpiZWZvcmUge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgICAgICAgei1pbmRleDogMjtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgkYnlpLWxpZ2h0LCAwLjUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC5ieWktZWZmZWN0LXNsaWRlciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIHRvcDogMjBweDtcbiAgICAgICAgei1pbmRleDogMztcbiAgICAgICAgcGFkZGluZzogNXB4O1xuICAgICAgICBtYXJnaW46IDAgNXB4O1xuICAgICAgICBpbnB1dFt0eXBlPVwicmFuZ2VcIl0ge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTAyNHB4KSB7XG4gICAgICAgIC5ieWktZWZmZWN0LXNsaWRlciB7XG4gICAgICAgICAgICBtYXJnaW46IDAgMTVweCAwIDVweDtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0= */"

/***/ }),

/***/ "./src/app/components/image-effects/image-effects.component.ts":
/*!*********************************************************************!*\
  !*** ./src/app/components/image-effects/image-effects.component.ts ***!
  \*********************************************************************/
/*! exports provided: ImageEffectsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageEffectsComponent", function() { return ImageEffectsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _image_effects_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./image-effects.service */ "./src/app/components/image-effects/image-effects.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");









var ImageEffectsComponent = /** @class */ (function () {
    function ImageEffectsComponent(cacheService, mainService, eventService, canvasService, cdr, imageEffectsService, tabsService) {
        this.cacheService = cacheService;
        this.mainService = mainService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.cdr = cdr;
        this.imageEffectsService = imageEffectsService;
        this.tabsService = tabsService;
        this.svgColorArr = [];
        this.colorarr = [];
        this.hideColorToggle = 1;
        this.isSvgColorsDisplay = false;
        this.effectArray = [];
        this.displayEffects = true;
        this.componentHide = true;
        this.addTransition = 0;
        this.openAccordian = false;
        this.sliderValue = [];
        this.sliderHistory = [];
        this.defaultSliderData = [];
        // Loader
        this.isLeft = false;
        this.tabsService.registerTabs('image-effects', 'clipart');
        this.tabsService.registerTabs('image-effects', 'image-upload');
        this.getColors();
        this.EffectDataCacheKey = 'imageEffect' + this.mainService.productId + '-' + this.mainService.baseUrl;
    }
    ImageEffectsComponent.prototype.getColors = function () {
        var _this = this;
        if (!this.defaultColor) {
            this.defaultColor = this.mainService.colorData.defaultColor;
            this.colorarr = this.mainService.colorData.color;
        }
        this.eventService.$sub('getColors').subscribe(function (colorData) {
            _this.defaultColor = colorData.defaultColor;
            _this.colorarr = colorData.color;
            if (_this.loaderComponent) {
                _this.loaderComponent.showSubLoader = false;
            }
        }, function (err) { return console.log(err); });
    };
    ImageEffectsComponent.prototype.ngOnInit = function () {
        var _this = this;
        var params = {}, url = 'productdesigner/Index/getImageEffects', cacheKey = this.EffectDataCacheKey;
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            _this.cacheService.set(_this.EffectDataCacheKey, data, { maxAge: 15 * 60 });
            _this.imageEffects = data.effects;
            _this.prepareInitialData();
        }).catch(function (err) { return console.log(err); });
        this.subscribeEvents();
    };
    ImageEffectsComponent.prototype.setEffects = function (obj) {
        var _this = this;
        this.effectArray = [];
        obj.filters.filter(function (object) {
            if (object.type == "HueRotation") {
                _this.sliderHistory[object.type] = object["rotation"];
            }
            else if (object.type.toLowerCase() != undefined && object.type != "Pixelate") {
                _this.sliderHistory[object.type] = object[object.type.toLowerCase()];
            }
            else {
                _this.sliderHistory[object.type] = object["blocksize"];
            }
            if (object.type == "HueRotation") {
                _this.effectArray.push('Hue');
                if (_this.sliderValue["Hue"] != undefined && object.sliderValue != null) {
                    _this.sliderValue['Hue'] = object.sliderValue;
                }
                else if (object.sliderValue == null && object.type.toLowerCase() != undefined) {
                    _this.sliderValue["Hue"] = object["rotation"];
                }
            }
            else if (object.type == "Convolute") {
                var emboss = [1, 1, 1, 1, 0.7, -1, -1, -1, -1];
                var sharpen = [0, -1, 0, -1, 5, -1, 0, -1, 0];
                if (JSON.stringify(emboss) == JSON.stringify(object.matrix)) {
                    _this.effectArray.push('Emboss');
                }
                if (JSON.stringify(sharpen) == JSON.stringify(object.matrix)) {
                    _this.effectArray.push('Sharpen');
                }
            }
            else {
                _this.effectArray.push(object.type);
                if (_this.sliderValue[object.type] != undefined && object.sliderValue != null) {
                    /*debugger*/
                    /*if(object.sliderValue == null){
                        object.sliderValue = this.defaultSliderData[object.type];
                    }*/
                    /*debugger*/
                    /*console.log(object.type + ' - ' + object.sliderValue);*/
                    _this.sliderValue[object.type] = object.sliderValue;
                }
                else if (object.sliderValue == null && object.type.toLowerCase() != undefined) {
                    _this.sliderValue[object.type] = object[object.type.toLowerCase()];
                }
            }
        });
    };
    ImageEffectsComponent.prototype.prepareInitialData = function () {
        var _this = this;
        if (this.imageEffects) {
            this.imageEffects.filter(function (imageEffectObj, i) {
                if (imageEffectObj.slider_value != null) {
                    var val = imageEffectObj.slider_value;
                    var key = imageEffectObj.effect_name;
                    _this.sliderValue[key] = val;
                    _this.defaultSliderData[key] = val;
                }
            });
        }
    };
    ImageEffectsComponent.prototype.changeEffect = function (effect, sliderValue, sliderIndex) {
        var _this = this;
        if (sliderValue === void 0) { sliderValue = null; }
        if (sliderIndex === void 0) { sliderIndex = null; }
        var obj = this.canvasService.currentCanvas.getActiveObject();
        var canvas = this.canvasService.currentCanvas;
        this.selectedItem = effect;
        if (sliderValue == null) {
            sliderValue = this.defaultSliderData[effect];
            this.sliderHistory[effect] = sliderValue;
            if (this.effectArray.indexOf(effect) < 0) {
                this.effectArray.push(effect);
            }
            else {
                this.sliderHistory[effect] = null;
                this.effectArray.splice(this.effectArray.indexOf(effect), 1);
            }
        }
        else {
            this.sliderHistory[effect] = sliderValue;
        }
        var selectedObjs = this.mainService.canvasService.currentCanvas.getActiveObjects();
        selectedObjs.filter(function (object) {
            var properties = {
                effectArray: _this.effectArray,
                effect: effect,
                imageEffects: _this.imageEffects,
                sliderValue: sliderValue,
                sliderHistory: _this.sliderHistory
            };
            var params = {
                obj: object,
                properties: properties,
                crudServiceString: 'this.imageEffectsService',
            };
            _this.canvasService.objectCRUD(params);
        });
    };
    ImageEffectsComponent.prototype.ngAfterViewInit = function () {
        if (this.loaderComponent && !this.defaultColor && !this.colorarr) {
            this.loaderComponent.showSubLoader = true;
        }
        this.cdr.detectChanges();
    };
    ImageEffectsComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.componentHide = true;
            _this.openAccordian = null;
        });
        var self = this;
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            _this.enableComponent(obj);
            _this.showHideComponent(obj);
            if (obj.tab == "clipart" || obj.tab == "upload") {
                _this.openAccordian = true;
            }
            if (_this.isSvgColorsDisplay) {
                _this.colorChange();
            }
            if (obj.type == "image") {
                _this.setEffects(obj);
            }
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            _this.enableComponent(obj);
            _this.showHideComponent(obj);
            if (obj.tab == "clipart" || obj.tab == "upload") {
                _this.openAccordian = true;
            }
            if (_this.isSvgColorsDisplay) {
                _this.colorChange();
            }
            if (obj.type == "image") {
                _this.setEffects(obj);
            }
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            _this.enableComponent(obj);
            _this.showHideComponent(obj);
            if (obj.tab == "clipart" || obj.tab == "upload") {
                _this.openAccordian = true;
            }
            if (_this.isSvgColorsDisplay) {
                _this.colorChange();
            }
            if (obj.type == "image") {
                _this.setEffects(obj);
            }
        });
        this.eventService.$sub('objectAdded', function (obj) {
            _this.sliderHistory = [];
            _this.enableComponent(obj);
            if (obj.tab == "clipart" || obj.tab == "upload") {
                _this.openAccordian = true;
            }
            if (_this.isSvgColorsDisplay) {
                _this.colorChange();
            }
            if (obj.type == "image") {
                _this.setEffects(obj);
            }
            _this.prepareInitialData();
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            _this.componentHide = true;
            _this.openAccordian = null;
        });
        this.eventService.$sub('closeColorPicker', function () {
            _this.hideColorToggle = 1;
            var rightPanel = document.getElementsByClassName('byi-right-panel');
            if (rightPanel && rightPanel.length > 0) {
                rightPanel[0].classList.remove("byi-picker-active");
            }
        });
    };
    ImageEffectsComponent.prototype.changeSlider = function (effect, value, index) {
        this.changeEffect(effect, value, index);
    };
    ImageEffectsComponent.prototype.showHideComponent = function (obj) {
        if (obj.type == 'activeSelection') {
            var allObj = obj._objects, findNonImageObj = allObj.indexOf(allObj.find(function (currObj) { return (currObj.tab != 'clipart' && currObj.tab != 'upload'); })), show = null;
            if (findNonImageObj == -1) {
                var isAllSvg = allObj.indexOf(allObj.find(function (currObj) { return (currObj.isSvg == false); }));
                if (isAllSvg == -1) {
                    this.isSvgColorsDisplay = true;
                    this.displayEffects = false;
                    show = true;
                }
                else {
                    var findNonSvg = allObj.indexOf(allObj.find(function (currObj) { return (currObj.isSvg == true); }));
                    if (findNonSvg == -1) {
                        this.isSvgColorsDisplay = false;
                        this.displayEffects = true;
                        show = true;
                    }
                }
            }
            this.openAccordian = show;
            this.componentHide = (show == true) ? null : true;
        }
        else if (obj.tab == "clipart" || obj.tab == "upload") {
            this.openAccordian = true;
        }
    };
    ImageEffectsComponent.prototype.enableComponent = function (obj) {
        if (!Array.isArray(obj)) {
            if (obj.objType == 'image' && obj.isSvg == true) {
                this.componentHide = null;
                this.isSvgColorsDisplay = true;
                this.displayEffects = false;
            }
            else if (obj.objType == 'image' && obj.isSvg == false) {
                this.componentHide = null;
                this.isSvgColorsDisplay = false;
                this.displayEffects = true;
            }
            else {
                this.componentHide = true;
            }
        }
    };
    /*colorChange() {
        let obj = this.canvasService.getActiveObject();
        if (obj == false) return;
        if (obj.objType != 'image') return;
        if (obj.isSvg == false) return;
        this.isSvgColorsDisplay = true;
        this.svgColorArr = [];
        obj._objects.forEach((data) => {
            if (data.fill) {
                if (this.svgColorArr.indexOf(data.fill) == -1) {
                    this.svgColorArr.push(data.fill);
                }
            }
        });
    }
*/
    ImageEffectsComponent.prototype.colorChange = function (changeActiveColor) {
        var _this = this;
        if (changeActiveColor === void 0) { changeActiveColor = true; }
        var selectedObj = this.mainService.canvasService.currentCanvas.getActiveObjects();
        this.isSvgColorsDisplay = true;
        this.svgColorArr = [];
        selectedObj.filter(function (obj) {
            if (obj && obj._objects && obj._objects.length > 0) {
                obj._objects.forEach(function (data) {
                    if (data.fill) {
                        if (_this.svgColorArr.indexOf(data.fill) == -1) {
                            _this.svgColorArr.push(data.fill);
                        }
                    }
                });
            }
        });
    };
    /*setFill(color) {
        this.selectedItem = color;
        let obj = this.canvasService.getActiveObject();
        obj._objects.forEach((data) => {
            if (data.fill && this.fillcolor == data.fill) {
                let indexOfColor = this.svgColorArr.indexOf(data.fill);
                this.svgColorArr[indexOfColor] = color;
                data.set({ fill: color });
            }
        });
        this.fillcolor = color;
        this.colorChange(false);
        this.svgColorArr = this.svgColorArr.filter((el, i, a) => i === a.indexOf(el));
        let properties = {
            fill: color,
            old_fill: this.fillcolor
        }
        let params = {
            obj: obj,
            properties: properties,
            crudServiceString: 'this.updateObjectService',
            isCenter: false,
            isHistory: true,
            isSvg: true,
        };
        this.canvasService.objectCRUD(params);
    }*/
    ImageEffectsComponent.prototype.setFill = function (color) {
        var _this = this;
        this.selectedItem = color;
        var selectedObjs = this.mainService.canvasService.currentCanvas.getActiveObjects();
        var properties = {
            fill: color,
            old_fill: this.fillcolor
        };
        this.fillcolor = color;
        selectedObjs.filter(function (obj) {
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
                isCenter: false,
                isHistory: true,
                isSvg: true,
            };
            _this.mainService.canvasService.objectCRUD(params);
        });
        this.colorChange(false);
    };
    ImageEffectsComponent.prototype.colorPickerToggle = function (color, event) {
        var rightPanel = document.getElementsByClassName('byi-right-panel');
        if (this.hideColorToggle == 0 && this.selectedItem === color) {
            this.hideColorToggle = 1;
            if (rightPanel && rightPanel.length > 0) {
                rightPanel[0].classList.remove("byi-picker-active");
            }
            return;
        }
        if (rightPanel && rightPanel.length > 0) {
            rightPanel[0].classList.add("byi-picker-active");
        }
        this.hideColorToggle = 0;
        this.fillcolor = color;
        this.selectedItem = color;
        this.cdr.detectChanges();
        // desktop view
        if (!this.mainService.isResponsive) {
            var el = event.srcElement.offsetLeft;
            var elTop = event.srcElement.offsetTop;
            var colorPickerContainerWidth = this.colorPickerContainer.nativeElement.offsetWidth;
            var svgColorContainer = this.colorContainer.nativeElement.offsetWidth + 30;
            // set default place for color picker
            if ((el + colorPickerContainerWidth) < svgColorContainer) {
                this.isLeft = true;
                this.colorPickerContainer.nativeElement.style.left = (el) + 'px';
                this.colorPickerContainer.nativeElement.style.top = (elTop + 50) + 'px';
            }
            else {
                this.isLeft = false;
                this.colorPickerContainer.nativeElement.style.left = (el - 30) + 'px';
                this.colorPickerContainer.nativeElement.style.top = (elTop + 50) + 'px';
            }
            // if scrolled
            var isScrolled = (this.svgColorContainer.nativeElement.scrollTop > 0) ? true : false;
            if (isScrolled) {
                var svgContainer = this.svgColorContainer.nativeElement, currentTop = elTop + 50;
                currentTop -= svgContainer.scrollTop;
                this.colorPickerContainer.nativeElement.style.top = currentTop + 'px';
            }
        }
        // mobile view
        if (this.mainService.isResponsive) {
            var windowWidth = window.outerWidth / 2, selectedElemLeft = event.target.getBoundingClientRect().left, colorPickerWidth = this.colorPickerContainer.nativeElement.offsetWidth;
            selectedElemLeft += 13;
            if (selectedElemLeft > windowWidth && colorPickerWidth < selectedElemLeft) {
                this.isLeft = true;
                this.colorPickerContainer.nativeElement.style.left = (selectedElemLeft) + 'px';
            }
            else {
                this.colorPickerContainer.nativeElement.style.left = (selectedElemLeft - 30) + 'px';
                this.isLeft = false;
            }
        }
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('colorPickerContainer'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"])
    ], ImageEffectsComponent.prototype, "colorPickerContainer", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('loaderComponent'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], ImageEffectsComponent.prototype, "loaderComponent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('svgColorContainer'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"])
    ], ImageEffectsComponent.prototype, "svgColorContainer", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('colorContainer'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"])
    ], ImageEffectsComponent.prototype, "colorContainer", void 0);
    ImageEffectsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[image-effects]',
            template: __webpack_require__(/*! ./image-effects.component.html */ "./src/app/components/image-effects/image-effects.component.html"),
            styles: [__webpack_require__(/*! ./image-effects.component.scss */ "./src/app/components/image-effects/image-effects.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [ng2_cache__WEBPACK_IMPORTED_MODULE_7__["CacheService"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_8__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"],
            _image_effects_service__WEBPACK_IMPORTED_MODULE_5__["ImageEffectsService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_6__["TabsService"]])
    ], ImageEffectsComponent);
    return ImageEffectsComponent;
}());



/***/ }),

/***/ "./src/app/components/image-effects/image-effects.service.ts":
/*!*******************************************************************!*\
  !*** ./src/app/components/image-effects/image-effects.service.ts ***!
  \*******************************************************************/
/*! exports provided: ImageEffectsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageEffectsService", function() { return ImageEffectsService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var ImageEffectsService = /** @class */ (function () {
    function ImageEffectsService() {
        /**
         * Init the service for operation : It initialise the variables
         */
        this.init = function (params) {
            var obj = params.obj, properties = params.properties, canvasService = params.service, eventService = params.eventService;
            // if no object is passed, we will get active object
            if (obj == null)
                obj = canvasService.getActiveObject();
            // if no active object found, return from here
            if (obj == false)
                return;
            var oldProperties = [];
            if (Array.isArray(obj)) {
                oldProperties = obj[0].filters;
            }
            else {
                oldProperties = obj.filters;
            }
            return {
                /**
                 * this function is used when special operation needs to be performed on objects(eg. bold/italic on text)
                 *
                 */
                exec: function () {
                    // if no active object found, return from here
                    if (obj == false)
                        return;
                    // set properties to current object
                    obj.filters = [];
                    fabric.textureSize = 4096;
                    properties.imageEffects.forEach(function (object, index) {
                        var _a;
                        var name = object.label.toLowerCase();
                        if (properties.effectArray.indexOf(object.effect_name) >= 0) {
                            if (object.effect_name == 'Sharpen') {
                                obj.filters.push(new fabric.Image.filters.Convolute({ matrix: [0, -1, 0, -1, 5, -1, 0, -1, 0] }));
                            }
                            else if (object.effect_name == 'Emboss') {
                                obj.filters.push(new fabric.Image.filters.Convolute({ matrix: [1, 1, 1, 1, 0.7, -1, -1, -1, -1] }));
                            }
                            else if (object.effect_name == 'Hue') {
                                var value = (properties.sliderValue != null) ? parseFloat(properties.sliderValue) : parseFloat(object.value);
                                var objKeys = Object.keys(properties.sliderHistory);
                                var getIndex = objKeys.indexOf("HueRotation");
                                if (getIndex != -1 && object.effect_name != properties.effect) {
                                    value = properties.sliderHistory[objKeys[getIndex]];
                                }
                                var eff = new fabric.Image.filters.HueRotation({ rotation: value });
                                if (object.effect_name == properties.effect) {
                                    eff = Object.assign(eff, { sliderValue: properties.sliderValue });
                                }
                                else {
                                    eff = Object.assign(eff, { sliderValue: properties.sliderHistory[objKeys[getIndex]] });
                                }
                                obj.filters.push(eff);
                            }
                            else {
                                if (object.value != 0) {
                                    debugger;
                                    var value = (properties.sliderValue != null) ? parseFloat(properties.sliderValue) : parseFloat(object.value);
                                    var objKeys = Object.keys(properties.sliderHistory);
                                    var getIndex = objKeys.indexOf(object.effect_name);
                                    if (getIndex != -1 && object.effect_name != properties.effect) {
                                        value = properties.sliderHistory[objKeys[getIndex]];
                                    }
                                    var eff = new fabric.Image.filters[object.effect_name]((_a = {}, _a[name] = value, _a));
                                    if (object.effect_name == properties.effect) {
                                        eff = Object.assign(eff, { sliderValue: properties.sliderValue });
                                    }
                                    else {
                                        eff = Object.assign(eff, { sliderValue: properties.sliderHistory[objKeys[getIndex]] });
                                    }
                                    obj.filters.push(eff);
                                }
                                else {
                                    obj.filters.push(new fabric.Image.filters[object.effect_name]());
                                }
                            }
                        }
                    });
                    obj.dirty = true;
                    obj.setCoords();
                    obj.applyFilters();
                    // finally update the canvas object
                    canvasService.currentCanvas.calcOffset();
                    setTimeout(function () {
                        canvasService.currentCanvas.renderAll();
                        // Publish an event when new object is updated
                        eventService.$pub('objectUpdated', obj);
                    }, 50);
                },
                /**
                 * This function is used to revert back the last updated object while using undo redo
                 */
                unexec: function () {
                    var canvas = canvasService.currentCanvas;
                    // if no canvas is selected
                    if (!canvas)
                        return;
                    // return of obj is null
                    if (!obj)
                        return;
                    obj.filters = [];
                    oldProperties.forEach(function (prop, index) {
                        obj.filters.push(prop);
                    });
                    obj.applyFilters();
                    // finally update the canvas object
                    canvasService.currentCanvas.renderAll();
                    eventService.$pub('objectUpdated', obj);
                }
            };
        };
    }
    ImageEffectsService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], ImageEffectsService);
    return ImageEffectsService;
}());



/***/ }),

/***/ "./src/app/components/image-sides/image-sides.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/components/image-sides/image-sides.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-image-sides\"  *ngIf=\"mainService.loadedProductData.designerProductType  && canvasService.allImages.length > 1\">\n\t<div image-slider [canvasImages]=\"canvasService.allImages\" [activeSlide]=\"activeImageId\" (changeSlider)=\"changeImageSider($event)\"></div>\n</div>\n<div class=\"total-sides\"  *ngIf=\"!mainService.loadedProductData.designerProductType && canvasService.allImages.length > 1\">\n\t<div class=\"total-sides-mob\">\n\t\t<button container=\"body\" class=\"byi-side-btn byi-prev-side\" *ngIf=\"enablePrev\" (click)=\"changeNextPrevSide('prev')\" tooltip=\"{{'Previous Side' | translate}}\">\n\t\t\t<span>\n\t\t\t\t<svg class=\"icon icon-side-prev\" viewBox=\"0 0 50 50\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-side-prev\"></use>\n\t\t\t\t</svg>\n\t\t\t</span>\n\t\t</button>\n\t\t<ul>\n\t\t\t<li *ngFor=\"let image of canvasService.allImages;let i=index;\" [ngClass]=\"{active: activeImageId == image.image_id}\" id=\"side_{{i+1}}\"\n\t\t\t(click)=\"changeImageSide(image.image_id,i)\"><span></span></li>\n\t\t</ul>\n\t\t<button container=\"body\" class=\"byi-side-btn byi-next-side\" *ngIf=\"enableNext\" (click)=\"changeNextPrevSide('next')\" tooltip=\"{{'Next Side' | translate}}\">\n\t\t\t<span>\n\t\t\t\t<svg class=\"icon icon-side-next\" viewBox=\"0 0 50 50\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-side-next\"></use>\n\t\t\t\t</svg>\n\t\t\t</span>\n\t\t</button>\n\t</div>\n</div>\n"

/***/ }),

/***/ "./src/app/components/image-sides/image-sides.component.scss":
/*!*******************************************************************!*\
  !*** ./src/app/components/image-sides/image-sides.component.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvaW1hZ2Utc2lkZXMvaW1hZ2Utc2lkZXMuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/image-sides/image-sides.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/image-sides/image-sides.component.ts ***!
  \*****************************************************************/
/*! exports provided: ImageSidesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageSidesComponent", function() { return ImageSidesComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");





var ImageSidesComponent = /** @class */ (function () {
    function ImageSidesComponent(eventService, canvasService, mainService) {
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.mainService = mainService;
        this.enableNext = true;
        this.pointerCount = 1;
    }
    ImageSidesComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.eventService.$sub('changeImageSide', function (data) {
            if (data && data.hasOwnProperty('canvas') && data.hasOwnProperty('index'))
                _this.changeImageSide(data.canvas['image_id'], data.index, data.canvas['designarea_id']);
        });
        this.eventService.$sub('changeSide', function (changeSideObj) {
            _this.changeImageSide(changeSideObj.image_id, changeSideObj.index);
        });
    };
    ImageSidesComponent.prototype.ngAfterViewInit = function () {
        this.imagesLength = (this.canvasService.allImages.length > 5) ? 5 : this.canvasService.allImages.length;
    };
    ImageSidesComponent.prototype.changeImageSider = function (event) {
        this.changeImageSide(event.image_id, event.slide);
    };
    /**
     * [changeImageSide Change image side]
     * @param  image_id [image id of desired side]
     */
    ImageSidesComponent.prototype.changeImageSide = function (image_id, index, designAreaId) {
        if (designAreaId === void 0) { designAreaId = null; }
        this.indexOfActiveImage = index;
        this.updateNextPrev();
        var eventData = (designAreaId == null) ? image_id : { image_id: image_id, design_area_id: designAreaId };
        this.eventService.$pub('imageSideChangeBefore', eventData);
    };
    ImageSidesComponent.prototype.changeNextPrevSide = function (type) {
        var self = this;
        this.indexOfActiveImage = this.canvasService.allImages.indexOf(this.canvasService.allImages.find(function (obj) { return (obj.image_id == self.activeImageId); }));
        var index;
        if (type == 'prev') {
            index = this.indexOfActiveImage - this.pointerCount;
        }
        else if (type == 'next') {
            index = this.indexOfActiveImage + this.pointerCount;
        }
        var updatedImageId = this.canvasService.allImages.find(function (x, i) {
            return i == index;
        }).image_id;
        if (updatedImageId) {
            this.changeImageSide(updatedImageId, index);
        }
    };
    ImageSidesComponent.prototype.updateNextPrev = function () {
        var self = this;
        if (!this.canvasService.allImages.length)
            return;
        var prevImage = this.canvasService.allImages.find(function (x, i) {
            return i == self.indexOfActiveImage - self.pointerCount;
        });
        var nextImage = this.canvasService.allImages.find(function (x, i) {
            return i == self.indexOfActiveImage + self.pointerCount;
        });
        if (prevImage) {
            this.enablePrev = 1;
        }
        else {
            this.enablePrev = 0;
        }
        if (nextImage) {
            this.enableNext = 1;
        }
        else {
            this.enableNext = 0;
        }
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ImageSidesComponent.prototype, "activeImageId", void 0);
    ImageSidesComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'image-sides',
            template: __webpack_require__(/*! ./image-sides.component.html */ "./src/app/components/image-sides/image-sides.component.html"),
            styles: [__webpack_require__(/*! ./image-sides.component.scss */ "./src/app/components/image-sides/image-sides.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_2__["CanvasService"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"]])
    ], ImageSidesComponent);
    return ImageSidesComponent;
}());



/***/ }),

/***/ "./src/app/components/image-upload/image-upload.component.html":
/*!*********************************************************************!*\
  !*** ./src/app/components/image-upload/image-upload.component.html ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<common-tabs [subTabsData]=\"subTabsData\" [activeAccordion]=\"accordianId\" *ngIf=\"!loadContent\"></common-tabs>\n<div loader #subtabLoader></div>\n\n\n<div class=\"byi-accord-content\" *ngIf=\"loadContent\">\n\t<div class=\"byi-top-filters\" *ngIf=\"uploadFile && uploadFile.length > 0\">\n\t\t<ng-container *ngIf=\"mainService.isResponsive\">\n\t\t\t<div class=\"byi-fullview-toggle\">\n\t\t\t\t<button type=\"button\" (click)=\"showFonts(showAllFonts)\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</ng-container>\n\t</div>\n\t<div class=\"byi-img-upload-wrap\">\n\t\t<div id=\"upload_agreement_box\" [ngClass]=\"confimationclass ? 'focused' : ''\" class=\"upload-agreement-box\"\n\t\t\t*ngIf=\"confirmImageUpload\" [hidden]=\"showAllFonts\" (change)=\"changeconfimationvalue()\">\n\t\t\t<label class=\"byi-checkbox\">\n\t\t\t\t<input id=\"upload_agreement\" type=\"checkbox\"> {{confirmImageText}}\n\t\t\t\t<span></span>\n\t\t\t</label>\n\t\t</div>\n\t\t<div class=\"byi-img-upload\" [class.byi-img-upload-mob]=\"mainService.isResponsive\">\n\t\t\t<div class=\"byi-uploader\">\n\t\t\t\t<div class=\"byi-file-upload\" *ngIf=\"!mainService.isResponsive\">\n\t\t\t\t\t<span class=\"upload-icon\">\n\t\t\t\t\t\t<svg class=\"icon icon-upload\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-upload\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>{{'Upload' | translate}}</span>\n\t\t\t\t\t<ng-container [ngTemplateOutlet]=\"uploader\"></ng-container>\n\t\t\t\t</div>\n\t\t\t\t<ng-container *ngIf=\"mainService.isResponsive && !showAllFonts\">\n\t\t\t\t\t<span class=\"upload-icon\">\n\t\t\t\t\t\t<svg class=\"icon icon-upload-mob\" viewBox=\"0 0 40 40\">\n\t\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-upload-mob\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t<ng-container [ngTemplateOutlet]=\"uploader\"></ng-container>\n\t\t\t\t</ng-container>\n\t\t\t</div>\n\t\t\t<div class=\"byi-social-media-import\" social-media-import [hidden]=\"showAllFonts\"></div>\n\t\t</div>\n\t\t<div class=\"byi-social-media-listing\" social-media-listing></div>\n\t\t<div class=\"byi-upload-list\" *ngIf=\"uploadFile && uploadFile.length > 0\">\n\t\t\t<ul>\n\t\t\t\t<li *ngFor=\"let imgData of uploadFile; let i = index\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<button type=\"button\" (click)=\"deleteImg(imgData.url, imgData.id,i)\" class=\"byi-icon-delete\">\n\t\t\t\t\t\t\t<svg class=\"icon icon-t-delete\" viewBox=\"0 0 30 38\">\n\t\t\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-t-delete\"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<img [src]=\"imgData.url\" (click)=\"addImageToCanvas(imgData.medium_url)\"\n\t\t\t\t\t\t\t(error)=\"getDefaultImage(imgData)\" alt=\"\">\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"loadmore-action\" *ngIf=\"mainService.isResponsive && isEnableloadmore\">\n\t\t\t<input class=\"loadmore-btn\" type=\"button\" value=\"{{'Load More' | translate}}\" (click)=\"loadMoreDesigns()\">\n\t\t</div>\n\t\t<div class=\"byi-list-loader\" loader #loaderComponent></div>\n\t\t<div class=\"loadmore-action\" *ngIf=\"!mainService.isResponsive && isEnableloadmore\">\n\t\t\t<input class=\"loadmore-btn\" type=\"button\" value=\"{{'Load More' | translate}}\" (click)=\"loadMoreImages()\">\n\t\t</div>\n\t\t<div class=\"byi-info-note\" *ngIf=\"showInstruction && !showAllFonts\">\n\t\t\t<p>{{instructionText}}</p>\n\t\t</div>\n\t\t<div class=\"byi-customer-login\" *ngIf=\"!mainService.userLoggedIn && mainService.isAdmin == false\"\n\t\t\t[hidden]=\"showAllFonts\">\n\t\t\t<button (click)=\"login()\" class=\"byi-btn byi-btn-xs\"\n\t\t\t\ttype=\"button\">{{'Get your saved images' | translate}}</button>\n\t\t</div>\n\t\t<div class=\"byi-apply-all\" apply-images [files]=\"uploadFile\" [byitab]=\"'upload'\"></div>\n\t</div>\n</div>\n<ng-template #uploader>\n\t<form enctype=\"multipart/form-data\">\n\t\t<input #myInput type=\"file\" accept=\"image/*\" (click)=\"checkConfirmation()\" (change)=\"drop($event)\" multiple>\n\t</form>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/image-upload/image-upload.component.scss":
/*!*********************************************************************!*\
  !*** ./src/app/components/image-upload/image-upload.component.scss ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvaW1hZ2UtdXBsb2FkL2ltYWdlLXVwbG9hZC5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/image-upload/image-upload.component.ts":
/*!*******************************************************************!*\
  !*** ./src/app/components/image-upload/image-upload.component.ts ***!
  \*******************************************************************/
/*! exports provided: ImageUploadComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageUploadComponent", function() { return ImageUploadComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _services_add_image_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../services/add-image.service */ "./src/app/services/add-image.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");












var ImageUploadComponent = /** @class */ (function () {
    function ImageUploadComponent(http, mainService, canvasService, cacheService, pubsub, addImageService, translate, tabsService, cdr) {
        this.http = http;
        this.mainService = mainService;
        this.canvasService = canvasService;
        this.cacheService = cacheService;
        this.pubsub = pubsub;
        this.addImageService = addImageService;
        this.translate = translate;
        this.tabsService = tabsService;
        this.cdr = cdr;
        this.currentTab = 3;
        this.accordianId = 0;
        this.uploadFile = [];
        this.uploadedImages = 0;
        this.imagUrls = [];
        this.imageData = {};
        this.checkConfimation = 0;
        this.totalpages = 0;
        this.page = 1;
        this.isEnableloadmore = false;
        this.imageLimit = 12;
        this.showAllFonts = false;
        this.ImageDataCacheKey = 'ImageData - ' + this.mainService.baseUrl;
    }
    ImageUploadComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.pubsub.$sub('getSubTabs', function (mainTabId) {
            if (mainTabId == _this.currentTab && !_this.subTabsData) {
                _this.getSubTabs(mainTabId);
            }
            _this.getCurrentTabName = _this.mainService.getAllTabs[_this.currentTab]['label'];
        });
        if (this.loadContent && this.mainService.userLoggedIn) {
            this.getUserImages();
        }
        this.pubsub.$sub('customerLoggedIn', function () {
            _this.cdr.detectChanges();
            _this.getUserImages();
        });
        this.pubsub.$sub('objectSelectionUpdated', function (obj) {
            if (obj.tab == 'upload') {
                if (_this.mainService.isResponsive) {
                    var self_1 = _this;
                    _this.pubsub.$pub('getActiveTabId', _this.currentTab);
                    setTimeout(function () {
                        var currentSelectedObj = self_1.canvasService.getActiveObjectFromAllCanvases();
                        if (currentSelectedObj && currentSelectedObj.tab == obj.tab) {
                            self_1.tabsService.showChildTabs('image-upload');
                        }
                    }, 100);
                }
                else {
                    _this.pubsub.$pub('getActiveTabId', _this.currentTab);
                }
            }
        });
        this.pubsub.$sub('objectSelectionCreated', function (obj) {
            var showSubChilds = false, childTabs;
            if (obj.type == 'activeSelection') {
                var anyUploadImgObj = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.tab == 'upload'; }));
                if (anyUploadImgObj != -1) {
                    showSubChilds = true;
                    var findNonImgObj = (obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.objType != 'image'; })) >= 0) ? true : false, findNonSvg = (obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.isSvg != true; })) >= 0) ? true : false, findNonPng = (obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.isSvg == true; })) >= 0) ? true : false;
                    if (!findNonImgObj && (findNonSvg && !findNonPng) || (findNonPng && !findNonSvg)) {
                        childTabs = 'image-upload';
                    }
                    else {
                        childTabs = 'common';
                    }
                }
            }
            else if (obj.tab == 'upload') {
                showSubChilds = true;
                childTabs = 'image-upload';
            }
            if (_this.mainService.isResponsive && showSubChilds == true) {
                var self_2 = _this;
                setTimeout(function () {
                    var currentSelectedObj = self_2.canvasService.getActiveObjectFromAllCanvases();
                    if (currentSelectedObj && currentSelectedObj.tab == obj.tab) {
                        self_2.tabsService.showChildTabs('image-upload');
                    }
                }, 100);
                _this.pubsub.$pub('getActiveTabId', _this.currentTab);
            }
        });
        this.pubsub.$sub('objectRemoved', function (obj) {
            if (obj.tab == 'upload') {
                _this.pubsub.$pub('getActiveTabId', _this.currentTab);
            }
        });
        this.pubsub.$sub('objectAdded', function (obj) {
            if (obj.tab == 'upload') {
                _this.showFonts(true);
            }
        });
    };
    ImageUploadComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.subscribeEvents();
        if (this.mainService.imageConfigRequest == true) {
            this.mainService.imageConfigRequest = false;
            var params = { 'product_id': this.mainService.productId }, url = 'productdesigner/ImageUpload/getImageConfiguration', cacheKey = this.ImageDataCacheKey;
            this.mainService.getData(url, params, cacheKey).then(function (data) {
                _this.mainService.imageConfigRequest = true;
                _this.setUploadData(data);
                _this.cacheService.set(_this.ImageDataCacheKey, data, { maxAge: 15 * 60 });
            }).catch(function (err) { return console.log(err); });
        }
        this.pubsub.$sub('closeFullView', function (showAllFonts) {
            _this.showAllFonts = showAllFonts;
            _this.showFonts(showAllFonts);
        });
    };
    ImageUploadComponent.prototype.ngAfterViewInit = function () {
        //this.subtabLoader.showSubLoader = true;
        this.cdr.detectChanges();
    };
    ImageUploadComponent.prototype.getUserImages = function () {
        var _this = this;
        var url = 'productdesigner/Customer/getCustomerImages', params = { 'page': this.page, 'limit': this.imageLimit };
        // this.cacheKey = 'getImages' + this.mainService.baseUrl + this.page + this.mainService.loggedInUserId;
        var cacheKey = null;
        this.mainService.getData(url, params, cacheKey).then(function (customerImages) {
            _this.userImages = customerImages.images;
            _this.isEnableloadmore = (customerImages.loadMore == 0) ? false : true;
            if (_this.page == 1) {
                // this.uploadFile = [];
            }
            if (_this.mainService.userLoggedIn && _this.userImages) {
                for (var i = 0; i < _this.userImages.length; i++) {
                    _this.imageData = {};
                    _this.imageData.url = _this.userImages[i].url;
                    _this.imageData.medium_url = _this.userImages[i].medium_url;
                    _this.imageData.id = _this.userImages[i].id;
                    _this.uploadFile.push(_this.imageData);
                }
            }
        }).catch(function (err) { return console.log(err); });
    };
    ImageUploadComponent.prototype.loadMoreDesigns = function () {
        this.page = this.page + 1;
        this.getUserImages();
    };
    ImageUploadComponent.prototype.getSubTabs = function (mainTabId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                data = this.mainService.tabsFlow[mainTabId];
                this.subTabsData = this.mainService.setSubTabsData(data, mainTabId);
                if (this.subTabsData && this.subTabsData.length > 0) {
                    this.accordianId = this.subTabsData[0].id;
                }
                if (this.subtabLoader && this.subtabLoader.showSubLoader)
                    this.subtabLoader.showSubLoader = false;
                return [2 /*return*/];
            });
        });
    };
    ImageUploadComponent.prototype.loadMoreImages = function () {
        this.page++;
        this.getUserImages();
        if (this.page == this.totalpages)
            this.isEnableloadmore = false;
    };
    ImageUploadComponent.prototype.setUploadData = function (data) {
        this.showInstruction = data.showInstruction;
        this.instructionText = data.instructionText;
        this.uploadLimitEnable = data.uploadLimitEnable;
        this.uploadImageLimit = data.uploadImageLimit;
        this.limitAlert = data.limitAlert;
        this.minImageSize = data.minImageSize;
        this.maxImageSize = data.maxImageSize;
        this.confirmImageUpload = parseInt(data.confirmImageUpload);
        this.confirmImageText = data.confirmImageText;
    };
    ImageUploadComponent.prototype.changeconfimationvalue = function () {
        if (this.checkConfimation == 0) {
            this.checkConfimation = 1;
            this.confimationclass = "";
        }
        else {
            this.checkConfimation = 0;
        }
    };
    ImageUploadComponent.prototype.checkConfirmation = function () {
        if (this.confirmImageUpload == 1) {
            if (this.checkConfimation == 0) {
                var input = document.getElementById("upload_agreement");
                input.focus();
                this.confimationclass = "focused";
                this.myInputVariable.nativeElement.value = "";
                return false;
            }
            else {
                this.confimationclass = "";
                return true;
            }
        }
        else {
            this.confimationclass = "";
            return true;
        }
    };
    ImageUploadComponent.prototype.login = function () {
        this.pubsub.$pub('openLoginModal', false);
    };
    ImageUploadComponent.prototype.drop = function (event) {
        var _this = this;
        var file_data = event.target.files;
        var img_form_data = new FormData();
        var supportedExt = ["jpg", "jpeg", "svg", "png", "JPG", "JPEG", "SVG", "PNG"];
        var counter = 0, totalFiles = file_data.length;
        if (!this.checkConfirmation()) {
            return false;
        }
        else {
            for (var j = 0; j < totalFiles; j++) {
                var imageExt = file_data[j].name.split('.').pop();
                var size = file_data[j].size;
                if (supportedExt.indexOf(imageExt) == -1) {
                    sweetalert2__WEBPACK_IMPORTED_MODULE_10___default.a.fire({
                        title: this.translate.instant('Error'),
                        text: this.translate.instant('Please upload valid file.'),
                        type: "warning",
                        confirmButtonText: this.translate.instant('OK'),
                    });
                    counter++;
                }
                else if (this.maxImageSize != "" && size > parseInt(this.maxImageSize) * 1024 * 1024 && this.maxImageSize != 0) {
                    sweetalert2__WEBPACK_IMPORTED_MODULE_10___default.a.fire({
                        title: this.translate.instant('Error'),
                        text: this.translate.instant("Please upload  maximum ") + parseInt(this.maxImageSize) + this.translate.instant(" MB size !"),
                        type: "warning",
                        confirmButtonText: this.translate.instant('OK'),
                    });
                    counter++;
                }
                else if (this.minImageSize != "" && size < parseInt(this.minImageSize) * 1024 * 1024 && this.minImageSize != 0) {
                    sweetalert2__WEBPACK_IMPORTED_MODULE_10___default.a.fire({
                        title: this.translate.instant('Error'),
                        text: this.translate.instant('File is too small'),
                        type: "warning",
                        confirmButtonText: this.translate.instant('OK'),
                    });
                    counter++;
                }
                else {
                    this.loaderComponent.showSubLoader = true;
                    img_form_data.append("file", file_data[j]);
                    img_form_data.append("product_id", this.mainService.productId);
                    // set headers
                    var HttpUploadOptions = new _angular_common_http__WEBPACK_IMPORTED_MODULE_6__["HttpHeaders"]();
                    HttpUploadOptions = HttpUploadOptions.append("Accept", "application/json");
                    HttpUploadOptions = HttpUploadOptions.append("X-Requested-With", "XMLHttpRequest");
                    // send request
                    this.mainService.post('productdesigner/Index/upload', img_form_data, false, HttpUploadOptions)
                        .then(function (data) {
                        counter++;
                        if (data && data.status == true) {
                            _this.uploadFile.push(data);
                        }
                        else {
                            _this.mainService.swal('Error', (data && data.msg) ? data.msg : 'Something went wrong', 'error');
                        }
                    }).catch(function (err) {
                        console.log(err);
                        counter++;
                    }).finally(function () {
                        if (counter >= totalFiles) {
                            _this.loaderComponent.showSubLoader = false;
                        }
                    });
                }
            }
        }
        this.myInputVariable.nativeElement.value = "";
    };
    ImageUploadComponent.prototype.deleteImg = function (url, id, index) {
        var _this = this;
        sweetalert2__WEBPACK_IMPORTED_MODULE_10___default.a.fire({
            title: this.translate.instant('Alert'),
            text: this.translate.instant("Are you sure you want to delete this image !"),
            type: "warning",
            showCancelButton: true,
            confirmButtonText: this.translate.instant('Yes'),
            cancelButtonText: this.translate.instant('No')
        }).then(function (result) {
            if (result.value) {
                _this.uploadFile.splice(index, 1);
                var params = { 'action': 'delete', 'url': url, 'id': id };
                // set headers
                var HttpUploadOptions = new _angular_common_http__WEBPACK_IMPORTED_MODULE_6__["HttpHeaders"]();
                HttpUploadOptions = HttpUploadOptions.append("Accept", "application/json");
                HttpUploadOptions = HttpUploadOptions.append("X-Requested-With", "XMLHttpRequest");
                return _this.mainService.post('productdesigner/Index/upload', params, false, HttpUploadOptions)
                    .then(function (res) { return res; });
            }
        });
    };
    ImageUploadComponent.prototype.getImgdata = function (img_form_data, HttpUploadOptions) {
        return this.mainService.post(this.mainService.baseUrl + 'productdesigner/Index/upload', img_form_data, false, HttpUploadOptions);
        // return this.http.post<any>(this.mainService.baseUrl + 'productdesigner/Index/upload', img_form_data, { headers: HttpUploadOptions })
        // .toPromise()
        // .then(res => res);
    };
    ImageUploadComponent.prototype.addImageToCanvas = function (img) {
        var getTotalClipart = this.canvasService.getObjectCount('upload');
        if ((this.uploadLimitEnable == 1) && parseInt(getTotalClipart) >= parseInt(this.uploadImageLimit)) {
            sweetalert2__WEBPACK_IMPORTED_MODULE_10___default.a.fire({
                title: this.translate.instant('Error'),
                text: this.translate.instant(this.limitAlert),
                type: "warning",
                confirmButtonText: this.translate.instant('OK'),
            });
        }
        else {
            var properties = { tab: 'upload' };
            this.addImageService.addImage(img, properties);
        }
    };
    ImageUploadComponent.prototype.getDefaultImage = function (obj) {
        console.log(":::::::::::::::::::::::::::::::::::Before: ", this.uploadFile);
        var found = this.uploadFile.find(function (uploadFileObj) { return uploadFileObj.uniqueId == obj.uniqueId; });
        found.url = this.mainService.defaultPlaceholderImage;
        this.uploadFile[this.uploadFile.indexOf(found)] = found;
        console.log(":::::::::::::::::::::::::::::::::::After: ", this.uploadFile);
        // return obj;
    };
    ImageUploadComponent.prototype.showFonts = function (showAllFonts) {
        this.showAllFonts = !showAllFonts;
        this.pubsub.$pub('showFonts', { showAllFonts: this.showAllFonts, title: 'Show all images' });
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ImageUploadComponent.prototype, "loadContent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])('myInput'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"])
    ], ImageUploadComponent.prototype, "myInputVariable", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], ImageUploadComponent.prototype, "loaderComponent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])("subtabLoader"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_1__["LoaderComponent"])
    ], ImageUploadComponent.prototype, "subtabLoader", void 0);
    ImageUploadComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[image-upload]',
            template: __webpack_require__(/*! ./image-upload.component.html */ "./src/app/components/image-upload/image-upload.component.html"),
            styles: [__webpack_require__(/*! ./image-upload.component.scss */ "./src/app/components/image-upload/image-upload.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_6__["HttpClient"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_8__["CanvasService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_4__["CacheService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            _services_add_image_service__WEBPACK_IMPORTED_MODULE_7__["AddImageService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__["TranslateService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_9__["TabsService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"]])
    ], ImageUploadComponent);
    return ImageUploadComponent;
}());



/***/ }),

/***/ "./src/app/components/layer-management/layer-management.component.html":
/*!*****************************************************************************!*\
  !*** ./src/app/components/layer-management/layer-management.component.html ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngIf=\"isEnableLayer\" class=\"byi-layer\" id=\"layers_manager\">\n  <button class=\"byi-btn-layer\" (click)=\"showLayers()\" tooltip=\"{{'Layer' | translate}}\" [placement]=\"left\">\n    <svg class=\"icon icon-layer\" viewBox=\"0 0 50 50\">\n      <use xlink:href=\"assets/img/sprite.svg#icon-layer\"></use>\n    </svg>\n  </button>\n  <div id=\"layers_ul\" class=\"byi-layer-box\" [ngClass]=\"showLayer ? 'open' : ''\">\n    <div class=\"byilb-head\">\n      <label class=\"\">{{'Layer' | translate}}</label>\n      <label class=\"byilb-l-view\">{{'View' | translate}}</label>\n      <label class=\"byilb-l-back\">{{'Back' | translate}}</label>\n      <label class=\"byilb-l-front\">{{'Front' | translate}}</label>\n      <label class=\"byilb-l-lock\">{{'Lock' | translate}}</label>\n      <label class=\"byilb-l-delete\">{{'Delete' | translate}}</label>\n    </div>\n    <ul [class.byi-layer-noscroll]=\"layerArray.length == 1\">\n      <li *ngFor=\"let object of layerArray; let first = first\"\n        [ngClass]=\"((object.id == currentObjId) ? ((object.ultimatelock == true) ? 'active disabled' : 'active') : ((object.ultimatelock == true) ? 'disabled' : '') )\">\n        <label class=\"layer outsideclick\" id=\"layer\" (click)=\"selectThisObject(object)\"\n          tooltip=\"{{'Select Object' | translate}}\" placement=\"{{(first) ? 'bottom' : 'top'}}\">\n          <img *ngIf=\"object.type != 'text'\" [src]=\"object.src\" width=\"30\" id=\"layer\" class=\"layer\">\n          <svg *ngIf=\"object.type == 'text'\" viewBox=\"0 0 50 50\" class=\"icon icon-textComponent outsideclick\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-textComponent\"></use>\n          </svg>\n        </label>\n        <label class=\"byilb-l-view outsideclick\" [ngClass]=\"object.opacity == 0 ? 'active' : ''\"\n          (click)=\"hideShow(object)\" tooltip=\"{{object.opacity == 0 ? 'Show Object' : 'Hide Object' | translate}}\"\n          placement=\"{{(first) ? 'bottom' : 'top'}}\">\n          <svg class=\"icon icon-view-alt outsideclick\" viewBox=\"0 0 30 30\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-view-alt\"></use>\n          </svg>\n        </label>\n        <label class=\"byilb-l-back outsideclick\" id=\"back\" (click)=\"canvasService.ObjectLayer('backward',object)\"\n          tooltip=\"{{'Send Backward' | translate}}\" placement=\"{{(first) ? 'bottom' : 'top'}}\"\n          [ngClass]=\"{'disabled': object.disableSendToBack}\">\n          <svg class=\"icon icon-layer-down outsideclick\" id=\"front\" viewBox=\"0 0 30 30\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-layer-bottom\" id=\"front\"></use>\n          </svg>\n        </label>\n        <label class=\"byilb-l-front outsideclick\" id=\"front\" (click)=\"canvasService.ObjectLayer('forward',object)\"\n          tooltip=\"{{'Bring Forward' | translate}}\" placement=\"{{(first) ? 'bottom' : 'top'}}\"\n          [ngClass]=\"{'disabled': object.disableBringToFront}\">\n          <svg class=\"icon icon-layer-top outsideclick\" id=\"back\" viewBox=\"0 0 30 30\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-layer-top\" id=\"back\"></use>\n          </svg>\n        </label>\n        <label class=\"byilb-l-lock outsideclick\" [ngClass]=\"(object.selectable == false) ? 'active' : ''\" id=\"lock\"\n          (click)=\"lockObject(object)\" placement=\"{{(first) ? 'bottom' : 'top'}}\"\n          tooltip=\"{{(object.selectable == false) ? 'Unlock Object' : 'Lock Object' | translate}}\">\n          <svg class=\"icon icon-t-lock outsideclick\" id=\"lock\" viewBox=\"0 0 30 30\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-t-lock\" id=\"lock\"></use>\n          </svg>\n        </label>\n        <!-- <label class=\"byilb-l-delete outsideclick\" id=\"delete\" (click)=\"canvasService.deleteObject(object)\"> -->\n        <label class=\"byilb-l-delete outsideclick\" id=\"delete\" (click)=\"deleteObj(object)\"\n          tooltip=\"{{'Delete Object' | translate}}\" placement=\"{{(first) ? 'bottom' : 'top'}}\">\n          <svg class=\"icon icon-t-delete outsideclick\" id=\"delete\" viewBox=\"0 0 30 30\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-t-delete\" id=\"delete\"></use>\n          </svg>\n        </label>\n      </li>\n    </ul>\n  </div>\n</div>"

/***/ }),

/***/ "./src/app/components/layer-management/layer-management.component.scss":
/*!*****************************************************************************!*\
  !*** ./src/app/components/layer-management/layer-management.component.scss ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbGF5ZXItbWFuYWdlbWVudC9sYXllci1tYW5hZ2VtZW50LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/layer-management/layer-management.component.ts":
/*!***************************************************************************!*\
  !*** ./src/app/components/layer-management/layer-management.component.ts ***!
  \***************************************************************************/
/*! exports provided: LayerManagementComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LayerManagementComponent", function() { return LayerManagementComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _right_panel_right_panel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../right-panel/right-panel.service */ "./src/app/components/right-panel/right-panel.service.ts");





var LayerManagementComponent = /** @class */ (function () {
    function LayerManagementComponent(canvasService, eventService, rightPanelService) {
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.rightPanelService = rightPanelService;
        this.isEnableLayer = false;
        this.layerArray = [];
        this.objCounter = 0;
        this.showLayer = false;
        this.hideShowClass = false;
        this.isImageSideChange = false;
        this.uniqueObj = [];
    }
    LayerManagementComponent.prototype.ngOnInit = function () {
        this.subscribeEvents();
    };
    LayerManagementComponent.prototype.initData = function () {
        this.rightPanelService.enableForMultipleObject();
        this.checkForLayers();
    };
    LayerManagementComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectAdded', function (object) {
            _this.initData();
            _this.updateLayers();
        });
        this.eventService.$sub('objectSelectionCreated', function (object) {
            _this.initData();
            _this.currentObjId = object.id;
        });
        this.eventService.$sub('objectUpdated', function () {
            _this.initData();
        });
        this.eventService.$sub('canvasObjectModified', function () {
            _this.initData();
        });
        this.eventService.$sub('imageSideChanged', function () {
            _this.initData();
        });
        this.eventService.$sub('allcanvasCreated', function (object) {
            _this.updateLayers();
        });
        this.eventService.$sub('imageSideChangeBefore', function (object) {
            _this.isImageSideChange = true;
            _this.updateLayers();
        });
        this.eventService.$sub('objectSelectionUpdated', function (object) {
            _this.currentObjId = object.id;
            // this.initData();
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.currentObjId = '';
            _this.showLayer = false;
            // this.initData();
        });
        this.eventService.$sub('objectRemoved', function (removedObject) {
            _this.updateLayers();
        });
        this.eventService.$sub('closeLayer', function () {
            _this.showLayer = false;
        });
    };
    LayerManagementComponent.prototype.updateLayers = function () {
        var _this = this;
        this.layerArray = [];
        for (var _i = 0, _a = Object.keys(this.canvasService.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.canvasService.containerCanvases[key];
            if (canvas != undefined) {
                var getObjs = this.canvasService.getObjects(canvas);
                if (getObjs.length > 0) {
                    getObjs.filter(function (object) {
                        object = (object.imageSrc) ? Object.assign(object, { src: object.imageSrc }) : object;
                        _this.layerArray.push(object);
                    });
                }
            }
        }
        this.isEnableLayer = (this.layerArray.length > 0) ? true : false;
        this.showLayer = (this.isEnableLayer == false) ? false : '';
        this.layerArray = (this.isEnableLayer == false) ? [] : this.layerArray;
        this.checkForLayers();
    };
    LayerManagementComponent.prototype.checkSelectable = function (obj) {
        return (obj.selectable) ? true : false;
    };
    LayerManagementComponent.prototype.hideShow = function (obj) {
        var properties = {};
        if (obj.opacity == 0 || obj.opacity == undefined) {
            this.hideShowClass = false;
            properties = { opacity: 1, hasControls: true, hasBorders: true };
        }
        else {
            this.hideShowClass = true;
            properties = { opacity: 0, hasControls: false, hasBorders: false };
        }
        var params = {
            obj: obj,
            properties: properties,
            crudServiceString: 'this.updateObjectService',
        };
        var allObj = this.canvasService.getObjects();
        var found = allObj.indexOf(allObj.find(function (currObj) { return (currObj == obj); }));
        if (found == -1) {
            params = Object.assign(params, { setActive: false });
        }
        this.canvasService.objectCRUD(params);
    };
    LayerManagementComponent.prototype.lockObject = function (obj) {
        var properties = {};
        if (obj.selectable == false) {
            properties = { selectable: true };
        }
        else {
            properties = { selectable: false };
            this.canvasService.deselectAllObjects();
        }
        if (obj) {
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
            };
            var allObj = this.canvasService.getObjects();
            var found = allObj.indexOf(allObj.find(function (currObj) { return (currObj == obj); }));
            if (found == -1) {
                params = Object.assign(params, { setActive: false });
            }
            this.canvasService.objectCRUD(params);
        }
    };
    LayerManagementComponent.prototype.showLayers = function () {
        if (this.showLayer == false) {
            this.showLayer = true;
        }
        else {
            this.showLayer = false;
        }
    };
    LayerManagementComponent.prototype.deleteObj = function (object) {
        var self = this;
        var _loop_1 = function (key) {
            var canvas = this_1.canvasService.containerCanvases[key];
            if (canvas != undefined) {
                var objs = this_1.canvasService.getObjects(canvas);
                objs.forEach(function (obj, index) {
                    if (object.id == obj.id) {
                        var params = {
                            obj: object,
                            canvas: canvas,
                            properties: null,
                            crudServiceString: 'this.removeObjectService',
                        };
                        self.canvasService.objectCRUD(params);
                        self.canvasService.currentCanvas.discardActiveObject();
                        self.canvasService.currentCanvas.requestRenderAll();
                    }
                });
            }
        };
        var this_1 = this;
        for (var _i = 0, _a = Object.keys(this.canvasService.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            _loop_1(key);
        }
    };
    LayerManagementComponent.prototype.selectThisObject = function (object) {
        // this.canvasService.deselectAllObjects();
        // if selected object is not present in current canvas
        // we will find that canvas and update the same
        if (object.selectable == true) {
            if (this.canvasService.getObjects().indexOf(object) == -1) {
                // local vars
                var allCanvas = this.canvasService.containerCanvases, allObj = void 0, found = void 0, canvas = void 0, index = 0;
                // traversal
                for (var key in allCanvas) {
                    allObj = allCanvas[key].getObjects();
                    found = allObj.indexOf(object);
                    if (found >= 0) {
                        canvas = allCanvas[key]; //Object.assign({}, allCanvas[key]);
                        break;
                    }
                    index++;
                }
                // if we found image id and index after traversal finished,
                // proceed to change side
                if (found >= 0) {
                    this.eventService.$pub('changeImageSide', { canvas: canvas, index: index });
                    canvas.setActiveObject(object).renderAll();
                }
                // otherwise select object in current canvas
            }
            else {
                this.canvasService.currentCanvas.setActiveObject(object).renderAll();
            }
        }
    };
    LayerManagementComponent.prototype.checkForLayers = function () {
        var allObj = this.canvasService.getObjects(), index, isCurrentCanvasObj;
        this.layerArray.filter(function (obj) {
            index = allObj.indexOf(obj);
            if (index == -1 || allObj.length == 1) {
                obj.disableSendToBack = true;
                obj.disableBringToFront = true;
            }
            else if (index == 0) {
                obj.disableSendToBack = true;
                if (obj.hasOwnProperty('disableBringToFront'))
                    delete obj.disableBringToFront;
            }
            else if (index == allObj.length - 1) {
                obj.disableBringToFront = true;
                if (obj.hasOwnProperty('disableSendToBack'))
                    delete obj.disableSendToBack;
            }
            else {
                if (obj.hasOwnProperty('disableBringToFront'))
                    delete obj.disableBringToFront;
                if (obj.hasOwnProperty('disableSendToBack'))
                    delete obj.disableSendToBack;
            }
        });
    };
    LayerManagementComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'layer-management',
            template: __webpack_require__(/*! ./layer-management.component.html */ "./src/app/components/layer-management/layer-management.component.html"),
            styles: [__webpack_require__(/*! ./layer-management.component.scss */ "./src/app/components/layer-management/layer-management.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"],
            _right_panel_right_panel_service__WEBPACK_IMPORTED_MODULE_4__["RightPanelService"]])
    ], LayerManagementComponent);
    return LayerManagementComponent;
}());



/***/ }),

/***/ "./src/app/components/loader/loader.component.html":
/*!*********************************************************!*\
  !*** ./src/app/components/loader/loader.component.html ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngIf=\"showMainLoader\" class=\"site-loader-box\">\n  <div class=\"sk-cube-grid\">\n    <div class=\"sk-cube sk-cube1\"></div>\n    <div class=\"sk-cube sk-cube2\"></div>\n    <div class=\"sk-cube sk-cube3\"></div>\n    <div class=\"sk-cube sk-cube4\"></div>\n    <div class=\"sk-cube sk-cube5\"></div>\n    <div class=\"sk-cube sk-cube6\"></div>\n    <div class=\"sk-cube sk-cube7\"></div>\n    <div class=\"sk-cube sk-cube8\"></div>\n    <div class=\"sk-cube sk-cube9\"></div>\n  </div>\n</div>\n<div *ngIf=\"showSubLoader\" class=\"byi-tab-cats-loader text-center\">\n  <div class=\"byi-spinner\">\n    <div class=\"rect1\"></div>\n    <div class=\"rect2\"></div>\n    <div class=\"rect3\"></div>\n    <div class=\"rect4\"></div>\n    <div class=\"rect5\"></div>\n  </div>\n</div>"

/***/ }),

/***/ "./src/app/components/loader/loader.component.scss":
/*!*********************************************************!*\
  !*** ./src/app/components/loader/loader.component.scss ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbG9hZGVyL2xvYWRlci5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/loader/loader.component.ts":
/*!*******************************************************!*\
  !*** ./src/app/components/loader/loader.component.ts ***!
  \*******************************************************/
/*! exports provided: LoaderComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoaderComponent", function() { return LoaderComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var LoaderComponent = /** @class */ (function () {
    function LoaderComponent() {
        // main loader show hide flag
        this.showMainLoader = false;
        // sub  loader show hide flag
        this.showSubLoader = false;
    }
    LoaderComponent.prototype.ngOnInit = function () {
    };
    LoaderComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[loader]',
            template: __webpack_require__(/*! ./loader.component.html */ "./src/app/components/loader/loader.component.html"),
            styles: [__webpack_require__(/*! ./loader.component.scss */ "./src/app/components/loader/loader.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], LoaderComponent);
    return LoaderComponent;
}());



/***/ }),

/***/ "./src/app/components/my-designs/my-designs.component.html":
/*!*****************************************************************!*\
  !*** ./src/app/components/my-designs/my-designs.component.html ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div loader #subtabLoader></div>\n<common-tabs [subTabsData]=\"subTabsData\" [activeAccordion]=\"accordianId\" *ngIf=\"!loadContent\"></common-tabs>\n<div class=\"byi-accord-content\" *ngIf=\"loadContent\">\n\t<div class=\"byi-top-filters\" *ngIf=\"mainService.userLoggedIn\">\n\t\t<ng-container *ngIf=\"mainService.isResponsive\" [attr.hidden]=\"componentHide\">\n\t\t\t<div class=\"byi-fullview-toggle\">\n\t\t\t\t<button type=\"button\" (click)=\"showFonts(showAllFonts)\">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</ng-container>\n\t\t<div class=\"byi-search\">\n\t\t\t<input class=\"byi-input\" name=\"searchText\" placeholder=\"{{'Search by Name' | translate}}\" type=\"text\"\n\t\t\t\t[(ngModel)]='searchText' (keyup)=\"searchDesigns()\">\n\t\t\t<button class=\"byi-search-btn\">\n\t\t\t\t<svg class=\"icon icon-search\" viewBox=\"0 0 50 50\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-search\"></use>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t<div class=\"byi-norecord\"\n\t\t*ngIf=\"mainService.userLoggedIn && !loaderComponent.showSubLoade && !customerDesigns.length && !showPlaceholder\">\n\t\t{{'No Designs Found' | translate}}\n\t</div>\n\n\t<div class=\"byi-customer-login\" *ngIf=\"!mainService.userLoggedIn\">\n\t\t<button (click)=\"login()\" class=\"byi-btn byi-btn-xs\"\n\t\t\ttype=\"button\">{{'Get your saved designs' | translate}}</button>\n\t</div>\n\n\t<div class=\"byi-tab-cats byi-mydesign-list\">\n\t\t<ul infiniteScroll [horizontal]=\"true\" [infiniteScrollDistance]=\"0\" [infiniteScrollThrottle]=\"1000\"\n\t\t\t[scrollWindow]=\"false\" [infiniteScrollDisabled]=\"!isEnableloadmore\" (scrolled)=\"loadMoreDesigns()\"\n\t\t\t#scrollToBottom>\n\t\t\t<li *ngFor=\"let object of customerDesigns; let i = index\"\n\t\t\t\t[attr.hidden]=\"(showPlaceholder && mainService.isResponsive) ? true : null\">\n\t\t\t\t<a href=\"javascript:void(0)\" [class.image-only]=\"!object.title\">\n\t\t\t\t\t<button type=\"button\" (click)=\"deleteDesign(object.id,i)\" class=\"byi-icon-delete\">\n\t\t\t\t\t\t<svg class=\"icon icon-t-delete\" viewBox=\"0 0 30 38\">\n\t\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-t-delete\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span (click)=\"loadDesign(object.id)\">\n\t\t\t\t\t\t<img [src]=\"object.path\" (error)=\"getDefaultImage(object)\">\n\t\t\t\t\t</span>\n\t\t\t\t\t<label *ngIf=\"object.title\" (click)=\"loadDesign(object.id)\">{{object.title}}</label>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li [attr.hidden]=\"(!showPlaceholder || !mainService.isResponsive) ? true : null\"\n\t\t\t\t*ngFor=\"let temp of mainService.customPlaceholderArr\" placeholder-loader [loaderHeight]='84'\n\t\t\t\t[loaderWidth]='84'></li>\n\t\t</ul>\n\t</div>\n\t<div loader #loaderComponent></div>\n\t<div class=\"loadmore-action\" *ngIf=\"!mainService.isResponsive && isEnableloadmore\">\n\t\t<input class=\"loadmore-btn\" type=\"button\" value=\"{{'Load More' | translate}}\" (click)=\"loadMoreDesigns()\">\n\t</div>\n</div>"

/***/ }),

/***/ "./src/app/components/my-designs/my-designs.component.scss":
/*!*****************************************************************!*\
  !*** ./src/app/components/my-designs/my-designs.component.scss ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbXktZGVzaWducy9teS1kZXNpZ25zLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/my-designs/my-designs.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/components/my-designs/my-designs.component.ts ***!
  \***************************************************************/
/*! exports provided: MyDesignsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MyDesignsComponent", function() { return MyDesignsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_design_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/design.service */ "./src/app/services/design.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_7__);








var MyDesignsComponent = /** @class */ (function () {
    /**
     *
     * @param mainService
     * @param designService
     * @param pubsub
     * @param cdr
     * @param cacheService
     */
    function MyDesignsComponent(mainService, designService, pubsub, cdr, cacheService) {
        var _this = this;
        this.mainService = mainService;
        this.designService = designService;
        this.pubsub = pubsub;
        this.cdr = cdr;
        this.cacheService = cacheService;
        this.currentTab = 5;
        this.customerDesigns = [];
        this.searchText = '';
        this.page = '1';
        this.componentHide = true;
        this.isEnableloadmore = false;
        this.accordianId = 0;
        this.checkDesignScroll = false;
        this.limit = 12;
        this.getDesignResponse = true;
        this.showAllFonts = false;
        this.pubsub.$sub('getSubTabs', function (mainTabId) {
            if (mainTabId == _this.currentTab && !_this.subTabsData) {
                _this.getSubTabs(mainTabId);
            }
            _this.getCurrentTabName = _this.mainService.getAllTabs[_this.currentTab]['label'];
        });
    }
    /**
     *
     */
    MyDesignsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.initValues();
        if (this.loadContent && this.loadContent == true) {
            this.subscribeEvents();
        }
        this.mainService.prepareTempArrForPlaceholder(this.limit);
        this.pubsub.$sub('closeFullView', function (showAllFonts) {
            _this.showAllFonts = showAllFonts;
            _this.showFonts(showAllFonts);
        });
    };
    /**
     *
     */
    MyDesignsComponent.prototype.ngAfterViewInit = function () {
        this.mainService.showHideSubLoader(this.subtabLoader, true);
        this.showPlaceholder = this.mainService.showHidePlaceholder(this.showPlaceholder);
        // if (!this.mainService.isResponsive) this.subtabLoader.showSubLoader = true;
        // else this.showPlaceholder = true;
        this.cdr.detectChanges();
        if (this.mainService.userLoggedIn == true) {
            //this.getDesigns(true, true,true);
        }
        else {
            this.mainService.showHideSubLoader(this.subtabLoader, true);
            this.showPlaceholder = this.mainService.showHidePlaceholder(this.showPlaceholder);
            // if (!this.mainService.isResponsive) this.subtabLoader.showSubLoader = false;
            // else this.showPlaceholder = false;
        }
    };
    /**
     *
     */
    MyDesignsComponent.prototype.initValues = function () {
        this.customerId = null;
        this.customerDesigns = [];
        this.isEnableloadmore = false;
        this.totalpages = 0;
        this.checkDesignScroll = false;
    };
    /**
     *
     */
    MyDesignsComponent.prototype.subscribeEvents = function () {
        var _this = this;
        var self = this;
        this.pubsub.$sub('designSaved', function (design) {
            if (!_this.mainService.userLoggedIn)
                return;
            if (design && design.hasOwnProperty('clearCache') && design.clearCache == true) {
                _this.cacheService.remove(_this.cacheKey);
                _this.cdr.detectChanges();
                _this.getDesigns();
            }
            var data = [];
            data['id'] = design[0].designId;
            data['product_id'] = design[0].product_id;
            data['path'] = design[0].images.base.url;
            data['title'] = design[0].title;
            self.customerDesigns.push(data);
        });
        this.pubsub.$sub('customerLoggedIn', function () {
            _this.cdr.detectChanges();
            _this.getDesigns(true, true, true);
        });
        this.pubsub.$sub('customerLoggedOut', function () {
            _this.initValues();
        });
    };
    /**
     *
     * @param resetDesign
     */
    MyDesignsComponent.prototype.getDesigns = function (resetDesign, initLoad, waitForResponse) {
        var _this = this;
        if (resetDesign === void 0) { resetDesign = true; }
        if (initLoad === void 0) { initLoad = false; }
        if (waitForResponse === void 0) { waitForResponse = false; }
        if (this.loadContent) {
            this.mainService.showHideSubLoader(this.loaderComponent, true);
            this.showPlaceholder = this.mainService.showHidePlaceholder(false);
            // if (!this.mainService.isResponsive) this.loaderComponent.showSubLoader = true;
            // else this.showPlaceholder = true;
        }
        var params = {
            'product_id': this.mainService.productId,
            'searchText': this.searchText,
            'page': this.page,
            'limit': this.limit
        }, url = 'productdesigner/designs/getdesigns';
        this.cacheKey = 'getDesigns' + this.searchText + this.page + this.mainService.baseUrl + this.mainService.loggedInUserId;
        if (waitForResponse == true) {
            this.cacheKey = null;
        }
        this.mainService.getData(url, params, this.cacheKey).then(function (designData) {
            if (resetDesign)
                _this.customerDesigns = [];
            _this.customerId = designData.customer_id;
            _this.customerDesigns = _this.customerDesigns.concat(designData.getMyDesigns);
            _this.isEnableloadmore = (designData.loadMoreFlag == 0) ? false : true;
            _this.totalpages = designData.totalpages;
            _this.checkDesignScroll = true;
        }).catch(function (err) { return console.log(err); })
            .finally(function () {
            // if (initLoad === true) this.mainService.showHideSubLoader(this.subtabLoader, true);
            if (_this.subtabLoader.showSubLoader)
                _this.subtabLoader.showSubLoader = false;
            if (_this.loaderComponent.showSubLoader)
                _this.loaderComponent.showSubLoader = false;
            // this.mainService.showHideSubLoader(this.loaderComponent, true);
            _this.showPlaceholder = _this.mainService.showHidePlaceholder(_this.showPlaceholder);
            // if (this.mainService.isResponsive) this.showPlaceholder = false;
            _this.cdr.detectChanges();
            if (resetDesign === false)
                _this.scrollToBottom();
        });
    };
    /**
     *
     */
    MyDesignsComponent.prototype.scrollToBottom = function () {
        try {
            if (!this.mainService.isResponsive)
                this.ScrollContainer.nativeElement.scrollTop = this.ScrollContainer.nativeElement.scrollHeight;
            else
                this.ScrollContainer.nativeElement.scrollLeft = (this.ScrollContainer.nativeElement.scrollWidth - 300);
        }
        catch (err) { }
    };
    /**
     *
     * @param mainTabId
     */
    MyDesignsComponent.prototype.getSubTabs = function (mainTabId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                data = this.mainService.tabsFlow[mainTabId];
                this.subTabsData = this.mainService.setSubTabsData(data, mainTabId);
                if (this.subTabsData && this.subTabsData.length > 0) {
                    this.accordianId = this.subTabsData[0].id;
                }
                if (this.subtabLoader && this.subtabLoader.showSubLoader)
                    this.subtabLoader.showSubLoader = false;
                return [2 /*return*/];
            });
        });
    };
    /**
     *
     * @param id
     * @param index
     */
    MyDesignsComponent.prototype.deleteDesign = function (id, index) {
        var _this = this;
        sweetalert2__WEBPACK_IMPORTED_MODULE_7___default.a.fire({
            title: 'Are you sure?',
            text: "Your design will be deleted permanently!",
            type: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, delete it!'
        }).then(function (result) {
            if (result.value) {
                _this.customerDesigns.splice(index, 1);
                var params = { 'design_id': id }, url = 'productdesigner/designs/deletedesign';
                _this.mainService.post(url, params, true).then(function (designData) {
                    _this.cacheService.remove(_this.cacheKey);
                }).catch(function (err) { return console.log(err); });
            }
        });
    };
    /**
     *
     */
    MyDesignsComponent.prototype.loadMoreDesigns = function () {
        this.page++;
        this.getDesigns(false);
        if (this.page == this.totalpages)
            this.isEnableloadmore = false;
    };
    /**
     *
     */
    MyDesignsComponent.prototype.searchDesigns = function () {
        if (!this.mainService.userLoggedIn)
            return;
        this.customerDesigns = [];
        this.page = 1;
        this.getDesigns();
    };
    /**
     *
     * @param designId
     */
    MyDesignsComponent.prototype.loadDesign = function (designId) {
        this.designService.loadDesign(btoa(designId));
    };
    /**
     *
     */
    MyDesignsComponent.prototype.login = function () {
        this.pubsub.$pub('openLoginModal', false);
    };
    /**
     *
     * @param currentObj
     */
    MyDesignsComponent.prototype.getDefaultImage = function (currentObj) {
        var found = this.customerDesigns.find(function (customDesignObj) { return (customDesignObj.id == currentObj.id && customDesignObj.product_id && currentObj.product_id); });
        found.path = this.mainService.defaultPlaceholderImage;
        this.customerDesigns[this.customerDesigns.indexOf(found)] = found;
    };
    MyDesignsComponent.prototype.showFonts = function (showAllFonts) {
        this.showAllFonts = !showAllFonts;
        this.pubsub.$pub('showFonts', { showAllFonts: this.showAllFonts, title: 'Show all Designs' });
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])('loaderComponent'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_2__["LoaderComponent"])
    ], MyDesignsComponent.prototype, "loaderComponent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])('subtabLoader'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_2__["LoaderComponent"])
    ], MyDesignsComponent.prototype, "subtabLoader", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])('scrollToBottom'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ElementRef"])
    ], MyDesignsComponent.prototype, "ScrollContainer", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], MyDesignsComponent.prototype, "loadContent", void 0);
    MyDesignsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
            selector: '[my-designs]',
            template: __webpack_require__(/*! ./my-designs.component.html */ "./src/app/components/my-designs/my-designs.component.html"),
            styles: [__webpack_require__(/*! ./my-designs.component.scss */ "./src/app/components/my-designs/my-designs.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            _services_design_service__WEBPACK_IMPORTED_MODULE_5__["DesignService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__["PubSubService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ChangeDetectorRef"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_1__["CacheService"]])
    ], MyDesignsComponent);
    return MyDesignsComponent;
}());



/***/ }),

/***/ "./src/app/components/name-number/name-number.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/components/name-number/name-number.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div loader #loaderComponent></div>\n<common-tabs [subTabsData]=\"subTabsData\" [activeAccordion]=\"accordianId\" *ngIf=\"!loadContent\"></common-tabs>\n<div loader #subtabLoader></div>\n\n<div class=\"byi-accord-content\" *ngIf=\"loadContent == true\">\n   <div class=\"byi-namenumber-top\">\n      <ul>\n         <li>\n            <label class=\"byi-checkbox\">\n               <input id=\"add_names\" type=\"checkbox\" (change)=\"nameChecked()\" [(ngModel)]=\"nameNumberService.addName\">\n               {{'Add Names' | translate}}\n               <span></span>\n            </label>\n            <div class=\"byi-dropdown\">\n               <div class=\"btn-group\" dropdown>\n                  <button dropdownToggle type=\"button\" class=\"btn btn-primary dropdown-toggle\">\n                     {{nameNumberService.selectedNameTitle?.imageTitle}}<span class=\"caret\"></span>\n                  </button>\n                  <ul *dropdownMenu class=\"dropdown-menu\" role=\"menu\">\n                     <li role=\"menuitem\" *ngFor=\"let title of imageSideTitle\" (click)=\"changeNameSideTitle(title)\">\n                        <a class=\"dropdown-item\" href=\"javascript:void(0)\">\n                           {{title?.imageTitle}}</a>\n                     </li>\n                  </ul>\n               </div>\n            </div>\n         </li>\n         <li>\n            <label class=\"byi-checkbox\">\n               <input id=\"add_numbers\" type=\"checkbox\" (change)=\"numberChecked()\"\n                  [(ngModel)]=\"nameNumberService.addNumber\">\n               {{'Add Numbers' | translate}}\n               <span></span>\n            </label>\n            <div class=\"byi-dropdown\">\n               <div class=\"btn-group\" dropdown>\n                  <button dropdownToggle type=\"button\" class=\"btn btn-primary dropdown-toggle\">\n                     {{nameNumberService.selectedNumberTitle?.imageTitle}}<span class=\"caret\"></span>\n                  </button>\n                  <ul *dropdownMenu class=\"dropdown-menu\" role=\"menu\">\n                     <li role=\"menuitem\" *ngFor=\"let title of imageSideTitle\" (click)=\"changeNumberSideTitle(title)\">\n                        <a class=\"dropdown-item\" href=\"javascript:void(0)\">\n                           {{title?.imageTitle}}</a>\n                     </li>\n                  </ul>\n               </div>\n            </div>\n         </li>\n      </ul>\n   </div>\n   <div class=\"byi-namenumber-wrap\" [class.item-available]=\"nameNumberService.rowArray.length > 0\"\n      *ngIf=\"nameNumberService.addName || nameNumberService.addNumber\">\n      <div class=\"byi-namenumber-list\">\n         <div class=\"byi-namenumber-item\" *ngFor=\"let row of nameNumberService.rowArray; let i = index\">\n            <div class=\"byi-field-name\" [class.byi-mob-text]=\"mainService.isResponsive\">\n               <input class=\"byi-input noDeleteObject\" name=\"nameText\" type=\"text\"\n                  [(ngModel)]=\"nameNumberService.newRow[i].name\" [disabled]=\"!nameNumberService.addName\"\n                  (input)=\"changeText(i, 'name')\" (focus)=\"changeObject(i,'name', $event.target.value)\">\n            </div>\n            <div class=\"byi-field-number\" [class.byi-mob-text]=\"mainService.isResponsive\">\n               <input class=\"byi-input noDeleteObject\" name=\"numberText\" type=\"text\"\n                  [(ngModel)]=\"nameNumberService.newRow[i].number\" [disabled]=\"!nameNumberService.addNumber\"\n                  (keypress)=\"confProductService.keyPress($event)\" (input)=\"changeText(i, 'number')\"\n                  (focus)=\"changeObject(i,'number', $event.target.value)\">\n            </div>\n            <button class=\"byi-add-btn\" *ngIf=\"mainService.isResponsive && ((nameNumberService.newRow[i].name && nameNumberService.newRow[i].name.length > 0)\n             || (nameNumberService.newRow[i].number && nameNumberService.newRow[i].number.length > 0))\"\n               (click)=\"showChild()\"></button>\n            <button class=\"byi-close-btn\" (click)=\"removeRow(i)\">\n               <span></span>\n            </button>\n         </div>\n      </div>\n      <button *ngIf=\"nameNumberService.newRow.length < 25\" class=\"btn-add-more\"\n         (click)=\"addRow(null, null, null, null, true)\">\n         <span class=\"icon icon-plus\"></span>\n         <span>{{'Add More' | translate}}</span>\n      </button>\n   </div>\n</div>\n<div class=\"generate-image-block\" *ngIf=\"loadContent == 'adminNameNumber' && mainService.nameNumber\">\n   <button class=\"generate-image-btn\" (click)=\"generateNameNumberImages()\">Generate Image</button>\n</div>"

/***/ }),

/***/ "./src/app/components/name-number/name-number.component.scss":
/*!*******************************************************************!*\
  !*** ./src/app/components/name-number/name-number.component.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvbmFtZS1udW1iZXIvbmFtZS1udW1iZXIuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/name-number/name-number.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/name-number/name-number.component.ts ***!
  \*****************************************************************/
/*! exports provided: NameNumberComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NameNumberComponent", function() { return NameNumberComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../conf-product-attr/conf-product-attr.service */ "./src/app/components/conf-product-attr/conf-product-attr.service.ts");
/* harmony import */ var _price_price_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../price/price.service */ "./src/app/components/price/price.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _font_font_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../font/font.service */ "./src/app/components/font/font.service.ts");
/* harmony import */ var _name_number_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./name-number.service */ "./src/app/components/name-number/name-number.service.ts");
/* harmony import */ var _services_design_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../services/design.service */ "./src/app/services/design.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");












var NameNumberComponent = /** @class */ (function () {
    /**
     * Dependancy Injector
     *
     * @param mainService
     * @param eventService
     * @param cdr
     * @param canvasService
     * @param fontService
     */
    function NameNumberComponent(mainService, eventService, cdr, canvasService, fontService, nameNumberService, priceService, designService, confProductService, tabsService) {
        var _this = this;
        this.mainService = mainService;
        this.eventService = eventService;
        this.cdr = cdr;
        this.canvasService = canvasService;
        this.fontService = fontService;
        this.nameNumberService = nameNumberService;
        this.priceService = priceService;
        this.designService = designService;
        this.confProductService = confProductService;
        this.tabsService = tabsService;
        this.currentTab = 6;
        this.accordianId = 0;
        this.imageSideTitle = [];
        this.nameText = 'Example';
        this.numberText = '00';
        this.isFocus = false;
        this.dimensionData = [];
        this.nameProperties = [];
        this.numberProperties = [];
        // store canvas of respective object  
        this.propertiesToCopy = [];
        this.showAllNameNumber = false;
        // removed object stack
        this.removedObjects = [];
        this.eventService.$sub('getSubTabs', function (mainTabId) {
            if (mainTabId == _this.currentTab && !_this.subTabsData) {
                _this.getSubTabs(mainTabId);
            }
            _this.getCurrentTabName = _this.mainService.getAllTabs[_this.currentTab]['label'];
        });
    }
    /**
     * Angular Init Function
     */
    NameNumberComponent.prototype.ngOnInit = function () {
        if (this.canvasService.objProperties.indexOf('addObj') == -1)
            this.canvasService.objProperties.push("addObj");
        if (this.canvasService.objProperties.indexOf('nameNumberId') == -1)
            this.canvasService.objProperties.push("nameNumberId");
        this.getImageTitle();
        this.getColors();
        this.preparePropertiesToCopy();
        this.defaultFontFamily = this.fontService.defaultFontFamily;
        this.defaultFontSize = this.fontService.defaultFontSize;
        this.nameProperties = {};
        this.numberProperties = {};
        this.subscribeEvents();
    };
    NameNumberComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (this.loadContent == 'adminNameNumber' && !this.mainService.isGenerateSVGDesign) {
            this.eventService.$sub('designLoaded', function (data) {
                var params = _this.mainService.getUrlParams(['id', 'design', 'name', 'number', 'order', 'index']);
                _this.orderId = params['order'];
                _this.nameNumberIndex = params['index'];
                var name = '';
                var number = '';
                if (params['name']) {
                    name = atob(params['name']);
                }
                if (params['number']) {
                    number = atob(params['number']);
                }
                _this.name = name;
                _this.number = number;
                for (var _i = 0, _a = Object.keys(_this.canvasService.containerCanvases); _i < _a.length; _i++) {
                    var key = _a[_i];
                    var canvas = _this.canvasService.containerCanvases[key];
                    var obj = void 0, canvasObjects = _this.canvasService.getObjects(canvas);
                    for (var _b = 0, canvasObjects_1 = canvasObjects; _b < canvasObjects_1.length; _b++) {
                        obj = canvasObjects_1[_b];
                        if (obj.addObj == 'name') {
                            obj.text = name;
                        }
                        if (obj.addObj == 'number') {
                            obj.text = number;
                        }
                        var properties = { selectable: false };
                        _this.canvasService.deselectAllObjects();
                        if (obj) {
                            var params_1 = {
                                obj: obj,
                                properties: properties,
                                crudServiceString: 'this.updateObjectService',
                                canvas: canvas
                            };
                            _this.canvasService.objectCRUD(params_1);
                        }
                    }
                }
                var designArea = document.getElementsByClassName('design-container');
                for (var i = 0; i < designArea.length; i++) {
                    designArea[i].children[1].innerHTML = '<style></style>';
                }
            });
        }
        // initially each name number will be set in current canvas only
        // so we will be setting current canvas flag to name number canvas 
        if (this.canvasService.currentCanvas && this.mainService.designId) {
            this.nameNumberService.nameNumberCanvas.name = this.canvasService.currentCanvas;
            this.nameNumberService.nameNumberCanvas.number = this.canvasService.currentCanvas;
        }
    };
    NameNumberComponent.prototype.ngAfterViewChecked = function () {
        var self = this;
        if (self.mainService.nameNumber) {
            var designArea = document.getElementsByClassName('design-container');
            for (var i = 0; i < designArea.length; i++) {
                designArea[i].children[1].innerHTML = '<style></style>';
            }
        }
    };
    /**
     * Get Sub Tabs
     * @param mainTabId
     */
    NameNumberComponent.prototype.getSubTabs = function (mainTabId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                data = this.mainService.tabsFlow[mainTabId];
                this.subTabsData = this.mainService.setSubTabsData(data, mainTabId);
                if (this.subTabsData && this.subTabsData.length > 0) {
                    this.accordianId = this.subTabsData[0].id;
                }
                if (this.loaderComponent && this.loaderComponent.showSubLoader)
                    this.loaderComponent.showSubLoader = false;
                return [2 /*return*/];
            });
        });
    };
    NameNumberComponent.prototype.preparePropertiesToCopy = function () {
        this.propertiesToCopy = ['addObj', 'tab', 'top', 'left', 'fill', 'fontFamily', 'fontSize', 'fontStyle', 'underline', 'fontWeight', 'textAlign', 'opacity', 'shadow', 'skewX', 'skewY', 'stroke', 'strokeWidth', 'originX', 'originY'];
    };
    /**
     * Set Default Color
     */
    NameNumberComponent.prototype.getColors = function () {
        var _this = this;
        if (!this.defaultColor) {
            this.defaultColor = this.mainService.colorData.defaultColor;
        }
        this.eventService.$sub('getColors').subscribe(function (colorData) {
            _this.defaultColor = colorData.defaultColor;
        }, function (err) { return console.log(err); });
    };
    /**
     * Prepare data object after product is been loaded successfully
     * then pass the same to prepare image title object
     */
    NameNumberComponent.prototype.getImageTitle = function () {
        var data = this.mainService.loadedProductData;
        if (data && Object.keys(data).length) {
            this.setImageTitle(data);
        }
    };
    /**
     *
     */
    NameNumberComponent.prototype.subscribeEvents = function () {
        var _this = this;
        // when object is removed
        // check if it was last object of respective type
        // if it was, uncheck the same    
        this.eventService.$sub('objectRemoved', function (obj) {
            // obj = (Array.isArray(obj)) ? obj[0] : obj;
            if (typeof obj == "object" && obj.hasOwnProperty('addObj')) {
                _this.checkNameNumberAfterRemove(obj);
            }
            else if (Array.isArray(obj)) {
                obj.filter(function (o) {
                    if (o.hasOwnProperty('addObj')) {
                        _this.checkNameNumberAfterRemove(o);
                    }
                });
            }
        });
        // when name number object is update
        // store new properties in global variable
        this.eventService.$sub('objectUpdated', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.setLeftTop(obj);
        });
        // when name/number object is added
        // open name number tab
        this.eventService.$sub('objectAdded', function (obj) {
            if (obj.tab == 'namenumber' && _this.loadContent) {
                _this.checkForValues(obj);
                _this.eventService.$pub('getActiveTabId', _this.currentTab);
            }
        });
        // when name/number object is selected
        // open name number tab
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            if (obj.tab == 'namenumber') {
                _this.eventService.$pub('getActiveTabId', _this.currentTab);
            }
        });
        // when name/number object is selected
        // open name number tab
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            if (obj.tab == 'namenumber') {
                _this.eventService.$pub('getActiveTabId', _this.currentTab);
            }
        });
        // when name number will be first tab
        // we won't be getting image title from mainService
        // so we need to subscribe load product to set image title
        this.eventService.$sub('allcanvasCreated', function (data) {
            _this.getImageTitle();
        });
        // when user changes the product from product options
        // we will assign new canvases to respective name/number canvas object
        this.eventService.$sub('canvasCreated', function (newCanvas) {
            if (_this.nameNumberService.addName) {
                var newCanvasObjs = newCanvas.getObjects(), isNameExists = newCanvasObjs.indexOf(newCanvasObjs.find(function (currObj) { return (currObj.hasOwnProperty('addObj') && currObj.addObj == 'name'); }));
                if (isNameExists >= 0)
                    _this.nameNumberService.nameNumberCanvas.name = newCanvas;
            }
            if (_this.nameNumberService.addNumber) {
                var newCanvasObjs = newCanvas.getObjects(), isNumberExists = newCanvasObjs.indexOf(newCanvasObjs.find(function (currObj) { return (currObj.hasOwnProperty('addObj') && currObj.addObj == 'number'); }));
                if (isNumberExists >= 0)
                    _this.nameNumberService.nameNumberCanvas.number = newCanvas;
            }
        });
        // 
        if (this.loadContent) {
            this.eventService.$sub('designLoaded', function (designData) {
                var nameNumberData = JSON.parse(designData.name_number_details);
                if (nameNumberData) {
                    _this.nameNumberService.loadNameNumber(nameNumberData);
                }
            });
            this.eventService.$sub('saveDesignBefore', function () {
                var data = {
                    nameNumber: _this.nameNumberService.newRow
                };
                _this.designService.additionalOptions = Object.assign({}, data);
            });
            // this.eventService.$sub('undoComplete', (obj) => {
            //   this.checkForValues(obj);
            // });
        }
    };
    /**
     * After user changes top/left of name/number
     * we will be updating the same in our name/number global properties variable
     *
     * @param obj
     */
    NameNumberComponent.prototype.setLeftTop = function (obj) {
        var _this = this;
        if (obj.hasOwnProperty('addObj')) {
            // set name properties
            if (obj.addObj == 'name') {
                this.nameProperties = {};
                this.propertiesToCopy.filter(function (propertyType) {
                    if (obj.hasOwnProperty(propertyType) && obj[propertyType]) {
                        _this.nameProperties[propertyType] = obj[propertyType];
                    }
                });
            }
            // set number properties
            else if (obj.addObj == 'number') {
                this.numberProperties = {};
                this.propertiesToCopy.filter(function (propertyType) {
                    if (obj.hasOwnProperty(propertyType) && obj[propertyType]) {
                        _this.numberProperties[propertyType] = obj[propertyType];
                    }
                });
            }
        }
    };
    /**
     *
     * @param obj
     */
    NameNumberComponent.prototype.checkForValues = function (obj) {
        // variable declarations
        var isObjExists, type = obj.addObj;
        // check if name number row already exists
        // during undo/redo, if name/number was already been added to object
        // we will just update text of specified object
        isObjExists = this.nameNumberService.newRow.find(function (newRowObj) { return newRowObj.id == obj.nameNumberId; });
        // if obj is of type name, check Add names
        if (obj.addObj == 'name') {
            this.nameNumberService.addName = true;
        }
        // if obj is of type number, check Add Numbers
        else if (obj.addObj == 'number') {
            this.nameNumberService.addNumber = true;
        }
        // if object is not already present,
        // add new row first
        if (!isObjExists) {
            this.addRow(type, null, null, false);
            // replace isObjExists with latest row
            isObjExists = this.nameNumberService.newRow[this.nameNumberService.newRow.length - 1];
        }
        // find index of existing object
        var index = this.nameNumberService.newRow.indexOf(isObjExists);
        // replce text
        isObjExists[type] = obj.text;
        // finally replace that row
        this.nameNumberService.newRow[index] = isObjExists;
        // set properties
        this.setLeftTop(obj);
    };
    /**
     *
     * @param data
     */
    NameNumberComponent.prototype.setImageTitle = function (data) {
        this.dimensionData = Object.assign({}, data);
        this.imageSideTitle = [];
        for (var _i = 0, _a = data['dimensions']; _i < _a.length; _i++) {
            var key = _a[_i];
            this.imageSideTitle.push({ imageTitle: key['image_title'], imageId: key['image_id'] });
            if (!this.mainService.designId) {
                if (this.nameNumberService.selectedNameTitle && this.nameNumberService.selectedNameTitle.hasOwnProperty('imageTitle') && this.nameNumberService.selectedNameTitle.imageTitle == key['image_title']) {
                    this.nameNumberService.selectedNameTitle = { imageTitle: key['image_title'], imageId: key['image_id'] };
                }
                if (this.nameNumberService.selectedNumberTitle && this.nameNumberService.selectedNumberTitle.hasOwnProperty('imageTitle') && this.nameNumberService.selectedNumberTitle.imageTitle == key['image_title']) {
                    this.nameNumberService.selectedNumberTitle = { imageTitle: key['image_title'], imageId: key['image_id'] };
                }
            }
        }
        if (!this.mainService.designId) {
            if (!this.nameNumberService.selectedNameTitle || Object.keys(this.nameNumberService.selectedNameTitle).length == 0) {
                this.nameNumberService.selectedNameTitle = this.imageSideTitle[0];
            }
            if (!this.nameNumberService.selectedNumberTitle || Object.keys(this.nameNumberService.selectedNumberTitle).length == 0) {
                this.nameNumberService.selectedNumberTitle = this.imageSideTitle[0];
            }
        }
    };
    /**
     * When user changes side for add names from dropdown
     *
     * @param title
     */
    NameNumberComponent.prototype.changeNameSideTitle = function (title) {
        // if selected and current image side is same
        // return
        if (this.nameNumberService.selectedNameTitle == title)
            return;
        // if not, set selected image side to current side
        this.nameNumberService.selectedNameTitle = title;
        // if name is checked
        if (this.nameNumberService.addName) {
            // as we need to remove name from current canvas
            // we will store last row to local variable
            // this row will be fetch & stored in newRow variable
            // this is neccessary because when only one row is present
            // by default it will deselect name number after remove process
            // get current last index
            var lastIndex = this.nameNumberService.newRow.length - 1;
            // get last row
            var lastRow = this.nameNumberService.newRow.slice(lastIndex);
            lastRow = lastRow[0];
            // remove name object from current canvas
            this.removeObjOnChangeSide('name');
            // immediately render the same in html
            this.cdr.detectChanges();
            // in case of single row
            // when row is removed by default name will be unchecked as per our flow
            // we manually need to check the same and add previous data to newRow object
            if (!this.nameNumberService.addName) {
                // check Add Names Checkbox
                this.nameNumberService.addName = true;
                // we have already created function which will be handling insertion of 
                // new row in variable as well as in canvas
                // here we will be passign store name as argument
                // because by default we are assigning 'Example' as name
                this.nameChecked(lastRow.name);
            }
            // if it was more than one row
            else {
                // change the side first
                this.checkSide('name', false);
                // add last row manually to canvas
                this.addNameNumberText(lastRow.name, this.nameProperties, 'name');
                // get index after remove process
                var indexAfterRemove = this.nameNumberService.newRow.length - 1;
                // if last row is not present
                // add manually
                // this instance does not occur everytime so we need to check if last row is not present
                // then only add the same
                if (lastIndex != indexAfterRemove) {
                    // add last row to newRow variable
                    if (!this.nameNumberService.newRow[lastIndex])
                        this.nameNumberService.newRow[lastIndex] = {};
                    this.nameNumberService.newRow[lastIndex] = Object.assign(this.nameNumberService.newRow[lastIndex], lastRow);
                    this.nameNumberService.rowArray.push(this.nameNumberService.newRow);
                }
            }
        }
    };
    /**
     * When user changes side for add names from dropdown
     *
     * @param title
     */
    NameNumberComponent.prototype.changeNumberSideTitle = function (title) {
        // if selected and current image side is same
        // return
        if (this.nameNumberService.selectedNumberTitle == title)
            return;
        // if not, set selected image side to current side
        this.nameNumberService.selectedNumberTitle = title;
        // if number is checked
        if (this.nameNumberService.addNumber) {
            // as we need to remove number from current canvas
            // we will store last row to local variable
            // this row will be fetch & stored in newRow variable
            // this is neccessary because when only one row is present
            // by default it will deselect name number after remove process
            // get current last index
            var lastIndex = this.nameNumberService.newRow.length - 1;
            // get last row
            var lastRow = this.nameNumberService.newRow.slice(lastIndex);
            lastRow = lastRow[0];
            // remove number object from current canvas
            this.removeObjOnChangeSide('number');
            // immediately render the same in html
            this.cdr.detectChanges();
            // in case of single row
            // when row is removed by default number will be unchecked as per our flow
            // we manually need to check the same and add previous data to newRow object
            if (!this.nameNumberService.addNumber) {
                // check Add Names Checkbox
                this.nameNumberService.addNumber = true;
                // we have already created function which will be handling insertion of 
                // new row in variable as well as in canvas
                // here we will be passign store number as argument
                // because by default we are assigning 'Example' as name
                this.numberChecked(lastRow.number);
            }
            // if it was more than one row
            else {
                // change the side first
                this.checkSide('number', false);
                // add last row manually to canvas
                this.addNameNumberText(lastRow.number, this.numberProperties, 'number');
                // get index after remove process
                var indexAfterRemove = this.nameNumberService.newRow.length - 1;
                // if last row is not present
                // add manually
                // this instance does not occur everytime so we need to check if last row is not present
                // then only add the same
                if (lastIndex != indexAfterRemove) {
                    // add last row to newRow variable
                    if (!this.nameNumberService.newRow[lastIndex])
                        this.nameNumberService.newRow[lastIndex] = {};
                    this.nameNumberService.newRow[lastIndex] = Object.assign(this.nameNumberService.newRow[lastIndex], lastRow);
                    this.nameNumberService.rowArray.push(this.nameNumberService.newRow);
                }
            }
        }
    };
    /**
     * On init and when user clicks on add row
     *
     * @param type type of object(name/number)
     * @param newName if new name is supposed to be added instead of 'Example'
     * @param newNumber if new number is supposed to be added instead of '00'
     */
    NameNumberComponent.prototype.addRow = function (type, newName, newNumber, checkForSide, displayFullView) {
        if (type === void 0) { type = null; }
        if (newName === void 0) { newName = null; }
        if (newNumber === void 0) { newNumber = null; }
        if (checkForSide === void 0) { checkForSide = true; }
        if (displayFullView === void 0) { displayFullView = false; }
        if (displayFullView == true) {
            this.showAddNameNumber(true);
        }
        // append array for ngFor
        this.nameNumberService.rowArray.push(this.nameNumberService.newRow);
        // generate new name/number row with specified/default data
        this.nameNumberService.newRow.push({
            name: (newName != null) ? newName : this.nameText,
            number: (newNumber != null) ? newNumber : this.numberText,
            id: this.nameNumberService.rowArray.length
        });
        // add price
        if (this.nameNumberService.newRow.length > 1) {
            this.priceService.totalQty++;
            this.priceService.extraPriceToBeAdded.productPrice += this.priceService.defaultPrice;
            this.priceService.addThisPrice();
        }
        // if no need to check for side
        // in case where name/number is added for the first time
        if (checkForSide == false)
            return;
        // if type is specified
        if (type != null) {
            // this function is called from different function
            // for different purposes
            // if type is set as addName/addNumber
            // change type for the same
            type = (type == 'addName') ? 'name' : 'number';
            // after setting type, check for side
            this.checkSide(type);
            // finally update the text for the same
            // this opearation is required only when user wants to add new row
            this.changeText(this.nameNumberService.newRow.length - 1, type);
        }
        // if type is not specified
        else {
            // if name is checked
            if (this.nameNumberService.addName) {
                this.checkSide('name');
                this.changeText(this.nameNumberService.newRow.length - 1, 'name');
            }
            // if number is checked
            if (this.nameNumberService.addNumber) {
                this.checkSide('number');
                this.changeText(this.nameNumberService.newRow.length - 1, 'number');
            }
        }
    };
    /**
     * This function is triggered many times
     * each time before adding name/number to canvas
     * we will be checking if image side is the correct
     *
     * i. on first time, we need to check for image side
     * ii. when user is on same side, but on different design area, get design area of prev added name/number
     * iii. if user is on same side, same design area, don't change the side
     * iv. if user is on different side, change the side first
     */
    NameNumberComponent.prototype.checkSide = function (type, typeCheck) {
        if (typeCheck === void 0) { typeCheck = null; }
        // get canvas and index of canvas
        var canvasData = this.selectedCanvasKey(type, typeCheck);
        this.nameNumberService.nameNumberCanvas[type] = canvasData.canvas;
        // if canvas does not match current canvas
        // change the side
        if (canvasData.canvas != this.canvasService.currentCanvas) {
            this.eventService.$pub('changeImageSide', canvasData);
        }
    };
    /**
     * When user clicks on remove icon
     * or i. name is checked and name object is deleted
     * ii. number is checked and number object is deleted
     * iii. both are checked and both objects are removed
     *
     * @param index
     */
    NameNumberComponent.prototype.removeRow = function (index, checkForChangeText) {
        if (checkForChangeText === void 0) { checkForChangeText = true; }
        // remove row first, for ngFor in html
        this.nameNumberService.rowArray.splice(index, 1);
        // store removed row object in local variable
        // this will be used in recalculation of price
        // eg. Dhoni/7 has selected Black/m having price 200 and total price is 250, 200 will be deducted
        var removedObj = this.nameNumberService.newRow.splice(index, 1);
        // push last removed row into temp obj
        this.removedObjects = this.removedObjects.concat(removedObj);
        // if removed object is in array format
        // get first instance
        removedObj = (Array.isArray(removedObj)) ? removedObj[0] : removedObj;
        // if single row was there
        // disable name/number
        // and delete the object
        if (!this.nameNumberService.rowArray.length) {
            this.nameNumberService.addName = false;
            this.nameNumberService.addNumber = false;
            // this.nameProperties = {};
            this.removeNameNumberText(removedObj);
        }
        // else publish resetCart event
        // we need to publish this event in else part
        // as we are already publishing this in removeNameNumberText function
        else {
            this.eventService.$pub('resetCart', removedObj);
        }
        // after remove, change text to previous text
        if (checkForChangeText === true && index > 0) {
            var newIndex = (index > 0) ? index - 1 : index;
            newIndex = (newIndex != this.nameNumberService.rowArray.length - 1) ? newIndex + 1 : newIndex;
            if (this.nameNumberService.addName)
                this.changeText(newIndex, 'name', true);
            if (this.nameNumberService.addNumber)
                this.changeText(newIndex, 'number', true);
        }
    };
    /**
     * When Add names checkbox is checked for the first time
     */
    NameNumberComponent.prototype.nameChecked = function (text) {
        if (text === void 0) { text = null; }
        // check for side before insertion
        // if side is different then current side
        // change the side first
        this.checkSide('name', false);
        // add row on condition
        // here we will be checking is user has checked or unchecked the checkbox
        this.addRowOnCondition('addName');
        // if checked is true
        if (this.nameNumberService.addName) {
            // set initial properties
            if (!this.nameProperties || Object.keys(this.nameProperties).length == 0) {
                this.nameProperties = {
                    fill: this.defaultColor.color_code,
                    fontFamily: this.defaultFontFamily.font_label,
                    fontSize: this.defaultFontSize,
                    tab: "namenumber",
                    addObj: "name",
                    originX: 'center',
                    originY: 'center'
                };
            }
            this.nameProperties.top = this.canvasService.clipY[this.canvasService.currentCanvas.designarea_id] + 30;
            this.nameProperties.originX = 'center';
            this.nameProperties.originY = 'center';
            this.nameProperties.left = this.canvasService.currentCanvas.width / 2;
            // when user changes image side
            // we remove name object from current canvas
            // and add the same to new canvas
            // in this case we need to set previous text as well
            // so instead of 'Example', we are setting name as last added name
            if (text == null && this.nameNumberService.newRow.length > 0) {
                text = this.nameNumberService.newRow[this.nameNumberService.newRow.length - 1].name;
            }
            // finally add name to canvas
            this.addNameNumberText((text != null) ? text : this.nameText, this.nameProperties, 'name');
        }
        // is checked is false
        // remove all name
        else {
            this.removeNameNumberText();
        }
    };
    /**
     * When Add numbers checkbox is checked for the first time
     */
    NameNumberComponent.prototype.numberChecked = function (text) {
        if (text === void 0) { text = null; }
        // check for side before insertion
        // if side is different then current side
        // change the side first
        this.checkSide('number', false);
        // add row on condition
        // here we will be checking is user has checked or unchecked the checkbox
        this.addRowOnCondition('addNumber');
        // if checked is true
        if (this.nameNumberService.addNumber) {
            // set initial properties
            if (!this.numberProperties || Object.keys(this.numberProperties).length == 0) {
                this.numberProperties = {
                    fill: this.defaultColor.color_code,
                    fontFamily: this.defaultFontFamily.font_label,
                    fontSize: this.defaultFontSize,
                    tab: "namenumber",
                    addObj: "number",
                    originX: 'center',
                    originY: 'center'
                };
            }
            var topMargin = 80;
            if (this.nameNumberService.nameNumberCanvas['name'] != this.nameNumberService.nameNumberCanvas['number']) {
                topMargin = 40;
            }
            this.numberProperties.top = this.canvasService.clipY[this.canvasService.currentCanvas.designarea_id] + topMargin;
            this.numberProperties.originX = 'center';
            this.numberProperties.originY = 'center';
            this.numberProperties.left = this.canvasService.currentCanvas.width / 2;
            // when user changes image side
            // we remove number object from current canvas
            // and add the same to new canvas
            // in this case we need to set previous text as well
            // so instead of '00', we are setting number as last added number
            if (text == null && this.nameNumberService.newRow.length > 0) {
                text = this.nameNumberService.newRow[this.nameNumberService.newRow.length - 1].number;
            }
            // finally add number to canvas
            this.addNameNumberText((text != null) ? text : this.numberText, this.numberProperties, 'number');
        }
        // is checked is false
        // remove all numbers
        else {
            this.removeNameNumberText();
        }
    };
    /**
     *
     */
    NameNumberComponent.prototype.addRowOnCondition = function (type) {
        if (type === void 0) { type = null; }
        if (this.nameNumberService.addName || this.nameNumberService.addNumber) {
            if (!this.nameNumberService.rowArray.length) {
                this.addRow(type, null, null, false);
            }
        }
        else {
            if (this.nameNumberService.rowArray.length && (!this.nameNumberService.addName || !this.nameNumberService.addNumber)) {
                if (type != null)
                    this.eventService.$pub('resetCart', { nameNumberData: this.nameNumberService.newRow, type: type, resetPrice: true });
                this.nameNumberService.rowArray = [];
                this.nameNumberService.newRow = [];
            }
        }
    };
    /**
     *
     * @param value
     * @param properties
     * @param type
     */
    NameNumberComponent.prototype.addNameNumberText = function (value, properties, type) {
        // let canvas = this.selectedCanvasKey(type);
        var canvas = this.canvasService.currentCanvas;
        this.nameNumberService.nameNumberCanvas[type] = canvas;
        var textObj = new fabric.Text(value);
        if (!properties.hasOwnProperty('nameNumberId')) {
            properties = Object.assign(properties, { nameNumberId: this.nameNumberService.rowArray.length });
        }
        var params = {
            obj: textObj,
            properties: properties,
            crudServiceString: 'this.insertObjectService'
        };
        // set name number to center
        // if it's first time
        if (!properties.hasOwnProperty('left')) {
            // get center position
            var left = canvas.width / 2;
            properties.left = left;
            // we will set this property to global variable
            if (type == 'name')
                this.nameProperties.left = left;
            else if (type == 'number')
                this.numberProperties.left = left;
        }
        // finally update the same
        this.canvasService.objectCRUD(params);
        if (this.nameNumberService.newRow.length == 1 && ((type == 'name' && !this.nameNumberService.addNumber) || (type == 'number' && !this.nameNumberService.addName))) {
            this.eventService.$pub('resetCart', null);
        }
    };
    /**
     *
     */
    NameNumberComponent.prototype.removeNameNumberText = function (removedObj) {
        var _this = this;
        if (removedObj === void 0) { removedObj = null; }
        var textObj, properties = {}, canvas = null, canvasKeys = Object.keys(this.canvasService.containerCanvases), canvasObjects;
        var _loop_1 = function (key) {
            canvasObjects = this_1.canvasService.getObjects(this_1.canvasService.containerCanvases[key]);
            canvasObjects.forEach(function (data) {
                if (data.addObj == 'name' && !_this.nameNumberService.addName) {
                    textObj = data;
                    canvas = _this.canvasService.containerCanvases[key];
                }
                if (data.addObj == 'number' && !_this.nameNumberService.addNumber) {
                    textObj = data;
                    canvas = _this.canvasService.containerCanvases[key];
                }
                var params = {
                    obj: textObj,
                    properties: properties,
                    crudServiceString: 'this.removeObjectService',
                };
                if (canvas != null)
                    params = Object.assign(params, { canvas: canvas });
                _this.canvasService.objectCRUD(params);
            });
        };
        var this_1 = this;
        for (var _i = 0, canvasKeys_1 = canvasKeys; _i < canvasKeys_1.length; _i++) {
            var key = canvasKeys_1[_i];
            _loop_1(key);
        }
        if (removedObj != null)
            this.eventService.$pub('resetCart', removedObj);
    };
    /**
     *
     * @param index
     * @param isFocus
     */
    NameNumberComponent.prototype.changeText = function (index, type, addIfNotAvailable, deselectAfterUpdate) {
        if (type === void 0) { type = null; }
        if (addIfNotAvailable === void 0) { addIfNotAvailable = false; }
        if (deselectAfterUpdate === void 0) { deselectAfterUpdate = false; }
        if (!this.nameNumberService.newRow.length || !this.nameNumberService.newRow[index] || !this.nameNumberService.newRow[index].hasOwnProperty(type))
            return;
        var objCanvas = this.selectedCanvasKey(type).canvas, objects = objCanvas.getObjects(), value = this.nameNumberService.newRow[index][type];
        var selectedObj = objects.find(function (currObj) { return (currObj.hasOwnProperty('addObj') && currObj.addObj == type); });
        if (!selectedObj) {
            if (addIfNotAvailable === false) {
                return;
            }
            else {
                var properties = Object.assign({}, (type == 'name') ? this.nameProperties : this.numberProperties);
                properties = Object.assign(properties, { nameNumberId: this.nameNumberService.newRow[index].id });
                this.addNameNumberText(value, properties, type);
            }
        }
        else {
            if (deselectAfterUpdate === false)
                this.canvasService.currentCanvas.setActiveObject(selectedObj).renderAll();
            if (selectedObj.text != value) {
                var properties = { text: value, nameNumberId: this.nameNumberService.newRow[index].id }, params = {
                    obj: selectedObj,
                    properties: properties,
                    crudServiceString: 'this.updateObjectService'
                };
                var canvas = this.selectedCanvasKey(type);
                if (canvas && canvas.canvas) {
                    canvas = canvas.canvas;
                    params = Object.assign(params, { canvas: canvas });
                }
                if (deselectAfterUpdate === true)
                    params = Object.assign(params, { setActive: false });
                this.canvasService.objectCRUD(params);
            }
        }
    };
    /**
     *
     * @param index
     * @param value
     */
    NameNumberComponent.prototype.changeObject = function (index, type, value) {
        if (value === void 0) { value = null; }
        // var declaration
        var currentCanvas = this.canvasService.currentCanvas, eventData = this.selectedCanvasKey(type);
        // if no canvas returned for selected canvas
        if (!eventData || !eventData.hasOwnProperty('canvas'))
            return;
        // check if current canvas is the has current name/number object
        // if not, change side first
        if (eventData.canvas != currentCanvas) {
            this.eventService.$pub('changeImageSide', eventData);
            this.cdr.detectChanges();
        }
        // change current obj
        this.changeText(index, type, true);
        // if after updating name/number
        // check if respective obj needs to be set as well
        if ((type == 'name' && !this.nameNumberService.addNumber) || (type == 'number' && !this.nameNumberService.addName))
            return;
        // change respective obj
        var otherObjType = (type == 'name') ? 'number' : 'name';
        // change current obj
        this.changeText(index, otherObjType, true, true);
    };
    /**
     *
     * @param value
     */
    NameNumberComponent.prototype.searchNameNumberObj = function (type) {
        if (type != 'name' && type != 'number')
            return;
        var allCanvas = this.canvasService.containerCanvases, selectedObj, canvas;
        for (var key in allCanvas) {
            canvas = allCanvas[key];
            selectedObj = canvas.getObjects().find(function (currObj) { return (currObj.hasOwnProperty('addObj') && currObj.addObj == type); });
            if (selectedObj) {
                break;
            }
        }
        return { canvas: canvas, obj: selectedObj };
    };
    /**
     *
     * @param type
     */
    NameNumberComponent.prototype.selectedCanvasKey = function (type, typeCheck) {
        if (typeCheck === void 0) { typeCheck = null; }
        if (type != 'name' && type != 'number')
            return;
        var currentCanvasImageId = this.canvasService.currentCanvas.image_id, requiredImageId = (type == 'name') ? this.nameNumberService.selectedNameTitle.imageId : this.nameNumberService.selectedNumberTitle.imageId, canvas;
        var allCanvas = this.canvasService.containerCanvases, nameNumberKey = (type == 'name') ? this.nameNumberService.addName : this.nameNumberService.addNumber, checkForType = (typeCheck == null && nameNumberKey) ? true : false, canvasIndex = 0, tmpObj, imageSideFirstCanvas = null;
        if (checkForType == false && currentCanvasImageId == requiredImageId) {
            canvas = this.canvasService.currentCanvas;
            canvasIndex = 0;
        }
        else {
            for (var key in allCanvas) {
                if (allCanvas[key].image_id == requiredImageId) {
                    canvas = allCanvas[key];
                    if (imageSideFirstCanvas == null)
                        imageSideFirstCanvas = canvas;
                    tmpObj = canvas.getObjects().find(function (currObj) { return (currObj.hasOwnProperty('addObj') && currObj.addObj == type); });
                    if (tmpObj)
                        break;
                    canvasIndex++;
                }
            }
            if (!tmpObj) {
                canvas = imageSideFirstCanvas;
                canvasIndex = 0;
            }
            ;
        }
        return { canvas: canvas, index: canvasIndex };
    };
    /**
     *
     * @param value
     */
    NameNumberComponent.prototype.removeObjOnChangeSide = function (type) {
        var properties = {};
        var data = this.searchNameNumberObj(type);
        if (!data || !data.hasOwnProperty('canvas'))
            return;
        this.canvasService.deleteThisObject(data.obj);
        var params = {
            obj: data.obj,
            properties: properties,
            canvas: data.canvas,
            crudServiceString: 'this.removeObjectService',
        };
        this.canvasService.objectCRUD(params);
    };
    /**
     *
     */
    NameNumberComponent.prototype.checkNameNumberAfterRemove = function (obj) {
        var index = null, currentType = obj.addObj, otherType = (currentType == 'name') ? 'number' : 'name';
        index = this.nameNumberService.newRow.indexOf(this.nameNumberService.newRow.find(function (nameNumberObj) { return nameNumberObj[obj.addObj] == obj.text; }));
        if (index != null && index != -1) {
            // if this was last object of respective type
            // eg. last name of last number
            // disable the same
            if (this.nameNumberService.newRow.length == 1) {
                if (currentType == 'name') {
                    this.nameNumberService.addName = false;
                }
                else if (currentType == 'number') {
                    this.nameNumberService.addNumber = false;
                }
            }
            // if this was the last object
            // disable name number
            if ((currentType == 'name' && !this.nameNumberService.addNumber) || (currentType == 'number' && !this.nameNumberService.addName) || (this.nameNumberService.newRow[index][otherType] == '')) {
                this.removeRow(index, true);
            }
        }
    };
    /**
     *
     */
    NameNumberComponent.prototype.generateNameNumberImages = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var base64DataFile, containerCanvasesSVG, sidesAndParentImageIDs, params, url;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.loaderComponent.showMainLoader = true;
                        base64DataFile = [];
                        return [4 /*yield*/, this.designService.saveAllSidesCanvasData().then(function (resp) {
                                base64DataFile = resp.timestamp;
                            }).catch(function (err) { return console.log(err); })];
                    case 1:
                        _a.sent();
                        containerCanvasesSVG = this.canvasService.getCanvasToSVG();
                        sidesAndParentImageIDs = this.designService.fetchImageSidesParentIdsWithId(this.canvasService.allImagesWithIds);
                        params = {
                            base64DataFile: base64DataFile,
                            productId: this.mainService.productId,
                            designId: atob(this.mainService.designId),
                            canvasSVG: btoa(unescape(encodeURIComponent(JSON.stringify(containerCanvasesSVG)))),
                            sidesAndParentImageIDs: sidesAndParentImageIDs,
                            orderId: this.orderId,
                            name: this.name,
                            number: this.number,
                            nameNumberIndex: this.nameNumberIndex
                        }, url = 'namenumber/Index/generateNameNumberImage';
                        this.mainService.getData(url, params, null).then(function (response) {
                            _this.loaderComponent.showMainLoader = false;
                            window.history.back();
                        }).catch(function (err) { return console.log(err); });
                        return [2 /*return*/];
                }
            });
        });
    };
    NameNumberComponent.prototype.showChild = function () {
        if (this.showAllNameNumber) {
            this.showAddNameNumber(false);
        }
        this.tabsService.showChildTabs('name-number');
    };
    NameNumberComponent.prototype.showAddNameNumber = function (showAllNameNumber) {
        this.showAllNameNumber = showAllNameNumber;
        this.eventService.$pub('showFonts', { showAllFonts: this.showAllNameNumber, title: 'Name Number' });
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], NameNumberComponent.prototype, "loadContent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_6__["LoaderComponent"])
    ], NameNumberComponent.prototype, "loaderComponent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ViewChild"])("subtabLoader"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_6__["LoaderComponent"])
    ], NameNumberComponent.prototype, "subtabLoader", void 0);
    NameNumberComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
            selector: '[name-number]',
            template: __webpack_require__(/*! ./name-number.component.html */ "./src/app/components/name-number/name-number.component.html"),
            styles: [__webpack_require__(/*! ./name-number.component.scss */ "./src/app/components/name-number/name-number.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_3__["ChangeDetectorRef"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_7__["CanvasService"],
            _font_font_service__WEBPACK_IMPORTED_MODULE_8__["FontService"],
            _name_number_service__WEBPACK_IMPORTED_MODULE_9__["NameNumberService"],
            _price_price_service__WEBPACK_IMPORTED_MODULE_2__["PriceService"],
            _services_design_service__WEBPACK_IMPORTED_MODULE_10__["DesignService"],
            _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_1__["ConfProductAttrService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_11__["TabsService"]])
    ], NameNumberComponent);
    return NameNumberComponent;
}());



/***/ }),

/***/ "./src/app/components/name-number/name-number.service.ts":
/*!***************************************************************!*\
  !*** ./src/app/components/name-number/name-number.service.ts ***!
  \***************************************************************/
/*! exports provided: NameNumberService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NameNumberService", function() { return NameNumberService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");



var NameNumberService = /** @class */ (function () {
    function NameNumberService(mainService) {
        this.mainService = mainService;
        this.newRow = [];
        this.rowArray = [];
        this.selectedNameTitle = {};
        this.selectedNumberTitle = {};
        this.nameNumberCanvas = { name: null, number: null };
    }
    NameNumberService.prototype.loadNameNumber = function (nameNumberData) {
        var _this = this;
        this.newRow = [];
        this.rowArray = [];
        nameNumberData.filter(function (nameNumberItem) {
            _this.newRow.push(Object.assign({}, nameNumberItem));
            _this.rowArray.push(_this.newRow);
        });
        var isNameExists = nameNumberData.indexOf(nameNumberData.find(function (nameNumberItem) { return (nameNumberItem.hasOwnProperty('name') && nameNumberItem.name); })), isNumberExists = nameNumberData.indexOf(nameNumberData.find(function (nameNumberItem) { return (nameNumberItem.hasOwnProperty('number') && nameNumberItem.number); }));
        if (!this.addName && isNameExists >= 0)
            this.addName = true;
        if (!this.addNumber && isNumberExists >= 0)
            this.addNumber = true;
        this.setSelectedNameNumberTitle();
    };
    NameNumberService.prototype.setSelectedNameNumberTitle = function () {
        var allcanvas = this.mainService.canvasService.containerCanvases, type, currCanvas, find;
        this.selectedNameTitle = null;
        this.selectedNumberTitle = null;
        for (var key in allcanvas) {
            currCanvas = allcanvas[key];
            if (this.addName) {
                find = this.mainService.canvasService.getObjects(currCanvas).indexOf(this.mainService.canvasService.getObjects(currCanvas).find(function (currObj) { return (currObj.hasOwnProperty('addObj') && currObj.addObj == 'name'); }));
                if (find >= 0) {
                    this.selectedNameTitle = { imageId: currCanvas.image_id };
                    this.nameNumberCanvas.name = currCanvas;
                }
            }
            if (this.addNumber) {
                find = this.mainService.canvasService.getObjects(currCanvas).indexOf(this.mainService.canvasService.getObjects(currCanvas).find(function (currObj) { return (currObj.hasOwnProperty('addObj') && currObj.addObj == 'number'); }));
                if (find >= 0) {
                    this.selectedNumberTitle = { imageId: currCanvas.image_id };
                    this.nameNumberCanvas.number = currCanvas;
                }
            }
            if (this.selectedNameTitle != null && this.selectedNumberTitle != null)
                break;
        }
        if (this.selectedNameTitle && this.selectedNumberTitle) {
            this.getImageTitle();
        }
    };
    NameNumberService.prototype.getImageTitle = function () {
        if (!this.mainService.loadedProductData)
            return;
        var dimentionData = this.mainService.loadedProductData['dimensions'];
        for (var _i = 0, dimentionData_1 = dimentionData; _i < dimentionData_1.length; _i++) {
            var key = dimentionData_1[_i];
            if (key['image_id'] == this.selectedNameTitle.imageId) {
                this.selectedNameTitle = Object.assign(this.selectedNameTitle, { 'imageTitle': key['image_title'] });
            }
            if (key['image_id'] == this.selectedNumberTitle.imageId) {
                this.selectedNumberTitle = Object.assign(this.selectedNumberTitle, { 'imageTitle': key['image_title'] });
            }
        }
    };
    NameNumberService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_1__["MainService"]])
    ], NameNumberService);
    return NameNumberService;
}());



/***/ }),

/***/ "./src/app/components/object-alignment-position/object-alignment-position.component.html":
/*!***********************************************************************************************!*\
  !*** ./src/app/components/object-alignment-position/object-alignment-position.component.html ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n"

/***/ }),

/***/ "./src/app/components/object-alignment-position/object-alignment-position.component.scss":
/*!***********************************************************************************************!*\
  !*** ./src/app/components/object-alignment-position/object-alignment-position.component.scss ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvb2JqZWN0LWFsaWdubWVudC1wb3NpdGlvbi9vYmplY3QtYWxpZ25tZW50LXBvc2l0aW9uLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/object-alignment-position/object-alignment-position.component.ts":
/*!*********************************************************************************************!*\
  !*** ./src/app/components/object-alignment-position/object-alignment-position.component.ts ***!
  \*********************************************************************************************/
/*! exports provided: ObjectAlignmentPositionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectAlignmentPositionComponent", function() { return ObjectAlignmentPositionComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! fabric */ "./node_modules/fabric/dist/fabric.js");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(fabric__WEBPACK_IMPORTED_MODULE_4__);





var ObjectAlignmentPositionComponent = /** @class */ (function () {
    function ObjectAlignmentPositionComponent(eventService, mainService) {
        this.eventService = eventService;
        this.mainService = mainService;
    }
    ObjectAlignmentPositionComponent.prototype.ngOnInit = function () {
        var _this = this;
        var params = {}, url = 'objectalignmentposition/index/getconfiguration', cacheKey = 'getObjectAlignmentPosition' + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey).then(function (alignData) {
            var enable = alignData.enable;
            if (enable == 1) {
                _this.eventService.$sub('canvasCreated', function (data) {
                    data.__eventListeners["mouse:down"] = [];
                    data.__eventListeners["mouse:up"] = [];
                    data.__eventListeners["object:moving"] = [];
                    data.__eventListeners["before:render"] = [];
                    data.__eventListeners["after:render"] = [];
                    _this.initCenteringGuidelines(data);
                    _this.initAligningGuidelines(data);
                });
                _this.eventService.$sub('zoomCanvasUpdated', function (data) {
                    data.__eventListeners["mouse:down"] = [];
                    data.__eventListeners["mouse:up"] = [];
                    data.__eventListeners["object:moving"] = [];
                    data.__eventListeners["before:render"] = [];
                    data.__eventListeners["after:render"] = [];
                    _this.initCenteringGuidelines(data);
                    _this.initAligningGuidelines(data);
                });
            }
        }).catch(function (err) { return console.log(err); });
    };
    ObjectAlignmentPositionComponent.prototype.initCenteringGuidelines = function (canvas) {
        var canvasWidth = canvas.getWidth(), canvasHeight = canvas.getHeight(), canvasWidthCenter = canvasWidth / 2, canvasHeightCenter = canvasHeight / 2, canvasWidthCenterMap = {}, canvasHeightCenterMap = {}, centerLineMargin = 4, centerLineColor = 'rgba(255,0,241,0.5)', centerLineWidth = 1, ctx = canvas.getSelectionContext(), viewportTransform;
        for (var i = canvasWidthCenter - centerLineMargin, len = canvasWidthCenter + centerLineMargin; i <= len; i++) {
            canvasWidthCenterMap[Math.round(i)] = true;
        }
        for (var i = canvasHeightCenter - centerLineMargin, len = canvasHeightCenter + centerLineMargin; i <= len; i++) {
            canvasHeightCenterMap[Math.round(i)] = true;
        }
        function showVerticalCenterLine() {
            showCenterLine(canvasWidthCenter + 0.5, 0, canvasWidthCenter + 0.5, canvasHeight);
        }
        function showHorizontalCenterLine() {
            showCenterLine(0, canvasHeightCenter + 0.5, canvasWidth, canvasHeightCenter + 0.5);
        }
        function showCenterLine(x1, y1, x2, y2) {
            ctx.save();
            ctx.strokeStyle = centerLineColor;
            ctx.lineWidth = centerLineWidth;
            ctx.beginPath();
            ctx.moveTo(x1 * viewportTransform[0], y1 * viewportTransform[3]);
            ctx.lineTo(x2 * viewportTransform[0], y2 * viewportTransform[3]);
            ctx.stroke();
            ctx.restore();
        }
        var afterRenderActions = [], isInVerticalCenter, isInHorizontalCenter;
        canvas.on('mouse:down', function () {
            viewportTransform = canvas.viewportTransform;
        });
        canvas.on('object:moving', function (e) {
            var object = e.target, objectCenter = object.getCenterPoint(), transform = canvas._currentTransform;
            if (!transform)
                return;
            isInVerticalCenter = Math.round(objectCenter.x) in canvasWidthCenterMap,
                isInHorizontalCenter = Math.round(objectCenter.y) in canvasHeightCenterMap;
            if (isInHorizontalCenter || isInVerticalCenter) {
                object.setPositionByOrigin(new fabric__WEBPACK_IMPORTED_MODULE_4__["fabric"].Point((isInVerticalCenter ? canvasWidthCenter : objectCenter.x), (isInHorizontalCenter ? canvasHeightCenter : objectCenter.y)), 'center', 'center');
            }
        });
        canvas.on('before:render', function () {
            if (canvas.contextTop) {
                canvas.clearContext(canvas.contextTop);
            }
        });
        canvas.on('after:render', function () {
            if (isInVerticalCenter) {
                showVerticalCenterLine();
            }
            if (isInHorizontalCenter) {
                showHorizontalCenterLine();
            }
        });
        canvas.on('mouse:up', function () {
            // clear these values, to stop drawing guidelines once mouse is up
            isInVerticalCenter = isInHorizontalCenter = null;
            canvas.renderAll();
        });
    };
    ObjectAlignmentPositionComponent.prototype.initAligningGuidelines = function (canvas) {
        var ctx = canvas.getSelectionContext(), aligningLineOffset = 5, aligningLineMargin = 4, aligningLineWidth = 1, aligningLineColor = 'rgb(0,255,0)', viewportTransform, zoom = 1;
        var self = this;
        function drawVerticalLine(coords) {
            drawLine(coords.x + 0.5, coords.y1 > coords.y2 ? coords.y2 : coords.y1, coords.x + 0.5, coords.y2 > coords.y1 ? coords.y2 : coords.y1);
        }
        function drawHorizontalLine(coords) {
            drawLine(coords.x1 > coords.x2 ? coords.x2 : coords.x1, coords.y + 0.5, coords.x2 > coords.x1 ? coords.x2 : coords.x1, coords.y + 0.5);
        }
        function drawLine(x1, y1, x2, y2) {
            ctx.save();
            ctx.lineWidth = aligningLineWidth;
            ctx.strokeStyle = aligningLineColor;
            ctx.beginPath();
            ctx.moveTo(((x1 + viewportTransform[4]) * zoom), ((y1 + viewportTransform[5]) * zoom));
            ctx.lineTo(((x2 + viewportTransform[4]) * zoom), ((y2 + viewportTransform[5]) * zoom));
            ctx.stroke();
            ctx.restore();
        }
        function isInRange(value1, value2) {
            value1 = Math.round(value1);
            value2 = Math.round(value2);
            for (var i = value1 - aligningLineMargin, len = value1 + aligningLineMargin; i <= len; i++) {
                if (i === value2) {
                    return true;
                }
            }
            return false;
        }
        var verticalLines = [], horizontalLines = [];
        canvas.on('mouse:down', function () {
            viewportTransform = canvas.viewportTransform;
            zoom = canvas.getZoom();
        });
        canvas.on('object:moving', function (e) {
            var activeObject = e.target, canvasObjects = self.mainService.canvasService.getObjects(canvas), activeObjectCenter = activeObject.getCenterPoint(), activeObjectLeft = activeObjectCenter.x, activeObjectTop = activeObjectCenter.y, activeObjectBoundingRect = activeObject.getBoundingRect(), activeObjectHeight = activeObjectBoundingRect.height / viewportTransform[3], activeObjectWidth = activeObjectBoundingRect.width / viewportTransform[0], horizontalInTheRange = false, verticalInTheRange = false, transform = canvas._currentTransform;
            if (!transform)
                return;
            // It should be trivial to DRY this up by encapsulating (repeating) creation of x1, x2, y1, and y2 into functions,
            // but we're not doing it here for perf. reasons -- as this a function that's invoked on every mouse move
            for (var i = canvasObjects.length; i--;) {
                if (canvasObjects[i] === activeObject)
                    continue;
                var objectCenter = canvasObjects[i].getCenterPoint(), objectLeft = objectCenter.x, objectTop = objectCenter.y, objectBoundingRect = canvasObjects[i].getBoundingRect(), objectHeight = objectBoundingRect.height / viewportTransform[3], objectWidth = objectBoundingRect.width / viewportTransform[0];
                // snap by the horizontal center line
                if (isInRange(objectLeft, activeObjectLeft)) {
                    verticalInTheRange = true;
                    verticalLines.push({
                        x: objectLeft,
                        y1: (objectTop < activeObjectTop)
                            ? (objectTop - objectHeight / 2 - aligningLineOffset)
                            : (objectTop + objectHeight / 2 + aligningLineOffset),
                        y2: (activeObjectTop > objectTop)
                            ? (activeObjectTop + activeObjectHeight / 2 + aligningLineOffset)
                            : (activeObjectTop - activeObjectHeight / 2 - aligningLineOffset)
                    });
                    activeObject.setPositionByOrigin(new fabric__WEBPACK_IMPORTED_MODULE_4__["fabric"].Point(objectLeft, activeObjectTop), 'center', 'center');
                }
                // snap by the left edge
                if (isInRange(objectLeft - objectWidth / 2, activeObjectLeft - activeObjectWidth / 2)) {
                    verticalInTheRange = true;
                    verticalLines.push({
                        x: objectLeft - objectWidth / 2,
                        y1: (objectTop < activeObjectTop)
                            ? (objectTop - objectHeight / 2 - aligningLineOffset)
                            : (objectTop + objectHeight / 2 + aligningLineOffset),
                        y2: (activeObjectTop > objectTop)
                            ? (activeObjectTop + activeObjectHeight / 2 + aligningLineOffset)
                            : (activeObjectTop - activeObjectHeight / 2 - aligningLineOffset)
                    });
                    activeObject.setPositionByOrigin(new fabric__WEBPACK_IMPORTED_MODULE_4__["fabric"].Point(objectLeft - objectWidth / 2 + activeObjectWidth / 2, activeObjectTop), 'center', 'center');
                }
                // snap by the right edge
                if (isInRange(objectLeft + objectWidth / 2, activeObjectLeft + activeObjectWidth / 2)) {
                    verticalInTheRange = true;
                    verticalLines.push({
                        x: objectLeft + objectWidth / 2,
                        y1: (objectTop < activeObjectTop)
                            ? (objectTop - objectHeight / 2 - aligningLineOffset)
                            : (objectTop + objectHeight / 2 + aligningLineOffset),
                        y2: (activeObjectTop > objectTop)
                            ? (activeObjectTop + activeObjectHeight / 2 + aligningLineOffset)
                            : (activeObjectTop - activeObjectHeight / 2 - aligningLineOffset)
                    });
                    activeObject.setPositionByOrigin(new fabric__WEBPACK_IMPORTED_MODULE_4__["fabric"].Point(objectLeft + objectWidth / 2 - activeObjectWidth / 2, activeObjectTop), 'center', 'center');
                }
                // snap by the vertical center line
                if (isInRange(objectTop, activeObjectTop)) {
                    horizontalInTheRange = true;
                    horizontalLines.push({
                        y: objectTop,
                        x1: (objectLeft < activeObjectLeft)
                            ? (objectLeft - objectWidth / 2 - aligningLineOffset)
                            : (objectLeft + objectWidth / 2 + aligningLineOffset),
                        x2: (activeObjectLeft > objectLeft)
                            ? (activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset)
                            : (activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset)
                    });
                    activeObject.setPositionByOrigin(new fabric__WEBPACK_IMPORTED_MODULE_4__["fabric"].Point(activeObjectLeft, objectTop), 'center', 'center');
                }
                // snap by the top edge
                if (isInRange(objectTop - objectHeight / 2, activeObjectTop - activeObjectHeight / 2)) {
                    horizontalInTheRange = true;
                    horizontalLines.push({
                        y: objectTop - objectHeight / 2,
                        x1: (objectLeft < activeObjectLeft)
                            ? (objectLeft - objectWidth / 2 - aligningLineOffset)
                            : (objectLeft + objectWidth / 2 + aligningLineOffset),
                        x2: (activeObjectLeft > objectLeft)
                            ? (activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset)
                            : (activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset)
                    });
                    activeObject.setPositionByOrigin(new fabric__WEBPACK_IMPORTED_MODULE_4__["fabric"].Point(activeObjectLeft, objectTop - objectHeight / 2 + activeObjectHeight / 2), 'center', 'center');
                }
                // snap by the bottom edge
                if (isInRange(objectTop + objectHeight / 2, activeObjectTop + activeObjectHeight / 2)) {
                    horizontalInTheRange = true;
                    horizontalLines.push({
                        y: objectTop + objectHeight / 2,
                        x1: (objectLeft < activeObjectLeft)
                            ? (objectLeft - objectWidth / 2 - aligningLineOffset)
                            : (objectLeft + objectWidth / 2 + aligningLineOffset),
                        x2: (activeObjectLeft > objectLeft)
                            ? (activeObjectLeft + activeObjectWidth / 2 + aligningLineOffset)
                            : (activeObjectLeft - activeObjectWidth / 2 - aligningLineOffset)
                    });
                    activeObject.setPositionByOrigin(new fabric__WEBPACK_IMPORTED_MODULE_4__["fabric"].Point(activeObjectLeft, objectTop + objectHeight / 2 - activeObjectHeight / 2), 'center', 'center');
                }
            }
            if (!horizontalInTheRange) {
                horizontalLines.length = 0;
            }
            if (!verticalInTheRange) {
                verticalLines.length = 0;
            }
        });
        canvas.on('before:render', function () {
            if (canvas.contextTop) {
                canvas.clearContext(canvas.contextTop);
            }
        });
        canvas.on('after:render', function () {
            for (var i = verticalLines.length; i--;) {
                drawVerticalLine(verticalLines[i]);
            }
            for (var i = horizontalLines.length; i--;) {
                drawHorizontalLine(horizontalLines[i]);
            }
            verticalLines.length = horizontalLines.length = 0;
        });
        canvas.on('mouse:up', function () {
            verticalLines.length = horizontalLines.length = 0;
            canvas.renderAll();
        });
    };
    ObjectAlignmentPositionComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[object-alignment-position]',
            template: __webpack_require__(/*! ./object-alignment-position.component.html */ "./src/app/components/object-alignment-position/object-alignment-position.component.html"),
            styles: [__webpack_require__(/*! ./object-alignment-position.component.scss */ "./src/app/components/object-alignment-position/object-alignment-position.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"], src_app_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"]])
    ], ObjectAlignmentPositionComponent);
    return ObjectAlignmentPositionComponent;
}());



/***/ }),

/***/ "./src/app/components/object-grouping/object-grouping.component.html":
/*!***************************************************************************!*\
  !*** ./src/app/components/object-grouping/object-grouping.component.html ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<li (click)=\"selectDeselectAll('select')\" [ngClass]=\"{'disabled': disableForSelectAll == true}\">\n  <svg class=\"icon icon-t-group\" viewBox=\"0 0 30 30\" tooltip=\"{{'Select All' | translate}}\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-t-group\"></use>\n  </svg>\n</li>\n<li (click)=\"selectDeselectAll('deselect')\" [ngClass]=\"{'disabled': disableForSelectAll == true}\">\n  <svg class=\"icon icon-t-ungroup\" viewBox=\"0 0 30 30\" tooltip=\"{{'Deselect All' | translate}}\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-t-ungroup\"></use>\n  </svg>\n</li>"

/***/ }),

/***/ "./src/app/components/object-grouping/object-grouping.component.scss":
/*!***************************************************************************!*\
  !*** ./src/app/components/object-grouping/object-grouping.component.scss ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvb2JqZWN0LWdyb3VwaW5nL29iamVjdC1ncm91cGluZy5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/object-grouping/object-grouping.component.ts":
/*!*************************************************************************!*\
  !*** ./src/app/components/object-grouping/object-grouping.component.ts ***!
  \*************************************************************************/
/*! exports provided: ObjectGroupingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectGroupingComponent", function() { return ObjectGroupingComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");




var ObjectGroupingComponent = /** @class */ (function () {
    function ObjectGroupingComponent(mainService, eventService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.selectionArea = 0;
        mainService.enableMultipleSelection = true;
    }
    ObjectGroupingComponent.prototype.ngOnInit = function () {
        this.init();
        this.subscribeEvents();
    };
    ObjectGroupingComponent.prototype.init = function () {
        this.disableForSelectAll = this.disableForSelectAllFun();
    };
    /**
     * Subscribe events and perform action here
     */
    ObjectGroupingComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectSelectionCreated', function () {
            _this.init();
        });
        this.eventService.$sub('objectSelectionUpdated', function () {
            _this.init();
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.init();
        });
        this.eventService.$sub('objectUpdated', function () {
            _this.init();
        });
        this.eventService.$sub('objectRemoved', function () {
            _this.init();
        });
        this.eventService.$sub('selectThisObjects', function (objList) {
            _this.selectDeselectAll('select', objList);
        });
    };
    ObjectGroupingComponent.prototype.disableForSelectAllFun = function () {
        //let totalAddedObjects: any = (this.mainService.canvasService.currentCanvas && this.mainService.canvasService.getObjects()) ? this.mainService.canvasService.getObjects().length : 0;
        var ultimateLockEnable;
        var totalAddedObjects = 0;
        if (this.mainService.canvasService.currentCanvas) {
            this.mainService.canvasService.getObjects().forEach(function (obj) {
                if (obj.ultimatelock != true && obj.selectable == true)
                    totalAddedObjects++;
            });
        }
        if (totalAddedObjects > 1)
            return false;
        return true;
    };
    ObjectGroupingComponent.prototype.selectDeselectAll = function (option, objectList) {
        if (option === void 0) { option = ''; }
        if (objectList === void 0) { objectList = null; }
        if (this.disableForSelectAll === true)
            return;
        var canvas = this.mainService.canvasService.currentCanvas;
        objectList = (objectList == null) ? this.mainService.canvasService.getObjects() : objectList;
        var temp = [];
        objectList.forEach(function (obj) {
            if (obj.ultimatelock != true && obj.selectable == true) {
                temp.push(obj);
            }
        });
        canvas.discardActiveObject();
        if (option == "select") {
            var sel = new fabric.ActiveSelection(temp, {
                canvas: canvas,
            });
            canvas.setActiveObject(sel);
            this.selectionArea = true;
        }
        else {
            this.selectionArea = false;
        }
        canvas.requestRenderAll();
    };
    ObjectGroupingComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[object-grouping]',
            template: __webpack_require__(/*! ./object-grouping.component.html */ "./src/app/components/object-grouping/object-grouping.component.html"),
            styles: [__webpack_require__(/*! ./object-grouping.component.scss */ "./src/app/components/object-grouping/object-grouping.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_1__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubService"]])
    ], ObjectGroupingComponent);
    return ObjectGroupingComponent;
}());



/***/ }),

/***/ "./src/app/components/object-lock/object-lock.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/components/object-lock/object-lock.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<svg class=\"icon icon-t-lock\" *ngIf=\"mainService.isAdmin === true\" id=\"lock\" viewBox=\"0 0 30 30\" (click)=\"ultimateLockObject()\">\n\t<use xlink:href=\"assets/img/sprite.svg#icon-t-lock\" id=\"lock\"></use>\n</svg>"

/***/ }),

/***/ "./src/app/components/object-lock/object-lock.component.scss":
/*!*******************************************************************!*\
  !*** ./src/app/components/object-lock/object-lock.component.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvb2JqZWN0LWxvY2svb2JqZWN0LWxvY2suY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/object-lock/object-lock.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/object-lock/object-lock.component.ts ***!
  \*****************************************************************/
/*! exports provided: ObjectLockComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectLockComponent", function() { return ObjectLockComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../services/main.service */ "./src/app/services/main.service.ts");




var ObjectLockComponent = /** @class */ (function () {
    function ObjectLockComponent(mainService, eventService) {
        this.mainService = mainService;
        this.eventService = eventService;
    }
    ObjectLockComponent.prototype.ngOnInit = function () {
        var keysToBePush = ["lockMovementX", "lockMovementY", "hasControls", "ultimatelock"], currentJsonKeys = this.mainService.canvasService.objProperties;
        keysToBePush.filter(function (currentKey) {
            if (currentJsonKeys.indexOf(currentKey) == -1)
                currentJsonKeys.push(currentKey);
        });
        this.mainService.canvasService.objProperties = currentJsonKeys;
        this.initData();
        this.subscribeEvents();
    };
    ObjectLockComponent.prototype.initData = function (obj) {
        if (obj === void 0) { obj = ""; }
        this.enableForSingleObj = (this.enableForSingleObject() === true) ? false : true;
    };
    ObjectLockComponent.prototype.enableForSingleObject = function () {
        var obj = this.mainService.canvasService.getActiveObject();
        if (obj == false)
            return false;
        return true;
    };
    ObjectLockComponent.prototype.ultimateLockObject = function () {
        var _this = this;
        //let obj = this.mainService.canvasService.getActiveObject();
        var objs = this.mainService.canvasService.currentCanvas.getActiveObjects();
        if (objs.length > 0) {
            objs.filter(function (obj) {
                var lockedObj = _this.mainService.canvasService.applyUltimateLock(obj, false);
                _this.mainService.canvasService.currentCanvas.discardActiveObject();
                _this.mainService.canvasService.currentCanvas.setActiveObject(lockedObj);
            });
            this.mainService.canvasService.currentCanvas.renderAll();
        }
        //this.eventService.$pub('ultimateLockStatus',lockedObj);
    };
    ObjectLockComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            _this.initData(obj);
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            _this.initData(obj);
        });
        this.eventService.$sub('objectSelectionCleared', function (obj) {
            _this.initData(obj);
        });
        this.eventService.$sub('objectAdded', function (obj) {
            _this.mainService.canvasService.applyUltimateLock(obj, true);
        });
    };
    ObjectLockComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[object-lock]',
            template: __webpack_require__(/*! ./object-lock.component.html */ "./src/app/components/object-lock/object-lock.component.html"),
            styles: [__webpack_require__(/*! ./object-lock.component.scss */ "./src/app/components/object-lock/object-lock.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"]])
    ], ObjectLockComponent);
    return ObjectLockComponent;
}());



/***/ }),

/***/ "./src/app/components/object-position/object-position.component.html":
/*!***************************************************************************!*\
  !*** ./src/app/components/object-position/object-position.component.html ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<accordion-group class=\"byi-accord\" *ngIf=\"!mainService.isResponsive\"  [hidden]=\"componentHide\">\n\t<button class=\"byi-accordion-title\" accordion-heading>\n\t\t<span>{{'Object Position' | translate}}</span>\n\t</button>\n\t<div class=\"byi-accord-content\">\n\t\t<ng-container [ngTemplateOutlet]=\"objectPosition\"></ng-container>\n\t</div>\n</accordion-group>\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('object-position')\"  [attr.hidden]=\"componentHide\">\n\t<ng-template tabHeading>\n\t\t<span>{{'Object Position' | translate}}</span>\n\t</ng-template>\n\t<ng-container [ngTemplateOutlet]=\"objectPosition\"></ng-container>\n</tab>\n<ng-template #objectPosition>\n\t<div class=\"byie-option\">\n\t\t<div class=\"byi-inline-box\">\n\t\t\t<div class=\"byi-inline-item\">\n\t\t\t\t<label>\n\t\t\t\t\t<span>{{'X' | translate}}</span>\n\t\t\t\t\t<input class=\"byi-input\" type=\"number\" [(ngModel)]=\"positionX\" (change)=\"changePositionX()\">\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"byi-inline-item\">\n\t\t\t\t<label>\n\t\t\t\t\t<span>{{'Y' | translate}}</span>\n\t\t\t\t\t<input class=\"byi-input\" type=\"number\" [(ngModel)]=\"positionY\" (change)=\"changePositionY()\">\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<button (click)=\"clear()\" class=\"byi-range-reset-link\" tooltip=\"{{'Reset' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-reset\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-reset\"></use>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/object-position/object-position.component.scss":
/*!***************************************************************************!*\
  !*** ./src/app/components/object-position/object-position.component.scss ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvb2JqZWN0LXBvc2l0aW9uL29iamVjdC1wb3NpdGlvbi5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/object-position/object-position.component.ts":
/*!*************************************************************************!*\
  !*** ./src/app/components/object-position/object-position.component.ts ***!
  \*************************************************************************/
/*! exports provided: ObjectPositionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectPositionComponent", function() { return ObjectPositionComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");







var ObjectPositionComponent = /** @class */ (function () {
    function ObjectPositionComponent(mainService, cacheService, canvasService, pubsub, tabsService) {
        this.mainService = mainService;
        this.cacheService = cacheService;
        this.canvasService = canvasService;
        this.pubsub = pubsub;
        this.tabsService = tabsService;
        this.enable = 0;
        this.componentHide = true;
        this.tabsService.registerTabs('object-position', 'plain-text');
        this.tabsService.registerTabs('object-position', 'clipart');
        this.tabsService.registerTabs('object-position', 'image-upload');
        this.tabsService.registerTabs('object-position', 'name-number');
        this.tabsService.registerTabs('object-position', 'common');
    }
    ObjectPositionComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.pubsub.$sub('objectAdded', function (obj) {
            _this.setXYPostion(obj);
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
        });
        this.pubsub.$sub('objectUpdated', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.setXYPostion(obj);
        });
        this.pubsub.$sub('canvasObjectModified', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.setXYPostion(obj);
        });
        this.pubsub.$sub('canvasObjectScaled', function (obj) {
            _this.setXYPostion(obj);
        });
        this.pubsub.$sub('objectSelectionUpdated', function (obj) {
            _this.setXYPostion(obj);
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
        });
        this.pubsub.$sub('objectSelectionCreated', function (obj) {
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
            _this.setXYPostion(obj);
        });
        this.pubsub.$sub('objectSelectionCleared', function () {
            _this.componentHide = (_this.canvasService.getActiveObject()) ? null : true;
        });
        this.pubsub.$sub('objectRemoved', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.setXYPostion(obj);
            _this.componentHide = (_this.canvasService.getActiveObject()) ? null : true;
        });
        this.pubsub.$sub('alignment', function (data) {
            if (data.option == 'right' || data.option == 'left' || data.option == 'alignHorizontalCenter')
                _this.posleft = data.newVal;
            else
                _this.postop = data.newVal;
            console.log(_this.posleft);
        });
    };
    ObjectPositionComponent.prototype.setXYPostion = function (obj) {
        if (obj.originY == 'center') {
            this.positionX = obj.left - obj.width / 2;
        }
        else {
            this.positionX = obj.left;
        }
        if (obj.originY == 'center') {
            this.positionY = obj.top - obj.height / 2;
        }
        else {
            this.positionY = obj.top;
        }
    };
    ObjectPositionComponent.prototype.changePositionY = function () {
        var canvas = this.canvasService.currentCanvas;
        var canvasService = this.canvasService;
        var obj = canvas.getActiveObject(), position;
        if (obj) {
            if (obj.originY == 'center') {
                position = this.positionY + obj.height / 2;
            }
            else {
                position = this.positionY;
            }
            var properties = { top: position };
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
            };
            canvasService.objectCRUD(params);
        }
    };
    ObjectPositionComponent.prototype.changePositionX = function () {
        var canvas = this.canvasService.currentCanvas;
        var canvasService = this.canvasService;
        var obj = canvas.getActiveObject(), position;
        if (obj) {
            if (obj.originX == 'center') {
                position = this.positionX + obj.width / 2;
            }
            else {
                position = this.positionX;
            }
            var properties = { left: position };
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
            };
            canvasService.objectCRUD(params);
        }
    };
    ObjectPositionComponent.prototype.clear = function () {
        var canvas = this.canvasService.currentCanvas;
        var canvasService = this.canvasService;
        var obj = canvas.getActiveObject();
        var posmiddle = (canvas.height / 2) - (obj.height * obj.scaleY / 2);
        var poscenter = (canvas.width / 2) - (obj.width * obj.scaleX / 2);
        var properties = {};
        if (obj) {
            if (obj.originX == 'center') {
                poscenter = canvas.width / 2;
            }
            if (obj.originY == 'center') {
                posmiddle = canvas.height / 2;
            }
            properties = { top: posmiddle, left: poscenter };
        }
        this.positionX = '';
        this.positionY = '';
        obj.setCoords();
        canvas.setActiveObject(obj);
        var params = {
            obj: obj,
            properties: properties,
            crudServiceString: 'this.updateObjectService',
        };
        canvasService.objectCRUD(params);
    };
    ObjectPositionComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[object-position]',
            template: __webpack_require__(/*! ./object-position.component.html */ "./src/app/components/object-position/object-position.component.html"),
            styles: [__webpack_require__(/*! ./object-position.component.scss */ "./src/app/components/object-position/object-position.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_3__["CacheService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__["PubSubService"], _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__["TabsService"]])
    ], ObjectPositionComponent);
    return ObjectPositionComponent;
}());



/***/ }),

/***/ "./src/app/components/opacity/opacity.component.html":
/*!***********************************************************!*\
  !*** ./src/app/components/opacity/opacity.component.html ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<accordion-group class=\"byi-accord\" *ngIf=\"!mainService.isResponsive\" [hidden]=\"componentHide\">\n\t<button class=\"byi-accordion-title\" accordion-heading>\n\t\t<span>{{'Opacity' | translate}}</span>\n\t</button>\n\t<div class=\"byi-accord-content\">\n\t\t<ng-container [ngTemplateOutlet]=\"opacityTemplate\"></ng-container>\n\t</div>\n</accordion-group>\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('opacity')\">\n\t<ng-template tabHeading>\n\t\t<span>{{'Opacity' | translate}}</span>\n\t</ng-template>\n\t<ng-container [ngTemplateOutlet]=\"opacityTemplate\"></ng-container>\n</tab>\n<ng-template #opacityTemplate>\n\t<div class=\"byie-option\">\n\t\t<div class=\"byi-range-box byi-range-color byie-count-wrap\">\n\t\t\t<div class=\"byi-rb-input\">\n\t\t\t\t<span class=\"byie-count\">{{(opacity/10).toFixed(1)}}</span>\n\t\t\t\t<input type=\"range\" [(ngModel)]=\"opacity\" min=\"0\" max=\"10\" step=\"0.1\"\n\t\t\t\t\t(mousedown)=\"setPrevValue($event.target.value)\" (input)=\"changeOpacity()\" (change)=\"stackToUndo()\"\n\t\t\t\t\tclass=\"slider\">\n\t\t\t</div>\n\t\t\t<button class=\"byi-range-reset-link\" (click)=\"resetOpacity()\" tooltip=\"{{'Reset' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-reset\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-reset\"></use>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/opacity/opacity.component.scss":
/*!***********************************************************!*\
  !*** ./src/app/components/opacity/opacity.component.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvb3BhY2l0eS9vcGFjaXR5LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/opacity/opacity.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/components/opacity/opacity.component.ts ***!
  \*********************************************************/
/*! exports provided: OpacityComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OpacityComponent", function() { return OpacityComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");






var OpacityComponent = /** @class */ (function () {
    function OpacityComponent(canvasService, eventService, mainService, tabsService) {
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.mainService = mainService;
        this.tabsService = tabsService;
        this.componentHide = true;
        this.prevOpacityVal = null;
        this.tabsService.registerTabs('opacity', 'plain-text');
        this.tabsService.registerTabs('opacity', 'clipart');
        this.tabsService.registerTabs('opacity', 'image-upload');
        this.tabsService.registerTabs('opacity', 'name-number');
        this.tabsService.registerTabs('opacity', 'common');
    }
    OpacityComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.initData();
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
            _this.updateOpacity(obj);
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.updateOpacity(obj);
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.updateOpacity(obj);
        });
        this.eventService.$sub('objectSelectionCleared', function (obj) {
            _this.initData();
            _this.componentHide = (_this.canvasService.getActiveObject() && _this.canvasService.getActiveObject().ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectAdded', function (obj) {
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
        });
    };
    OpacityComponent.prototype.initData = function () {
        this.opacity = this.canvasService.getActiveObjectValue('text', 'opacity') ? this.canvasService.getActiveObjectValue('text', 'opacity') : 1.0;
    };
    OpacityComponent.prototype.changeOpacity = function () {
        var _this = this;
        var selectedObjs = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        properties.opacity = (this.opacity / 10);
        selectedObjs.filter(function (obj) {
            obj = Object.assign(obj, properties);
            _this.canvasService.currentCanvas.renderAll();
        });
    };
    OpacityComponent.prototype.setPrevValue = function (val) {
        if (this.prevOpacityVal == null)
            this.prevOpacityVal = val / 10;
    };
    OpacityComponent.prototype.stackToUndo = function () {
        this.canvasService.rangeSliderUndoRedo({ 'opacity': this.prevOpacityVal });
        this.prevOpacityVal = null;
    };
    OpacityComponent.prototype.updateOpacity = function (obj) {
        if (obj.length > 0) {
            if (obj[0]) {
                this.opacity = obj[0].opacity * 10;
            }
        }
        else {
            this.opacity = obj.opacity * 10;
        }
    };
    OpacityComponent.prototype.resetOpacity = function () {
        this.opacity = 1 * 10;
        this.changeOpacity();
    };
    OpacityComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[opacity]',
            template: __webpack_require__(/*! ./opacity.component.html */ "./src/app/components/opacity/opacity.component.html"),
            styles: [__webpack_require__(/*! ./opacity.component.scss */ "./src/app/components/opacity/opacity.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_canvas_service__WEBPACK_IMPORTED_MODULE_2__["CanvasService"], angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"], _services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"], _services_tabs_service__WEBPACK_IMPORTED_MODULE_4__["TabsService"]])
    ], OpacityComponent);
    return OpacityComponent;
}());



/***/ }),

/***/ "./src/app/components/placeholder-loader/placeholder-loader.component.html":
/*!*********************************************************************************!*\
  !*** ./src/app/components/placeholder-loader/placeholder-loader.component.html ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"linear-background\" [style.height.px]='loaderHeight' [style.width.px]='loaderWidth'>\n  <!-- <div class=\"inter-draw\"></div>\n  <div class=\"inter-crop\"></div>\n  <div class=\"inter-right--top\"></div>\n  <div class=\"inter-right--bottom\"></div> -->\n</div>"

/***/ }),

/***/ "./src/app/components/placeholder-loader/placeholder-loader.component.scss":
/*!*********************************************************************************!*\
  !*** ./src/app/components/placeholder-loader/placeholder-loader.component.scss ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "@-webkit-keyframes placeHolderShimmer {\n  0% {\n    background-position: -468px 0; }\n  100% {\n    background-position: 468px 0; } }\n\n@keyframes placeHolderShimmer {\n  0% {\n    background-position: -468px 0; }\n  100% {\n    background-position: 468px 0; } }\n\n.linear-background {\n  -webkit-animation-duration: 1s;\n          animation-duration: 1s;\n  -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards;\n  -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n  -webkit-animation-name: placeHolderShimmer;\n          animation-name: placeHolderShimmer;\n  -webkit-animation-timing-function: linear;\n          animation-timing-function: linear;\n  background: #f6f7f8;\n  background: linear-gradient(to right, #eeeeee 8%, #dddddd 18%, #eeeeee 33%);\n  background-size: 1000px 104px;\n  position: relative;\n  overflow: hidden;\n  height: 80px;\n  border-radius: 5px; }\n\n.inter-draw {\n  background: #FFF;\n  width: 100%;\n  height: 100px;\n  position: absolute;\n  top: 100px; }\n\n.inter-right--top {\n  background: #FFF;\n  width: 100%;\n  height: 20px;\n  position: absolute;\n  top: 20px;\n  left: 100px; }\n\n.inter-right--bottom {\n  background: #FFF;\n  width: 100%;\n  height: 50px;\n  position: absolute;\n  top: 60px;\n  left: 100px; }\n\n.inter-crop {\n  background: #FFF;\n  width: 20px;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 100px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvd3d3L2h0bWwvQllJVjIvbWFnMjI4L2FuZ3VsYXIvc3JjL2FwcC9jb21wb25lbnRzL3BsYWNlaG9sZGVyLWxvYWRlci9wbGFjZWhvbGRlci1sb2FkZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSTtJQUNJLDZCQUNKLEVBQUE7RUFFQTtJQUNJLDRCQUNKLEVBQUEsRUFBQTs7QUFQSjtFQUNJO0lBQ0ksNkJBQ0osRUFBQTtFQUVBO0lBQ0ksNEJBQ0osRUFBQSxFQUFBOztBQUdKO0VBQ0ksOEJBQXNCO1VBQXRCLHNCQUFzQjtFQUN0QixxQ0FBNkI7VUFBN0IsNkJBQTZCO0VBQzdCLDJDQUFtQztVQUFuQyxtQ0FBbUM7RUFDbkMsMENBQWtDO1VBQWxDLGtDQUFrQztFQUNsQyx5Q0FBaUM7VUFBakMsaUNBQWlDO0VBQ2pDLG1CQUFtQjtFQUNuQiwyRUFBMkU7RUFDM0UsNkJBQTZCO0VBQzdCLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQixFQUFBOztBQUd0QjtFQUNJLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixVQUFVLEVBQUE7O0FBR2Q7RUFDSSxnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsU0FBUztFQUNULFdBQVcsRUFBQTs7QUFHZjtFQUNJLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsV0FBVyxFQUFBOztBQUdmO0VBQ0ksZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLE1BQU07RUFDTixXQUFXLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL3BsYWNlaG9sZGVyLWxvYWRlci9wbGFjZWhvbGRlci1sb2FkZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAa2V5ZnJhbWVzIHBsYWNlSG9sZGVyU2hpbW1lciB7XG4gICAgMCUge1xuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDY4cHggMFxuICAgIH1cblxuICAgIDEwMCUge1xuICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiA0NjhweCAwXG4gICAgfVxufVxuXG4ubGluZWFyLWJhY2tncm91bmQge1xuICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMXM7XG4gICAgYW5pbWF0aW9uLWZpbGwtbW9kZTogZm9yd2FyZHM7XG4gICAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7XG4gICAgYW5pbWF0aW9uLW5hbWU6IHBsYWNlSG9sZGVyU2hpbW1lcjtcbiAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXI7XG4gICAgYmFja2dyb3VuZDogI2Y2ZjdmODtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICNlZWVlZWUgOCUsICNkZGRkZGQgMTglLCAjZWVlZWVlIDMzJSk7XG4gICAgYmFja2dyb3VuZC1zaXplOiAxMDAwcHggMTA0cHg7ICAgIFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGhlaWdodDogODBweDsgICAgXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xufVxuXG4uaW50ZXItZHJhdyB7XG4gICAgYmFja2dyb3VuZDogI0ZGRjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDEwMHB4O1xufVxuXG4uaW50ZXItcmlnaHQtLXRvcCB7XG4gICAgYmFja2dyb3VuZDogI0ZGRjtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMjBweDtcbiAgICBsZWZ0OiAxMDBweDtcbn1cblxuLmludGVyLXJpZ2h0LS1ib3R0b20ge1xuICAgIGJhY2tncm91bmQ6ICNGRkY7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiA1MHB4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDYwcHg7XG4gICAgbGVmdDogMTAwcHg7XG59XG5cbi5pbnRlci1jcm9wIHtcbiAgICBiYWNrZ3JvdW5kOiAjRkZGO1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDEwMHB4O1xufSJdfQ== */"

/***/ }),

/***/ "./src/app/components/placeholder-loader/placeholder-loader.component.ts":
/*!*******************************************************************************!*\
  !*** ./src/app/components/placeholder-loader/placeholder-loader.component.ts ***!
  \*******************************************************************************/
/*! exports provided: PlaceholderLoaderComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaceholderLoaderComponent", function() { return PlaceholderLoaderComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _placholder_loader_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./placholder-loader.service */ "./src/app/components/placeholder-loader/placholder-loader.service.ts");



var PlaceholderLoaderComponent = /** @class */ (function () {
    function PlaceholderLoaderComponent(placholderLoaderService) {
        this.placholderLoaderService = placholderLoaderService;
    }
    PlaceholderLoaderComponent.prototype.ngOnInit = function () {
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])('loaderHeight'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], PlaceholderLoaderComponent.prototype, "loaderHeight", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])('loaderWidth'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], PlaceholderLoaderComponent.prototype, "loaderWidth", void 0);
    PlaceholderLoaderComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[placeholder-loader]',
            template: __webpack_require__(/*! ./placeholder-loader.component.html */ "./src/app/components/placeholder-loader/placeholder-loader.component.html"),
            styles: [__webpack_require__(/*! ./placeholder-loader.component.scss */ "./src/app/components/placeholder-loader/placeholder-loader.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_placholder_loader_service__WEBPACK_IMPORTED_MODULE_2__["PlacholderLoaderService"]])
    ], PlaceholderLoaderComponent);
    return PlaceholderLoaderComponent;
}());



/***/ }),

/***/ "./src/app/components/placeholder-loader/placholder-loader.service.ts":
/*!****************************************************************************!*\
  !*** ./src/app/components/placeholder-loader/placholder-loader.service.ts ***!
  \****************************************************************************/
/*! exports provided: PlacholderLoaderService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlacholderLoaderService", function() { return PlacholderLoaderService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var PlacholderLoaderService = /** @class */ (function () {
    function PlacholderLoaderService() {
        this.placholderWidth = 100;
        this.placholderHeight = 20;
    }
    PlacholderLoaderService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], PlacholderLoaderService);
    return PlacholderLoaderService;
}());



/***/ }),

/***/ "./src/app/components/plain-text/plain-text.component.html":
/*!*****************************************************************!*\
  !*** ./src/app/components/plain-text/plain-text.component.html ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div loader #loaderComponent></div>\n<div class=\"byi-accord-content\" [class.byi-mob-text]=\"mainService.isResponsive\"\n\t*ngIf=\"loaderComponent.showSubLoader === false && loadContent\">\n\t<textarea class=\"byi-input noDeleteObject\" placeholder=\"{{'Enter Text' | translate}}\" [(ngModel)]=\"canvasText\" (keyup)=\"addText()\" id=\"textInput\" autofocus></textarea>\n\t<button class=\"byi-add-btn\" *ngIf=\"showGreenTick && loadContent && mainService.isResponsive && canvasText && canvasText.length > 0\" (click)=\"showChild()\"></button>\n</div>\n\n<common-tabs #commonTabs *ngIf=\"!loadContent\" [subTabsData]=\"subTabsData\" [activeAccordion]=\"accordianId\"></common-tabs>"

/***/ }),

/***/ "./src/app/components/plain-text/plain-text.component.scss":
/*!*****************************************************************!*\
  !*** ./src/app/components/plain-text/plain-text.component.scss ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcGxhaW4tdGV4dC9wbGFpbi10ZXh0LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/plain-text/plain-text.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/components/plain-text/plain-text.component.ts ***!
  \***************************************************************/
/*! exports provided: PlainTextComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlainTextComponent", function() { return PlainTextComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _font_font_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../font/font.service */ "./src/app/components/font/font.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");










var PlainTextComponent = /** @class */ (function () {
    function PlainTextComponent(mainService, fontService, canvasService, eventService, translate, tabsService, cdr) {
        var _this = this;
        this.mainService = mainService;
        this.fontService = fontService;
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.translate = translate;
        this.tabsService = tabsService;
        this.cdr = cdr;
        this.currentTab = 1;
        this.accordianId = 0;
        this.eventService.$sub('getSubTabs', function (mainTabId) {
            if (mainTabId == _this.currentTab && !_this.subTabsData) {
                _this.getSubTabs(mainTabId);
            }
            _this.getCurrentTabName = _this.mainService.getAllTabs[_this.currentTab]['label'];
        });
    }
    PlainTextComponent.prototype.ngOnInit = function () {
        if (this.loadContent && this.loadContent == true) {
            this.loaderComponent.showSubLoader = false;
            this.init();
        }
        else {
            this.loaderComponent.showSubLoader = true;
            this.cdr.detectChanges();
        }
    };
    PlainTextComponent.prototype.init = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.subscribeEvents();
                        if (!(!this.fontService.fontarr || this.fontService.fontarr.length <= 0)) return [3 /*break*/, 2];
                        this.loaderComponent.showSubLoader = true;
                        this.cdr.detectChanges();
                        if (!!this.fontService.fontLoadRequested) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.fontService.getFonts(1, true)];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (this.fontService.fontarr && this.fontService.fontarr.length > 0) {
                            if (this.loaderComponent.showSubLoader === true)
                                this.loaderComponent.showSubLoader = false;
                            this.prepareFontValues();
                        }
                        this.getColors();
                        return [2 /*return*/];
                }
            });
        });
    };
    PlainTextComponent.prototype.ngAfterViewChecked = function () {
        if (this.mainService.hideMe === true || this.fontService.fontarr) {
            this.loaderComponent.showSubLoader = false;
            this.defaultFontFamily = this.fontService.defaultFontFamily;
        }
    };
    PlainTextComponent.prototype.ngAfterViewInit = function () {
        var ele = document.getElementById('textInput');
        if (ele && ele.id)
            this.textInput = ele;
    };
    PlainTextComponent.prototype.prepareFontValues = function () {
        this.defaultFontFamily = this.fontService.defaultFontFamily;
        this.defaultFontSize = this.fontService.defaultFontSize;
        this.textLimitEnable = this.fontService.textLimitEnable;
        this.textLimitCounter = this.fontService.textLimitCounter;
        this.limitAlert = this.fontService.limitAlert;
        this.initData();
    };
    PlainTextComponent.prototype.getColors = function () {
        var _this = this;
        if (!this.defaultColor) {
            this.defaultColor = this.mainService.colorData.defaultColor;
        }
        this.eventService.$sub('getColors').subscribe(function (colorData) {
            _this.defaultColor = colorData.defaultColor;
        }, function (err) { return console.log(err); });
    };
    PlainTextComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.initData();
        });
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            // for mobile
            var selectedObjs = _this.mainService.canvasService.currentCanvas.getActiveObjects(), self = _this;
            if (selectedObjs.length > 1 && _this.mainService.isResponsive) {
                var anyTextObj = (obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type == 'text'; })) >= 0) ? true : false, nonTextObj = (obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type != 'text'; })) >= 0) ? true : false;
                if (anyTextObj) {
                    var tabName_1 = (nonTextObj) ? 'common' : 'plain-text';
                    setTimeout(function () {
                        self.showChild(tabName_1);
                    }, 100);
                    _this.eventService.$pub('getActiveTabId', _this.currentTab);
                }
            }
            else {
                if (obj.tab == 'text') {
                    _this.canvasText = obj.text;
                    if (_this.mainService.isResponsive) {
                        _this.tabsService.backTab();
                        _this.eventService.$pub('getActiveTabId', _this.currentTab);
                        _this.showGreenTick = (obj.type == "text" && obj.ultimatelock == true) ? null : true;
                    }
                    else {
                        if (_this.textInput)
                            _this.textInput.focus();
                        _this.eventService.$pub('getActiveTabId', _this.currentTab);
                    }
                }
                else {
                    _this.canvasText = '';
                }
            }
            // if (this.mainService.isResponsive) {
            // 	let self = this, selectedObjs = this.mainService.canvasService.currentCanvas.getActiveObjects();
            // 	if (selectedObjs.length > 1) {
            // 		let anyTextObj = (obj._objects.indexOf(obj._objects.find(currObj => currObj.type == 'text')) >= 0) ? true : false,
            // 			nonTextObj = (obj._objects.indexOf(obj._objects.find(currObj => currObj.type != 'text')) >= 0) ? true : false;
            // 		if (anyTextObj) {
            // 			let tabName = (nonTextObj) ? 'common' : 'plain-text';
            // 			setTimeout(function () {
            // 				self.showChild(tabName);
            // 			}, 100);
            // 			this.eventService.$pub('getActiveTabId', this.currentTab);
            // 		}
            // 	}
            // 	else {
            // 		obj = (Array.isArray(obj)) ? obj[0] : obj;
            // 		obj = (obj.type == 'activeSelection') ? selectedObjs[0] : obj;
            // 		if (obj.tab == 'text') {
            // 			this.tabsService.backTab();						
            // 			this.eventService.$pub('getActiveTabId', this.currentTab);
            // 			this.showGreenTick = (obj.type == "text" && obj.ultimatelock == true) ? null : true;
            // 			this.canvasText = obj.text;
            // 			if (this.textInput) this.textInput.focus();
            // 		} else {
            // 			this.canvasText = '';
            // 		}
            // 	}
            // 	// for desktop
            // } else {
            // 	if (obj.tab == 'text') {
            // 		this.eventService.$pub('getActiveTabId', this.currentTab);
            // 		this.canvasText = obj.text;
            // 		if (this.textInput) this.textInput.focus();
            // 	} else {
            // 		this.canvasText = '';
            // 	}
            // }
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            if (obj.tab == 'text') {
                _this.canvasText = obj.text;
                if (_this.mainService.isResponsive) {
                    _this.tabsService.backTab();
                    _this.eventService.$pub('getActiveTabId', _this.currentTab);
                    _this.showGreenTick = (obj.type == "text" && obj.ultimatelock == true) ? null : true;
                }
                else {
                    if (_this.textInput)
                        _this.textInput.focus();
                    _this.eventService.$pub('getActiveTabId', _this.currentTab);
                }
            }
            else {
                _this.canvasText = '';
            }
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            if (obj.tab == 'text') {
                _this.eventService.$pub('getActiveTabId', _this.currentTab);
            }
        });
        this.eventService.$sub('imageSideChanged', function () {
            _this.initData();
        });
    };
    PlainTextComponent.prototype.initData = function () {
        this.canvasText = (this.canvasService.getActiveObjectValue('text', 'text') != false) ? this.canvasService.getActiveObjectValue('text', 'text') : '';
    };
    PlainTextComponent.prototype.getSubTabs = function (mainTabId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                data = this.mainService.tabsFlow[mainTabId];
                this.subTabsData = this.mainService.setSubTabsData(data, mainTabId);
                if (this.subTabsData && this.subTabsData.length > 0) {
                    this.accordianId = this.subTabsData[0].id;
                }
                if (this.loaderComponent && this.loaderComponent.showSubLoader)
                    this.loaderComponent.showSubLoader = false;
                return [2 /*return*/];
            });
        });
    };
    PlainTextComponent.prototype.addText = function () {
        var obj = this.canvasService.getActiveObject(), properties = {};
        if ((this.canvasText.length == 0 && !obj) || obj.text == this.canvasText) {
            return;
        }
        if (this.canvasText.length == 0 && obj) {
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.removeObjectService',
            };
            this.canvasService.objectCRUD(params);
            return;
        }
        if (this.textLimitEnable == 1) {
            var objCount = this.canvasService.getObject('text');
            if (!obj) {
                objCount++;
            }
            if (objCount > this.textLimitCounter) {
                sweetalert2__WEBPACK_IMPORTED_MODULE_7___default.a.fire({
                    title: this.translate.instant('Alert'),
                    text: this.limitAlert,
                    type: "warning",
                    confirmButtonText: this.translate.instant('OK'),
                });
                this.canvasText = '';
                return;
            }
        }
        if (obj && obj.tab == 'text') {
            properties.text = this.canvasText;
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
            };
            this.canvasService.objectCRUD(params);
        }
        else {
            var fontColor_1 = (this.defaultColor.color_code) ? this.defaultColor.color_code : null;
            this.eventService.$sub('changedColor', function (data) {
                fontColor_1 = data ? data : fontColor_1;
            });
            var fontFamily = (this.defaultFontFamily.font_label) ? this.defaultFontFamily.font_label : null;
            var font_file = (this.defaultFontFamily.font_file) ? this.defaultFontFamily.font_file : null;
            var properties_1 = {
                left: 10,
                top: 20,
                opacity: 1,
                fontSize: this.defaultFontSize,
                objType: 'text',
                strokeWidth: 0,
                tab: "text"
            };
            if (fontColor_1 && fontColor_1 != null)
                properties_1.fill = fontColor_1;
            if (fontFamily && fontFamily != null)
                properties_1.fontFamily = fontFamily;
            if (font_file && font_file != null)
                properties_1.font_file = font_file;
            var textObj = new fabric.Text(this.canvasText);
            var params = {
                obj: textObj,
                properties: properties_1,
                crudServiceString: 'this.insertObjectService',
                isCenter: true,
            };
            this.canvasService.objectCRUD(params);
        }
    };
    PlainTextComponent.prototype.showChild = function (childTabs) {
        if (childTabs === void 0) { childTabs = 'plain-text'; }
        this.tabsService.showChildTabs(childTabs);
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], PlainTextComponent.prototype, "loadContent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_9__["LoaderComponent"])
    ], PlainTextComponent.prototype, "loaderComponent", void 0);
    PlainTextComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[plain-text]',
            template: __webpack_require__(/*! ./plain-text.component.html */ "./src/app/components/plain-text/plain-text.component.html"),
            styles: [__webpack_require__(/*! ./plain-text.component.scss */ "./src/app/components/plain-text/plain-text.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            _font_font_service__WEBPACK_IMPORTED_MODULE_1__["FontService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__["PubSubService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__["TranslateService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__["TabsService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"]])
    ], PlainTextComponent);
    return PlainTextComponent;
}());



/***/ }),

/***/ "./src/app/components/preview/preview.component.html":
/*!***********************************************************!*\
  !*** ./src/app/components/preview/preview.component.html ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<a href=\"javascript:void(0)\" id='preview_btn' (click)=\"createPreview(template)\" attr.disabled=\"disabled\"\n\ttooltip=\"{{'Preview' | translate}}\">\n\t<svg class=\"icon icon-view\" viewBox=\"0 0 30 30\">\n\t\t<use xlink:href=\"assets/img/sprite.svg#icon-view\"></use>\n\t</svg>\n\t<div loader #loaderComponent></div>\n</a>\n\n\n<ng-template #template>\n\t<div class=\"modal-header\">\n\t\t<h4 class=\"modal-title pull-left\">{{'Preview' | translate}}</h4>\n\t\t<button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"modalRef.hide()\">\n\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t</button>\n\t</div>\n\t<div class=\"modal-body\">\n\t\t<div class=\"product-zoom-container\">\n\t\t\t<div class=\"preview-image\">\n\t\t\t\t<img src=\"{{previewImages[activeImageId]}}\" />\n\t\t\t\t<button *ngIf=\"mainService.displayDownload\" class=\"byi-btn byi-btn-download\" (click)=\"downloadFunction()\"\n\t\t\t\t\ttooltip=\"{{'Download Design' | translate}}\">\n\t\t\t\t\t<svg class=\"icon icon-download\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-download\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<span>Download</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"total-sides\" *ngIf=\"allImageIds && allImageIds.length > 1\">\n\t\t\t\t<div class=\"total-sides-mob\">\n\t\t\t\t\t<button container=\"body\" class=\"byi-side-btn byi-prev-side\" *ngIf=\"enablePrev\"\n\t\t\t\t\t\t(click)=\"changeNextPrevPreviewSide('prev')\" tooltip=\"{{'Previous Side' | translate}}\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<svg class=\"icon icon-side-prev\" viewBox=\"0 0 50 50\">\n\t\t\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-side-prev\"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li *ngFor=\"let image_id of allImageIds;let i=index;\"\n\t\t\t\t\t\t\t[ngClass]=\"{active: activeImageId == image_id}\" (click)=\"changePreviewSide(image_id,true)\">\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<button container=\"body\" class=\"byi-side-btn byi-next-side\" *ngIf=\"enableNext\"\n\t\t\t\t\t\t(click)=\"changeNextPrevPreviewSide('next')\" tooltip=\"{{'Next Side' | translate}}\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<svg class=\"icon icon-side-next\" viewBox=\"0 0 50 50\">\n\t\t\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-side-next\"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/preview/preview.component.scss":
/*!***********************************************************!*\
  !*** ./src/app/components/preview/preview.component.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcHJldmlldy9wcmV2aWV3LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/preview/preview.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/components/preview/preview.component.ts ***!
  \*********************************************************/
/*! exports provided: PreviewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PreviewComponent", function() { return PreviewComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");







var PreviewComponent = /** @class */ (function () {
    function PreviewComponent(mainService, eventService, canvasService, translate) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.translate = translate;
        this.previewImages = {};
        this.zipfile = [];
        this.firstTimeNext = true;
        // call to method that will create initial events
        this.initiateEvents();
    }
    PreviewComponent.prototype.ngOnInit = function () {
    };
    PreviewComponent.prototype.initiateEvents = function () {
        var _this = this;
        this.eventService.$sub('allcanvasCreated', function (allImageIds) {
            _this.allImageIds = allImageIds;
            _this.changePreviewSide(allImageIds[0], false);
        });
        this.eventService.$sub('objectUpdated', function () {
            _this.mainService.objectModification = true;
        });
        this.eventService.$sub('objectRemoved', function () {
            _this.mainService.objectModification = true;
            _this.previewImages[_this.canvasService.activeImageId] = '';
            _this.mainService.generatedImage[_this.canvasService.activeImageId] = '';
        });
        this.eventService.$sub('objectAdded', function () {
            _this.mainService.objectModification = true;
        });
        this.eventService.$sub('canvasBackgroungChange', function () {
            _this.mainService.objectModification = true;
        });
    };
    PreviewComponent.prototype.createPreview = function (template) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.loaderComponent.showMainLoader = true;
                        return [4 /*yield*/, this.getCanvasDataUrl(true, '')];
                    case 1:
                        _a.sent();
                        this.loaderComponent.showMainLoader = false;
                        this.modalRef = this.mainService.openThisModal(template, 'byi-preview-modal modal-lg');
                        return [2 /*return*/];
                }
            });
        });
    };
    PreviewComponent.prototype.changePreviewSide = function (image_id, generatePreview) {
        this.activeImageId = image_id;
        this.indexOfActiveImage = this.allImageIds.indexOf(image_id);
        this.updateNextPrev();
        if (generatePreview) {
            this.getCanvasDataUrl(false, image_id);
        }
    };
    PreviewComponent.prototype.changeNextPrevPreviewSide = function (type) {
        if (this.mainService.objectModification == true || this.firstTimeNext == true) {
            this.mainService.objectModification = true;
            this.firstTimeNext = false;
        }
        this.indexOfActiveImage = this.allImageIds.indexOf(this.activeImageId);
        var updatedImageId;
        if (type == 'prev') {
            updatedImageId = this.allImageIds[this.indexOfActiveImage - 1];
        }
        else if (type == 'next') {
            updatedImageId = this.allImageIds[this.indexOfActiveImage + 1];
        }
        if (updatedImageId) {
            this.changePreviewSide(updatedImageId, true);
        }
    };
    PreviewComponent.prototype.updateNextPrev = function () {
        if (this.allImageIds[this.indexOfActiveImage - 1]) {
            this.enablePrev = 1;
        }
        else {
            this.enablePrev = 0;
        }
        if (this.allImageIds[this.indexOfActiveImage + 1]) {
            this.enableNext = 1;
        }
        else {
            this.enableNext = 0;
        }
    };
    PreviewComponent.prototype.getCanvasDataUrl = function (isFirst, currentImageId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var response;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (isFirst) {
                            currentImageId = this.canvasService.activeImageId;
                        }
                        if (!(!this.previewImages[currentImageId] || this.previewImages[currentImageId] == '' || this.mainService.objectModification == true)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mainService.getCanvasDataUrl(isFirst, currentImageId, false)];
                    case 1:
                        response = _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        response = this.mainService.generatedImage[currentImageId];
                        _a.label = 3;
                    case 3:
                        this.previewImages[currentImageId] = response.base.url;
                        this.changePreviewSide(currentImageId, false);
                        return [2 /*return*/];
                }
            });
        });
    };
    PreviewComponent.prototype.downloadFunction = function () {
        var _this = this;
        var imageIds = this.canvasService.allImagesWithIds;
        var images = [];
        for (var id in imageIds) {
            images.push(this.canvasService.getCanvasDataUrl(id));
        }
        var params = {
            'dataUrl': images,
            'product_image_data': this.canvasService.allImagesWithIds,
            'previewImages': 1
        };
        this.mainService.post('productdesigner/index/download', params).then(function (data) {
            _this.zipfile = data.zipfile;
            _this.mainService.downloadFiles(_this.zipfile, 'zip');
        }).catch(function (err) {
            console.log(_this.translate.instant("Error in loading download"), err);
        });
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('loaderComponent'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_6__["LoaderComponent"])
    ], PreviewComponent.prototype, "loaderComponent", void 0);
    PreviewComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[preview]',
            template: __webpack_require__(/*! ./preview.component.html */ "./src/app/components/preview/preview.component.html"),
            styles: [__webpack_require__(/*! ./preview.component.scss */ "./src/app/components/preview/preview.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__["TranslateService"]])
    ], PreviewComponent);
    return PreviewComponent;
}());



/***/ }),

/***/ "./src/app/components/price/price.component.html":
/*!*******************************************************!*\
  !*** ./src/app/components/price/price.component.html ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-cart-price\" *ngIf=\"mainService.isAdmin == false\">\n\t<label *ngIf=\"priceService.totalQty > 1\">{{'Total' | translate}} * {{priceService.totalQty}}</label>\n\t<span class=\"cart-amt\">{{priceService.getPrice()}}</span>\n</div>"

/***/ }),

/***/ "./src/app/components/price/price.component.scss":
/*!*******************************************************!*\
  !*** ./src/app/components/price/price.component.scss ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcHJpY2UvcHJpY2UuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/price/price.component.ts":
/*!*****************************************************!*\
  !*** ./src/app/components/price/price.component.ts ***!
  \*****************************************************/
/*! exports provided: PriceComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PriceComponent", function() { return PriceComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _price_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./price.service */ "./src/app/components/price/price.service.ts");
/* harmony import */ var _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../conf-product-attr/conf-product-attr.service */ "./src/app/components/conf-product-attr/conf-product-attr.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _helper_formatCurrency__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../_helper/formatCurrency */ "./src/app/_helper/formatCurrency.ts");








var PriceComponent = /** @class */ (function () {
    function PriceComponent(mainService, eventService, canvasService, confProductService, priceService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.confProductService = confProductService;
        this.priceService = priceService;
        this.data = [];
        this.subscribeEvents();
    }
    PriceComponent.prototype.getPrice = function () {
        var _this = this;
        var params = {
            'product_id': this.mainService.productId,
            'associated_id': this.mainService.associatedProductId
        }, url = 'productdesigner/index/loadPrice', cacheKey = 'getPrice' + this.mainService.productId + '-' + this.mainService.associatedProductId + '-' + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey).then(function (priceData) {
            _this.data = JSON.parse(JSON.stringify(priceData.data));
            _this.confProductService.productPrice = Object.assign({}, _this.data.productPrice);
            _this.confProductService.tierPrice = Object.assign({}, _this.data.tierPrice);
            _this.fixedPrice = _this.data.additionalFixedPrice ? _this.data.additionalFixedPrice : 0;
            _this.calculatePrice();
        }).catch(function (err) { return console.log(err); });
    };
    PriceComponent.prototype.ngOnInit = function () {
        this.loadedDesignPrice = 0;
        this.loadedDesignQty = 1;
    };
    PriceComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectAdded', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.calcAllObjPrice();
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.calcAllObjPrice();
        });
        this.eventService.$sub('processLoadProduct', function () {
            _this.getPrice();
        });
    };
    /* For Price Management*/
    PriceComponent.prototype.calculatePrice = function () {
        this.priceFormat = this.data.priceFormat;
        var prices = {
            textPrice: this.data.addedTextPrice,
            addImagePrice: this.data.addedImagePrice,
            uploadPrice: this.data.customAddedImagePrice,
            tax: this.data.tax,
            addTax: (this.data.showIncludeTax || this.data.showBothPrices)
        };
        var ObjPrice = this.canvasService.fetchAllObjectPrices(prices);
        var OriginalProductPrice;
        var taxPrice = 0;
        this.productPrice = this.data.priceExclTax;
        if (this.data.productPrice && Object.keys(this.data.productPrice).length && this.mainService.associatedProductId && this.data.productPrice[this.mainService.associatedProductId])
            this.productPrice = this.data.productPrice[this.mainService.associatedProductId];
        if (this.data.showIncludeTax) {
            OriginalProductPrice = this.data.priceInclTax;
            // this.productPrice = this.data.priceInclTax;
            taxPrice = (parseInt(this.data.priceExclTax) * parseInt(this.data.tax)) / 100;
        }
        else if (this.data.showExcludeTax) {
            OriginalProductPrice = this.data.priceInclTax;
            this.productPrice = this.data.priceExclTax;
        }
        else {
            this.productPrice = this.data.productPrice[this.mainService.associatedProductId];
        }
        if (this.data.showBothPrices) {
            taxPrice = (parseInt(this.data.priceExclTax) * parseInt(this.data.tax)) / 100;
            // this.productPrice = parseFloat(this.data.priceInclTax);
            OriginalProductPrice = parseFloat(this.data.priceInclTax);
            var forBothPrice = parseFloat(this.data.priceExclTax) + parseFloat(this.fixedPrice) + parseFloat(ObjPrice.totalTextExcluTaxPrice) + parseFloat(ObjPrice.totalClipartImgExcluTaxPrice) + parseFloat(ObjPrice.totalUploadImgExcluTaxPrice);
            this.productPriceExclTax = Object(_helper_formatCurrency__WEBPACK_IMPORTED_MODULE_7__["FormatCurrency"])(forBothPrice, this.priceFormat, '');
        }
        this.priceService.tax = (parseInt(this.data.tax) > 0 && (this.data.showIncludeTax || this.data.showBothPrices)) ? parseInt(this.data.tax) : null;
        this.mainService.productPrice = parseFloat(this.productPrice);
        this.mainService.otherPrices = parseFloat(this.fixedPrice);
        // in case of configurable product, when user changes qty or 
        // attributes in add to cart popup, we find different prices based on input
        // so we need to add fixed price to the new price
        // hence we are saving fixed price in service
        this.priceService.fixedPrice = parseFloat(this.fixedPrice);
        this.calcAllObjPrice();
        var finalPrice;
        var tierPriceData;
        tierPriceData = this.data.tierPrice[this.mainService.associatedProductId];
        if (tierPriceData != undefined) {
            tierPriceData.filter(function (obj) {
                if (OriginalProductPrice <= obj.website_price) {
                    tierPriceData = [];
                }
            });
        }
        finalPrice = this.mainService.calcFinalPrice(1);
        var cartData = {
            productName: this.data.productName,
            totalAmount: this.mainService.productPrice,
            priceFormat: this.priceFormat,
            showBothPrices: this.data.showBothPrices,
            tierPriceData: tierPriceData,
            productPriceExclTax: this.productPriceExclTax,
            finalPrice: finalPrice
        };
        this.eventService.$pub('getCartData', cartData);
        // this.priceService.defaultPrice = finalPrice;
        this.priceService.defaultPrice = this.productPrice;
        this.priceService.addThisPrice();
        this.priceService.priceFormat = this.priceFormat;
        this.finalPrice = Object(_helper_formatCurrency__WEBPACK_IMPORTED_MODULE_7__["FormatCurrency"])(finalPrice, this.priceFormat, '');
    };
    /**
     *
     * @param obj
     */
    PriceComponent.prototype.calcAllObjPrice = function () {
        // variable declaration
        var textPrice = parseFloat(this.data.addedTextPrice), imagePrice = parseFloat(this.data.addedImagePrice), customImagePrice = parseFloat(this.data.customAddedImagePrice), allCanvases = this.mainService.canvasService.containerCanvases, tmpCanavs, allObjects, finalPrice = (this.priceService.fixedPrice) ? this.priceService.fixedPrice : 0;
        // traverse through each canvas one by one
        for (var key in allCanvases) {
            // store current canvas in tmp var
            tmpCanavs = allCanvases[key];
            // fetch all objects of tmp canvas
            allObjects = this.mainService.canvasService.getObjects(tmpCanavs);
            // traverse through each object
            allObjects.filter(function (currObj) {
                // if object is of type text
                if (currObj.type == 'text') {
                    finalPrice += textPrice;
                }
                // if object is of type image
                // we will determine price by tab
                else if (currObj.hasOwnProperty('tab')) {
                    // if tab is clipart, add image price to final
                    if (currObj.tab == 'clipart') {
                        finalPrice += imagePrice;
                    }
                    // if tab is upload, add image price and custom image upload price
                    else if (currObj.tab == 'upload') {
                        finalPrice += imagePrice + customImagePrice;
                    }
                }
                // if current object has price property
                // add the same
                if (currObj.hasOwnProperty('price') && parseFloat(currObj.price) > 0) {
                    finalPrice += parseFloat(currObj.price);
                }
            });
        }
        // finally add final price to service object
        this.mainService.otherPrices = finalPrice;
        // recalcuate the price
        this.priceService.addThisPrice();
    };
    PriceComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Component"])({
            selector: 'price',
            template: __webpack_require__(/*! ./price.component.html */ "./src/app/components/price/price.component.html"),
            styles: [__webpack_require__(/*! ./price.component.scss */ "./src/app/components/price/price.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_6__["CanvasService"],
            _conf_product_attr_conf_product_attr_service__WEBPACK_IMPORTED_MODULE_2__["ConfProductAttrService"],
            _price_service__WEBPACK_IMPORTED_MODULE_1__["PriceService"]])
    ], PriceComponent);
    return PriceComponent;
}());



/***/ }),

/***/ "./src/app/components/price/price.service.ts":
/*!***************************************************!*\
  !*** ./src/app/components/price/price.service.ts ***!
  \***************************************************/
/*! exports provided: PriceService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PriceService", function() { return PriceService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _helper_formatCurrency__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../_helper/formatCurrency */ "./src/app/_helper/formatCurrency.ts");




var PriceService = /** @class */ (function () {
    function PriceService(mainService) {
        this.mainService = mainService;
        this.additionalPrice = 0;
        this.fixedPrice = 0;
        this.finalPrice = 0;
        this.defaultPrice = 0;
        this.totalQty = 1;
        this.tax = null;
        this.fixedPrice = 0;
        this.extraPriceToBeAdded = {
            productPrice: 0,
            customOptionsPrice: 0
        };
    }
    PriceService.prototype.getPrice = function () {
        if (this.finalPrice && this.priceFormat)
            return Object(_helper_formatCurrency__WEBPACK_IMPORTED_MODULE_3__["FormatCurrency"])(this.finalPrice, this.priceFormat, '');
    };
    PriceService.prototype.addThisPrice = function () {
        this.finalPrice = parseFloat(this.defaultPrice) + parseFloat(this.extraPriceToBeAdded.productPrice) + ((parseFloat(this.extraPriceToBeAdded.customOptionsPrice) + parseFloat(this.additionalPrice) + this.mainService.otherPrices) * parseFloat(this.totalQty));
        if (this.tax && this.tax > 0) {
            this.finalPrice += ((this.finalPrice * this.tax) / 100);
        }
    };
    PriceService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_1__["MainService"]])
    ], PriceService);
    return PriceService;
}());



/***/ }),

/***/ "./src/app/components/printing-methods/printing-methods.component.html":
/*!*****************************************************************************!*\
  !*** ./src/app/components/printing-methods/printing-methods.component.html ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-printing-method\" [formGroup]=\"parentFormGroup\">\n\t<ul>\n\t\t<li *ngFor=\"let data of printingMethods;let i = index\">\n\t\t\t<label class=\"byi-radio\">\n\t\t\t\t<input type=\"radio\" required name=\"method\" [value]=\"data.printing_id\" formControlName=\"method\"\n\t\t\t\t\t(change)=\"applyPrintingMethod(data.printing_id, data.minimum_quantity)\">\n\t\t\t\t{{data.printing_name}}\n\t\t\t\t<span></span>\n\t\t\t\t<button *ngIf=\"!mainService.isResponsive && data.printing_description\" class=\"byiu-right-icon\"\n\t\t\t\t\ttype=\"button\" tooltip=\"{{ data.printing_description | translate}}\" placement=\"bottom\">\n\t\t\t\t\t<svg class=\"icon icon-question\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-question\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</label>\n\t\t</li>\n\t</ul>\n\t<span class=\"byi-error\" *ngIf=\"parentFormGroup.invalid && isClickedAddtoCart\">{{'Please select at least one printing method' | translate}}</span>\n</div>"

/***/ }),

/***/ "./src/app/components/printing-methods/printing-methods.component.scss":
/*!*****************************************************************************!*\
  !*** ./src/app/components/printing-methods/printing-methods.component.scss ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".no-margin-bottom {\n  margin-bottom: 0px; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvd3d3L2h0bWwvQllJVjIvbWFnMjI4L2FuZ3VsYXIvc3JjL2FwcC9jb21wb25lbnRzL3ByaW50aW5nLW1ldGhvZHMvcHJpbnRpbmctbWV0aG9kcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFrQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9wcmludGluZy1tZXRob2RzL3ByaW50aW5nLW1ldGhvZHMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubm8tbWFyZ2luLWJvdHRvbSB7XG4gICAgbWFyZ2luLWJvdHRvbTogMHB4O1xufSJdfQ== */"

/***/ }),

/***/ "./src/app/components/printing-methods/printing-methods.component.ts":
/*!***************************************************************************!*\
  !*** ./src/app/components/printing-methods/printing-methods.component.ts ***!
  \***************************************************************************/
/*! exports provided: PrintingMethodsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrintingMethodsComponent", function() { return PrintingMethodsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _price_price_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../price/price.service */ "./src/app/components/price/price.service.ts");







var PrintingMethodsComponent = /** @class */ (function () {
    function PrintingMethodsComponent(mainService, cacheService, priceService, eventService) {
        this.mainService = mainService;
        this.cacheService = cacheService;
        this.priceService = priceService;
        this.eventService = eventService;
        this.printingMethodDataCacheKey = '';
        this.printingMethods = [];
        this.additionalAmount = 0;
        this.selectedPrintingId = null;
        this.displayError = false;
        this.printingMethodDataCacheKey = 'printingMethodDataCacheKey' + this.mainService.productId + '-' + this.mainService.baseUrl;
    }
    PrintingMethodsComponent.prototype.ngOnInit = function () {
        this.loadPrintingMethods();
        this.subscribeEvents();
        this.displayError = false;
    };
    PrintingMethodsComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectAdded', function () {
            if (_this.selectedPrintingId != null)
                _this.applyPrintingMethod(_this.selectedPrintingId, null);
        });
        this.eventService.$sub('objectUpdated', function () {
            setTimeout(function () {
                if (_this.selectedPrintingId != null)
                    _this.applyPrintingMethod(_this.selectedPrintingId, null);
            }, 300);
        });
        this.eventService.$sub('objectRemoved', function () {
            if (_this.selectedPrintingId != null)
                _this.applyPrintingMethod(_this.selectedPrintingId, null);
        });
        this.eventService.$sub('canvasBackgroundChange', function () {
            if (_this.selectedPrintingId != null)
                _this.applyPrintingMethod(_this.selectedPrintingId, null);
        });
        this.eventService.$sub('showError', function (show) {
            _this.displayError = show;
        });
    };
    PrintingMethodsComponent.prototype.loadPrintingMethods = function () {
        var _this = this;
        var params = { productId: this.mainService.productId }, url = 'printingmethods/Index/getPrintingMethodData', cacheKey = this.printingMethodDataCacheKey;
        this.mainService.getData(url, params, cacheKey, null, true).then(function (data) {
            _this.cacheService.set(_this.printingMethodDataCacheKey, data, { maxAge: 15 * 60 });
            _this.printingMethods = data.printingMethods;
        }).catch(function (err) { return console.log(err); });
    };
    PrintingMethodsComponent.prototype.applyPrintingMethod = function (printingId, minimumQty) {
        this.displayError = false;
        if (minimumQty) {
            this.priceService.printingMethodMinimumQty = minimumQty;
        }
        this.selectedPrintingId = printingId;
        var methodData = this.getMethodsValueById(printingId)[0];
        if (methodData.method_type == 1) {
            var setPrice = null;
            if (this.mainService.canvasService.usedColorCounter < 1) {
                setPrice = 0;
            }
            else {
                var priceData = methodData.counterData;
                priceData.sort(function (val1, val2) { return val1.colors_counter - val2.colors_counter; });
                this.additionalAmount = 0;
                if (priceData.length > 0) {
                    for (var i = 0; i < priceData.length && setPrice == null; i++) {
                        if (priceData[i].colors_counter == this.mainService.canvasService.usedColorCounter) {
                            setPrice = priceData[i].colors_price;
                        }
                        else if (priceData[i + 1] != undefined && this.mainService.canvasService.usedColorCounter >= priceData[i].colors_counter && this.mainService.canvasService.usedColorCounter < priceData[i + 1].colors_counter) {
                            setPrice = priceData[i].colors_price;
                        }
                        else if (!priceData[i + 1] && this.mainService.canvasService.usedColorCounter >= priceData[i].colors_counter) {
                            setPrice = priceData[i].colors_price;
                        }
                    }
                }
            }
            if (setPrice != null) {
                this.additionalAmount = setPrice;
                this.priceService.additionalPrice = setPrice;
                this.priceService.addThisPrice();
            }
        }
        if (methodData.method_type == 2) {
            var priceData = methodData.counterData;
            priceData.sort(function (val1, val2) { return val1.area_size_end - val2.area_size_end; });
            this.priceService.additionalPrice = this.calculateAreaWisePrice(priceData);
            this.priceService.addThisPrice();
        }
    };
    PrintingMethodsComponent.prototype.getMethodsValueById = function (id) {
        return this.printingMethods.filter(function (x) { return x.printing_id === id; });
    };
    /*
        For calculation of area wise price
        */
    PrintingMethodsComponent.prototype.calculateAreaWisePrice = function (priceData) {
        var final_price = 0, canvasKeys = Object.keys(this.mainService.canvasService.containerCanvases), canvasObjects;
        var _loop_1 = function (key) {
            var leftArr = [];
            var topArr = [];
            var widthArr = [];
            var heightArr = [];
            canvasObjects = this_1.mainService.canvasService.getObjects(this_1.mainService.canvasService.containerCanvases[key]);
            canvasObjects.forEach(function (data) {
                leftArr.push(data.left);
                topArr.push(data.top);
                var width_val = data.left + (data.width * data.scaleX);
                var height_val = data.top + (data.height * data.scaleY);
                widthArr.push(width_val);
                heightArr.push(height_val);
            });
            if (leftArr.length > 0) {
                // find lowest left and top
                var lowest_left = Math.min.apply(Math, leftArr);
                var lowest_top = Math.min.apply(Math, topArr);
                var max_width = Math.max.apply(Math, widthArr);
                var max_height = Math.max.apply(Math, heightArr);
                var final_width = max_width - lowest_left;
                var final_height = max_height - lowest_top;
                var calculate_area = final_width * final_height;
                // get multiplier factor 
                var multiplier_factor = this_1.mainService.canvasService.fetchOutPutScaleFactor(this_1.mainService.canvasService.containerCanvases[key]);
                var final_area = calculate_area * multiplier_factor;
                var area_price = this_1.getAreaPriceBetweenRange(priceData, final_area);
                final_price = final_price + area_price;
            }
        };
        var this_1 = this;
        for (var _i = 0, canvasKeys_1 = canvasKeys; _i < canvasKeys_1.length; _i++) {
            var key = canvasKeys_1[_i];
            _loop_1(key);
        }
        return final_price;
    };
    PrintingMethodsComponent.prototype.getAreaPriceBetweenRange = function (priceData, final_area) {
        var price = 0;
        if (priceData.length > 0) {
            for (var i = 0; i < priceData.length; i++) {
                if (!priceData[i + 1] && final_area > priceData[i].area_size_end) {
                    price = parseFloat(priceData[i].area_price);
                }
                if (priceData[i + 1] && final_area > priceData[i].area_size_end && final_area < priceData[i + 1].area_size_end) {
                    price = parseFloat(priceData[i].area_price);
                }
                if (final_area >= priceData[i].area_size_start && final_area <= priceData[i].area_size_end) {
                    price = parseFloat(priceData[i].area_price);
                }
            }
        }
        return price;
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_forms__WEBPACK_IMPORTED_MODULE_5__["FormGroup"])
    ], PrintingMethodsComponent.prototype, "parentFormGroup", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], PrintingMethodsComponent.prototype, "isClickedAddtoCart", void 0);
    PrintingMethodsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[printing-methods]',
            template: __webpack_require__(/*! ./printing-methods.component.html */ "./src/app/components/printing-methods/printing-methods.component.html"),
            styles: [__webpack_require__(/*! ./printing-methods.component.scss */ "./src/app/components/printing-methods/printing-methods.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_4__["CacheService"],
            _price_price_service__WEBPACK_IMPORTED_MODULE_6__["PriceService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__["PubSubService"]])
    ], PrintingMethodsComponent);
    return PrintingMethodsComponent;
}());



/***/ }),

/***/ "./src/app/components/product-options/product-options.component.html":
/*!***************************************************************************!*\
  !*** ./src/app/components/product-options/product-options.component.html ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-product-attr\" [class.open]=\"productOptionsOpened\" *ngIf=\"options\">\n\t<button type=\"button\" class=\"byi-attr-btn\" (click)=\"toggleOptions()\" tooltip=\"{{'Product Options' | translate}}\">\n\t\t<i class=\"byii-icon\">\n\t\t\t<svg class=\"icon icon-setting\" viewBox=\"0 0 54 54\">\n\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-setting\"></use>\n\t\t\t</svg>\n\t\t</i>\n\t\t<span>{{'Product Options' | translate}}</span>\n\t</button>\n\t<div class=\"byip-options\">\n\t\t<accordion class=\"byi-accordion\" [closeOthers]=\"true\">\n\t\t\t<accordion-group class=\"byi-accord\" [isOpen]=\"i == 0\" *ngFor=\"let option of options;let i = index\"\n\t\t\t\t[isOpen]=\"true\">\n\t\t\t\t<button class=\"byi-accord-title\" accordion-heading>\n\t\t\t\t\t<span>{{option.label}}</span>\n\t\t\t\t</button>\n\t\t\t\t<div class=\"byi-accord-content\">\n\t\t\t\t\t<div class=\"byi-prod-color-list\" *ngIf=\"option.hasSwatch\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li class=\"prod-color\"\n\t\t\t\t\t\t\t\t[ngClass]=\"{active: selectedOptions[option.id] == value.value_index,disabled: checkProductOptionsValidation(value,i) }\"\n\t\t\t\t\t\t\t\t[title]=\"value.label\" *ngFor=\"let value of option.values;\"\n\t\t\t\t\t\t\t\t(click)=\"changeProduct(value,option.id,i)\">\n\t\t\t\t\t\t\t\t<ng-container *ngIf=\"value.type == 'image'\">\n\t\t\t\t\t\t\t\t\t<img src=\"{{value.value}}\">\n\t\t\t\t\t\t\t\t</ng-container>\n\t\t\t\t\t\t\t\t<ng-container *ngIf=\"value.type == 'color'\">\n\t\t\t\t\t\t\t\t\t<span [style.background-color]=\"value.value\"></span>\n\t\t\t\t\t\t\t\t</ng-container>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"byi-prod-color-list\" *ngIf=\"!option.hasSwatch\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li class=\"prod-text\"\n\t\t\t\t\t\t\t\t[ngClass]=\"{active: selectedOptions[option.id] == value.value_index ,disabled: checkProductOptionsValidation(value,i)}\"\n\t\t\t\t\t\t\t\t[title]=\"value.label\" *ngFor=\"let value of option.values\"\n\t\t\t\t\t\t\t\t(click)=\"changeProduct(value,option.id,i)\">\n\t\t\t\t\t\t\t\t<ng-container *ngIf=\"value.type == 'text'\">\n\t\t\t\t\t\t\t\t\t<span>{{value.value}}</span>\n\t\t\t\t\t\t\t\t</ng-container>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</accordion-group>\n\t\t</accordion>\n\t</div>\n</div>"

/***/ }),

/***/ "./src/app/components/product-options/product-options.component.scss":
/*!***************************************************************************!*\
  !*** ./src/app/components/product-options/product-options.component.scss ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcHJvZHVjdC1vcHRpb25zL3Byb2R1Y3Qtb3B0aW9ucy5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/product-options/product-options.component.ts":
/*!*************************************************************************!*\
  !*** ./src/app/components/product-options/product-options.component.ts ***!
  \*************************************************************************/
/*! exports provided: ProductOptionsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProductOptionsComponent", function() { return ProductOptionsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_design_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/design.service */ "./src/app/services/design.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");







var ProductOptionsComponent = /** @class */ (function () {
    function ProductOptionsComponent(mainService, cacheService, eventService, canvasService, designService) {
        this.mainService = mainService;
        this.cacheService = cacheService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.designService = designService;
        this.productOptionsOpened = false;
        this.productOptionsCacheKey = 'productOptions' + this.mainService.productId + '-' + this.mainService.baseUrl;
    }
    ProductOptionsComponent.prototype.ngOnInit = function () {
        this.getProductOptions();
        this.subscribeEvents();
    };
    ProductOptionsComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('closeProductOptions', function () {
            _this.productOptionsOpened = false;
        });
    };
    ProductOptionsComponent.prototype.getProductOptions = function () {
        var _this = this;
        var selectedOptionsString = '';
        if (this.selected_super_attributes) {
            selectedOptionsString = this.mainService.joinObject(this.selected_super_attributes);
        }
        var params = {
            'product_id': this.mainService.productId,
            'selectedOptions': this.selected_super_attributes
        }, url = 'productdesigner/index/productOptions', cacheKey = this.productOptionsCacheKey + selectedOptionsString;
        params = (this.designService.designId) ? Object.assign(params, { designId: this.designService.designId }) : params;
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            _this.eventService.$pub('productOptionsFetched', data);
            _this.processProductOptions(data);
        }).catch(function (err) { return console.log(err); });
    };
    ProductOptionsComponent.prototype.processProductOptions = function (data) {
        this.options = data.productOptions;
        this.productsCombination = data.productsCombination;
        this.selectedOptions = data.selectedOptions;
        this.selectedOptionsValues = data.selectedOptionsValues;
        this.selectedOptionString = Object.values(this.selectedOptionsValues).join("_");
        this.allProducts = data.allProducts;
        if (this.cacheService.exists("product-tooltip-data") && this.cacheService.get("product-tooltip-data") == true) {
            var tootltipData = [];
            var productIntro = (this.mainService.productTooltipData[0] != "") ? this.mainService.productTooltipData[0] : "";
            tootltipData.push({ element: ".byi-product-attr", intro: productIntro, position: 'right' });
            this.mainService.processToolTip(tootltipData, true);
            this.toggleOptions();
            this.cacheService.set("product-tooltip-data", false, { maxAge: 0 });
        }
        if (this.options) {
            if (document.querySelector('.byi-fab')) {
                document.querySelector('.byi-fab').classList.add('byi-fab-option-active');
            }
        }
    };
    ProductOptionsComponent.prototype.toggleOptions = function () {
        if (this.productOptionsOpened) {
            this.productOptionsOpened = false;
            if (document.querySelector('.byi-fab')) {
                document.querySelector('.byi-fab').classList.remove('hide');
            }
        }
        else {
            this.productOptionsOpened = true;
            if (document.querySelector('.byi-fab')) {
                document.querySelector('.byi-fab').classList.add('hide');
            }
        }
    };
    ProductOptionsComponent.prototype.changeProduct = function (value, attId, i) {
        this.setActiveSwatch(value, attId, i);
        /**
         * Fetch all object from current canvas before changing product combination
         */
        this.canvasService.fetchAllObjects();
        this.eventService.$pub('productChanged', {
            defaultSelectedOptions: this.selectedOptions,
            defaultSelectedOptionsValues: this.selectedOptionsValues
        });
    };
    ProductOptionsComponent.prototype.setActiveSwatch = function (value, attId, i) {
        this.selectedOptions[attId] = value.value_index;
        this.selectedOptionsValues[i] = value.value_index;
        this.selectedOptionString = Object.values(this.selectedOptionsValues).join("_");
    };
    ProductOptionsComponent.prototype.checkProductOptionsValidation = function (currentValue, index) {
        var selectedOptions = this.selectedOptionString.split("_");
        selectedOptions[index] = currentValue.value_index;
        var currentOption = selectedOptions.join("_");
        var combinations = Object.values(this.productsCombination);
        if (combinations.indexOf(currentOption) == -1) {
            return true;
        }
        return false;
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ProductOptionsComponent.prototype, "selected_super_attributes", void 0);
    ProductOptionsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: 'product-options',
            template: __webpack_require__(/*! ./product-options.component.html */ "./src/app/components/product-options/product-options.component.html"),
            styles: [__webpack_require__(/*! ./product-options.component.scss */ "./src/app/components/product-options/product-options.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_6__["CacheService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_1__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"],
            _services_design_service__WEBPACK_IMPORTED_MODULE_5__["DesignService"]])
    ], ProductOptionsComponent);
    return ProductOptionsComponent;
}());



/***/ }),

/***/ "./src/app/components/products/products.component.html":
/*!*************************************************************!*\
  !*** ./src/app/components/products/products.component.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div [attr.hidden]=\"(displayAllProducts) ? null : true\">\n  <div [attr.hidden]=\"(mainService.isAdmin == false) ? null : true\" class=\"byi-products-inner\" [class.open]=\"isToggle\">\n    <button type=\"button\" class=\"byi-button\" (click)=\"isToggleOpen()\" tooltip=\"{{'Change Product' | translate}}\">{{productName}} <span class=\"caret\"></span></button>\n    <div class=\"byi-products-wrap\">\n      <div class=\"btc-pro-filter\">\n        <div class=\"btc-pf-select\">\n          <div class=\"byi-dropdown\" *ngIf=\"productsCategory?.length != 0\">\n            <div class=\"btn-group\" dropdown [class.open]=\"isToggleCategory\">\n              <button dropdownToggle type=\"button\" class=\"btn btn-primary dropdown-toggle productsContainer\"\n              (click)=\"isToggleCategory = !isToggleCategory\"> {{selectedCat?.name}}\n              <span class=\"caret\"></span>\n            </button>\n            <ul *dropdownMenu class=\"dropdown-menu\" role=\"menu\">\n              <li class=\"productsContainer\" role=\"menuitem\" *ngFor=\"let category of productsCategory\" (click)=\"onChangeCategory(category,'')\"\n              [ngClass]=\"{'selected': selectedCat.id == category.id }\">\n              <span *ngFor=\"let i of getNumberArray(category.level)\">-</span>\n              {{category.name}}\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"btc-pf-search\" >\n        <div class=\"byi-search\">\n          <input class=\"byi-input productsContainer\" (input)=\"searchProducts($event)\" [(ngModel)]=\"searchText\" name=\"searchText\"\n          type=\"text\" placeholder=\"{{'Search by Name' | translate}}\">\n          <button class=\"byi-search-btn\">\n            <svg class=\"icon icon-search\" viewBox=\"0 0 50 50\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-search\"></use>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"byi-product-cat\">\n    <div loader #loaderComponent></div>\n    <div class=\"byi-norecord\" *ngIf=\"loaderComponent.showSubLoader === false && products.length == 0\">No Products\n    Found</div>\n    <ul *ngIf=\"products.length !== 0\" class=\"productsContainer\">\n      <li *ngFor=\"let product of products\" title=\"{{product.name}}\">\n        <a href=\"javascript:void(0)\" (click)=\"setTooltipFlag(product.href)\">\n          <span>\n            <img [src]=\"product.url\" />\n          </span>\n          <label>{{product.name}}</label>\n        </a>\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"loadmore-action\" *ngIf=\"products.length != 0 && products.length > 16\">\n    <input class=\"loadmore-btn\" type=\"button\" value=\"Load More Products\" (click)=\"loadMoreProducts()\">\n  </div>\n</div>\n</div>\n\n<div class=\"byi-product-wrap\" *ngIf=\"mainService.isResponsive && mainService.isAdmin == false\">\n  <span class=\"byi-prod-name byi-caret-enable\" (click)=\"isToggleOpen()\">{{productName}}</span>\n  <div class=\"byi-products-inner\" [class.open]=\"isToggle\">\n    <div class=\"byi-top-head\">\n      <ul class=\"byi-breadcrum\">\n        <li *ngFor=\"let cat of selectedProductsCategory\">\n          <a href=\"javascript:void(0)\" (click)=\"parseCat(cat)\"><span>{{cat.name}}</span></a>\n          <ul class=\"byi-sub-menu\" [hidden]=\"!cat.showSub\">\n            <ng-container *ngFor=\"let category of currentResponsiveCats\">\n              <li class=\"level1\" [ngClass]=\"{'selected': cat.id == category.id }\" >\n                <a href=\"javascript:void(0)\" (click)=\"onChangeCategory(category,'')\"><span>{{category.name}}</span></a>\n\n                <span class=\"byi-toggle-icon byi-expand\" *ngIf=\"category.subcategory && category.subcategory.length > 0 && activeSubCat != category.id && category.level == 2\" (click)=\"activeSubCat = category.id\">+</span>\n                <span class=\"byi-toggle-icon byi-collapse\" *ngIf=\"category.subcategory && category.subcategory.length > 0 && activeSubCat == category.id && category.level == 2\" (click)=\"activeSubCat = 0\">-</span>\n                <span class=\"byi-toggle-icon byi-back\" *ngIf=\"category.level != 2\" (click)=\"backCategory(category)\"> <span></span> </span>\n                <ul class=\"byi-sub-menu\" [hidden]=\"activeSubCat != category.id\" *ngIf=\"category.subcategory && category.subcategory.length > 0\">\n                  <ng-container *ngFor=\"let subcategory of category.subcategory\">\n                    <li class=\"level1\">\n                      <a href=\"javascript:void(0)\" (click)=\"onChangeCategory(subcategory,'')\"><span>{{subcategory.name}}</span></a>\n                      <span class=\"byi-toggle-icon byi-sub-expand\" *ngIf=\"subcategory.subcategory && subcategory.subcategory.length > 0 \" (click)=\"updateShownCat(category.id,subcategory.id)\"> > </span>\n                    </li>\n                  </ng-container>\n                </ul>\n              </li>\n            </ng-container>\n          </ul>\n        </li>\n      </ul>\n      <button class=\"byi-close-btn\" type=\"button\" (click)=\"isToggleOpen()\">\n        <span></span>\n      </button>\n    </div>\n    <div class=\"byi-top-filters\">\n      <div class=\"byi-search\">\n        <input class=\"byi-input\" name=\"searchText\" (input)=\"searchProducts($event)\" placeholder=\"Search by Name\"\n        type=\"text\">\n        <button class=\"byi-search-btn\">\n          <svg class=\"icon icon-search\" viewBox=\"0 0 50 50\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-search\"></use>\n          </svg>\n        </button>\n      </div>\n    </div>\n    <div class=\"byi-product-cats\">\n      <div loader #loaderComponent></div>\n      <div class=\"byi-norecord\" *ngIf=\"loaderComponent.showSubLoader === false && products.length == 0\">No Products\n      Found</div>\n      <ul *ngIf=\"products.length !== 0\">\n        <li *ngFor=\"let product of products\">\n          <a href=\"javascript:void(0)\" (click)=\"setTooltipFlag(product.href)\">\n            <span>\n              <img [src]=\"product.url\" />\n            </span>\n            <label>{{product.name}}</label>\n          </a>\n        </li>\n      </ul>\n    </div>\n    <div class=\"loadmore-action\" *ngIf=\"products.length != 0 && products.length > 16\">\n      <input class=\"loadmore-btn\" type=\"button\" value=\"{{'Load More Products' | translate}}\"\n      (click)=\"loadMoreProducts()\">\n    </div>\n  </div>\n</div>\n</div>\n<div *ngIf=\"!displayAllProducts || mainService.isAdmin\">\n  <button type=\"button\" class=\"byi-button\" *ngIf=\"!mainService.isResponsive\" >{{productName}}</button>\n  <span class=\"byi-prod-name no-caret\" *ngIf=\"mainService.isResponsive\"  >{{productName}}</span>\n</div>"

/***/ }),

/***/ "./src/app/components/products/products.component.scss":
/*!*************************************************************!*\
  !*** ./src/app/components/products/products.component.scss ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcHJvZHVjdHMvcHJvZHVjdHMuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/products/products.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/components/products/products.component.ts ***!
  \***********************************************************/
/*! exports provided: ProductsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProductsComponent", function() { return ProductsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");






var ProductsComponent = /** @class */ (function () {
    function ProductsComponent(mainService, eventService, cdr, cacheService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.cdr = cdr;
        this.cacheService = cacheService;
        this.isToggle = false;
        this.isToggleCategory = false;
        this.productsCategory = [];
        this.responsiveProductsCategory = [];
        this.currentResponsiveCats = [];
        this.allResponsiveCats = [];
        this.selectedProductsCategory = [];
        this.searchText = '';
        this.products = [];
        this.selectedCat = {};
        this.showSub = true;
        this.limit = 16;
        this.activeSubCat = 0;
        this.displayAllProducts = false;
    }
    ProductsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.loadCategory();
        this.eventService.$sub('closeAllProducts', function () {
            if (!_this.mainService.isResponsive) {
                _this.isToggle = false;
            }
        });
        this.eventService.$sub('getCartData', function (data) {
            _this.productName = data.productName;
        });
        this.eventService.$sub('openAllProduct', function () {
            _this.cacheService.set("product-tooltip-data", true, { maxAge: 15 * 60 });
            _this.isToggleOpen();
        });
    };
    ProductsComponent.prototype.setTooltipFlag = function (link) {
        if (window.location != window.parent.location) {
            window.top.location.href = link;
        }
        else {
            window.location.href = link;
        }
    };
    ProductsComponent.prototype.loadCategory = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var params, url, cacheKey;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        params = { limit: this.limit, 'productId': this.mainService.productId, 'search': this.searchText }, url = 'productdesigner/catalog/getCategory', cacheKey = 'getCategory' + this.mainService.baseUrl + this.mainService.productId;
                        return [4 /*yield*/, this.mainService.getData(url, params, cacheKey).then(function (res) {
                                if (res.enableAllProducts == 1) {
                                    _this.displayAllProducts = true;
                                }
                                _this.eventService.$pub('DisplayAllProducts', _this.displayAllProducts);
                                if (res && res.catalogCategory && res.catalogProducts.products) {
                                    _this.productsCategory = res.catalogCategory;
                                    _this.products = res.catalogProducts.products;
                                    var filterArr = _this.productsCategory.filter(function (data) { return data.id == res.defaultCatId; });
                                    if (filterArr.length == 0) {
                                        _this.selectedCat = _this.productsCategory[0];
                                    }
                                    else {
                                        _this.selectedCat = filterArr[0];
                                    }
                                    _this.selectedProductsCategory[0] = _this.selectedCat;
                                    _this.activeSubCat = _this.selectedCat.id;
                                    if (_this.mainService.isResponsive) {
                                        _this.processProductCategory();
                                    }
                                }
                            })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    ProductsComponent.prototype.processProductCategory = function () {
        var sortedArray = this.productsCategory.sort(function (a, b) {
            return a.level - b.level;
        });
        var _loop_1 = function (category) {
            if (category.parentId) {
                var filtered = this_1.responsiveProductsCategory.filter(function (data) { return data.id == category.parentId; });
                if (filtered.length != 0) {
                    filtered[0]['subcategory'].push(category);
                }
                else {
                    this_1.checkForParent(category);
                }
            }
            else {
                var data = [];
                data['subcategory'] = [];
                data['id'] = category.id;
                data['name'] = category.name;
                data['level'] = category.level;
                data['path'] = category.path;
                this_1.responsiveProductsCategory.push(data);
            }
            this_1.currentResponsiveCats = this_1.responsiveProductsCategory.map(function (a) { return Object.assign({}, a); });
            this_1.allResponsiveCats[category.id] = this_1.responsiveProductsCategory.map(function (a) { return Object.assign({}, a); });
        };
        var this_1 = this;
        for (var _i = 0, sortedArray_1 = sortedArray; _i < sortedArray_1.length; _i++) {
            var category = sortedArray_1[_i];
            _loop_1(category);
        }
        this.allResponsiveCats[this.selectedCat.id] = this.currentResponsiveCats.map(function (a) { return Object.assign({}, a); });
    };
    ProductsComponent.prototype.checkForParent = function (category) {
        for (var _i = 0, _a = this.responsiveProductsCategory; _i < _a.length; _i++) {
            var cat = _a[_i];
            var filtered = cat.subcategory.filter(function (data) { return data.id == category.parentId; });
            if (filtered.length != 0) {
                this.parseCategory(filtered, cat, category);
            }
            else {
                if (cat.subcategory.length > 0) {
                    for (var _b = 0, _c = cat.subcategory; _b < _c.length; _b++) {
                        var subCat = _c[_b];
                        if (subCat.subcategory && subCat.subcategory.length > 0) {
                            var filtered_1 = subCat.subcategory.filter(function (data) { return data.id == category.parentId; });
                            this.parseCategory(filtered_1, subCat, category);
                        }
                    }
                }
            }
        }
    };
    ProductsComponent.prototype.parseCategory = function (filtered, subCat, category) {
        if (filtered.length != 0) {
            if (!filtered[0]['subcategory']) {
                filtered[0]['subcategory'] = [];
            }
            filtered[0]['subcategory'].push(category);
            var filtered1_1 = subCat.subcategory.filter(function (data) { return data.id == filtered[0].parentId; });
            if (filtered1_1.length != 0) {
                if (!filtered1_1[0]['subcategory']) {
                    filtered1_1[0]['subcategory'] = [];
                }
                filtered1_1[0]['subcategory'].push(category);
                var filtered2 = subCat.subcategory.filter(function (data) { return data.id == filtered1_1[0].parentId; });
                if (filtered2.length != 0) {
                    if (!filtered2[0]['subcategory']) {
                        filtered2[0]['subcategory'] = [];
                    }
                    filtered2[0]['subcategory'].push(category);
                }
            }
        }
    };
    ProductsComponent.prototype.getNumberArray = function (value) {
        value = value - 2;
        var items = [];
        for (var i = 1; i <= value; i++) {
            items.push(i);
        }
        return items;
    };
    ProductsComponent.prototype.onChangeCategory = function (selectedCat, searchText, showSub) {
        var _this = this;
        if (showSub === void 0) { showSub = true; }
        this.selectedCat = selectedCat != null ? selectedCat : this.selectedCat;
        this.products = [];
        this.loaderComponent.showSubLoader = true;
        this.cdr.detectChanges();
        var catId = selectedCat == null ? selectedCat : selectedCat.id;
        var params = { limit: this.limit, 'productId': this.mainService.productId, 'search': searchText, 'categoryId': catId }, url = 'productdesigner/catalog/getProducts', cacheKey = 'getProducts' + searchText + catId + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey).then(function (res) {
            if (res) {
                _this.loaderComponent.showSubLoader = false;
                _this.products = res.catalogProducts.products;
            }
        });
        /**
         * responsive chnages
         */
        if (showSub) {
            for (var _i = 0, _a = this.selectedProductsCategory; _i < _a.length; _i++) {
                var selectedProductCat = _a[_i];
                selectedProductCat.showSub = false;
            }
            this.selectedCat.showSub = true;
        }
        /**
         * Find sequence
         */
        this.pushCategoryPaths(this.selectedCat);
        this.updateShownCat(this.selectedCat.parentId, this.selectedCat.id);
    };
    ProductsComponent.prototype.pushCategoryPaths = function (selectedCat) {
        this.selectedProductsCategory = [];
        if (selectedCat.level == 2) {
            this.selectedProductsCategory.push(selectedCat);
            return;
        }
        var paths = selectedCat.path.split("/");
        var _loop_2 = function (path) {
            if (path == '1' || path == '2') {
                return "continue";
            }
            var filter = this_2.productsCategory.filter(function (data) { return data.id == path; });
            this_2.selectedProductsCategory.push(filter[0]);
        };
        var this_2 = this;
        for (var _i = 0, paths_1 = paths; _i < paths_1.length; _i++) {
            var path = paths_1[_i];
            _loop_2(path);
        }
        this.selectedProductsCategory.push(selectedCat);
    };
    ProductsComponent.prototype.isToggleOpen = function () {
        this.isToggle = !this.isToggle;
    };
    //Load more
    ProductsComponent.prototype.loadMoreProducts = function () {
        this.limit = this.limit + 16;
        this.onChangeCategory(this.selectedCat.id, '');
    };
    //Search Products
    ProductsComponent.prototype.searchProducts = function ($event) {
        var searchTxt = $event.target.value.toString();
        var catId = '';
        if (searchTxt == "") {
            catId = this.selectedCat;
        }
        else {
            catId = null;
        }
        var self = this;
        setTimeout(function () {
            self.onChangeCategory(catId, searchTxt, false);
        }, 500);
    };
    ProductsComponent.prototype.updateShownCat = function (parentId, currentId) {
        var filtered = this.currentResponsiveCats.filter(function (data) { return data.id == parentId; });
        var filtered1;
        if (filtered[0] && filtered[0].subcategory) {
            filtered1 = filtered[0].subcategory.filter(function (data) { return data.id == currentId; });
        }
        if (filtered1 && filtered1[0] && filtered1[0].level == 2) {
            this.allResponsiveCats[currentId] = filtered[0].subcategory.map(function (a) { return Object.assign({}, a); });
        }
        if (filtered[0] && filtered[0].subcategory) {
            filtered[0].subcategory = filtered1;
            this.currentResponsiveCats = filtered[0].subcategory.map(function (a) { return Object.assign({}, a); });
            this.activeSubCat = filtered[0].subcategory[0].id;
        }
        if (filtered1 && filtered1[0] && filtered1[0].level != 2) {
            this.allResponsiveCats[currentId] = filtered[0].subcategory.map(function (a) { return Object.assign({}, a); });
        }
    };
    ProductsComponent.prototype.parseCat = function (cat) {
        this.activeSubCat = cat.id;
        this.currentResponsiveCats = this.allResponsiveCats[cat.id].map(function (a) { return Object.assign({}, a); });
        for (var _i = 0, _a = this.productsCategory; _i < _a.length; _i++) {
            var subcat = _a[_i];
            if (cat.id != subcat.id) {
                subcat.showSub = false;
            }
        }
        cat.showSub = !cat.showSub;
    };
    ProductsComponent.prototype.backCategory = function (cat) {
        var filtered = this.responsiveProductsCategory.filter(function (data) { return data.id == cat.parentId; });
        if (filtered.length == 0) {
            var filtered1 = void 0;
            for (var _i = 0, _a = this.responsiveProductsCategory; _i < _a.length; _i++) {
                var selectedProductCat = _a[_i];
                filtered1 = selectedProductCat.subcategory.filter(function (data) { return data.id == cat.parentId; });
                if (filtered1.length != 0) {
                    this.activeSubCat = filtered1[0].id;
                    this.currentResponsiveCats = filtered1.map(function (a) { return Object.assign({}, a); });
                    ;
                    break;
                }
                else {
                    var filtered2 = void 0;
                    for (var _b = 0, _c = selectedProductCat.subcategory; _b < _c.length; _b++) {
                        var selectedProductSubCat = _c[_b];
                        if (selectedProductSubCat.subcategory) {
                            filtered2 = selectedProductSubCat.subcategory.filter(function (data) { return data.id == cat.parentId; });
                            if (filtered2.length != 0) {
                                this.activeSubCat = filtered2[0].id;
                                this.currentResponsiveCats = filtered2.map(function (a) { return Object.assign({}, a); });
                                ;
                                break;
                            }
                        }
                    }
                }
            }
        }
        else {
            this.activeSubCat = filtered[0].id;
            if (filtered[0].level == 2) {
                this.currentResponsiveCats = this.responsiveProductsCategory.map(function (a) { return Object.assign({}, a); });
            }
            else {
                this.currentResponsiveCats = filtered;
            }
        }
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('loaderComponent'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_2__["LoaderComponent"])
    ], ProductsComponent.prototype, "loaderComponent", void 0);
    ProductsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[products]',
            template: __webpack_require__(/*! ./products.component.html */ "./src/app/components/products/products.component.html"),
            styles: [__webpack_require__(/*! ./products.component.scss */ "./src/app/components/products/products.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_5__["CacheService"]])
    ], ProductsComponent);
    return ProductsComponent;
}());



/***/ }),

/***/ "./src/app/components/right-panel/right-panel-update.service.ts":
/*!**********************************************************************!*\
  !*** ./src/app/components/right-panel/right-panel-update.service.ts ***!
  \**********************************************************************/
/*! exports provided: RightPanelUpdateService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RightPanelUpdateService", function() { return RightPanelUpdateService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var RightPanelUpdateService = /** @class */ (function () {
    function RightPanelUpdateService() {
        /**
         * Init the service for operation : It initialise the variables
         */
        this.init = function (params) {
            var properties = params.properties, option = properties.option, selectedObj = params.obj, canvasService = params.service, eventService = params.eventService;
            return {
                /**
                 * this function is used when special operation needs to be performed on objects(eg. bold/italic on text)
                 *
                 */
                exec: function () {
                    if (option == "front") {
                        canvasService.currentCanvas.bringToFront(selectedObj);
                    }
                    else if (option == "back") {
                        canvasService.currentCanvas.sendToBack(selectedObj);
                    }
                    else if (option == "forward") {
                        canvasService.currentCanvas.bringForward(selectedObj);
                    }
                    else if (option == "backward") {
                        canvasService.currentCanvas.sendBackwards(selectedObj);
                    }
                    canvasService.currentCanvas.renderAll();
                    eventService.$pub('canvasObjectModified', selectedObj);
                },
                unexec: function () {
                    if (option == "front") {
                        canvasService.currentCanvas.sendToBack(selectedObj);
                    }
                    else if (option == "back") {
                        canvasService.currentCanvas.bringToFront(selectedObj);
                    }
                    else if (option == "forward") {
                        canvasService.currentCanvas.sendBackwards(selectedObj);
                    }
                    else if (option == "backward") {
                        canvasService.currentCanvas.bringForward(selectedObj);
                    }
                    canvasService.currentCanvas.renderAll();
                    eventService.$pub('canvasObjectModified', selectedObj);
                }
            };
        };
    }
    RightPanelUpdateService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        })
    ], RightPanelUpdateService);
    return RightPanelUpdateService;
}());



/***/ }),

/***/ "./src/app/components/right-panel/right-panel.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/components/right-panel/right-panel.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<cropper #cropper></cropper>\n<div *ngIf=\"!rightPanelService.mainService.isResponsive\" class=\"byi-right-panel\">\n  <div class=\"byi-general-options\">\n    <div class=\"byig-option-row\">\n      <div class=\"byig-option\">\n        <label>{{'Alignment' | translate}}</label>\n        <ul class=\"byig-control\">\n          <li (click)=\"setAlignment('left')\" tooltip=\"{{'Align Left' | translate}}\" container=\"body\"\n            [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-align-left\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-align-left\"></use>\n            </svg>\n          </li>\n          <li (click)=\"setAlignment('alignHorizontalCenter')\" tooltip=\"{{'Align Horizontally' | translate}}\"\n            container=\"body\" [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-align-center\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-align-center\"></use>\n            </svg>\n          </li>\n          <li (click)=\"setAlignment('right')\" tooltip=\"{{'Align Right' | translate}}\" container=\"body\"\n            [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-align-right\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-align-right\"></use>\n            </svg>\n          </li>\n          <li (click)=\"setAlignment('top')\" tooltip=\"{{'Align Top' | translate}}\" container=\"body\"\n            [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-align-top\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-align-top\"></use>\n            </svg>\n          </li>\n          <li (click)=\"setAlignment('alignVerticalCenter')\" tooltip=\"{{'Align Vertically' | translate}}\"\n            container=\"body\" [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-align-vcenter\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-align-vcenter\"></use>\n            </svg>\n          </li>\n          <li (click)=\"setAlignment('bottom')\" tooltip=\"{{'Align Bottom' | translate}}\" container=\"body\"\n            [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-align-bottom\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-align-bottom\"></use>\n            </svg>\n          </li>\n          <span distribute-vertical-horizontal-alignment></span>\n        </ul>\n      </div>\n    </div>\n    <div class=\"byig-option-row byig-inline-option\">\n      <div class=\"byig-option\">\n        <label>{{'Layer' | translate}}</label>\n        <ul class=\"byig-control\">\n          <li (click)=\"rightPanelService.canvasService.ObjectLayer('forward')\" tooltip=\"{{'Bring Forward' | translate}}\"\n            container=\"body\"\n            [ngClass]=\"{'disabled': rightPanelService.enableForMultipleObj == true || rightPanelService.disabledLayers.indexOf('bringToFront') != -1}\">\n            <svg class=\"icon icon-layer-top\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-layer-top\"></use>\n            </svg>\n          </li>\n          <li (click)=\"rightPanelService.canvasService.ObjectLayer('back')\" tooltip=\"{{'Send To Back' | translate}}\"\n            container=\"body\"\n            [ngClass]=\"{'disabled': rightPanelService.enableForMultipleObj == true || rightPanelService.disabledLayers.indexOf('sendToBack') != -1}\">\n            <svg class=\"icon icon-layer-mbottom\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-layer-mbottom\"></use>\n            </svg>\n          </li>\n          <li (click)=\"rightPanelService.canvasService.ObjectLayer('front')\" tooltip=\"{{'Bring To Front' | translate}}\"\n            container=\"body\"\n            [ngClass]=\"{'disabled': rightPanelService.enableForMultipleObj == true || rightPanelService.disabledLayers.indexOf('bringToFront') != -1}\">\n            <svg class=\"icon icon-layer-mtop\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-layer-mtop\"></use>\n            </svg>\n          </li>\n          <li (click)=\"rightPanelService.canvasService.ObjectLayer('backward')\"\n            tooltip=\"{{'Send Backward' | translate}}\" container=\"body\"\n            [ngClass]=\"{'disabled': rightPanelService.enableForMultipleObj == true || rightPanelService.disabledLayers.indexOf('sendToBack') != -1}\">\n            <svg class=\"icon icon icon-layer-bottom\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-layer-bottom\"></use>\n            </svg>\n          </li>\n        </ul>\n      </div>\n      <div class=\"byig-option\">\n        <label>{{'Flip' | translate}}</label>\n        <ul class=\"byig-control\">\n          <li (click)=\"rightPanelService.canvasService.Flip('horizontal')\" tooltip=\"{{'Flip Horizontal' | translate}}\"\n            [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-flip-h\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-flip-h\"></use>\n            </svg>\n          </li>\n          <li (click)=\"rightPanelService.canvasService.Flip('vertical')\" tooltip=\"{{'Flip Vertical' | translate}}\"\n            [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-flip-v\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-flip-v\"></use>\n            </svg>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"byig-option-row\">\n      <div class=\"byig-option\">\n        <label>{{'Tools' | translate}}</label>\n        <ul class=\"byig-control\">\n          <span object-grouping></span>\n          <li (click)=\"copyObject()\" tooltip=\"{{'Duplicate' | translate}}\"\n            [ngClass]=\"{'disabled': disableDuplicate() == true}\">\n            <svg class=\"icon icon-t-duplicate\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-t-duplicate\"></use>\n            </svg>\n          </li>\n          <li tooltip=\"{{'Delete' | translate}}\" (click)=\"rightPanelService.canvasService.deleteObject()\"\n            [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-t-delete\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-t-delete\"></use>\n            </svg>\n          </li>\n          <li tooltip=\"{{'Best Fit' | translate}}\" (click)=\"bestFitObject()\"\n            [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n            <svg class=\"icon icon-best-fit\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-best-fit\"></use>\n            </svg>\n          </li>\n          <li tooltip=\"{{'Crop Image' | translate}}\" (click)=\"cropImage()\"\n            [ngClass]=\"{'disabled': disableCrop == true}\">\n            <svg class=\"icon icon-crop\" viewBox=\"0 0 30 30\">\n              <use xlink:href=\"assets/img/sprite.svg#icon-crop\"></use>\n            </svg>\n          </li>\n          <li *ngIf=\"mainService.isAdmin == true\" [ngClass]=\"{'selected': ultimateLockClass == true, 'disabled': rightPanelService.disableForSingleObj == true}\" \n            object-lock\n            tooltip=\"{{ultimateLockTooltip | translate}}\"></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n  <accordion class=\"byi-accordion byi-tooltip-right-panel\" [closeOthers]=\"true\">\n    <div class=\"byie-option-wrap\" font></div>\n    <div class=\"byie-option-wrap\" stroke></div>\n    <div class=\"byie-option-wrap\" drop-shadow></div>\n    <div class=\"byie-option-wrap\" opacity></div>\n    <!-- <div class=\"byie-option-wrap\" arc></div> -->\n    <div class=\"byie-option-wrap\" skew></div>\n    <div class=\"byie-option-wrap\" object-position></div>\n    <div class=\"byie-option-wrap\" image-effects></div>\n  </accordion>\n</div>\n\n<div *ngIf=\"rightPanelService.mainService.isResponsive\" class=\"byi-general-option-mob \" [class.open]=\"isOpenClass\">\n  <button type=\"button\" class=\"byi-expand-btn\" (click)=\"isOpenClass = !isOpenClass\">\n    <svg class=\"icon icon-more-right-btn\" viewBox=\"0 0 30 30\">\n      <use xlink:href=\"assets/img/sprite.svg#icon-more-btn\"></use>\n    </svg>\n  </button>\n\n  <ul class=\"byig-option-mob\">\n     <span object-grouping></span>\n    <li class=\"mob-right-panel-options\" (click)=\"copyObject()\"\n      [ngClass]=\"{'disabled': disableDuplicate() == true}\">\n      <svg class=\"icon icon-t-duplicate\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-t-duplicate\"></use>\n      </svg>\n    </li>\n    <li class=\"mob-right-panel-options\" [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n      <svg (click)=\"rightPanelService.canvasService.deleteObject()\" class=\"icon icon-t-delete\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-t-delete\"></use>\n      </svg>\n    </li>\n    <li class=\"mob-right-panel-options\" title=\"{{'Best Fit' | translate}}\" (click)=\"bestFitObject()\"\n      [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n      <svg class=\"icon icon-best-fit\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-best-fit\"></use>\n      </svg>\n    </li>\n    <li class=\"mob-right-panel-options\" title=\"{{'Crop Image' | translate}}\" (click)=\"cropImage()\"\n      [ngClass]=\"{'disabled': disableCrop == true}\">\n      <svg class=\"icon icon-crop\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-crop\"></use>\n      </svg>\n    </li>\n    \n    <li (click)=\"setAlignment('left')\" class=\"mob-right-panel-options\"\n      [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n      <svg class=\"icon icon-align-left\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-align-left\"></use>\n      </svg>\n    </li>\n    <li class=\"mob-right-panel-options\" (click)=\"setAlignment('alignHorizontalCenter')\"\n      [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n      <svg class=\"icon icon-align-center\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-align-center\"></use>\n      </svg>\n    </li>\n    <li class=\"mob-right-panel-options\" (click)=\"setAlignment('right')\"\n      [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n      <svg class=\"icon icon-align-right\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-align-right\"></use>\n      </svg>\n    </li>\n    <li class=\"mob-right-panel-options\" (click)=\"setAlignment('top')\"\n      [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n      <svg class=\"icon icon-align-top\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-align-top\"></use>\n      </svg>\n    </li>\n    <li class=\"mob-right-panel-options\" (click)=\"setAlignment('alignVerticalCenter')\"\n      [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n      <svg class=\"icon icon-align-vcenter\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-align-vcenter\"></use>\n      </svg>\n    </li>\n    <li class=\"mob-right-panel-options\" (click)=\"setAlignment('bottom')\"\n      [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\">\n      <svg class=\"icon icon-align-bottom\" viewBox=\"0 0 30 30\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-align-bottom\"></use>\n      </svg>\n    </li>\n    <span distribute-vertical-horizontal-alignment></span>\n    \n    <li class=\"mob-right-panel-options\" [ngClass]=\"{'disabled': rightPanelService.disableForSingleObj == true}\"\n      object-lock tooltip=\"{{'Ultimate Lock' | translate}}\"></li>\n\n  </ul>\n</div>"

/***/ }),

/***/ "./src/app/components/right-panel/right-panel.component.scss":
/*!*******************************************************************!*\
  !*** ./src/app/components/right-panel/right-panel.component.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcmlnaHQtcGFuZWwvcmlnaHQtcGFuZWwuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/right-panel/right-panel.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/right-panel/right-panel.component.ts ***!
  \*****************************************************************/
/*! exports provided: RightPanelComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RightPanelComponent", function() { return RightPanelComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_remove_object_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services/remove-object.service */ "./src/app/services/remove-object.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _right_panel_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./right-panel.service */ "./src/app/components/right-panel/right-panel.service.ts");






var RightPanelComponent = /** @class */ (function () {
    function RightPanelComponent(eventService, mainService, removeObjectService, rightPanelService) {
        this.eventService = eventService;
        this.mainService = mainService;
        this.removeObjectService = removeObjectService;
        this.rightPanelService = rightPanelService;
        this.ultimateLockClass = false;
        this.isOpenClass = false;
        // will handle layers enable disable(for changing object z-index)
        this.disabledLayers = [];
    }
    /**
     * Init Function
     */
    RightPanelComponent.prototype.ngOnInit = function () {
        this.initData();
        this.subscribeEvents();
    };
    /**
     * will be called each time object is CRUD
     */
    RightPanelComponent.prototype.initData = function () {
        this.disableCrop = (this.enableCropper() === true) ? false : true;
        this.rightPanelService.manageFlagForEnableDisable();
        this.rightPanelService.checkForLayers();
        this.disableDuplicate();
    };
    /**
     * Check if active image is of type image and active image is not svg image, then return true, false otherwise
     */
    RightPanelComponent.prototype.enableCropper = function () {
        var activeObj = this.rightPanelService.canvasService.getActiveObject();
        return (activeObj && activeObj.objType == 'image' && activeObj.isSvg == false && activeObj.ultimatelock != true);
    };
    /*Enable tooltip*/
    RightPanelComponent.prototype.enableTooltip = function (obj) {
        var self = this;
        var tabId = ((obj.tab == "text") ? "1" : ((obj.tab == "clipart") ? "2" : ((obj.tab == "upload") ? "3" : '')));
        if (tabId != "") {
            var getIndx = Object.keys(this.mainService.getAllTabs).indexOf(tabId);
            var tootltipObj = this.mainService.getAllTabs[getIndx + 1];
            var tootltipData = [];
            if (tootltipObj.second_tooltip != null) {
                tootltipData.push({ element: ".byi-right-panel", intro: tootltipObj.second_tooltip, position: 'right' });
                this.mainService.processToolTip(tootltipData, true);
                this.mainService.isToolTipEnable = false;
            }
            else {
                setTimeout(function () { introJs().exit(); self.mainService.isToolTipEnable = false; }, 10000);
            }
        }
    };
    RightPanelComponent.prototype.changeTooltip = function (obj) {
        if (obj != "") {
            this.ultimateLockTooltip = (obj.ultimatelock == true) ? "Ultimate Unlock" : "Ultimate Lock";
        }
    };
    RightPanelComponent.prototype.applyClassForUltimateLock = function (obj) {
        if (obj != "") {
            this.ultimateLockClass = (obj.ultimatelock == true) ? true : false;
        }
    };
    /**
     * Subscribe events and perform action here
     */
    RightPanelComponent.prototype.subscribeEvents = function () {
        var _this_1 = this;
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            if (_this_1.mainService.isToolTipEnable) {
                _this_1.enableTooltip(obj);
            }
            _this_1.initData();
            _this_1.changeTooltip(obj);
            if (_this_1.mainService.isAdmin == true) {
                _this_1.applyClassForUltimateLock(obj);
            }
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            _this_1.initData();
            if (_this_1.mainService.isAdmin == true) {
                _this_1.applyClassForUltimateLock(obj);
            }
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this_1.initData();
            _this_1.ultimateLockClass = false;
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            _this_1.initData();
            _this_1.changeTooltip(obj);
        });
        this.eventService.$sub('canvasObjectModified', function () {
            _this_1.rightPanelService.checkForLayers();
        });
        this.eventService.$sub('closeSideBar', function () {
            _this_1.isOpenClass = false;
        });
    };
    /**
     * Best fit object
     */
    RightPanelComponent.prototype.bestFitObject = function () {
        // get current selected canvas object
        var obj = this.rightPanelService.canvasService.getActiveObject();
        // if object not found or object is angled, return from here and set the flag for the same
        if (!obj)
            return;
        // if not, then prepare best fit obj, filter it and store into local variable
        var bestFitProperties = this.rightPanelService.canvasService.filterBestFitProperties(this.rightPanelService.canvasService.getBestFitProperties(), obj);
        bestFitProperties = Object.assign({}, { selectThisObject: false });
        // update that obj to current canvas obj
        var params = {
            obj: obj,
            properties: bestFitProperties,
            crudServiceString: 'this.updateObjectService',
            isCenter: true,
            setActive: false
        };
        this.rightPanelService.canvasService.objectCRUD(params);
    };
    /**
     * Triggered when clicked on crop image icon
     */
    RightPanelComponent.prototype.cropImage = function () {
        if (this.disableCrop === true)
            return;
        var obj = this.rightPanelService.canvasService.getActiveObject(), img = decodeURI(obj.getSrc());
        this.cropper.cropImage(img);
    };
    /**
     *
     */
    RightPanelComponent.prototype.lockObject = function () {
        var objs = this.rightPanelService.canvasService.currentCanvas.getActiveObjects();
        var _this = this;
        objs.forEach(function (object, index) {
            _this.lockObjects(objs[index]);
        });
    };
    /**
     *
     * @param obj
     */
    RightPanelComponent.prototype.lockObjects = function (obj) {
        var properties;
        if (obj.selectable == false) {
            properties = { selectable: true };
        }
        else {
            properties = { selectable: false };
        }
        if (obj) {
            this.rightPanelService.canvasService.currentCanvas.discardActiveObject();
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
            };
            this.rightPanelService.canvasService.objectCRUD(params);
        }
    };
    /**
     *
     * @param option
     */
    RightPanelComponent.prototype.setAlignment = function (option, obj) {
        if (obj === void 0) { obj = null; }
        var canvas = this.rightPanelService.canvasService.currentCanvas;
        var canvasService = this.rightPanelService.canvasService;
        var objects = canvas.getActiveObjects();
        if (objects && objects.length > 1 && obj == null) {
            this.alignMultipleObjects(objects, option);
            return;
        }
        obj = (obj == null) ? canvas.getActiveObject() : obj;
        var properties = {};
        var _this = this, eventParam = {
            option: option,
            newVal: null,
        };
        if (obj) {
            if (option == "left") {
                var left = this.rightPanelService.canvasService.clipX[canvas.designarea_id] / 2;
                if (obj.originX == 'center') {
                    left += obj.width / 2;
                }
                properties = { left: left };
                eventParam.newVal = left;
                obj.setCoords();
            }
            else if (option == "right") {
                var right = (canvas.width - (this.rightPanelService.canvasService.clipX[canvas.designarea_id] / 2)) - obj.getBoundingRect().width;
                if (obj.originX == 'center') {
                    right += obj.width / 2;
                }
                properties = { left: right };
                eventParam.newVal = right;
                obj.setCoords();
            }
            else if (option == "top") {
                var top_1 = (this.rightPanelService.canvasService.clipY[canvas.designarea_id] / 2) + 1;
                if (obj.originY == 'center') {
                    top_1 += obj.height / 2;
                }
                properties = { top: top_1 };
                eventParam.newVal = top_1;
                obj.setCoords();
            }
            else if (option == "bottom") {
                var bottom = (canvas.height - (this.rightPanelService.canvasService.clipY[canvas.designarea_id] / 2)) - obj.getBoundingRect().height;
                if (obj.originY == 'center') {
                    bottom += obj.height / 2;
                }
                properties = { top: bottom };
                eventParam.newVal = bottom;
                obj.setCoords();
            }
            else if (option == "alignHorizontalCenter") {
                var poscenter = canvas.width / 2;
                if (obj.originX != 'center') {
                    poscenter -= (obj.width * obj.scaleX / 2);
                }
                properties = { left: poscenter };
                eventParam.newVal = poscenter;
            }
            else if (option == "alignVerticalCenter") {
                var posmiddle = canvas.height / 2;
                if (obj.originY != 'center') {
                    posmiddle -= (obj.height * obj.scaleY / 2);
                }
                properties = { top: posmiddle };
                eventParam.newVal = posmiddle;
            }
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
            };
            this.rightPanelService.canvasService.objectCRUD(params);
            this.eventService.$pub('alignment', eventParam);
        }
    };
    /**
     *
     * @param allObjects
     * @param alignment
     */
    RightPanelComponent.prototype.alignMultipleObjects = function (allObjects, alignment) {
        var _this_1 = this;
        // prepare variables
        var objToBeCompared = null, newValue = null, mainMargin, currentMargin, params = {
            obj: null,
            properties: {},
            crudServiceString: 'this.updateObjectService',
            setActive: false
        }, canvas = this.rightPanelService.canvasService.currentCanvas;
        // horizontal/vertical alignment object wise
        if (alignment == 'alignHorizontalCenter' || alignment == 'alignVerticalCenter') {
            this.mainService.canvasService.deselectAllObjects();
            allObjects.filter(function (currObj) {
                _this_1.setAlignment(alignment, currObj);
            });
        }
        // if alignment option value is right
        else if (alignment == 'right') {
            objToBeCompared = this.rightPanelService.findObjMargin(allObjects, true);
            mainMargin = objToBeCompared.width * objToBeCompared.scaleX;
            allObjects.filter(function (currObj) {
                if (currObj.id != objToBeCompared.id) {
                    currentMargin = currObj.width * currObj.scaleX;
                    newValue = objToBeCompared.left + (mainMargin - currentMargin);
                    // newValue -= this.rightPanelService.canvasService.clipX[canvas.designarea_id] / 2;
                    params.obj = currObj;
                    params.properties = Object.assign({}, { left: newValue });
                    _this_1.rightPanelService.canvasService.objectCRUD(params);
                }
            });
        }
        // if alignment option value is left
        else if (alignment == 'left') {
            objToBeCompared = this.rightPanelService.findObjMargin(allObjects);
            allObjects.filter(function (currObj) {
                if (currObj.id != objToBeCompared.id) {
                    params.obj = currObj;
                    params.properties = Object.assign({}, { left: objToBeCompared.left });
                    _this_1.rightPanelService.canvasService.objectCRUD(params);
                }
            });
        }
        // if alignment option value is top
        else if (alignment == 'top') {
            objToBeCompared = this.rightPanelService.findObjMargin(allObjects, false, "top");
            allObjects.filter(function (currObj) {
                if (currObj.id != objToBeCompared.id) {
                    params.obj = currObj;
                    params.properties = Object.assign({}, { top: objToBeCompared.top });
                    _this_1.rightPanelService.canvasService.objectCRUD(params);
                }
            });
        }
        // if alignment option value is bottom
        if (alignment == 'bottom') {
            objToBeCompared = this.rightPanelService.findObjMargin(allObjects, true, "top");
            mainMargin = objToBeCompared.height * objToBeCompared.scaleY;
            allObjects.filter(function (currObj) {
                if (currObj.id != objToBeCompared.id) {
                    currentMargin = currObj.height * currObj.scaleY;
                    newValue = objToBeCompared.top + (mainMargin - currentMargin);
                    // currObj.top = newValue;
                    params.obj = currObj;
                    params.properties = Object.assign({}, { top: newValue });
                    _this_1.rightPanelService.canvasService.objectCRUD(params);
                }
            });
        }
        this.rightPanelService.canvasService.deselectAllObjects();
        this.eventService.$pub('selectThisObjects', allObjects);
    };
    RightPanelComponent.prototype.copyObject = function () {
        var _this_1 = this;
        // prepare variables
        var activeObjs = this.rightPanelService.canvasService.currentCanvas.getActiveObjects(), properties = {}, params = {}, left, top, activeGroup = this.rightPanelService.canvasService.currentCanvas.getActiveObject(), clonedObjs = [];
        // if no active object found, return
        if (!activeObjs || !activeObjs.length)
            return;
        // clone each object one by one and 
        // add the same to canvas
        activeObjs.filter(function (selectedObj, index) {
            selectedObj.clone(function (clonedObj) {
                left = selectedObj.left;
                top = selectedObj.top;
                left = (index == 0 && activeObjs.length > 1) ? left + (activeGroup.width / 2) + activeGroup.left : left;
                top = (index == 0 && activeObjs.length > 1) ? top + (activeGroup.height / 2) + activeGroup.top : top;
                properties = {
                    left: left + 10,
                    top: top + 10,
                    objType: selectedObj.objType,
                    tab: selectedObj.tab,
                    ignoreBestFit: true,
                    src: selectedObj.src
                };
                properties = (selectedObj.objType == 'image') ? properties = Object.assign(properties, { isSvg: selectedObj.isSvg }) : properties;
                params = {
                    obj: clonedObj,
                    properties: properties,
                    crudServiceString: 'this.insertObjectService'
                };
                _this_1.rightPanelService.canvasService.objectCRUD(params);
                clonedObjs.push(clonedObj);
            });
        });
        // reseselect all objects after few seconds    
        setTimeout(function () {
            if (clonedObjs.length > 1) {
                _this_1.eventService.$pub('selectThisObjects', clonedObjs);
            }
        }, 100);
    };
    /**
     * Disable duplicate if no object selected
     * or selected object is of type name number
     */
    RightPanelComponent.prototype.disableDuplicate = function () {
        if (!this.rightPanelService.mainService.canvasService.currentCanvas)
            return true;
        var disable = false, selectedObjs = this.rightPanelService.mainService.canvasService.currentCanvas.getActiveObjects();
        if (this.rightPanelService.disableForSingleObj) {
            disable = true;
        }
        else if (selectedObjs && selectedObjs.length > 0) {
            var isNameNumberObjExists = void 0;
            isNameNumberObjExists = selectedObjs.find(function (currObj) { return (currObj.hasOwnProperty('addObj') && (currObj.addObj == 'name' || currObj.addObj == 'number')); });
            disable = (isNameNumberObjExists) ? true : false;
        }
        return disable;
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ViewChild"])('cropper'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], RightPanelComponent.prototype, "cropper", void 0);
    RightPanelComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_4__["Component"])({
            selector: 'right-panel',
            template: __webpack_require__(/*! ./right-panel.component.html */ "./src/app/components/right-panel/right-panel.component.html"),
            styles: [__webpack_require__(/*! ./right-panel.component.scss */ "./src/app/components/right-panel/right-panel.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            _services_remove_object_service__WEBPACK_IMPORTED_MODULE_1__["RemoveObjectService"],
            _right_panel_service__WEBPACK_IMPORTED_MODULE_5__["RightPanelService"]])
    ], RightPanelComponent);
    return RightPanelComponent;
}());



/***/ }),

/***/ "./src/app/components/right-panel/right-panel.service.ts":
/*!***************************************************************!*\
  !*** ./src/app/components/right-panel/right-panel.service.ts ***!
  \***************************************************************/
/*! exports provided: RightPanelService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RightPanelService", function() { return RightPanelService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");




var RightPanelService = /** @class */ (function () {
    function RightPanelService(mainService, canvasService) {
        this.mainService = mainService;
        this.canvasService = canvasService;
        this.disabledLayers = [];
    }
    RightPanelService.prototype.manageFlagForEnableDisable = function () {
        this.disableForSingleObj = (this.enableForSingleObj() === true) ? false : true;
        this.enableForMultipleObj = this.enableForMultipleObject();
    };
    RightPanelService.prototype.findObjMargin = function (allObjects, findMax, objKey) {
        if (findMax === void 0) { findMax = false; }
        if (objKey === void 0) { objKey = "left"; }
        // variable declaration
        var resultObj = allObjects[0], totalObjects = allObjects.length, i = 1, scaleKey, resultObjMargin, currentMargin, heightWidthKey, scaledResultObj, scaledCurrentObj;
        // determine values based on params
        scaleKey = (objKey == "left") ? "scaleX" : "scaleY";
        heightWidthKey = (objKey == "left") ? "width" : "height";
        // traverse each object one by one
        for (; i < totalObjects; i++) {
            // prepare left/top obj for both selected and current object
            currentMargin = allObjects[i][objKey];
            resultObjMargin = resultObj[objKey];
            // get scaled height/width
            scaledResultObj = resultObj[heightWidthKey] * resultObj[scaleKey];
            scaledCurrentObj = allObjects[i][heightWidthKey] * allObjects[i][scaleKey];
            // when user clicks on left/top, 
            // all objects will be having same marig
            // in this case we will be checking by their scaled width/height
            if ((currentMargin == resultObjMargin && scaledCurrentObj >= scaledResultObj)) {
                resultObj = allObjects[i];
            }
            // in case of right/bottom
            // we will be checking if current traversing object is having hight marign
            // and scaling than selected one, replace the same
            else if (findMax === true) {
                if ((scaledCurrentObj + currentMargin) >= (scaledResultObj + resultObjMargin)) {
                    resultObj = allObjects[i];
                }
                // in case of left/bottom, simple find object having minimum margin
            }
            else if (findMax === false && currentMargin < resultObjMargin) {
                resultObj = allObjects[i];
            }
        }
        // return object that will be used as flag
        return resultObj;
    };
    RightPanelService.prototype.checkForLayers = function () {
        this.disabledLayers = [];
        var activeObj = this.canvasService.getActiveObject();
        if (activeObj == false)
            return;
        var totalCanvasObjects = Object.keys(this.canvasService.getObjects()).length - 1, objStack = this.canvasService.getObjects().indexOf(activeObj);
        if (objStack == 0) {
            this.disabledLayers.push('sendToBack');
        }
        else if (objStack == totalCanvasObjects) {
            this.disabledLayers.push('bringToFront');
        }
    };
    RightPanelService.prototype.enableForMultipleObject = function () {
        var totalAddedObjects = (this.canvasService.currentCanvas && this.canvasService.getObjects()) ? this.canvasService.getObjects().length : 0;
        if (this.enableForSingleObj() === true && totalAddedObjects > 1 && this.canvasService.currentCanvas.getActiveObjects().length == 1)
            return false;
        return true;
    };
    RightPanelService.prototype.enableForSingleObj = function () {
        var obj = this.canvasService.getActiveObject();
        if (this.mainService.isAdmin == false) {
            if (obj == false || obj.ultimatelock == true)
                return false;
            return true;
        }
        else {
            if (obj == false)
                return false;
            return true;
        }
    };
    RightPanelService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_1__["CanvasService"]])
    ], RightPanelService);
    return RightPanelService;
}());



/***/ }),

/***/ "./src/app/components/save-design/save-design.component.html":
/*!*******************************************************************!*\
  !*** ./src/app/components/save-design/save-design.component.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<a *ngIf=\"mainService.isAdmin == false\" href=\"javascript:void(0)\" (click)=\"openSaveDesign()\"\n\ttooltip=\"{{'Save Design' | translate}}\">\n\t<svg class=\"icon icon-save\" viewBox=\"0 0 30 30\">\n\t\t<use xlink:href=\"assets/img/sprite.svg#icon-save\"></use>\n\t</svg>\n</a>\n\n<!-- Save Design Modal -->\n<ng-template #saveDesignModal>\n\t<form (ngSubmit)=\"saveDesign()\">\n\t\t<div class=\"modal-header\">\n\t\t\t<h4 class=\"modal-title pull-left\">{{'Save Design' | translate}}</h4>\n\t\t\t<button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"modalRef.hide()\">\n\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class=\"modal-body\">\n\t\t\t<div class=\"byi-login-tab\">\n\t\t\t\t<div class=\"byi-float-form\">\n\t\t\t\t\t<div class=\"byi-float-label\">\n\t\t\t\t\t\t<label>{{'Design Title' | translate}} *</label>\n\t\t\t\t\t\t<input type=\"text\" name=\"designTitle\" [(ngModel)]=\"designTitle\" />\n\t\t\t\t\t\t<span class=\"text-danger\" *ngIf=\"titleHasError()\">This is required field</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"byi-form-action\">\n\t\t\t\t\t\t<button class=\"byi-btn\" type=\"submit\">{{'Save' | translate}}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/save-design/save-design.component.scss":
/*!*******************************************************************!*\
  !*** ./src/app/components/save-design/save-design.component.scss ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvc2F2ZS1kZXNpZ24vc2F2ZS1kZXNpZ24uY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/components/save-design/save-design.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/components/save-design/save-design.component.ts ***!
  \*****************************************************************/
/*! exports provided: SaveDesignComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SaveDesignComponent", function() { return SaveDesignComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var src_app_services_design_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/design.service */ "./src/app/services/design.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");






var SaveDesignComponent = /** @class */ (function () {
    function SaveDesignComponent(mainService, eventService, designService, translate) {
        var _this = this;
        this.mainService = mainService;
        this.eventService = eventService;
        this.designService = designService;
        this.translate = translate;
        /**
         * Subscribe once customer is logged in then call the save design function
         */
        this.eventService.$sub('customerLoggedIn', function (isSave) {
            if (isSave) {
                //this.saveDesign();
                _this.openSaveDesign();
            }
        });
    }
    SaveDesignComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.init();
        this.eventService.$sub('designSaved', function (design) {
            _this.modalRef.hide();
        });
    };
    SaveDesignComponent.prototype.init = function () {
        this.submitted = false;
        this.designTitle = '';
    };
    /**
     * Checks if customer is logged in or not if customer is logged in then open save design modal else open login modal
     */
    SaveDesignComponent.prototype.openSaveDesign = function () {
        if (!this.mainService.canvasService.hasCanvasObjectOrBackgroundAll()) {
            this.mainService.swal(this.translate.instant('Alert'), this.translate.instant('Please design the product !'), "warning");
            return;
        }
        if (this.mainService.userLoggedIn == true) {
            this.init();
            this.modalRef = this.mainService.openThisModal(this.saveDesignModal);
        }
        else {
            this.eventService.$pub('openLoginModal', true);
        }
    };
    /**
     * Saves the design and publish an event
     */
    SaveDesignComponent.prototype.saveDesign = function () {
        var _this = this;
        // change flag that will show error messages(if any)
        this.submitted = true;
        // if errors found, return
        if (this.titleHasError())
            return;
        // check for name existance
        this.proceedToSaveDesign().then(function (resp) {
            if (resp && resp.hasOwnProperty('titleExists') && resp.titleExists == true) {
                _this.mainService.swal('Already Exists', 'Design with this name already exists. Please enter different name', 'warning');
            }
        });
    };
    /**
     *
     */
    SaveDesignComponent.prototype.proceedToSaveDesign = function (designId) {
        if (designId === void 0) { designId = null; }
        // finally, save design
        var data = {
            title: this.designTitle,
            designId: designId,
            closeThisModal: this.modalRef
        };
        this.eventService.$pub('saveDesignBefore');
        return this.designService.saveDesignData(data);
    };
    SaveDesignComponent.prototype.titleHasError = function (str) {
        if (str === void 0) { str = this.designTitle; }
        return (this.submitted === true && (!str || str.length == 0 || str.trim().length == 0));
    };
    SaveDesignComponent.prototype.closeModal = function () {
        this.modalRef.hide();
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('saveDesignModal'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], SaveDesignComponent.prototype, "saveDesignModal", void 0);
    SaveDesignComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[save-design]',
            template: __webpack_require__(/*! ./save-design.component.html */ "./src/app/components/save-design/save-design.component.html"),
            styles: [__webpack_require__(/*! ./save-design.component.scss */ "./src/app/components/save-design/save-design.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            src_app_services_design_service__WEBPACK_IMPORTED_MODULE_3__["DesignService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__["TranslateService"]])
    ], SaveDesignComponent);
    return SaveDesignComponent;
}());



/***/ }),

/***/ "./src/app/components/skew/skew.component.html":
/*!*****************************************************!*\
  !*** ./src/app/components/skew/skew.component.html ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<accordion-group class=\"byi-accord\" *ngIf=\"!mainService.isResponsive\" [hidden]=\"componentHide\">\n\t<button class=\"byi-accordion-title\" accordion-heading>\n\t\t<span>{{'Skew' | translate}}</span>\n\t</button>\n\t<div class=\"byi-accord-content\">\n\t\t<ng-container [ngTemplateOutlet]=\"skew\"></ng-container>\n\t</div>\n</accordion-group>\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('skew')\">\n\t<ng-template tabHeading>\n\t\t<span>{{'Skew' | translate}}</span>\n\t</ng-template>\n\t<ng-container [ngTemplateOutlet]=\"skew\"></ng-container>\n</tab>\n<ng-template #skew>\n\t<div class=\"byie-option\">\n\t\t<div class=\"byi-inline-box\">\n\t\t\t<div class=\"byi-inline-item\">\n\t\t\t\t<label>\n\t\t\t\t\t<span>{{'SkewX' | translate}}</span>\n\t\t\t\t\t<input class=\"byi-input\"  type=\"number\" [(ngModel)]=\"skewx\" (change)=\"changeSkewX()\">\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"byi-inline-item\">\n\t\t\t\t<label>\n\t\t\t\t\t<span>{{'SkewY' | translate}}</span>\n\t\t\t\t\t<input class=\"byi-input\"  type=\"number\" [(ngModel)]=\"skewy\" (change)=\"changeSkewY()\">\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<button (click)=\"clear()\" class=\"byi-range-reset-link\" tooltip=\"{{'Reset' | translate}}\">\n\t\t\t\t<svg class=\"icon icon-reset\" viewBox=\"0 0 30 30\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-reset\"></use>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/skew/skew.component.scss":
/*!*****************************************************!*\
  !*** ./src/app/components/skew/skew.component.scss ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvc2tldy9za2V3LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/skew/skew.component.ts":
/*!***************************************************!*\
  !*** ./src/app/components/skew/skew.component.ts ***!
  \***************************************************/
/*! exports provided: SkewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SkewComponent", function() { return SkewComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");






var SkewComponent = /** @class */ (function () {
    /**
     * Dependancy Injector
     *
     * @param cacheService
     * @param mainService
     * @param eventService
     * @param canvasService
     * @param tabsService
     */
    function SkewComponent(mainService, eventService, canvasService, tabsService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.tabsService = tabsService;
        this.skewx = 0;
        this.skewy = 0;
        this.componentHide = true;
        // fixed values
        this.minDegree = -180;
        this.maxDegree = 180;
        this.tabsService.registerTabs('skew', 'plain-text');
        this.tabsService.registerTabs('skew', 'clipart');
        this.tabsService.registerTabs('skew', 'image-upload');
        this.tabsService.registerTabs('skew', 'name-number');
        this.tabsService.registerTabs('skew', 'common');
    }
    /**
     * Angular Init Function
     */
    SkewComponent.prototype.ngOnInit = function () {
        this.subscribeEvents();
    };
    /**
     * Subscribe events
     */
    SkewComponent.prototype.subscribeEvents = function () {
        var _this = this;
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            _this.setSkew(obj);
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.componentHide = (_this.canvasService.getActiveObject()) ? null : true;
        });
        this.eventService.$sub('objectAdded', function (obj) {
            _this.skewx = _this.skewy = "";
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            _this.componentHide = (_this.canvasService.getActiveObject()) ? null : true;
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            _this.setSkew(obj);
            _this.componentHide = (_this.canvasService.getActiveObject() && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            _this.setSkew(obj);
        });
    };
    /**
     * Change skew values on object updatation(eg. object added/removed/modified etc)
     *
     * @param obj
     */
    SkewComponent.prototype.setSkew = function (obj) {
        if (obj.length > 0) {
            if (obj[0]) {
                this.skewx = (obj[0].skewX != 0 && obj[0].skewX != undefined) ? obj[0].skewX : '';
                this.skewy = (obj[0].skewY != 0 && obj[0].skewY != undefined) ? obj[0].skewY : '';
            }
        }
        else {
            this.skewx = (obj.skewX != 0 && obj.skewX != undefined) ? obj.skewX : '';
            this.skewy = (obj.skewY != 0 && obj.skewY != undefined) ? obj.skewY : '';
        }
    };
    /**
     * Change SkewX value
     */
    SkewComponent.prototype.changeSkewX = function () {
        var obj = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        this.skewx = (this.skewx < this.minDegree) ? this.minDegree : this.skewx;
        if (obj.length > 1) {
            for (var i = 0; i < obj.length; i++) {
                properties.skewX = this.skewx;
            }
        }
        else {
            properties.skewX = this.skewx;
        }
        this.mainService.updateObjectProperties(obj, properties);
    };
    /**
     * Change SkewX value
     */
    SkewComponent.prototype.changeSkewY = function () {
        var obj = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        this.skewy = (this.skewy > this.maxDegree) ? this.maxDegree : this.skewy;
        if (obj.length > 1) {
            for (var i = 0; i < obj.length; i++) {
                properties.skewY = this.skewy;
            }
        }
        else {
            properties.skewY = this.skewy;
        }
        this.mainService.updateObjectProperties(obj, properties);
    };
    /**
     * Reset Skew
     */
    SkewComponent.prototype.clear = function () {
        this.skewx = 0;
        this.skewy = 0;
        if (this.canvasService.hasCanvasObjectOrBackgroundAll()) {
            this.changeSkewX();
            this.changeSkewY();
        }
    };
    SkewComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[skew]',
            template: __webpack_require__(/*! ./skew.component.html */ "./src/app/components/skew/skew.component.html"),
            styles: [__webpack_require__(/*! ./skew.component.scss */ "./src/app/components/skew/skew.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_3__["TabsService"]])
    ], SkewComponent);
    return SkewComponent;
}());



/***/ }),

/***/ "./src/app/components/stroke/stroke.component.html":
/*!*********************************************************!*\
  !*** ./src/app/components/stroke/stroke.component.html ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<accordion-group class=\"byi-accord\" *ngIf=\"!mainService.isResponsive\" [hidden]=\"componentHide\">\n  <button class=\"byi-accordion-title\" accordion-heading>\n    <span>{{'Stroke' | translate}}</span>\n  </button>\n  <div class=\"byi-accord-content\">\n    <ng-container [ngTemplateOutlet]=\"stroke\"></ng-container>\n  </div>\n</accordion-group>\n<tab *ngIf=\"mainService.isResponsive && tabsService.checkIfExistChild('stroke')\" [attr.hidden]=\"componentHide\">\n  <ng-template tabHeading>\n    <span>{{'Stroke' | translate}}</span>\n  </ng-template>\n  <ng-container [ngTemplateOutlet]=\"stroke\"></ng-container>\n</tab>\n<ng-template #stroke>\n  <div class=\"byie-option\">\n    <div class=\"byi-range-box byie-count-wrap\">\n      <div class=\"byi-global-reset\">\n        <div class=\"byie-custom-color\">\n          <div *ngIf=\"selectedColor\" [type]=\"'simple'\" custom-color-picker [activeColor]=\"selectedColor\"\n            [hideColorToggle]=\"hideColorToggleOutline\" (colorPickerToggle)=\"colorPickerToggleOutline($event)\"\n            (changeColorEvent)=\"changeColorOutline($event)\"></div>\n        </div>\n        <button class=\"byi-range-reset-link\" (click)=\"resetOutline()\" tooltip=\"{{'Reset' | translate}}\">\n          <svg class=\"icon icon-reset\" viewBox=\"0 0 30 30\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-reset\"></use>\n          </svg>\n        </button>\n      </div>\n      <div class=\"byi-rb-input\">\n        <span class=\"byie-count\">{{(outline/10).toFixed(1)}}</span>\n        <input type=\"range\" [(ngModel)]=\"outline\" min=\"0\" max=\"10\" step=\"0.1\"\n          (mousedown)=\"setPrevValue($event.target.value)\" (change)=\"stackToUndo()\" (input)=\"changeOutline()\"\n          class=\"slider\">\n      </div>\n    </div>\n  </div>\n</ng-template>"

/***/ }),

/***/ "./src/app/components/stroke/stroke.component.scss":
/*!*********************************************************!*\
  !*** ./src/app/components/stroke/stroke.component.scss ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvc3Ryb2tlL3N0cm9rZS5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/stroke/stroke.component.ts":
/*!*******************************************************!*\
  !*** ./src/app/components/stroke/stroke.component.ts ***!
  \*******************************************************/
/*! exports provided: StrokeComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StrokeComponent", function() { return StrokeComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");






var StrokeComponent = /** @class */ (function () {
    function StrokeComponent(canvasService, eventService, mainService, tabsService) {
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.mainService = mainService;
        this.tabsService = tabsService;
        this.colorarr = [];
        this.hideColorToggleOutline = 1;
        this.componentHide = true;
        // for undoRedo
        this.prevStrokeWidth = null;
        this.tabsService.registerTabs('stroke', 'plain-text');
        this.tabsService.registerTabs('stroke', 'name-number');
    }
    StrokeComponent.prototype.ngOnInit = function () {
        this.outline = '0';
        this.subscribeEvents();
    };
    StrokeComponent.prototype.subscribeEvents = function () {
        var _this = this;
        var self = this;
        this.eventService.$sub('objectAdded', function (obj) {
            self.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            self.componentHide = true;
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.updateOutline(obj);
        });
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            if (obj.type == 'activeSelection') {
                var isObjText = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type != 'text'; }));
                if (isObjText == -1) {
                    self.componentHide = null;
                }
                else {
                    self.componentHide = true;
                }
            }
            else {
                self.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
            }
            _this.updateOutline(obj);
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            obj = (Array.isArray(obj)) ? obj[0] : obj;
            _this.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
            if (obj.type == 'activeSelection') {
                var isObjText = obj._objects.indexOf(obj._objects.find(function (currObj) { return currObj.type != 'text'; }));
                if (isObjText == -1) {
                    self.componentHide = null;
                }
                else {
                    self.componentHide = true;
                }
            }
            else {
                _this.componentHide = (obj.type == "text" && obj.ultimatelock != true) ? null : true;
            }
            _this.updateOutline(obj);
        });
        this.eventService.$sub('objectSelectionCleared', function () {
            _this.componentHide = true;
            _this.outline = '0';
            _this.selectedColor = Object.assign({}, _this.mainService.colorData.defaultColor);
        });
        this.eventService.$sub('closeColorPicker', function () {
            _this.hideColorToggleOutline = 1;
        });
    };
    StrokeComponent.prototype.changeOutline = function () {
        var _this = this;
        if (!this.canvasService.currentCanvas)
            return;
        var selectedObjs = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        selectedObjs.filter(function (obj) {
            obj.strokeWidth = _this.outline / 10;
            properties.stroke = _this.selectedColor;
            properties.dirty = true;
            _this.canvasService.currentCanvas.renderAll();
            // this.mainService.updateObjectProperties(obj, properties);
        });
    };
    StrokeComponent.prototype.setPrevValue = function (val) {
        if (this.prevStrokeWidth == null)
            this.prevStrokeWidth = val / 10;
    };
    StrokeComponent.prototype.stackToUndo = function () {
        this.canvasService.rangeSliderUndoRedo({ 'strokeWidth': this.prevStrokeWidth });
        this.prevStrokeWidth = null;
    };
    StrokeComponent.prototype.updateOutline = function (obj) {
        if (obj.length > 0) {
            if (obj[0] && this.outline != obj.strokeWidth) {
                this.outline = obj.strokeWidth * 10;
                obj.dirty = true;
                this.selectedColor = (obj[0].stroke) ? obj[0].stroke : this.mainService.colorData.defaultColor.color_code;
            }
        }
        else {
            this.outline = obj.strokeWidth * 10;
            this.selectedColor = (obj.stroke) ? obj.stroke : this.mainService.colorData.defaultColor.color_code;
        }
    };
    StrokeComponent.prototype.colorPickerToggleOutline = function () {
        if (this.hideColorToggleOutline == 1) {
            this.hideColorToggleOutline = 0;
        }
        else if (this.hideColorToggleOutline == 0) {
            this.hideColorToggleOutline = 1;
        }
    };
    StrokeComponent.prototype.changeColorOutline = function (outlineColor) {
        if (!this.canvasService.currentCanvas)
            return;
        this.selectedColor = outlineColor;
        var obj = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        if (obj) {
            properties.stroke = outlineColor;
            properties.dirty = true;
            this.mainService.updateObjectProperties(obj, properties);
        }
    };
    StrokeComponent.prototype.resetOutline = function () {
        if (!this.canvasService.currentCanvas)
            return;
        var obj = this.canvasService.currentCanvas.getActiveObjects(), properties = {};
        if (obj) {
            properties.strokeWidth = 0;
            properties.stroke = this.mainService.colorData.defaultColor.color_code;
            properties.dirty = true;
            this.outline = '0';
            this.mainService.updateObjectProperties(obj, properties);
        }
    };
    StrokeComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[stroke]',
            template: __webpack_require__(/*! ./stroke.component.html */ "./src/app/components/stroke/stroke.component.html"),
            styles: [__webpack_require__(/*! ./stroke.component.scss */ "./src/app/components/stroke/stroke.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_canvas_service__WEBPACK_IMPORTED_MODULE_2__["CanvasService"], angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubService"], _services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"], _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__["TabsService"]])
    ], StrokeComponent);
    return StrokeComponent;
}());



/***/ }),

/***/ "./src/app/components/tabs/tabs.component.html":
/*!*****************************************************!*\
  !*** ./src/app/components/tabs/tabs.component.html ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-idea {{responsiveClass}}\" [ngClass]=\"{'byi-idea-fullview' : showAllFonts == true}\">\n\t<tabset #masterTabs>\n\t\t<ng-container *ngFor=\"let mainTab of mainTabs; let i = index\">\n\t\t\t<tab *ngIf=\"mainTab.isAdmin != 0 || mainService.isAdmin == false\"\n\t\t\t\t[customClass]=\"totalTabClass ? totalTabClass : ''\" [active]=\"mainTab.id == activeTabId\"\n\t\t\t\t[attr.data-index]=\"i\" (selectTab)=\"fetchTabData(i,mainTab.id)\">\n\t\t\t\t<div>\n\t\t\t\t<ng-template tabHeading>\n\t\t\t\t\t<i container=\"body\" placement=\"top\" attr.class=\"byii byii-{{mainTab.component}}\">\n\t\t\t\t\t\t<svg attr.class=\"icon icon-{{mainTab.component}}\" viewBox=\"0 0 50 50\">\n\t\t\t\t\t\t\t<use attr.xlink:href=\"assets/img/sprite.svg#icon-{{mainTab.component}}\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</i>\n\t\t\t\t\t<span (click)=\"closeFontFamilyView()\">{{mainTab.label | translate}}</span>\n\t\t\t\t</ng-template>\n\t\t\t\t</div>\n\t\t\t\t<button *ngIf=\"mainService.isResponsive && !showAllFonts\" type=\"button\" class=\"byi-close-btn\"\n\t\t\t\t\t(click)=\"closeTab()\">\n\t\t\t\t\t<span>11</span>\n\t\t\t\t</button>\n\t\t\t\t<ng-container *ngIf=\"mainService.isResponsive && showAllFonts\">\n\t\t\t\t\t<label class=\"byi-fullview-title\">{{title}}</label>\n\t\t\t\t\t<button type=\"button\" class=\"byi-close-btn\" (click)=\"closeFullView(showAllFonts)\">\n\t\t\t\t\t\t<span>11</span>\n\t\t\t\t\t</button>\n\t\t\t\t</ng-container>\n\t\t\t\t<div class=\"tab-content-inner\" plain-text *ngIf=\"mainTab.id == 1\"></div>\n\t\t\t\t<div class=\"tab-content-inner\" clipart *ngIf=\"mainTab.id == 2\"></div>\n\t\t\t\t<div class=\"tab-content-inner\" image-upload *ngIf=\"mainTab.id == 3\"></div>\n\t\t\t\t<div class=\"tab-content-inner\" background-color *ngIf=\"mainTab.id == 4\"></div>\n\t\t\t\t<div class=\"tab-content-inner\" my-designs *ngIf=\"mainTab.id == 5\"></div>\n\t\t\t\t<div class=\"tab-content-inner\" name-number *ngIf=\"mainTab.id == 6\"></div>\n\t\t\t\t<div class=\"tab-content-inner\" design-templates *ngIf=\"mainTab.id == 7\"></div>\n\t\t\t</tab>\n\t\t</ng-container>\n\t\t<div *ngIf=\"activeTabId == 0\" intro [introActive]='true'></div>\n\t</tabset>\n</div>"

/***/ }),

/***/ "./src/app/components/tabs/tabs.component.scss":
/*!*****************************************************!*\
  !*** ./src/app/components/tabs/tabs.component.scss ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvdGFicy90YWJzLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/tabs/tabs.component.ts":
/*!***************************************************!*\
  !*** ./src/app/components/tabs/tabs.component.ts ***!
  \***************************************************/
/*! exports provided: TabsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabsComponent", function() { return TabsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/tabs.service */ "./src/app/services/tabs.service.ts");






var TabsComponent = /** @class */ (function () {
    function TabsComponent(mainService, cacheService, pubsub, tabsService, cdr) {
        var _this = this;
        this.mainService = mainService;
        this.cacheService = cacheService;
        this.pubsub = pubsub;
        this.tabsService = tabsService;
        this.cdr = cdr;
        this.mainTabs = [];
        this.title = '';
        this.toggleIntro = true;
        this.tooltipData = [];
        this.introTabId = 0;
        this.tabsDataCacheKey = 'tabsData' + this.mainService.productId + '-' + this.mainService.baseUrl;
        this.allTabsDataCacheKey = 'allTabsData' + this.mainService.productId + '-' + this.mainService.baseUrl;
        this.toggleResponsiveClass(false);
        this.pubsub.$sub('windowResize', function () {
            _this.toggleResponsiveClass(true);
        });
        this.pubsub.$sub('objectSelectionCleared', function () {
            if (_this.mainService.isResponsive && _this.activeTabId != 6) {
                _this.closeTab();
            }
            else if (_this.mainService.isResponsive && _this.activeTabId == 6) {
                _this.tabsService.backTab();
            }
        });
        this.pubsub.$sub('closeTab', function () {
            _this.toggleIntro = true;
            _this.closeTab();
        });
        this.pubsub.$sub('showFonts', function (resp) {
            _this.showAllFonts = resp.showAllFonts;
            _this.title = resp.title;
        });
        this.pubsub.$sub('toggleResponsiveClass', function () {
            _this.toggleResponsiveClass(true);
        });
    }
    TabsComponent.prototype.getSelectedObjTabId = function (obj) {
        var tab = obj.tab, tabId = 0;
        switch (tab) {
            case 'text':
                tabId = 1;
                break;
            case 'clipart':
                tabId = 2;
                break;
            case 'upload':
                tabId = 3;
                break;
            case 'namenumber':
                tabId = 6;
                break;
        }
        return tabId;
        // return ((obj.tab == "text") ? 1 : ((obj.tab == "clipart") ? 2 : ((obj.tab = "upload") ? 3 : ((obj.tab == "namenumber") ? 6 : 0))));
    };
    TabsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.getTabs();
        var self = this;
        this.pubsub.$sub('objectSelectionCreated', function (obj) {
            var id = _this.getSelectedObjTabId(obj);
            var self = _this;
            if (id != 0) {
                _this.activeTabId = _this.getTabId(id);
                setTimeout(function () {
                    self.pubsub.$pub('activeTabOnLoadDesign', id);
                }, 500);
            }
        });
        this.pubsub.$sub('getActiveTabId', function (id) {
            if (id != "" && id != 0) {
                self.activeTabId = self.getTabId(id);
            }
            else {
                /*For Tooltip enable*/
                self.activeTabId = 0;
            }
        });
        this.pubsub.$sub('introTabActive', function (id) {
            self.activeTabId = self.getTabId(id);
            self.introTabId = id;
        });
        this.pubsub.$sub('imageSideChanged', function () {
            _this.toggleResponsiveClass(true);
        });
        this.pubsub.$sub('objectRemoved', function () {
            _this.toggleResponsiveClass(true);
        });
        this.pubsub.$sub('allcanvasCreated', function () {
            _this.toggleResponsiveClass(true);
        });
    };
    TabsComponent.prototype.ngAfterViewInit = function () {
        this.toggleResponsiveClass(true);
    };
    TabsComponent.prototype.getTabId = function (findId) {
        var response = 0;
        this.mainService.tabsFlow.forEach(function (object, index) {
            object.forEach(function (subObj, inx) {
                if (subObj == findId) {
                    response = index;
                }
            });
        });
        return response;
    };
    TabsComponent.prototype.getTabs = function () {
        var _this = this;
        var params = { 'product_id': this.mainService.productId }, url = 'productdesigner/Tabs/getTabs', cacheKey = this.tabsDataCacheKey;
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            _this.cacheService.set(_this.tabsDataCacheKey, data, { maxAge: 15 * 60 });
            _this.setTabsData(data);
        }).catch(function (err) { return console.log(err); });
    };
    TabsComponent.prototype.fetchTabData = function (index, currentTab) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var self;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.closeFullView(true);
                this.toggleResponsiveClass(true);
                this.tabsService.backTab();
                this.cdr.detectChanges();
                this.activeTabId = currentTab;
                /*let openTabId = (this.introTabId != undefined && this.introTabId != "" && currentTab == this.introTabId) ? this.introTabId : currentTab;
                this.introTabId = (this.introTabId != "") ? "" : this.introTabId;*/
                this.pubsub.$pub('getSubTabs', currentTab);
                self = this;
                if (this.introTabId > 0) {
                    setTimeout(function () {
                        self.pubsub.$pub('introTabActive', self.introTabId);
                        self.introTabId = 0;
                    }, 50);
                }
                return [2 /*return*/];
            });
        });
    };
    TabsComponent.prototype.setTabsData = function (data) {
        this.mainService.getAllTabs = data.allTabsData;
        this.mainService.productTooltipData = data.productTooltipData;
        var self = this;
        /*Tabs Flow*/
        var keys = Object.keys(data.subTabsData);
        for (var i = 0; i < Object.keys(data.subTabsData).length; i++) {
            this.mainService.tabsFlow[keys[i]] = data.subTabsData[keys[i]];
        }
        setTimeout(function () {
            self.pubsub.$pub('getSubTabs', data.tabsData[0]);
            self.pubsub.$pub('tabsDataFetched');
        }, 500);
        this.mainTabs = data.tabsData;
        var tempData = [];
        var allTabs = this.mainService.getAllTabs;
        for (var i = 0; i < this.mainTabs.length; i++) {
            if (this.mainTabs[i] == allTabs[this.mainTabs[i]]['id']) {
                tempData.push({ id: allTabs[this.mainTabs[i]]['id'], label: allTabs[this.mainTabs[i]]['custom_label'], component: allTabs[this.mainTabs[i]]['component'], isAdmin: allTabs[this.mainTabs[i]]['is_admin'] });
            }
        }
        if (data.tooltipStatus != 0) {
            this.activeTabId = 0;
        }
        else if (!this.mainService.isResponsive) {
            this.activeTabId = data.tabsData[0];
        }
        /*if (data.productTooltipData == "" || this.mainService.isAdmin || data.tooltipStatus == 0) {
            this.activeTabId = data.tabsData[0];
        } else {
            this.activeTabId = 0;
        }*/
        this.mainTabs = tempData;
        this.totalTabClass = 'nav-item-' + this.mainTabs.length;
    };
    TabsComponent.prototype.toggleResponsiveClass = function (add) {
        if (add && this.mainService.isResponsive) {
            this.responsiveClass = 'byi-idea-mob';
        }
        else {
            this.responsiveClass = '';
        }
    };
    TabsComponent.prototype.closeTab = function () {
        this.toggleResponsiveClass(false);
        // There is no tab ID equals 0 so it will close the tab
        this.activeTabId = 0;
        this.tabsService.backTab();
    };
    TabsComponent.prototype.closeFontFamilyView = function () {
        this.pubsub.$pub('closeFullView', true);
    };
    TabsComponent.prototype.closeFullView = function (showAllFonts) {
        this.pubsub.$pub('closeFullView', showAllFonts);
    };
    TabsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'tabs',
            template: __webpack_require__(/*! ./tabs.component.html */ "./src/app/components/tabs/tabs.component.html"),
            styles: [__webpack_require__(/*! ./tabs.component.scss */ "./src/app/components/tabs/tabs.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_3__["CacheService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"],
            _services_tabs_service__WEBPACK_IMPORTED_MODULE_5__["TabsService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]])
    ], TabsComponent);
    return TabsComponent;
}());



/***/ }),

/***/ "./src/app/components/tooltip/tooltip.component.html":
/*!***********************************************************!*\
  !*** ./src/app/components/tooltip/tooltip.component.html ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<button class=\"byiu-right-icon\" type=\"button\" *ngIf=\"!introActive && isEnableTooltip == 1\" (click)=\"enableIntro()\" tooltip=\"{{'Help' | translate}}\" placement=\"bottom\">\n  <svg class=\"icon icon-question\" viewBox=\"0 0 30 30\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-question\"></use>\n  </svg>\n</button>\n<div class=\"byi-intro-wrap\" [class.active]=\"toggleIntro\" *ngIf=\"!mainService.isResponsive && introActive && isEnableTooltip == 1\">\n  <div class=\"byi-intro-inner\">\n    <div class=\"byi-intro-title\">\n      <h3>How do you want to start?</h3>\n    </div>\n  <div loader #loaderComponent></div>\n    <div class=\"byi-intro-items\">\n      <ng-container *ngFor=\"let mainTab of tooltipData; let i = index\">\n        <ng-container *ngIf=\"mainTab.first_tooltip != null\">\n          <div class=\"byi-intro-item\" *ngIf=\"mainTab.isAdmin != 0 || mainService.isAdmin == false\"\n            (click)=\"fetchTabData(mainTab.id)\">\n            <span class=\"byi-intro-icon\">\n              <svg attr.class=\"icon icon-{{mainTab.component}}\" viewBox=\"0 0 50 50\">\n                <use attr.xlink:href=\"assets/img/sprite.svg#icon-{{mainTab.component}}\"></use>\n              </svg>\n            </span>\n            <p>{{mainTab.label}}</p>\n          </div>\n        </ng-container>\n      </ng-container>\n      <div *ngIf=\"productTooltipEnable == 1\" class=\"byi-intro-item product-tooltip\" (click)=\"getProduct()\">\n        <span class=\"byi-intro-icon product-tooltip\">\n          <svg class=\"icon icon-productComponent\" viewBox=\"0 0 50 50\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-productComponent\"></use>\n          </svg>\n        </span>\n        <p class=\"product-tooltip\">Product</p>\n      </div>\n    </div>\n  </div>\n</div>"

/***/ }),

/***/ "./src/app/components/tooltip/tooltip.component.scss":
/*!***********************************************************!*\
  !*** ./src/app/components/tooltip/tooltip.component.scss ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvdG9vbHRpcC90b29sdGlwLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/components/tooltip/tooltip.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/components/tooltip/tooltip.component.ts ***!
  \*********************************************************/
/*! exports provided: TooltipComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TooltipComponent", function() { return TooltipComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _loader_loader_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../loader/loader.component */ "./src/app/components/loader/loader.component.ts");







var TooltipComponent = /** @class */ (function () {
    function TooltipComponent(mainService, cacheService, canvasService, pubsub) {
        this.mainService = mainService;
        this.cacheService = cacheService;
        this.canvasService = canvasService;
        this.pubsub = pubsub;
        this.isEnableTooltip = '';
        this.TooltipData = '';
        this.tooltipData = [];
        this.toggleIntro = true;
        this.deactiveLoader = false;
        this.productTooltipEnable = false;
        this.displayProductTooltip = false;
        this.TooltipDataCacheKey = 'tooltipData - ' + this.mainService.baseUrl;
    }
    TooltipComponent.prototype.ngOnInit = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var params, url, cacheKey, self;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        params = {
                            isAdmin: this.mainService.isAdmin
                        }, url = 'productdesigner/Index/getTooltip', cacheKey = this.TooltipDataCacheKey + this.mainService.isAdmin;
                        return [4 /*yield*/, this.mainService.getData(url, params, cacheKey).then(function (data) {
                                _this.cacheService.set(_this.TooltipDataCacheKey, data, { maxAge: 15 * 60 });
                                _this.isEnableTooltip = data.enable_tooltip;
                                /*if(this.isEnableTooltip){
                                    this.enableIntro();
                                }*/
                            }).catch(function (err) { return console.log(err); })];
                    case 1:
                        _a.sent();
                        self = this;
                        this.pubsub.$sub('tabsDataFetched', function () {
                            var toolTipkeys = Object.keys(self.mainService.getAllTabs);
                            var _loop_1 = function () {
                                var tabId = self.mainService.getAllTabs[i].id;
                                self.mainService.tabsFlow.filter(function (obj) {
                                    if (obj.indexOf(tabId) != -1) {
                                        self.tooltipData.push(self.mainService.getAllTabs[i]);
                                    }
                                });
                            };
                            for (var i = 1; i <= toolTipkeys.length; i++) {
                                _loop_1();
                            }
                            self.toggleIntro = true;
                        });
                        this.pubsub.$sub('DisplayAllProducts', function (data) {
                            _this.displayProductTooltip = data;
                        });
                        this.productTooltipEnable = (this.mainService.productTooltipData) ? this.mainService.productTooltipData[2] : 0;
                        if ((this.isEnableTooltip && this.tooltipData.length > 0) || this.productTooltipEnable == 1) {
                            this.enableIntro();
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    TooltipComponent.prototype.getProduct = function () {
        var tootltipData = [];
        this.pubsub.$pub('openAllProduct');
        var productIntro = (this.mainService.productTooltipData[1] != "") ? this.mainService.productTooltipData[1] : "";
        if (productIntro != "") {
            tootltipData.push({ element: ".byi-products-wrap", intro: productIntro, position: 'right' });
            this.mainService.processToolTip(tootltipData);
        }
    };
    TooltipComponent.prototype.fetchTabData = function (tabId) {
        this.canvasService.currentCanvas.discardActiveObject();
        this.pubsub.$pub('introTabActive', tabId);
        var tootltipData = [];
        var getIndx = Object.keys(this.mainService.getAllTabs).indexOf(tabId);
        var tootltipObj = this.mainService.getAllTabs[getIndx + 1];
        var ids = tootltipObj.element_id.split(',');
        if (ids.length >= 1) {
            tootltipData.push({ element: ids[0], intro: tootltipObj.first_tooltip, position: 'right' });
            this.mainService.processToolTip(tootltipData);
        }
    };
    TooltipComponent.prototype.enableIntro = function () {
        this.pubsub.$pub('getActiveTabId', 'enableTooltip');
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], TooltipComponent.prototype, "introActive", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])("loaderComponent"),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _loader_loader_component__WEBPACK_IMPORTED_MODULE_6__["LoaderComponent"])
    ], TooltipComponent.prototype, "loaderComponent", void 0);
    TooltipComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[intro]',
            template: __webpack_require__(/*! ./tooltip.component.html */ "./src/app/components/tooltip/tooltip.component.html"),
            styles: [__webpack_require__(/*! ./tooltip.component.scss */ "./src/app/components/tooltip/tooltip.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_3__["CacheService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"]])
    ], TooltipComponent);
    return TooltipComponent;
}());



/***/ }),

/***/ "./src/app/components/translate/translate.component.html":
/*!***************************************************************!*\
  !*** ./src/app/components/translate/translate.component.html ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./src/app/components/translate/translate.component.scss":
/*!***************************************************************!*\
  !*** ./src/app/components/translate/translate.component.scss ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvdHJhbnNsYXRlL3RyYW5zbGF0ZS5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/components/translate/translate.component.ts":
/*!*************************************************************!*\
  !*** ./src/app/components/translate/translate.component.ts ***!
  \*************************************************************/
/*! exports provided: TranslateComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TranslateComponent", function() { return TranslateComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");




var TranslateComponent = /** @class */ (function () {
    function TranslateComponent(mainService, translate) {
        this.mainService = mainService;
        this.translate = translate;
    }
    TranslateComponent.prototype.fetchLocale = function () {
        var _this = this;
        var params = {}, url = 'productdesigner/index/fetchlocale', cacheKey = 'fetchLocale' + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey).then(function (localeData) {
            _this.translate.addLangs(localeData.active_locale);
            _this.translate.setDefaultLang(localeData.active_locale);
        }).catch(function (err) { return console.log(err); });
    };
    TranslateComponent.prototype.ngOnInit = function () {
        this.fetchLocale();
    };
    TranslateComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'translate',
            template: __webpack_require__(/*! ./translate.component.html */ "./src/app/components/translate/translate.component.html"),
            styles: [__webpack_require__(/*! ./translate.component.scss */ "./src/app/components/translate/translate.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"], _ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__["TranslateService"]])
    ], TranslateComponent);
    return TranslateComponent;
}());



/***/ }),

/***/ "./src/app/demostore/product-demo/product-demo.component.html":
/*!********************************************************************!*\
  !*** ./src/app/demostore/product-demo/product-demo.component.html ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-container *ngIf=\"loadContent == 'reqForDemo' && !mainService.isResponsive\">\n  <div loader #loaderComponent></div>\n  <button class=\"byi-btn byi-reqdemo-btn\" (click)=\"productDemoPopupOpen()\">\n    <i class=\"byi-btn__icon\">\n      <svg class=\"icon icon-support\" viewBox=\"0 0 50 50\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-support\"></use>\n      </svg>\n    </i>\n    <span>{{productDemoButtonText || 'Personalised Product Demo' | translate}}</span>\n  </button>\n  <a class=\"byi-btn byi-livechat-btn\" href=\"javascript:void()\" (click)=\"showLiveChat()\">\n    <i class=\"byi-btn__icon\">\n      <svg class=\"icon icon-livechat\" viewBox=\"0 0 50 50\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-livechat\"></use>\n      </svg>\n    </i>\n    <span>Live Chat</span>\n  </a>\n</ng-container>\n\n<div *ngIf=\"loadContent == 'pricePage' && pricePageUrl != '#' && pricePageUrl !== '' && !mainService.isResponsive\"\n  class=\"byi-pricepage-link\">\n  <a [href]=\"pricePageUrl\" target=\"_blank\">\n    <i class=\"byi-btn__icon\">\n      <svg class=\"icon icon-pricing\" viewBox=\"0 0 50 50\">\n        <use xlink:href=\"assets/img/sprite.svg#icon-pricing\"></use>\n      </svg>\n    </i>\n    <span>{{priceButtonText || 'Pricing Page' | translate}}</span>\n  </a>\n</div>\n<ng-container *ngIf=\"loadContent == 'reqForDemo'\">\n  <div class=\"byi-fab\" [class.byi-fab-active]=\"isFabOpen\" [attr.hidden]=\"(!mainService.isResponsive) ? true : null\">\n    <button class=\"byi-fab-action\" type=\"button\" (click)=\"openFloatingAction()\">\n      <span></span>\n    </button>\n    <div class=\"byi-fab-btn-list\">\n      <button class=\"byi-fab-btn byi-fab-reqdemo\" (click)=\"productDemoPopupOpen()\">\n        <span>{{productDemoButtonText || 'Personalised Product Demo' | translate}}</span>\n        <i class=\"byi-fab-btn-icon\">\n          <svg class=\"icon icon-support\" viewBox=\"0 0 50 50\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-support\"></use>\n          </svg>\n        </i>\n      </button>\n      <a class=\"byi-fab-btn byi-fab-livechat\" href=\"javascript:void()\" (click)=\"showLiveChat()\">\n        <span>Live Chat</span>\n        <i class=\"byi-fab-btn-icon\">\n          <svg class=\"icon icon-livechat\" viewBox=\"0 0 50 50\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-livechat\"></use>\n          </svg>\n        </i>\n      </a>\n      <a class=\"byi-fab-btn byi-fab-pricing\" [href]=\"pricePageUrl\" target=\"_blank\">\n        <span>{{priceButtonText || 'Pricing Page' | translate}}</span>\n        <i class=\"byi-fab-btn-icon\">\n          <svg class=\"icon icon-pricing\" viewBox=\"0 0 50 50\">\n            <use xlink:href=\"assets/img/sprite.svg#icon-pricing\"></use>\n          </svg>\n        </i>\n      </a>\n    </div>\n  </div>\n</ng-container>\n\n<ng-template #requestDemomodel>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title pull-left\">{{'Request Personalized Demo' | translate}}</h4>\n    <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"closeModel()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"byi-login-tab\">\n      <form [formGroup]=\"requestDemoForm\" (ngSubmit)=\"requestDemoSubmit()\">\n        <div class=\"byi-group-element\">\n          <div class=\"byi-float-label\">\n            <label for=\"customerName\">{{'Your Name' | translate}} *</label>\n            <input type=\"text\" formControlName=\"customerName\" placeholder=\"Enter your name\" />\n            <span class=\"byi-error\"\n              *ngIf=\"requestDemoForm.get('customerName').value == '' && requestDemoForm.get('customerName').touched\">{{'Your name is required' | translate}}</span>\n          </div>\n          <div class=\"byi-float-label\">\n            <label for=\"customerEmail\">{{'Your Email' | translate}} *</label>\n            <input type=\"text\" formControlName=\"customerEmail\" placeholder=\"Enter your email\" />\n            <span class=\"byi-error\"\n              *ngIf=\"requestDemoForm.get('customerEmail').value == '' && requestDemoForm.get('customerEmail').touched\">{{'Your email is required' | translate}}</span>\n          </div>\n        </div>\n        <div class=\"byi-group-element\">\n          <div class=\"byi-float-label\">\n            <label for=\"companyName\">{{'Your Company Name' | translate}}</label>\n            <input type=\"text\" formControlName=\"companyName\" placeholder=\"Enter your company name\" />\n          </div>\n          <div class=\"byi-float-label\">\n            <label for=\"phoneNumber\">{{'Phone Number' | translate}}</label>\n            <input type=\"text\" formControlName=\"phoneNumber\" placeholder=\"Enter your phone number\" />\n          </div>\n        </div>\n        <div class=\"byi-group-element\">\n          <div class=\"byi-float-label\">\n            <label for=\"website\">{{'Website' | translate}}</label>\n            <input type=\"text\" formControlName=\"website\" placeholder=\"Enter your website\" />\n          </div>\n          <div class=\"byi-float-label\">\n            <label for=\"technology\">{{'Select Technology' | translate}}</label>\n            <div class=\"byi-select\">\n              <select formControlName=\"technology\" required>\n                <option selected disabled value=\"\">Select Technology</option>\n                <option *ngFor=\"let data of technologies\" [value]=\"data\">{{data}}</option>\n              </select>\n              <span class=\"caret\"></span>\n            </div>\n            <p *ngIf=\"requestDemoForm.get('technology').value == '' && requestDemoForm.get('technology').touched\">\n              {{'Please select technology' | translate}}</p>\n          </div>\n        </div>\n        <div class=\"byi-group-element\">\n          <div class=\"byi-float-label\">\n            <label for=\"country\">{{'Select Country' | translate}}</label>\n            <div class=\"byi-select\">\n              <select formControlName=\"country\">\n                <option selected disabled value=\"\">Select Country</option>\n                <option *ngFor=\"let countryData of countries\" [value]=\"countryData.name\"\n                  [selected]=\"countryData.id == selectedCountry\">\n                  {{countryData.name}}</option>\n              </select>\n              <span class=\"caret\"></span>\n            </div>\n          </div>\n          <div class=\"byi-float-label\">\n            <label for=\"message\">{{\"Your message\" | translate}}</label>\n            <textarea class=\"byi-input\" rows=\"3\" formControlName=\"message\" placeholder=\"Enter your message\"></textarea>\n          </div>\n        </div>\n        <div class=\"byi-group-element\">\n          <div class=\"byi-float-checkbox\">\n            <label class=\"byi-checkbox\">\n              <input type=\"checkbox\" formControlName=\"confirmCheckbox\" />\n              <span></span>\n              {{'Please click here to confirm that you are happy to share above listed information with us.' | translate}}\n            </label>\n            <p class=\"byi-error\"\n              *ngIf=\"requestDemoForm.get('confirmCheckbox').value == '' && requestDemoForm.get('confirmCheckbox').touched\">\n              {{'Your confirmation is required.' | translate}}</p>\n          </div>\n        </div>\n        <div class=\"byi-group-element\">\n          <re-captcha (resolved)=\"resolved($event)\" [siteKey]=\"recaptchaKey\"></re-captcha>\n        </div>\n        <div class=\"byi-form-action\">\n          <button class=\"byi-btn\" type=\"submit\" [disabled]=\"!isEnable\">Submit</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</ng-template>"

/***/ }),

/***/ "./src/app/demostore/product-demo/product-demo.component.scss":
/*!********************************************************************!*\
  !*** ./src/app/demostore/product-demo/product-demo.component.scss ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RlbW9zdG9yZS9wcm9kdWN0LWRlbW8vcHJvZHVjdC1kZW1vLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/demostore/product-demo/product-demo.component.ts":
/*!******************************************************************!*\
  !*** ./src/app/demostore/product-demo/product-demo.component.ts ***!
  \******************************************************************/
/*! exports provided: ProductDemoComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProductDemoComponent", function() { return ProductDemoComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-bootstrap/modal */ "./node_modules/ngx-bootstrap/modal/fesm5/ngx-bootstrap-modal.js");
/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _components_loader_loader_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../components/loader/loader.component */ "./src/app/components/loader/loader.component.ts");








var ProductDemoComponent = /** @class */ (function () {
    function ProductDemoComponent(modalService, formBuilder, mainService, cacheService, cdr) {
        this.modalService = modalService;
        this.formBuilder = formBuilder;
        this.mainService = mainService;
        this.cacheService = cacheService;
        this.cdr = cdr;
        this.modalClass = '';
        this.technologies = ["Magento"];
        this.countries = [];
        this.country = "";
        this.recaptchaKey = '';
        this.pricePageUrl = '';
        this.priceButtonText = '';
        this.productDemoButtonText = '';
        this.isFabOpen = false;
        this.liveChatStatus = false;
        this.isEnable = false;
    }
    ProductDemoComponent.prototype.ngOnInit = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getFormData()];
                    case 1:
                        _a.sent();
                        this.openProductDemoPopup();
                        this.requestDemoForm = this.formBuilder.group({
                            customerName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required],
                            customerEmail: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].pattern("[^ @]*@[^ @]*")]],
                            companyName: [''],
                            phoneNumber: [''],
                            website: [''],
                            technology: [this.technology, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["Validators"].required],
                            country: [''],
                            message: [''],
                            confirmCheckbox: ['']
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    ProductDemoComponent.prototype.openProductDemoPopup = function () {
        var url = new URL(window.location.href);
        var paramValue = url.searchParams.get("req");
        if (paramValue) {
            this.params = paramValue;
            var cacheKey = 'reqDemoPopup' + this.mainService.baseUrl;
            var data = '';
            if (!this.cacheService.exists(cacheKey)) {
                var thisVar_1 = this;
                setTimeout(function () {
                    sweetalert2__WEBPACK_IMPORTED_MODULE_6___default.a.fire({
                        title: thisVar_1.reqDemoPopTitle ? thisVar_1.reqDemoPopTitle : 'Request Demo',
                        text: thisVar_1.reqDemoPopText ? thisVar_1.reqDemoPopText : "How are you liking the demo so far? Hope you are having a good time playing around with our tool. Want to explore more with us? Our executives will help you with a FREE personalized demo. They can help you find the perfect solution for your business challenges.",
                        type: 'info',
                        showCancelButton: true,
                        confirmButtonText: thisVar_1.productDemoButtonText ? thisVar_1.productDemoButtonText : 'Personalised Product Demo',
                        cancelButtonText: thisVar_1.reqDemoPopCancelbtnText ? thisVar_1.reqDemoPopCancelbtnText : 'Let Me Explore Myself',
                        allowOutsideClick: false
                    }).then(function (data) {
                        if (data.value) {
                            var url_1 = 'productdesigner/index/requestPopUpDemo';
                            var params = {
                                'reqParams': thisVar_1.params
                            };
                            thisVar_1.mainService.post(url_1, params, null).then(function (resp) {
                                sweetalert2__WEBPACK_IMPORTED_MODULE_6___default.a.fire({
                                    title: 'Alert!',
                                    text: thisVar_1.reqDemoThankyouPopupText ? thisVar_1.reqDemoThankyouPopupText : "Thank you for request",
                                    type: 'success',
                                    showCancelButton: false,
                                    confirmButtonText: 'OK',
                                    allowOutsideClick: false
                                });
                            }).catch(function (err) {
                                console.log(err);
                            });
                        }
                    });
                }, 60000);
                thisVar_1.cacheService.set(cacheKey, data, { maxAge: 1000 * 60 });
            }
        }
    };
    ProductDemoComponent.prototype.getFormData = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var cacheKey, data, url, params;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        cacheKey = 'requestfordemo-' + this.mainService.baseUrl;
                        if (!this.cacheService.exists(cacheKey)) return [3 /*break*/, 1];
                        data = this.cacheService.get(cacheKey);
                        this.recaptchaKey = data.recaptchaKey;
                        this.pricePageUrl = (data.pricingPageUrl == '' || data.pricingPageUrl == undefined || data.pricingPageUrl == null) ? '#' : data.pricingPageUrl;
                        this.priceButtonText = data.priceButtonText;
                        this.productDemoButtonText = data.productDemoButtonText;
                        this.countries = data.countries;
                        this.technologies = data.technologies;
                        this.technology = this.technologies[0];
                        this.reqDemoPopTitle = data.reqDemoPopTitle;
                        this.reqDemoPopText = data.reqDemoPopText;
                        this.reqDemoPopCancelbtnText = data.reqDemoPopCancelbtnText;
                        this.reqDemoThankyouPopupText = data.reqDemoThankyouPopupText;
                        this.cdr.detectChanges();
                        return [3 /*break*/, 3];
                    case 1:
                        url = 'productdesigner/index/getRequestDemoData';
                        params = {};
                        return [4 /*yield*/, this.mainService.getData(url, params, cacheKey).then(function (data) {
                                _this.cacheService.set(cacheKey, data, { maxAge: 15 * 60 });
                                _this.recaptchaKey = data.recaptchaKey;
                                _this.pricePageUrl = (data.pricingPageUrl == '' || data.pricingPageUrl == undefined || data.pricingPageUrl == null) ? '#' : data.pricingPageUrl;
                                _this.priceButtonText = data.priceButtonText;
                                _this.productDemoButtonText = data.productDemoButtonText;
                                _this.countries = data.countries;
                                _this.technologies = data.technologies;
                                _this.technology = _this.technologies[0];
                                _this.reqDemoPopTitle = data.reqDemoPopTitle;
                                _this.reqDemoPopText = data.reqDemoPopText;
                                _this.reqDemoPopCancelbtnText = data.reqDemoPopCancelbtnText;
                                _this.reqDemoThankyouPopupText = data.reqDemoThankyouPopupText;
                                _this.cdr.detectChanges();
                            })];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    ProductDemoComponent.prototype.productDemoPopupOpen = function () {
        this.modalRef = this.modalService.show(this.requestDemomodel, Object.assign({}, { class: 'byi-reqdemo-modal' }));
    };
    ProductDemoComponent.prototype.requestDemoSubmit = function () {
        var _this = this;
        if (this.requestDemoForm.valid) {
            this.modalRef.hide();
            this.loaderComponent.showMainLoader = true;
            var url = 'productdesigner/index/requestDemo';
            var param = {
                formData: this.requestDemoForm.value
            };
            this.mainService.post(url, param, null).then(function (resp) {
                _this.requestDemoForm.reset();
                _this.technology = _this.technologies[0];
                _this.country = "";
                _this.loaderComponent.showMainLoader = false;
                _this.showSuccessAlert();
            }).catch(function (err) {
                console.log(err);
            });
        }
        else {
            return;
        }
    };
    ProductDemoComponent.prototype.showSuccessAlert = function () {
        sweetalert2__WEBPACK_IMPORTED_MODULE_6___default.a.fire({
            title: 'Alert!',
            text: this.reqDemoThankyouPopupText ? this.reqDemoThankyouPopupText : "Thank you for request",
            type: 'success',
            confirmButtonText: 'OK',
            allowOutsideClick: false
        }).then(function (data) {
            if (data.value) {
            }
        });
    };
    ProductDemoComponent.prototype.resolved = function (event) {
        if (event) {
            this.isEnable = true;
        }
    };
    ProductDemoComponent.prototype.closeModel = function () {
        this.modalRef.hide();
    };
    ProductDemoComponent.prototype.openFloatingAction = function () {
        this.isFabOpen = !this.isFabOpen;
    };
    ProductDemoComponent.prototype.showLiveChat = function () {
        if (Tawk_API.isChatHidden()) {
            Tawk_API.showWidget();
            Tawk_API.maximize();
        }
        else {
            Tawk_API.hideWidget();
        }
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('requestDemomodel'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ProductDemoComponent.prototype, "requestDemomodel", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('loaderComponent'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _components_loader_loader_component__WEBPACK_IMPORTED_MODULE_7__["LoaderComponent"])
    ], ProductDemoComponent.prototype, "loaderComponent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ProductDemoComponent.prototype, "loadContent", void 0);
    ProductDemoComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[product-demo]',
            template: __webpack_require__(/*! ./product-demo.component.html */ "./src/app/demostore/product-demo/product-demo.component.html"),
            styles: [__webpack_require__(/*! ./product-demo.component.scss */ "./src/app/demostore/product-demo/product-demo.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_3__["BsModalService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormBuilder"],
            _services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_5__["CacheService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]])
    ], ProductDemoComponent);
    return ProductDemoComponent;
}());



/***/ }),

/***/ "./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.html":
/*!**************************************************************************************************************!*\
  !*** ./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.html ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byic-color\" *ngIf=\"isComponentLoad && type == 'simple'\">\n\t<button class=\"byic_color_action\" [style.background]=\"activeColor\" (click)=\"colorPickerToggleHideShow();\"></button>\n\t<div class=\"byic-colors-select byic-text-colors\" [attr.hidden]=\"hideColorToggle ? true : null\">\n\t\t<ng-container [ngTemplateOutlet]=\"customColorTabs\"></ng-container>\n\t\t<ng-container [ngSwitch]=\"viewMode\">\n\t\t\t<ul *ngSwitchCase=\"'preset'\">\n\t\t\t\t<li *ngFor=\"let color of colorarr\" [class.active]=\"color.color_code === activeColor\"\n\t\t\t\t\t(mousedown)=\"changeColor(color.color_code);\">\n\t\t\t\t\t<span [style.background]=\"color.color_code\" class=\"color_picker_item\"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<color-chrome *ngSwitchCase=\"'custom'\" [color]=\"activeColor\" (onChange)=\"handleChangeComplete($event)\">\n\t\t\t</color-chrome>\n\t\t</ng-container>\n\t</div>\n</div>\n<ng-container *ngIf=\"isComponentLoad && type == 'background'\">\n\t<li class=\"byic_color_action\" [style.background]=\"activeColor\" (click)=\"colorPickerToggleHideShow($event);\"></li>\n\t<div #colorPickerContainer class=\"byic-colors-select byic-text-colors\" [attr.hidden]=\"hideColorToggle ? true : null\">\n\t\t<ng-container [ngTemplateOutlet]=\"customColorTabs\"></ng-container>\n\t\t<ng-container [ngSwitch]=\"viewMode\">\n\t\t\t<ul *ngSwitchCase=\"'preset'\">\n\t\t\t\t<li *ngFor=\"let color of colorarr\" [class.active]=\"color.color_code === activeColor\">\n\t\t\t\t\t<span [style.background-color]=\"color.color_code\" (click)=\"changeBackgroundColor(color)\"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<color-chrome *ngSwitchCase=\"'custom'\" [color]=\"activeColor ? activeColor : activeBackGroundColor\"\n\t\t\t\t(onChange)=\"handleChangeComplete($event)\">\n\t\t\t</color-chrome>\n\t\t</ng-container>\n\t</div>\n\t<li class=\"byi-color-reset\" [style.background-color]=\"'#fff'\" (click)=\"resetBackground()\"></li>\n</ng-container>\n<ng-container *ngIf=\"isComponentLoad && type == 'imageEffect'\">\n\t<ng-container [ngTemplateOutlet]=\"customColorTabs\"></ng-container>\n\t<ng-container [ngSwitch]=\"viewMode\">\n\t\t<ul *ngSwitchCase=\"'preset'\">\n\t\t\t<li [class.active]=\"pcolor.color_code === activeColor\" *ngFor=\"let pcolor of colorarr\"\n\t\t\t\t(mousedown)=\"changeColor(pcolor.color_code)\">\n\t\t\t\t<span [style.background]=\"pcolor.color_code\" class=\"color_picker_item\"></span>\n\t\t\t</li>\n\t\t</ul>\n\t\t<color-chrome *ngSwitchCase=\"'custom'\" [color]=\"activeColor\" (onChange)=\"handleChangeComplete($event)\">\n\t\t</color-chrome>\n\t</ng-container>\n</ng-container>\n<ng-template #customColorTabs>\n\t<div class=\"byic-color-tabs\" *ngIf=\"isCustomColorPickerEnable\">\n\t\t<div class=\"byic-color-tab active\" [class.active]=\"viewMode == 'preset'\" (click)=\"changeTab('preset')\">\n\t\t\t<a href=\"javascript:void(0)\">Preset</a>\n\t\t</div>\n\t\t<div class=\"byic-color-tab\" [class.active]=\"viewMode == 'custom'\" (click)=\"changeTab('custom')\">\n\t\t\t<a href=\"javascript:void(0)\">Custom</a>\n\t\t</div>\n\t</div>\n</ng-template>"

/***/ }),

/***/ "./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.scss":
/*!**************************************************************************************************************!*\
  !*** ./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.scss ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvY3VzdG9tLWNvbG9yLXBpY2tlci9jb21wb25lbnQvY3VzdG9tLWNvbG9yLXBpY2tlci9jdXN0b20tY29sb3ItcGlja2VyLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.ts":
/*!************************************************************************************************************!*\
  !*** ./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.ts ***!
  \************************************************************************************************************/
/*! exports provided: CustomColorPickerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomColorPickerComponent", function() { return CustomColorPickerComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../../../../services/canvas.service */ "./src/app/services/canvas.service.ts");





var CustomColorPickerComponent = /** @class */ (function () {
    //Constructor
    function CustomColorPickerComponent(mainService, eventService, canvasService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.colorPickerToggle = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.changeColorEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.resetBackgroundEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.colorarr = [];
        this.viewMode = 'preset';
        this.isComponentLoad = false;
        this.activeBackGroundColor = '#fff';
        this.isCustomColorPickerEnable = false;
    }
    //On INIT
    CustomColorPickerComponent.prototype.ngOnInit = function () {
        this.getCustomColorPickerStatus();
        if (this.type === "simple") {
            if (this.hideColorToggle) {
                this.getColors();
            }
        }
        else if (this.type === "background") {
            this.getColors();
        }
        else if (this.type === "imageEffect") {
            this.getColors();
        }
    };
    CustomColorPickerComponent.prototype.getCustomColorPickerStatus = function () {
        var _this = this;
        var params = {}, url = 'customcolorpicker/index/getCustomColorPickerStatus', cacheKey = 'getCustomColorPickerStatus' + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey).then(function (data) {
            if (data.customcolorpickerstatus == '1') {
                _this.isCustomColorPickerEnable = true;
            }
            else {
                _this.isCustomColorPickerEnable = false;
            }
        }).catch(function (err) { return console.log(err); });
    };
    CustomColorPickerComponent.prototype.getColors = function () {
        var _this = this;
        if (this.mainService.colorData.color) {
            this.colorarr = this.mainService.colorData.color;
            this.isComponentLoad = true;
        }
        else {
            this.eventService.$sub('getColors', function (colorData) {
                _this.colorarr = colorData.color;
                _this.mainService.colorData.defaultColor = colorData.defaultColor;
                _this.isComponentLoad = true;
            });
        }
    };
    CustomColorPickerComponent.prototype.colorPickerToggleHideShow = function (event) {
        this.colorPickerToggle.next(event);
        if (this.type === "background") {
            if (this.mainService.isResponsive) {
                var windowWidth = window.outerWidth / 2, selectedElemLeft = event.target.getBoundingClientRect().left, selectedElemBottom = event.target.getBoundingClientRect().bottom, colorPickerWidth = this.colorPickerContainer.nativeElement.offsetWidth;
                selectedElemLeft += 13;
                if (selectedElemLeft > windowWidth && colorPickerWidth < selectedElemLeft) {
                    // this.isLeft = true;
                    this.colorPickerContainer.nativeElement.style.left = (selectedElemLeft) + 'px';
                }
                else {
                    this.colorPickerContainer.nativeElement.style.left = '5px';
                    this.colorPickerContainer.nativeElement.style.bottom = '80px';
                    // this.isLeft = false;
                }
            }
            else {
                var windowWidth = window.outerWidth / 2, selectedElemLeft = event.target.getBoundingClientRect().left, selectedElemTop = event.target.getBoundingClientRect().top, colorPickerWidth = this.colorPickerContainer.nativeElement.offsetWidth;
                selectedElemLeft += 13;
                if (selectedElemLeft > windowWidth && colorPickerWidth < selectedElemLeft) {
                    // this.isLeft = true;
                    this.colorPickerContainer.nativeElement.style.left = (selectedElemLeft) + 'px';
                }
                else {
                    this.colorPickerContainer.nativeElement.style.left = '5px';
                    this.colorPickerContainer.nativeElement.style.top = '72px';
                    // this.isLeft = false;
                }
            }
        }
        if (this.type === "imageEffect") {
        }
    };
    CustomColorPickerComponent.prototype.changeColor = function (colorCode) {
        this.changeColorEvent.next(colorCode);
    };
    CustomColorPickerComponent.prototype.changeBackgroundColor = function (color) {
        this.changeColorEvent.next(color);
    };
    CustomColorPickerComponent.prototype.resetBackground = function () {
        this.resetBackgroundEvent.next();
    };
    CustomColorPickerComponent.prototype.handleChangeComplete = function (event) {
        if (event) {
            if (this.type == "simple" || this.type == "imageEffect") {
                this.changeColorEvent.next('rgba(' + event.color.rgb.r + ',' + event.color.rgb.g + ',' + event.color.rgb.b + ',' + event.color.rgb.a + ')');
            }
            else if (this.type == "background") {
                this.activeBackGroundColor = 'rgba(' + event.color.rgb.r + ',' + event.color.rgb.g + ',' + event.color.rgb.b + ',' + event.color.rgb.a + ')';
                var color = {
                    color_code: 'rgba(' + event.color.rgb.r + ',' + event.color.rgb.g + ',' + event.color.rgb.b + ',' + event.color.rgb.a + ')' //event.color.hex
                };
                this.changeBackgroundColor(color);
            }
        }
    };
    CustomColorPickerComponent.prototype.changeTab = function (tab) {
        this.viewMode = tab;
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('colorPickerContainer'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"])
    ], CustomColorPickerComponent.prototype, "colorPickerContainer", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomColorPickerComponent.prototype, "activeColor", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomColorPickerComponent.prototype, "type", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomColorPickerComponent.prototype, "hideColorToggle", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomColorPickerComponent.prototype, "svgColorArr", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomColorPickerComponent.prototype, "isLeft", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomColorPickerComponent.prototype, "colorPickerToggle", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomColorPickerComponent.prototype, "changeColorEvent", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], CustomColorPickerComponent.prototype, "resetBackgroundEvent", void 0);
    CustomColorPickerComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[custom-color-picker]',
            template: __webpack_require__(/*! ./custom-color-picker.component.html */ "./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.html"),
            styles: [__webpack_require__(/*! ./custom-color-picker.component.scss */ "./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"]])
    ], CustomColorPickerComponent);
    return CustomColorPickerComponent;
}());



/***/ }),

/***/ "./src/app/modules/custom-color-picker/custom-color-picker.module.ts":
/*!***************************************************************************!*\
  !*** ./src/app/modules/custom-color-picker/custom-color-picker.module.ts ***!
  \***************************************************************************/
/*! exports provided: CustomColorPickerModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomColorPickerModule", function() { return CustomColorPickerModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var ngx_color_chrome__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-color/chrome */ "./node_modules/ngx-color/chrome/fesm5/ngx-color-chrome.js");
/* harmony import */ var _component_custom_color_picker_custom_color_picker_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./component/custom-color-picker/custom-color-picker.component */ "./src/app/modules/custom-color-picker/component/custom-color-picker/custom-color-picker.component.ts");





var CustomColorPickerModule = /** @class */ (function () {
    function CustomColorPickerModule() {
    }
    CustomColorPickerModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
            declarations: [_component_custom_color_picker_custom_color_picker_component__WEBPACK_IMPORTED_MODULE_4__["CustomColorPickerComponent"]],
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
                ngx_color_chrome__WEBPACK_IMPORTED_MODULE_3__["ColorChromeModule"]
            ],
            exports: [_component_custom_color_picker_custom_color_picker_component__WEBPACK_IMPORTED_MODULE_4__["CustomColorPickerComponent"]]
        })
    ], CustomColorPickerModule);
    return CustomColorPickerModule;
}());



/***/ }),

/***/ "./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.html":
/*!***********************************************************************************************!*\
  !*** ./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.html ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"month-containter\">\n\t<div class=\"month-container-inner\">\n\t\t<label>Starting Month</label>\n\t\t<div class=\"byi-select select-style\">\n\t\t\t<select (change)=\"changeCalendarMonth($event)\" class=\"select_months validate-select\" id=\"select_months\"\n\t\t\t\tname=\"select_months\">\n\t\t\t\t<option value=\"{{calender['value']}}\" *ngFor=\"let calender of calenderData\">{{calender['label']}}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t\t<span class=\"caret\"></span>\n\t\t</div>\n\t</div>\n</div>"

/***/ }),

/***/ "./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.scss":
/*!***********************************************************************************************!*\
  !*** ./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.scss ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvcGhvdG8tY2FsZW5kYXIvY29tcG9uZW50L3Bob3RvLWNhbGVuZGFyL3Bob3RvLWNhbGVuZGFyLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.ts":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.ts ***!
  \*********************************************************************************************/
/*! exports provided: PhotoCalendarComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PhotoCalendarComponent", function() { return PhotoCalendarComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");




var PhotoCalendarComponent = /** @class */ (function () {
    function PhotoCalendarComponent(canvasService, eventService) {
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.calenderData = [];
        this.canvasImages = [];
        this.containerCloneCanvases = {};
    }
    PhotoCalendarComponent.prototype.ngOnInit = function () {
        this.loadCalendarMonths();
    };
    PhotoCalendarComponent.prototype.loadCalendarMonths = function () {
        var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        var canvasImagesData = this.canvasService.allImages;
        this.canvasImages = this.canvasService.allImages;
        var d = new Date();
        var currentMonth = d.getMonth();
        var currentYear = d.getFullYear();
        var breakFlag = false;
        var maximumYear = Math.max.apply(null, canvasImagesData.map(function (o) { return o.year; }));
        var totalYears = (maximumYear + 1) - currentYear;
        for (var i = 0; i < totalYears; ++i) {
            var year = currentYear + i;
            if (i + 1 == totalYears) {
                breakFlag = true;
            }
            for (var key in months) {
                if (parseInt(key) < currentMonth && currentYear == year) {
                    continue;
                }
                var month = months[key];
                var month_year = [];
                month_year['label'] = month + " " + year;
                month_year['value'] = parseInt(key) + 1 + "-" + year;
                this.calenderData.push(month_year);
                if (breakFlag) {
                    break;
                }
            }
        }
        if (this.calenderData.length > 0) {
            this.changeSideImages(this.calenderData[0].value);
        }
    };
    PhotoCalendarComponent.prototype.changeCalendarMonth = function (event) {
        var value = event.currentTarget.value;
        this.changeSideImages(value);
    };
    PhotoCalendarComponent.prototype.changeSideImages = function (value) {
        if (value) {
            var monthYear = value;
            var monthYearArray = monthYear.split("-");
            var month = monthYearArray[0];
            var year = monthYearArray[1];
            var backPage = void 0;
            var nextYearPages = [];
            this.canvasImages = [];
            var selectedMonthSide = '';
            for (var key in this.canvasService.allImages) {
                /**
                 * If month is Cover page and year is same then push it first
                 */
                if (this.canvasService.allImages[key].month == 0 && this.canvasService.allImages[key].year == year) {
                    selectedMonthSide = this.canvasService.allImages[key];
                    this.canvasImages.push(selectedMonthSide);
                }
                if (parseInt(this.canvasService.allImages[key].month) == parseInt(month) && this.canvasService.allImages[key].year == year && !selectedMonthSide) {
                    selectedMonthSide = this.canvasService.allImages[key].image_id;
                }
                if (parseInt(this.canvasService.allImages[key].month) + 1 <= parseInt(month) && this.canvasService.allImages[key].year == year) {
                    continue;
                }
                if (this.canvasService.allImages[key].year == year) {
                    this.canvasImages.push(this.canvasService.allImages[key]);
                }
                else if (this.canvasService.allImages[key].year != year && parseInt(this.canvasService.allImages[key].month) < parseInt(month) && this.canvasService.allImages[key].month != 0 && this.canvasService.allImages[key].month != 13) {
                    nextYearPages.push(this.canvasService.allImages[key]);
                }
                else if (this.canvasService.allImages[key].month == 13 && (this.canvasService.allImages[key].year == year || this.canvasService.allImages[key].year == 0)) {
                    backPage = this.canvasService.allImages[key];
                }
            }
            if (nextYearPages.length > 0) {
                for (var key in nextYearPages) {
                    this.canvasImages.push(nextYearPages[key]);
                }
            }
            if (backPage != undefined) {
                this.canvasImages.push(backPage);
            }
            if (Object.keys(this.containerCloneCanvases).length == 0) {
                this.containerCloneCanvases = Object.assign({}, this.canvasService.containerCanvases);
            }
            this.canvasService.containerCanvases = Object.assign({}, this.containerCloneCanvases);
            for (var _i = 0, _a = Object.keys(this.canvasService.containerCanvases); _i < _a.length; _i++) {
                var key = _a[_i];
                var canvas = this.canvasService.containerCanvases[key];
                if (!this.findCanvasImageId(canvas.image_id)) {
                    this.cloneCanvas(canvas, key);
                    delete this.canvasService.containerCanvases[key];
                }
            }
            this.changeSlide(selectedMonthSide, 0);
        }
        else {
            this.canvasImages = this.canvasService.allImages;
            this.canvasService.containerCanvases = Object.assign({}, this.containerCloneCanvases);
            this.changeSlide(this.canvasImages[0].image_id, 0);
        }
    };
    PhotoCalendarComponent.prototype.cloneCanvas = function (canvasNew, key) {
        this.containerCloneCanvases[key] = canvasNew;
    };
    PhotoCalendarComponent.prototype.changeSlide = function (image_id, slide) {
        var data = {
            image_id: image_id,
            slide: slide,
            canvasImages: this.canvasImages
        };
        this.eventService.$pub('changeSlider', data);
    };
    PhotoCalendarComponent.prototype.findCanvasImageId = function (canvasimageid) {
        var returnVal = false;
        for (var i = 0; i < this.canvasImages.length; i++) {
            if (this.canvasImages[i].image_id == canvasimageid) {
                returnVal = true;
            }
        }
        return returnVal;
    };
    PhotoCalendarComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[photo-calendar]',
            template: __webpack_require__(/*! ./photo-calendar.component.html */ "./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.html"),
            styles: [__webpack_require__(/*! ./photo-calendar.component.scss */ "./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_2__["CanvasService"], angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubService"]])
    ], PhotoCalendarComponent);
    return PhotoCalendarComponent;
}());



/***/ }),

/***/ "./src/app/modules/photo-calendar/photo-calendar.module.ts":
/*!*****************************************************************!*\
  !*** ./src/app/modules/photo-calendar/photo-calendar.module.ts ***!
  \*****************************************************************/
/*! exports provided: PhotoCalendarModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PhotoCalendarModule", function() { return PhotoCalendarModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _component_photo_calendar_photo_calendar_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./component/photo-calendar/photo-calendar.component */ "./src/app/modules/photo-calendar/component/photo-calendar/photo-calendar.component.ts");




var PhotoCalendarModule = /** @class */ (function () {
    function PhotoCalendarModule() {
    }
    PhotoCalendarModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
            declarations: [_component_photo_calendar_photo_calendar_component__WEBPACK_IMPORTED_MODULE_3__["PhotoCalendarComponent"]],
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
            ],
            exports: [_component_photo_calendar_photo_calendar_component__WEBPACK_IMPORTED_MODULE_3__["PhotoCalendarComponent"]]
        })
    ], PhotoCalendarModule);
    return PhotoCalendarModule;
}());



/***/ }),

/***/ "./src/app/modules/product-template/component/apply-images/apply-images.component.html":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/apply-images/apply-images.component.html ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-container *ngIf=\"mainService.loadedProductData && mainService.loadedProductData.designerProductType\">\n\t<p class=\"pending-images\">\n\t\t{{'Total Pending images' | translate}} : {{productTemplateService.pendingImages}}\n\t</p>\n\t<button *ngIf=\"files.length > 0\" (click)=\"applyImages()\" class=\"byi-btn byi-btn-xs\" type=\"button\">{{'Apply Images' | translate}}</button>\n</ng-container>"

/***/ }),

/***/ "./src/app/modules/product-template/component/apply-images/apply-images.component.scss":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/apply-images/apply-images.component.scss ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvcHJvZHVjdC10ZW1wbGF0ZS9jb21wb25lbnQvYXBwbHktaW1hZ2VzL2FwcGx5LWltYWdlcy5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/modules/product-template/component/apply-images/apply-images.component.ts":
/*!*******************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/apply-images/apply-images.component.ts ***!
  \*******************************************************************************************/
/*! exports provided: ApplyImagesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ApplyImagesComponent", function() { return ApplyImagesComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_add_image_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/add-image.service */ "./src/app/services/add-image.service.ts");
/* harmony import */ var src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var _product_template_product_template_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../product-template/product-template.service */ "./src/app/modules/product-template/component/product-template/product-template.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");







var ApplyImagesComponent = /** @class */ (function () {
    function ApplyImagesComponent(addImageService, canvasService, productTemplateService, eventService, mainService) {
        this.addImageService = addImageService;
        this.canvasService = canvasService;
        this.productTemplateService = productTemplateService;
        this.eventService = eventService;
        this.mainService = mainService;
        this.appliedImagesConter = 0;
    }
    ApplyImagesComponent.prototype.ngOnInit = function () {
        this.getNumberOfPendingImages();
        var self = this;
        this.eventService.$sub('loadProduct', function (object) {
            self.getNumberOfPendingImages();
        });
        this.eventService.$sub('objectAdded', function (object) {
            self.getNumberOfPendingImages();
        });
        this.eventService.$sub('objectRemoved', function (object) {
            self.getNumberOfPendingImages();
        });
    };
    ApplyImagesComponent.prototype.getNumberOfPendingImages = function () {
        this.productTemplateService.pendingImages = 0;
        if (this.mainService.loadedProductData && this.mainService.loadedProductData.designerProductType) {
            for (var _i = 0, _a = Object.keys(this.canvasService.containerCanvases); _i < _a.length; _i++) {
                var key = _a[_i];
                if (this.productTemplateService.maskingContainerIndex[key]) {
                    var currentCounter = this.productTemplateService.maskingContainerIndex[key];
                    for (var i = 0; i < currentCounter.length; i++) {
                        if (currentCounter[i] == 0) {
                            this.productTemplateService.pendingImages++;
                        }
                    }
                }
            }
        }
    };
    ApplyImagesComponent.prototype.applyImages = function () {
        var properties = { tab: this.byitab };
        this.addImageAtPath(this.files, properties);
    };
    ApplyImagesComponent.prototype.addImageAtPath = function (files, properties) {
        if (files[this.appliedImagesConter]) {
            var imageURL = files[this.appliedImagesConter].medium_url;
            var self_1 = this;
            var data = this.searchCanvasHavingMask();
            if (data) {
                this.eventService.$pub('changeImageSide', { canvas: data.canvas, index: data.index });
                this.addImageService.addImage(imageURL, properties).then(function (resp) {
                    self_1.appliedImagesConter++;
                    self_1.addImageAtPath(files, properties);
                }).catch(function (err) { return console.log(err); });
            }
        }
        else {
            this.appliedImagesConter = 0;
        }
    };
    ApplyImagesComponent.prototype.searchCanvasHavingMask = function () {
        var index = 0;
        for (var _i = 0, _a = Object.keys(this.canvasService.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            if (this.productTemplateService.maskingContainerIndex[key]) {
                var currentCounter = this.productTemplateService.maskingContainerIndex[key];
                for (var i = 0; i < currentCounter.length; i++) {
                    if (currentCounter[i] == 0) {
                        var data = {
                            canvas: this.canvasService.containerCanvases[key],
                            index: index
                        };
                        return data;
                    }
                }
            }
            index++;
        }
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ApplyImagesComponent.prototype, "files", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ApplyImagesComponent.prototype, "byitab", void 0);
    ApplyImagesComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[apply-images]',
            template: __webpack_require__(/*! ./apply-images.component.html */ "./src/app/modules/product-template/component/apply-images/apply-images.component.html"),
            styles: [__webpack_require__(/*! ./apply-images.component.scss */ "./src/app/modules/product-template/component/apply-images/apply-images.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_add_image_service__WEBPACK_IMPORTED_MODULE_2__["AddImageService"], src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"], _product_template_product_template_service__WEBPACK_IMPORTED_MODULE_5__["ProductTemplateService"], angular7_pubsub__WEBPACK_IMPORTED_MODULE_6__["PubSubService"], src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"]])
    ], ApplyImagesComponent);
    return ApplyImagesComponent;
}());



/***/ }),

/***/ "./src/app/modules/product-template/component/image-slider/image-slider.component.html":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/image-slider/image-slider.component.html ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div photo-calendar></div>\n<ngu-carousel #myCarousel [inputs]=\"carouselConfig\" [dataSource]=\"canvasImages\"  (onMove)=\"onmoveFn($event)\">\n\t<div *nguCarouselDef=\"let image;let i = index\" class=\"item\" [ngClass]=\"{active: activeSlide == image.image_id}\"  (click)=\"changeSlide(image.image_id, i)\" >\n\t\t<div class=\"tile\" style=\"position: relative;\">\n\t\t\t<img [src]=\"image.url\" title=\"{{image.image_title}}\">\n\t\t\t<img *ngIf=\"image.dataurl\" [src]=\"image.dataurl\" class=\"dataurl\" style=\"position: absolute;left: 0\">\n\t\t</div>\n\t</div>\n\t<button *ngIf=\"enableNext\" NguCarouselNext class=\"byi__arrow byi__arrow--right\">&gt;</button>\n\t<button *ngIf=\"enablePrev\" NguCarouselPrev class=\"byi__arrow byi__arrow--left\">&lt;</button>\n</ngu-carousel>"

/***/ }),

/***/ "./src/app/modules/product-template/component/image-slider/image-slider.component.scss":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/image-slider/image-slider.component.scss ***!
  \*********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvcHJvZHVjdC10ZW1wbGF0ZS9jb21wb25lbnQvaW1hZ2Utc2xpZGVyL2ltYWdlLXNsaWRlci5jb21wb25lbnQuc2NzcyJ9 */"

/***/ }),

/***/ "./src/app/modules/product-template/component/image-slider/image-slider.component.ts":
/*!*******************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/image-slider/image-slider.component.ts ***!
  \*******************************************************************************************/
/*! exports provided: ImageSliderComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageSliderComponent", function() { return ImageSliderComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ngu_carousel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ngu/carousel */ "./node_modules/@ngu/carousel/fesm5/ngu-carousel.js");
/* harmony import */ var src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");





var ImageSliderComponent = /** @class */ (function () {
    function ImageSliderComponent(cdr, eventService, canvasService) {
        this.cdr = cdr;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.enableNext = 1;
        this.enablePrev = 0;
        this.changeSlider = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.carouselConfig = {
            grid: { xs: 3, sm: 3, md: 5, lg: 5, all: 0 },
            load: 1,
            interval: { timing: 4000, initialDelay: 1000 },
            loop: false,
            touch: false,
            velocity: 0.2,
        };
        this.subscribeEvents();
    }
    ImageSliderComponent.prototype.subscribeEvents = function () {
        var self = this;
        this.eventService.$sub('objectAdded', function (obj) {
            self.reflectThumbnails(obj);
        });
        this.eventService.$sub('objectRemoved', function (obj) {
            self.reflectThumbnails(obj);
        });
        this.eventService.$sub('objectUpdated', function (obj) {
            self.reflectThumbnails(obj);
        });
        this.eventService.$sub('canvasObjectModified', function (obj) {
            self.reflectThumbnails(obj);
        });
        this.eventService.$sub('changeSlider', function (data) {
            self.canvasImages = data.canvasImages;
            self.changeSlide(data.image_id, data.slide);
        });
    };
    ImageSliderComponent.prototype.reflectThumbnails = function (object) {
        var obj = object.length > 0 ? object[0] : object;
        if (obj.imageDesignId) {
            var imageId_1 = obj.imageDesignId.split("&");
            var canvas = this.canvasService.containerCanvases[obj.imageDesignId];
            var dataurl = canvas.toDataURL({
                format: "png",
                multiplier: 60 / canvas.width,
                quality: 1.0
            });
            var image = this.canvasService.allImages.filter(function (data) { return '@' + data.image_id == imageId_1[0]; });
            if (image.length > 0) {
                image[0].dataurl = dataurl;
            }
        }
    };
    ImageSliderComponent.prototype.ngAfterViewInit = function () {
        this.cdr.detectChanges();
    };
    ImageSliderComponent.prototype.changeSlide = function (image_id, slide) {
        this.activeSlide = image_id;
        var data = {
            image_id: image_id,
            slide: slide,
        };
        this.changeSlider.emit(data);
    };
    ImageSliderComponent.prototype.onmoveFn = function ($event) {
        if ($event.isFirst) {
            this.enablePrev = 0;
            this.enableNext = 1;
        }
        else if ($event.isLast) {
            this.enableNext = 0;
            this.enablePrev = 1;
        }
        else {
            this.enablePrev = 1;
            this.enableNext = 1;
        }
    };
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ImageSliderComponent.prototype, "canvasImages", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ImageSliderComponent.prototype, "activeSlide", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])(),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], ImageSliderComponent.prototype, "changeSlider", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('myCarousel'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", _ngu_carousel__WEBPACK_IMPORTED_MODULE_2__["NguCarousel"])
    ], ImageSliderComponent.prototype, "myCarousel", void 0);
    ImageSliderComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[image-slider]',
            template: __webpack_require__(/*! ./image-slider.component.html */ "./src/app/modules/product-template/component/image-slider/image-slider.component.html"),
            styles: [__webpack_require__(/*! ./image-slider.component.scss */ "./src/app/modules/product-template/component/image-slider/image-slider.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"], angular7_pubsub__WEBPACK_IMPORTED_MODULE_4__["PubSubService"], src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"]])
    ], ImageSliderComponent);
    return ImageSliderComponent;
}());



/***/ }),

/***/ "./src/app/modules/product-template/component/product-template/product-template.component.html":
/*!*****************************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/product-template/product-template.component.html ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./src/app/modules/product-template/component/product-template/product-template.component.scss":
/*!*****************************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/product-template/product-template.component.scss ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvcHJvZHVjdC10ZW1wbGF0ZS9jb21wb25lbnQvcHJvZHVjdC10ZW1wbGF0ZS9wcm9kdWN0LXRlbXBsYXRlLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/modules/product-template/component/product-template/product-template.component.ts":
/*!***************************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/product-template/product-template.component.ts ***!
  \***************************************************************************************************/
/*! exports provided: ProductTemplateComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProductTemplateComponent", function() { return ProductTemplateComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fabric */ "./node_modules/fabric/dist/fabric.js");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fabric__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _product_template_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./product-template.service */ "./src/app/modules/product-template/component/product-template/product-template.service.ts");
/* harmony import */ var src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/app/services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");







var ProductTemplateComponent = /** @class */ (function () {
    function ProductTemplateComponent(eventService, productTemplateService, canvasService, mainService) {
        this.eventService = eventService;
        this.productTemplateService = productTemplateService;
        this.canvasService = canvasService;
        this.mainService = mainService;
        var params = this.mainService.getUrlParams(['imageid']);
        if (!params['imageid']) {
            return;
        }
        var imageid = atob(params['imageid']);
        var param = {
            imageid: imageid
        };
        this.mainService.otherOptions.push(param);
    }
    ProductTemplateComponent.prototype.ngOnInit = function () {
        this.subScribeEvents();
    };
    ProductTemplateComponent.prototype.subScribeEvents = function () {
        var _this = this;
        this.eventService.$sub('canvasCreated', function (canvas) {
            if (canvas.dim.pathMasking && canvas.dim.mask) {
                _this.applyMasking(canvas);
            }
        });
        this.eventService.$sub('zoomCanvasUpdated', function (canvas) {
            if (canvas.dim.pathMasking && canvas.dim.mask) {
                _this.applyMasking(canvas);
            }
        });
        this.eventService.$sub('objectAddedBefore', function (object) {
            if (_this.mainService.loadedProductData && _this.mainService.loadedProductData.designerProductType) {
                var obj = (object.length > 0) ? object[0] : object;
                if (obj.type == 'image' || obj.type == 'path' || obj.type == 'path-group' || obj.type == 'group') {
                    _this.applyMaskToObject(obj);
                }
            }
        });
        this.eventService.$sub('objectAdded', function (object) {
            if (_this.mainService.loadedProductData && _this.mainService.loadedProductData.designerProductType) {
                var obj = (object.length > 0) ? object[0] : object;
                if (obj.type == 'image' || obj.type == 'path' || obj.type == 'path-group' || obj.type == 'group') {
                    _this.sendObjectToBack(obj);
                }
            }
        });
        this.eventService.$sub('objectRemoved', function (objects) {
            if (_this.mainService.loadedProductData && _this.mainService.loadedProductData.designerProductType) {
                var object = void 0;
                if (Array.isArray(objects)) {
                    object = objects.filter(function (obj) { return obj.type == 'image' || obj.type == 'path' || obj.type == 'path-group' || obj.type == 'group'; });
                }
                else {
                    object = objects;
                }
                _this.removeMaskToObject(object);
            }
        });
    };
    ProductTemplateComponent.prototype.applyMasking = function (canvas) {
        this.setProductImage(canvas);
        var self = this;
        var xml_val = canvas.dim.mask;
        var maskWidth = parseFloat(canvas.dim.maskWidth);
        var maskHeight = parseFloat(canvas.dim.maskHeight);
        var xmlObject = document.createElement('div');
        xmlObject.innerHTML = xml_val;
        var paths = xmlObject.getElementsByTagName("path");
        var currentMaskContainer = self.productTemplateService.maskingContainer['@' + canvas.dim.image_id + '&' + canvas.dim.designareaId];
        if (currentMaskContainer) {
            var len = currentMaskContainer.length;
            for (var _i = 0, currentMaskContainer_1 = currentMaskContainer; _i < currentMaskContainer_1.length; _i++) {
                var path = currentMaskContainer_1[_i];
                this.canvasService.resizeObjectAsPerScale(path);
                canvas.renderAll();
            }
        }
        else {
            self.productTemplateService.maskingContainer['@' + canvas.dim.image_id + '&' + canvas.dim.designareaId] = [];
            self.productTemplateService.maskingContainerIndex['@' + canvas.dim.image_id + '&' + canvas.dim.designareaId] = [];
            var i_1 = 0;
            for (; i_1 < paths.length; i_1++) {
                fabric__WEBPACK_IMPORTED_MODULE_3__["fabric"].Path.fromElement(paths[i_1], function (path) {
                    path.fill = 'rgba(0, 0, 0, 0)';
                    var canvasWidth = canvas.width;
                    var canvasHeight = canvas.height;
                    path.scale(canvasWidth / maskWidth);
                    path.setCoords();
                    var left = (canvasWidth * (path.left)) / maskWidth;
                    var top = (canvasHeight * (path.top)) / maskHeight;
                    path.setPositionByOrigin(new fabric__WEBPACK_IMPORTED_MODULE_3__["fabric"].Point(left, top), 'left', 'top');
                    var topD = path.top;
                    var leftD = path.left;
                    path.set({
                        clipFor: i_1,
                        top: topD,
                        left: leftD,
                        evented: false,
                        selectable: false,
                        customType: 'mask',
                        objectCaching: false,
                        absolutePositioned: true,
                        customWidth: ((canvasWidth * (path.height)) / maskWidth),
                        customHeight: ((canvasHeight * (path.height)) / maskHeight),
                        scaleFactor: self.canvasService.scaleFactor
                    });
                    /**
                     * Path are stored with design area key
                     */
                    self.productTemplateService.maskingContainer['@' + canvas.dim.image_id + '&' + canvas.dim.designareaId][i_1] = path;
                    /**
                     * Initailize Index key to 0;
                     */
                    self.productTemplateService.maskingContainerIndex['@' + canvas.dim.image_id + '&' + canvas.dim.designareaId][i_1] = 0;
                });
            }
            self.productTemplateService.maskingCounter['@' + canvas.dim.image_id + '&' + canvas.dim.designareaId] = i_1;
        }
    };
    ProductTemplateComponent.prototype.setProductImage = function (canvas) {
        var objects = canvas.getObjects();
        var object = objects.filter(function (obj) { return obj.productimage == true; });
        if (object.length != 0) {
            return;
        }
        var self = this;
        var productImage = canvas.url;
        fabric__WEBPACK_IMPORTED_MODULE_3__["fabric"].Image.fromURL(productImage, function (img) {
            var oImg = img.set({
                evented: false,
                selectable: false,
                productimage: true,
                src: productImage,
                top: 0,
                left: 0,
            }).scale(1 / self.canvasService.scaleFactor);
            canvas.add(oImg).renderAll();
            canvas.sendToBack(oImg);
        });
    };
    ProductTemplateComponent.prototype.applyMaskToObject = function (obj) {
        var self = this;
        var clipPath = this.getClipPath(obj);
        if (clipPath && obj.productimage != true) {
            var scaleVal1 = clipPath.customWidth / (obj.width);
            var scaleVal2 = clipPath.customHeight / (obj.height);
            var scaleVal = Math.max(scaleVal1, scaleVal2);
            obj.set({
                left: clipPath.left,
                top: clipPath.top,
                scaleX: scaleVal,
                scaleY: scaleVal,
                clipPath: clipPath,
                clipName: clipPath.clipFor,
                isCenter: false
            });
            var canvas = self.canvasService.containerCanvases[obj.imageDesignId];
            /*
            We set flag to 1 if object is added to that mask
            */
            this.productTemplateService.maskingContainerIndex[obj.imageDesignId][obj.clipName] = 1;
            this.productTemplateService.pendingImages--;
            /*
            Reposition object with
            */
            this.repositionObj(obj, clipPath, scaleVal);
        }
    };
    ProductTemplateComponent.prototype.sendObjectToBack = function (obj) {
        if (obj.clipPath) {
            var canvas = this.canvasService.containerCanvases[obj.imageDesignId];
            obj.moveTo(-1);
            canvas.sendToBack(obj);
        }
    };
    ProductTemplateComponent.prototype.getClipPath = function (obj) {
        var currentCounter = this.productTemplateService.maskingContainerIndex[obj.imageDesignId];
        for (var i = 0; i < currentCounter.length; i++) {
            if (currentCounter[i] == 0) {
                return this.productTemplateService.maskingContainer[obj.imageDesignId][i];
            }
        }
    };
    ProductTemplateComponent.prototype.removeMaskToObject = function (obj) {
        if (obj.length > 0) {
            for (var i = 0; i < obj.length; i++) {
                if (obj[i].clipPath) {
                    this.productTemplateService.maskingContainerIndex[obj[i].imageDesignId][obj[i].clipName] = 0;
                    this.productTemplateService.pendingImages++;
                }
            }
        }
        else {
            this.productTemplateService.maskingContainerIndex[obj.imageDesignId][obj.clipName] = 0;
            this.productTemplateService.pendingImages++;
        }
    };
    ProductTemplateComponent.prototype.repositionObj = function (obj, clipPath, scaleVal) {
        if (scaleVal != 1) {
            var top_1 = obj.top - (((obj.height * obj.scaleY) - clipPath.customHeight) / 2);
            var left = obj.left - (((obj.width * obj.scaleX) - clipPath.customWidth) / 2);
            obj.set({
                left: left,
                top: top_1
            });
            obj.setCoords();
        }
    };
    ProductTemplateComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[product-template]',
            template: __webpack_require__(/*! ./product-template.component.html */ "./src/app/modules/product-template/component/product-template/product-template.component.html"),
            styles: [__webpack_require__(/*! ./product-template.component.scss */ "./src/app/modules/product-template/component/product-template/product-template.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"], _product_template_service__WEBPACK_IMPORTED_MODULE_4__["ProductTemplateService"], src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_5__["CanvasService"], src_app_services_main_service__WEBPACK_IMPORTED_MODULE_6__["MainService"]])
    ], ProductTemplateComponent);
    return ProductTemplateComponent;
}());



/***/ }),

/***/ "./src/app/modules/product-template/component/product-template/product-template.service.ts":
/*!*************************************************************************************************!*\
  !*** ./src/app/modules/product-template/component/product-template/product-template.service.ts ***!
  \*************************************************************************************************/
/*! exports provided: ProductTemplateService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProductTemplateService", function() { return ProductTemplateService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var ProductTemplateService = /** @class */ (function () {
    function ProductTemplateService() {
        this.maskingContainer = [];
        this.maskingContainerIndex = [];
        this.maskingCounter = [];
        this.pendingImages = 0;
    }
    ProductTemplateService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], ProductTemplateService);
    return ProductTemplateService;
}());



/***/ }),

/***/ "./src/app/modules/product-template/product-template.module.ts":
/*!*********************************************************************!*\
  !*** ./src/app/modules/product-template/product-template.module.ts ***!
  \*********************************************************************/
/*! exports provided: HttpLoaderFactory, ProductTemplateModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpLoaderFactory", function() { return HttpLoaderFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProductTemplateModule", function() { return ProductTemplateModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _component_product_template_product_template_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./component/product-template/product-template.component */ "./src/app/modules/product-template/component/product-template/product-template.component.ts");
/* harmony import */ var _ngu_carousel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ngu/carousel */ "./node_modules/@ngu/carousel/fesm5/ngu-carousel.js");
/* harmony import */ var _component_image_slider_image_slider_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./component/image-slider/image-slider.component */ "./src/app/modules/product-template/component/image-slider/image-slider.component.ts");
/* harmony import */ var _component_apply_images_apply_images_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./component/apply-images/apply-images.component */ "./src/app/modules/product-template/component/apply-images/apply-images.component.ts");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ngx-translate/http-loader */ "./node_modules/@ngx-translate/http-loader/fesm5/ngx-translate-http-loader.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var src_app_modules_photo_calendar_photo_calendar_module__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! src/app/modules/photo-calendar/photo-calendar.module */ "./src/app/modules/photo-calendar/photo-calendar.module.ts");











function HttpLoaderFactory(httpClient) {
    return new _ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_8__["TranslateHttpLoader"](httpClient);
}
var ProductTemplateModule = /** @class */ (function () {
    function ProductTemplateModule() {
    }
    ProductTemplateModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
            declarations: [_component_product_template_product_template_component__WEBPACK_IMPORTED_MODULE_3__["ProductTemplateComponent"], _component_image_slider_image_slider_component__WEBPACK_IMPORTED_MODULE_5__["ImageSliderComponent"], _component_apply_images_apply_images_component__WEBPACK_IMPORTED_MODULE_6__["ApplyImagesComponent"]],
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
                _ngu_carousel__WEBPACK_IMPORTED_MODULE_4__["NguCarouselModule"],
                src_app_modules_photo_calendar_photo_calendar_module__WEBPACK_IMPORTED_MODULE_10__["PhotoCalendarModule"],
                _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__["TranslateModule"].forRoot({
                    loader: {
                        provide: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__["TranslateLoader"],
                        useFactory: HttpLoaderFactory,
                        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_9__["HttpClient"]]
                    }
                }),
            ],
            exports: [_component_product_template_product_template_component__WEBPACK_IMPORTED_MODULE_3__["ProductTemplateComponent"], _component_image_slider_image_slider_component__WEBPACK_IMPORTED_MODULE_5__["ImageSliderComponent"], _component_apply_images_apply_images_component__WEBPACK_IMPORTED_MODULE_6__["ApplyImagesComponent"]]
        })
    ], ProductTemplateModule);
    return ProductTemplateModule;
}());



/***/ }),

/***/ "./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.html":
/*!**************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.html ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-or-saperator\">\n\t<span>OR</span>\n</div>\n<div class=\"byi-social-upload\">\n\t<ul>\n\t\t<li>\n\t\t\t<a class=\"icon icon-upfacebook\" href=\"javascript:void(0)\" (click)=\"loginWithFacebook()\">\n\t\t\t\t<svg viewBox=\"0 0 30 30\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-upfacebook\"></use>\n\t\t\t\t</svg>\n\t\t\t</a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a class=\"icon icon-upinsta\" href=\"javascript:void(0)\" (click)=\"onLoginWithInstagram()\">\n\t\t\t\t<svg viewBox=\"0 0 30 30\">\n\t\t\t\t\t<use xlink:href=\"assets/img/sprite.svg#icon-upinsta\"></use>\n\t\t\t\t</svg>\n\t\t\t</a>\n\t\t</li>\n\t</ul>\n</div>"

/***/ }),

/***/ "./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.scss":
/*!**************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.scss ***!
  \**************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvc29jaWFsLW1lZGlhLWltcG9ydC9jb21wb25lbnQvc29jaWFsLW1lZGlhLWltcG9ydC9zb2NpYWwtbWVkaWEtaW1wb3J0LmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.ts":
/*!************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.ts ***!
  \************************************************************************************************************/
/*! exports provided: SocialMediaImportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SocialMediaImportComponent", function() { return SocialMediaImportComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var ngx_facebook__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngx-facebook */ "./node_modules/ngx-facebook/dist/esm/index.js");





var SocialMediaImportComponent = /** @class */ (function () {
    function SocialMediaImportComponent(mainService, eventService) {
        this.mainService = mainService;
        this.eventService = eventService;
    }
    SocialMediaImportComponent.prototype.ngOnInit = function () {
    };
    SocialMediaImportComponent.prototype.onLoginWithInstagram = function () {
        this.eventService.$pub('onLoginWithInstagram');
    };
    SocialMediaImportComponent.prototype.loginWithFacebook = function () {
        this.eventService.$pub('loginWithFacebook');
    };
    SocialMediaImportComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[social-media-import]',
            template: __webpack_require__(/*! ./social-media-import.component.html */ "./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.html"),
            providers: [ngx_facebook__WEBPACK_IMPORTED_MODULE_4__["FacebookService"]],
            styles: [__webpack_require__(/*! ./social-media-import.component.scss */ "./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_main_service__WEBPACK_IMPORTED_MODULE_2__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubService"]])
    ], SocialMediaImportComponent);
    return SocialMediaImportComponent;
}());



/***/ }),

/***/ "./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.html":
/*!****************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.html ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"byi-upload-list\" *ngIf=\"fbAlbums && fbAlbums.length > 0\">\n  <ul>\n    <li *ngFor=\"let albumData of fbAlbums; let i = index\" (click)=\"showalbumImages(albumData.id)\">\n      <span>\n        <img [src]=\"albumData.picture.data.url\">\n      </span>\n    </li>\n  </ul>\n</div>\n<div class=\"byi-upload-list\" *ngIf=\"fbPhotos && fbPhotos.length > 0\">\n  <ul>\n    <li *ngFor=\"let fbPhoto of fbPhotos; let i = index\">\n      <span>\n        <img [src]=\"fbPhoto.picture\" (click)=\"addImageService.addImage(fbPhoto.picture)\">\n      </span>\n    </li>\n  </ul>\n</div>\n<div class=\"byi-upload-list\" *ngIf=\"instaImages && instaImages.length > 0\">\n  <ul>\n    <li *ngFor=\"let instaPhoto of instaImages; let i = index\">\n      <span>\n        <img [src]=\"instaPhoto.orig_url\" (click)=\"addImageService.addImage(instaPhoto.orig_url)\">\n      </span>\n    </li>\n  </ul>\n</div>"

/***/ }),

/***/ "./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.scss":
/*!****************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.scss ***!
  \****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvc29jaWFsLW1lZGlhLWltcG9ydC9jb21wb25lbnQvc29jaWFsLW1lZGlhLWxpc3Rpbmcvc29jaWFsLW1lZGlhLWxpc3RpbmcuY29tcG9uZW50LnNjc3MifQ== */"

/***/ }),

/***/ "./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.ts":
/*!**************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.ts ***!
  \**************************************************************************************************************/
/*! exports provided: SocialMediaListingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SocialMediaListingComponent", function() { return SocialMediaListingComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var src_app_services_add_image_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/app/services/add-image.service */ "./src/app/services/add-image.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var ngx_facebook__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-facebook */ "./node_modules/ngx-facebook/dist/esm/index.js");







var SocialMediaListingComponent = /** @class */ (function () {
    function SocialMediaListingComponent(FB, mainService, canvasService, eventService, zone, addImageService) {
        var _this = this;
        this.FB = FB;
        this.mainService = mainService;
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.zone = zone;
        this.addImageService = addImageService;
        this.fbAlbums = [];
        this.fbPhotos = [];
        this.instaImages = [];
        window['SocialMediaImportComponent'] = {
            zone: this.zone,
            setInstaMediaData: function (Data) { return _this.setInstaMediaData(Data); },
            component: this
        };
    }
    SocialMediaListingComponent.prototype.ngOnInit = function () {
        var _this = this;
        // Create and add script element for load facebook sdk
        var getFacebookSdk = document.getElementById('facebookSdk');
        if (!getFacebookSdk) {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://connect.facebook.net/en_US/all.js';
            script.id = 'facebookScript';
            document.getElementsByTagName('head')[0].appendChild(script);
        }
        this.eventService.$sub('loginWithFacebook', function () {
            _this.checkLoginState();
        });
        this.eventService.$sub('onLoginWithInstagram', function () {
            _this.checkLoginWithInstagram();
        });
    };
    SocialMediaListingComponent.prototype.ngAfterViewInit = function () {
        this.initFacebook();
    };
    SocialMediaListingComponent.prototype.initFacebook = function () {
        var _this = this;
        var configPaths = ['productdesigner/social_media_upload/facebook_appid',
            'productdesigner/social_media_upload/instagram_clientid'];
        // prepare url and payload
        var url = 'productdesigner/Index/getConfiguration', params = { configPaths: configPaths, key: 'social-media-import' }, cacheKey = 'configuration-social-media-import' + this.mainService.baseUrl;
        // hit post request
        this.mainService.getData(url, params, cacheKey).then(function (resp) {
            // this.instagram_url = this.mainService.baseUrl + 'socialmediaimport/index/resInstagram';
            _this.instagram_url = 'https://standalonem2.brushyourideas.com/socialmediaimport/index/resInstagram/';
            _this.instaid = resp[1];
            var initParams = {
                appId: resp[0],
                xfbml: true,
                version: 'v2.8'
            };
            _this.FB.init(initParams);
        }).catch(function (err) { return console.log(err); });
    };
    SocialMediaListingComponent.prototype.checkLoginWithInstagram = function () {
        var url = 'https://api.instagram.com/oauth/authorize/?client_id=' + this.instaid + '&redirect_uri=' + this.instagram_url + '&response_type=code&scope=public_content';
        this.instawindow = window.open(url, 'instagram', 'height=500,width=600');
    };
    SocialMediaListingComponent.prototype.setInstaMediaData = function (data) {
        var imageData;
        this.instawindow.close();
        for (var i = 0; i < data.images.length; i++) {
            imageData = {};
            imageData.orig_url = data.images[i];
            this.instaImages.push(imageData);
        }
    };
    SocialMediaListingComponent.prototype.checkLoginState = function () {
        var _this = this;
        this.FB.getLoginStatus().then(function (response) { return _this.statusChangeCallback(response); });
        /*this.FB.getLoginStatus(function (response) {
            this.statusChangeCallback(response);
        });*/
    };
    SocialMediaListingComponent.prototype.statusChangeCallback = function (response) {
        if (response.status === 'connected') {
            this.getFbAlbums();
        }
        else {
            this.fbLogin();
        }
    };
    SocialMediaListingComponent.prototype.fbLogin = function () {
        var _this = this;
        this.FB.login({ scope: 'user_photos' }).
            then(function (response) {
            if (response.status === 'connected') {
                _this.getFbAlbums();
            }
        });
        /*this.FB.login(function (response) {
            if (response.authResponse) {
                this.FB.api('/me', function (response) {
                    this.getFbAlbums();
                });
            }
        }, {scope: 'user_photos'});
        */
    };
    SocialMediaListingComponent.prototype.setAlbum = function (resp) {
        var _this = this;
        if (resp && !resp.error) {
            for (var i = 0; i < resp.data.length; i++) {
                var albumId = resp.data[i].id;
                this.FB.api('/' + albumId + '?fields=picture,name')
                    .then(function (response) { return _this.fbAlbums.push(response); })
                    .catch(function (e) { return console.log(e); });
            }
        }
    };
    SocialMediaListingComponent.prototype.getFbAlbums = function () {
        var _this = this;
        this.FB.api('/me').then(function (res) {
            return _this.FB.api('/' + res.id + '/albums').then(function (resp) { return _this.setAlbum(resp); })
                .catch(function (e) { return console.log(e); });
        }).catch(function (e) { return console.log(e); });
        /* this.FB.api('/me', function (response) {
             this.FB.api('/' + response.id + '/albums', function (response) {
                 if (response && !response.error) {
                     for (let i = 0; i < response.data.length; i++) {
                         let albumId = response.data[i].id;
                         this.FB.api('/' + albumId + '?fields=picture,name', function (response) {
                             this.fbAlbums.push(response);
                         });
                     }
                 }
             }
             );
           });*/
    };
    SocialMediaListingComponent.prototype.setFbAlbumPhotos = function (res) {
        var _this = this;
        var url = 'socialmediaimport/Index/downloadAlbum', param = { data: res };
        this.mainService.post(url, param, true).then(function (resp) {
            // let data = JSON.parse(resp);
            _this.setFBAlbumsPhotos(resp);
        });
    };
    SocialMediaListingComponent.prototype.showalbumImages = function (id) {
        var _this = this;
        this.FB.api('/' + id + '/photos?fields=picture,source').then(function (res) {
            return _this.setFbAlbumPhotos(res);
        }).catch(function (e) { return console.log(e); });
        /*this.FB.api('/' + id + '/photos?fields=picture,source',
                function (res) {
                  let url = 'socialmediaimport/Index/downloadAlbum', param = {data:res};
                  this.mainService.post(url, param, true).then((resp: any) => {
                        let data = JSON.parse(resp);
                        this.setFBAlbumsPhotos(data);
                  });
                }
                );*/
    };
    SocialMediaListingComponent.prototype.setFBAlbumsPhotos = function (data) {
        var imageData;
        for (var i = 0; i < data.images.length; i++) {
            imageData = {};
            imageData.picture = data.images[i];
            this.fbPhotos.push(imageData);
        }
    };
    SocialMediaListingComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"])({
            selector: '[social-media-listing]',
            template: __webpack_require__(/*! ./social-media-listing.component.html */ "./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.html"),
            providers: [ngx_facebook__WEBPACK_IMPORTED_MODULE_6__["FacebookService"]],
            styles: [__webpack_require__(/*! ./social-media-listing.component.scss */ "./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [ngx_facebook__WEBPACK_IMPORTED_MODULE_6__["FacebookService"],
            src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["NgZone"],
            src_app_services_add_image_service__WEBPACK_IMPORTED_MODULE_1__["AddImageService"]])
    ], SocialMediaListingComponent);
    return SocialMediaListingComponent;
}());



/***/ }),

/***/ "./src/app/modules/social-media-import/social-media-import.module.ts":
/*!***************************************************************************!*\
  !*** ./src/app/modules/social-media-import/social-media-import.module.ts ***!
  \***************************************************************************/
/*! exports provided: SocialMediaImportModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SocialMediaImportModule", function() { return SocialMediaImportModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _component_social_media_import_social_media_import_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./component/social-media-import/social-media-import.component */ "./src/app/modules/social-media-import/component/social-media-import/social-media-import.component.ts");
/* harmony import */ var ngx_facebook__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ngx-facebook */ "./node_modules/ngx-facebook/dist/esm/index.js");
/* harmony import */ var _component_social_media_listing_social_media_listing_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./component/social-media-listing/social-media-listing.component */ "./src/app/modules/social-media-import/component/social-media-listing/social-media-listing.component.ts");






var SocialMediaImportModule = /** @class */ (function () {
    function SocialMediaImportModule() {
    }
    SocialMediaImportModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
            declarations: [_component_social_media_import_social_media_import_component__WEBPACK_IMPORTED_MODULE_3__["SocialMediaImportComponent"], _component_social_media_listing_social_media_listing_component__WEBPACK_IMPORTED_MODULE_5__["SocialMediaListingComponent"]],
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
                ngx_facebook__WEBPACK_IMPORTED_MODULE_4__["FacebookModule"].forRoot()
            ],
            exports: [_component_social_media_import_social_media_import_component__WEBPACK_IMPORTED_MODULE_3__["SocialMediaImportComponent"], _component_social_media_listing_social_media_listing_component__WEBPACK_IMPORTED_MODULE_5__["SocialMediaListingComponent"]]
        })
    ], SocialMediaImportModule);
    return SocialMediaImportModule;
}());



/***/ }),

/***/ "./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.html":
/*!*****************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.html ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<span dropdown *ngIf=\"mainService.isAdmin == false\">\n<a href=\"javascript:void(0)\" dropdownToggle (click)=\"false\" tooltip=\"{{'Share with' | translate}}\">\n  <svg class=\"icon icon-share\" viewBox=\"0 0 30 30\">\n    <use xlink:href=\"assets/img/sprite.svg#icon-share\"></use>\n  </svg>\n</a>\n<ul *dropdownMenu class=\"dropdown-menu social-share\">\n  <li title=\"{{'Facebook' | translate}}\">\n      <a class=\"dropdown-item\" href=\"javascript:void(0)\">\n       <svg class=\"icon icon-facebook\" viewBox=\"0 0 50 50\" (click)=\"Sharing('facebook_share')\">\n         <use xlink:href=\"assets/img/sprite.svg#icon-facebook\"></use>\n       </svg>\n      </a>\n  </li>\n  <li title=\"{{'Twitter' | translate}}\">\n      <a class=\"dropdown-item\" href=\"javascript:void(0)\">\n       <svg class=\"icon icon-twitter\" viewBox=\"0 0 50 50\" (click)=\"Sharing('twitter')\">\n         <use xlink:href=\"assets/img/sprite.svg#icon-twitter\"></use>\n       </svg>\n      </a>\n  </li>\n\n  <li title=\"{{'Pinterest' | translate}}\">\n      <a class=\"dropdown-item\" href=\"javascript:void(0)\">\n       <svg class=\"icon icon-pinterest\" viewBox=\"0 0 50 50\" (click)=\"Sharing('pinterest')\">\n         <use xlink:href=\"assets/img/sprite.svg#icon-pinterest\"></use>\n       </svg>\n      </a>\n  </li>\n  <li title=\"{{'Mail' | translate}}\">\n      <a class=\"dropdown-item\" href=\"javascript:void(0)\">\n       <svg class=\"icon icon-mail\" viewBox=\"0 0 50 50\" (click)=\"openModal()\">\n         <use xlink:href=\"assets/img/sprite.svg#icon-mail\"></use>\n       </svg>\n      </a>\n  </li>\n</ul>\n</span>\n\n<!-- Send Email Form Modal -->\n<ng-template #mailModal>\n  <form [formGroup]=\"sendMailForm\" (ngSubmit)=\"Sharing('send_mail')\">\n\n    <!-- Modal header section -->\n    <div class=\"modal-header\">\n      <h4 class=\"modal-title pull-left\">{{'Share Design' | translate}}</h4>\n      <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"closeModal()\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n\n    <!-- Modal body section -->\n    <div class=\"modal-body\">\n      <div class=\"byi-login-tab\">\n        <div class=\"byi-float-form\">\n\n          <!-- Send Email Section -->\n          <div class=\"byi-float-label\">\n            <label>{{'Recipient Email Address' | translate}}</label>\n            <input type=\"text\" name=\"recipientEmail\" [(ngModel)]=\"recipientEmail\" placeholder=\"{{'Email' | translate}}\"\n              formControlName=\"recipientEmail\" [ngClass]=\"{ 'is-invalid': submitted && mf.recipientEmail.errors }\"/>\n            <!-- Send Email Error Message -->\n            <div *ngIf=\"submitted && mf.recipientEmail.errors\" class=\"byi-error\">\n              <ng-container *ngIf=\"mf.recipientEmail.errors.required\">{{'Email is required' | translate}}</ng-container>\n              <ng-container *ngIf=\"mf.recipientEmail.errors.email\">{{'Invalid Email' | translate}}</ng-container>\n            </div>\n          </div>\n          <!-- Button Section -->\n          <div class=\"byi-form-action\">\n            <button class=\"byi-btn\" type=\"submit\">{{'Send Mail' | translate}}</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End of modal body -->\n  </form>\n</ng-template>\n"

/***/ }),

/***/ "./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.scss":
/*!*****************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.scss ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvc29jaWFsLW1lZGlhLXNoYXJpbmcvY29tcG9uZW50L3NvY2lhbC1tZWRpYS1zaGFyaW5nL3NvY2lhbC1tZWRpYS1zaGFyaW5nLmNvbXBvbmVudC5zY3NzIn0= */"

/***/ }),

/***/ "./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.ts":
/*!***************************************************************************************************************!*\
  !*** ./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.ts ***!
  \***************************************************************************************************************/
/*! exports provided: SocialMediaSharingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SocialMediaSharingComponent", function() { return SocialMediaSharingComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_design_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/services/design.service */ "./src/app/services/design.service.ts");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../../../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var ngx_facebook__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-facebook */ "./node_modules/ngx-facebook/dist/esm/index.js");









var SocialMediaSharingComponent = /** @class */ (function () {
    function SocialMediaSharingComponent(mainService, designService, eventService, canvasService, formBuilder, translate, fb) {
        this.mainService = mainService;
        this.designService = designService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.formBuilder = formBuilder;
        this.translate = translate;
        this.fb = fb;
        this.submitted = false;
    }
    SocialMediaSharingComponent.prototype.ngAfterViewInit = function () {
        var self = this;
        setTimeout(function () {
            var configPaths = ['productdesigner/social_media_upload/facebook_appid'];
            // prepare url and payload
            var url = 'productdesigner/Index/getConfiguration', param = { configPaths: configPaths, key: 'social-media-sharing' };
            var cacheKey = 'configuration-social-media-sharing' + self.mainService.baseUrl;
            // hit post request
            self.mainService.getData(url, param, cacheKey).then(function (resp) {
                var initParams = {
                    appId: resp[0],
                    xfbml: true,
                    version: 'v2.8'
                };
                if (self.fb) {
                    self.fb.init(initParams);
                }
            }).catch(function (err) { return console.log(err); });
        }, 500);
    };
    SocialMediaSharingComponent.prototype.ngOnInit = function () {
        var _this = this;
        // Create and add script element for load facebook sdk
        var getFacebookSdk = document.getElementById('facebookSdk');
        if (!getFacebookSdk) {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://connect.facebook.net/en_US/all.js';
            script.id = 'facebookScript';
            document.getElementsByTagName('head')[0].appendChild(script);
        }
        ;
        this.initFormGroup();
        this.eventService.$sub('getCartData', function (data) {
            _this.productName = data.productName;
        });
        this.eventService.$sub('designSaved', function (data) {
            if (!_this.option || _this.option == '')
                return;
            _this.design_url = (data[0].images.base.url);
            var product_url = _this.mainService.baseUrl + '/productdesigner/index/index/id/' + _this.mainService.productId + '/design/' + btoa(data[0].designId);
            if (_this.option == "g_plush") {
                var go = "https://plus.google.com/share?";
                var title = "title=" + encodeURIComponent(_this.productName);
                var url = "url=" + encodeURIComponent(product_url);
                var images = "image=" + _this.design_url;
                window.open(go + url + "&" + title + "&" + images);
            }
            else if (_this.option == "twitter") {
                //Here Twitter Sharing
                var twUrl = "http://twitter.com/share?text=My Custom Design&url=" + encodeURIComponent(product_url);
                window.open(twUrl);
            }
            else if (_this.option == "pinterest") {
                //Here Pinterest Sharing
                var pinterestUrl = "http://pinterest.com/pin/create/button/?url=" + (product_url) + "&media=" + _this.design_url + "&description=" + ("My Custom Design");
                window.open(pinterestUrl);
            }
            else if (_this.option == "facebook_share") {
                var params = {
                    method: 'feed',
                    name: _this.productName,
                    picture: product_url
                };
                //Here Facebook Sharing
                _this.fb.ui(params)
                    .then(function (res) { return console.log(res); })
                    .catch(function (e) { return console.error(e); });
            }
            else if (_this.option == "send_mail") {
                // prepare url and payload
                var url = 'socialmediasharing/Index/sendmail', param = {
                    receipentMail: _this.recipientEmail,
                    design_id: data[0].designId,
                    product_id: _this.mainService.productId
                };
                // hit post request
                _this.mainService.post(url, param, true).then(function (resp) {
                    // if mail was send successfull
                    if (resp && resp.status == "success") {
                        _this.mainService.swal(_this.translate.instant("Success"), _this.translate.instant("Mail has been sent"), 'success').finally(function () { return _this.closeModal(); });
                    }
                    // if something went wrong with send mail process
                    else {
                        var msg = resp.log;
                        if (msg.lastIndexOf("-") >= 0)
                            msg = msg.substr(msg.lastIndexOf("-") + 2);
                        _this.mainService.swal(_this.translate.instant("Error"), _this.translate.instant(msg), 'error');
                    }
                }).catch(function (err) {
                    console.log(_this.translate.instant("Error in send mail: "), err);
                });
            }
            _this.option = "";
        });
    };
    SocialMediaSharingComponent.prototype.initFormGroup = function () {
        // Send Email form builder
        this.sendMailForm = this.formBuilder.group({
            recipientEmail: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_7__["Validators"].required, _angular_forms__WEBPACK_IMPORTED_MODULE_7__["Validators"].email]]
        });
    };
    SocialMediaSharingComponent.prototype.Sharing = function (option) {
        this.option = option;
        var data = {
            title: this.productName,
            disablePopup: true
        };
        if (this.option == "send_mail") {
            // set flag
            this.submitted = true;
            // stop here if form is invalid
            if (this.sendMailForm.invalid) {
                return;
            }
            // When user hits on send mail button
            this.designService.saveDesignData(data);
        }
        else {
            this.designService.saveDesignData(data);
        }
    };
    SocialMediaSharingComponent.prototype.openModal = function () {
        this.modalRef = this.mainService.openThisModal(this.mailModalTemplate);
    };
    SocialMediaSharingComponent.prototype.closeModal = function () {
        this.modalRef.hide();
    };
    Object.defineProperty(SocialMediaSharingComponent.prototype, "mf", {
        // get control object for login form
        get: function () { return this.sendMailForm.controls; },
        enumerable: true,
        configurable: true
    });
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('mailModal'),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:type", Object)
    ], SocialMediaSharingComponent.prototype, "mailModalTemplate", void 0);
    SocialMediaSharingComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: '[social-media-sharing]',
            template: __webpack_require__(/*! ./social-media-sharing.component.html */ "./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.html"),
            styles: [__webpack_require__(/*! ./social-media-sharing.component.scss */ "./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.scss")]
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_main_service__WEBPACK_IMPORTED_MODULE_4__["MainService"],
            src_app_services_design_service__WEBPACK_IMPORTED_MODULE_2__["DesignService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_3__["CanvasService"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormBuilder"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__["TranslateService"],
            ngx_facebook__WEBPACK_IMPORTED_MODULE_8__["FacebookService"]])
    ], SocialMediaSharingComponent);
    return SocialMediaSharingComponent;
}());



/***/ }),

/***/ "./src/app/modules/social-media-sharing/social-media-sharing.module.ts":
/*!*****************************************************************************!*\
  !*** ./src/app/modules/social-media-sharing/social-media-sharing.module.ts ***!
  \*****************************************************************************/
/*! exports provided: HttpLoaderFactory, SocialMediaSharingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpLoaderFactory", function() { return HttpLoaderFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SocialMediaSharingModule", function() { return SocialMediaSharingModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _component_social_media_sharing_social_media_sharing_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./component/social-media-sharing/social-media-sharing.component */ "./src/app/modules/social-media-sharing/component/social-media-sharing/social-media-sharing.component.ts");
/* harmony import */ var node_modules_angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node_modules/@angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var _ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ngx-translate/http-loader */ "./node_modules/@ngx-translate/http-loader/fesm5/ngx-translate-http-loader.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ngx-bootstrap/dropdown */ "./node_modules/ngx-bootstrap/dropdown/fesm5/ngx-bootstrap-dropdown.js");
/* harmony import */ var ngx_facebook__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-facebook */ "./node_modules/ngx-facebook/dist/esm/index.js");
/* harmony import */ var ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngx-bootstrap/tooltip */ "./node_modules/ngx-bootstrap/tooltip/fesm5/ngx-bootstrap-tooltip.js");











function HttpLoaderFactory(httpClient) {
    return new _ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_6__["TranslateHttpLoader"](httpClient);
}
var SocialMediaSharingModule = /** @class */ (function () {
    function SocialMediaSharingModule() {
    }
    SocialMediaSharingModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
            declarations: [_component_social_media_sharing_social_media_sharing_component__WEBPACK_IMPORTED_MODULE_3__["SocialMediaSharingComponent"]],
            imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"], node_modules_angular_forms__WEBPACK_IMPORTED_MODULE_4__["FormsModule"], node_modules_angular_forms__WEBPACK_IMPORTED_MODULE_4__["ReactiveFormsModule"],
                _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__["TranslateModule"].forRoot({
                    loader: {
                        provide: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__["TranslateLoader"],
                        useFactory: HttpLoaderFactory,
                        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_7__["HttpClient"]]
                    }
                }),
                ngx_bootstrap_tooltip__WEBPACK_IMPORTED_MODULE_10__["TooltipModule"].forRoot(),
                _angular_common_http__WEBPACK_IMPORTED_MODULE_7__["HttpClientModule"],
                ngx_bootstrap_dropdown__WEBPACK_IMPORTED_MODULE_8__["BsDropdownModule"].forRoot(),
                ngx_facebook__WEBPACK_IMPORTED_MODULE_9__["FacebookModule"].forRoot()],
            exports: [_component_social_media_sharing_social_media_sharing_component__WEBPACK_IMPORTED_MODULE_3__["SocialMediaSharingComponent"]]
        })
    ], SocialMediaSharingModule);
    return SocialMediaSharingModule;
}());



/***/ }),

/***/ "./src/app/services/add-image.service.ts":
/*!***********************************************!*\
  !*** ./src/app/services/add-image.service.ts ***!
  \***********************************************/
/*! exports provided: AddImageService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddImageService", function() { return AddImageService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _canvas_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");



var AddImageService = /** @class */ (function () {
    function AddImageService(canvasService) {
        this.canvasService = canvasService;
    }
    /**
     * This is generic function for adding any type of image to canvas
     *
     * @param image url to image
     */
    AddImageService.prototype.addImage = function (image, data) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var clipartPrice, imgExtensionIndex, extensionName, properties, isSvg, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        // if no image url is passed, return from here only
                        if (!image)
                            return [2 /*return*/];
                        clipartPrice = 0;
                        if (data && data.hasOwnProperty('tab') && data.tab == "clipart") {
                            clipartPrice = (data.price != null) ? data.price : 0;
                        }
                        imgExtensionIndex = image.lastIndexOf('.'), extensionName = image.substr(imgExtensionIndex + 1), properties = {
                            left: 50,
                            top: 50,
                            objType: 'image',
                            tab: (data && data.tab) ? data.tab : 'upload',
                            price: clipartPrice,
                            extension: extensionName,
                            imageSrc: image
                        };
                        isSvg = (extensionName == 'svg') ? true : false;
                        // set svg flag to properties for further opearations
                        properties = Object.assign(properties, { isSvg: isSvg });
                        if (!
                        // call function accordingly
                        (isSvg === true)) 
                        // call function accordingly
                        return [3 /*break*/, 2];
                        return [4 /*yield*/, this.addSvgImage(image, properties, true)];
                    case 1:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.addJpgPngImage(image, properties, true)];
                    case 3:
                        _a = _b.sent();
                        _b.label = 4;
                    case 4:
                        // call function accordingly
                        _a;
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * for adding svg image on canvas
     *
     * @param image url to svg image
     * @param properties properties
     */
    AddImageService.prototype.addSvgImage = function (image, properties, isCenter) {
        var _this = this;
        var self = this;
        return new Promise(function (resolve, reject) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                new fabric.loadSVGFromURL(image, function (svgImgObject, options) {
                    var imgObj = new fabric.Group(svgImgObject);
                    imgObj['src'] = image;
                    var svgObjs = [];
                    /**/
                    imgObj.zcustomObjects = imgObj._objects.slice(0);
                    /* let i  = 14;
                     imgObj._objects.forEach( (obj,index) => {
                       svgObjs[i] = obj;
                       i++
                     });
                      imgObj.zcustomObjects = svgObjs;*/
                    var rmObj = _this.canvasService.getActiveObject();
                    if (_this.removeForUltimateLock(rmObj)) {
                        properties.left = rmObj.left;
                        properties.top = rmObj.top;
                        properties.angle = rmObj.angle;
                        properties.ignoreBestFit = true;
                        isCenter = false;
                        imgObj = _this.canvasService.applyUltimateLock(imgObj, false);
                        imgObj.scaleToWidth(rmObj.width * rmObj.scaleX);
                    }
                    var params = {
                        obj: imgObj,
                        properties: properties,
                        crudServiceString: 'this.insertObjectService',
                        isCenter: isCenter,
                    };
                    self.canvasService.objectCRUD(params);
                    resolve();
                });
                return [2 /*return*/];
            });
        }); });
    };
    /**
     * for adding jpg/png images
     *
     * @param image url to image
     * @param properties properties
     */
    AddImageService.prototype.addJpgPngImage = function (image, properties, isCenter) {
        var _this = this;
        var self = this;
        return new Promise(function (resolve, reject) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                new fabric.Image.fromURL(image, function (imgObj) {
                    imgObj['src'] = image;
                    var rmObj = _this.canvasService.getActiveObject();
                    if (_this.removeForUltimateLock(rmObj)) {
                        properties.left = rmObj.left;
                        properties.top = rmObj.top;
                        properties.angle = rmObj.angle;
                        properties.ignoreBestFit = true;
                        isCenter = false;
                        imgObj = _this.canvasService.applyUltimateLock(imgObj, false);
                        imgObj.scaleToWidth(rmObj.width * rmObj.scaleX);
                    }
                    var params = {
                        obj: imgObj,
                        properties: properties,
                        crudServiceString: 'this.insertObjectService',
                        isCenter: isCenter,
                    };
                    self.canvasService.objectCRUD(params);
                    resolve();
                }, {
                    crossOrigin: 'anonymous'
                });
                return [2 /*return*/];
            });
        }); });
    };
    // Remove object When object contain ultimate lock = true
    AddImageService.prototype.removeForUltimateLock = function (obj) {
        if (obj && obj.type != "text" && obj.ultimatelock == true) {
            var params = {
                obj: obj,
                properties: null,
                crudServiceString: 'this.removeObjectService',
                removeUltimateObj: true
            };
            this.canvasService.objectCRUD(params);
            return true;
        }
        else {
            return false;
        }
    };
    AddImageService.prototype.updateImage = function (image) {
        var obj = this.canvasService.getActiveObject();
        if (obj && obj.type == "image") {
            var params = {
                obj: obj,
                newSrc: image,
                crudServiceString: 'this.cropperUpdateService',
            };
            this.canvasService.objectCRUD(params);
        }
        // setTimeout(() => {
        //   this.canvasService.deselectAllObjects();
        //   this.canvasService.currentCanvas.setActiveObject(obj);
        //   this.canvasService.currentCanvas.renderAll();
        // }, 300);
    };
    AddImageService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_canvas_service__WEBPACK_IMPORTED_MODULE_1__["CanvasService"]])
    ], AddImageService);
    return AddImageService;
}());



/***/ }),

/***/ "./src/app/services/canvas-update.service.ts":
/*!***************************************************!*\
  !*** ./src/app/services/canvas-update.service.ts ***!
  \***************************************************/
/*! exports provided: CanvasUpdateService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CanvasUpdateService", function() { return CanvasUpdateService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var CanvasUpdateService = /** @class */ (function () {
    function CanvasUpdateService() {
        /**
       * Init the service for operation : It initialise the variables
       */
        this.init = function (params) {
            var properties = params.properties, canvasService = params.service, currentCanvas = (params.hasOwnProperty('canvas')) ? params.canvas : canvasService.currentCanvas, eventService = params.eventService;
            var canvasProperties = [];
            for (var key in properties) {
                canvasProperties[key] = currentCanvas[key];
            }
            return {
                /**
                 * this function is used when special operation needs to be performed on objects(eg. bold/italic on text)
                 *
                 */
                exec: function () {
                    for (var key in properties) {
                        currentCanvas[key] = properties[key];
                    }
                    currentCanvas.renderAll();
                    eventService.$pub('canvasBackgroundChange');
                },
                unexec: function () {
                    for (var key in canvasProperties) {
                        currentCanvas[key] = canvasProperties[key];
                    }
                    currentCanvas.renderAll();
                    eventService.$pub('canvasBackgroundChange');
                }
            };
        };
    }
    CanvasUpdateService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        })
    ], CanvasUpdateService);
    return CanvasUpdateService;
}());



/***/ }),

/***/ "./src/app/services/canvas.service.ts":
/*!********************************************!*\
  !*** ./src/app/services/canvas.service.ts ***!
  \********************************************/
/*! exports provided: CanvasService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CanvasService", function() { return CanvasService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _components_cropper_cropper_update_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../components/cropper/cropper-update.service */ "./src/app/components/cropper/cropper-update.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _insert_object_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./insert-object.service */ "./src/app/services/insert-object.service.ts");
/* harmony import */ var _update_object_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./update-object.service */ "./src/app/services/update-object.service.ts");
/* harmony import */ var _remove_object_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./remove-object.service */ "./src/app/services/remove-object.service.ts");
/* harmony import */ var _canvas_update_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./canvas-update.service */ "./src/app/services/canvas-update.service.ts");
/* harmony import */ var _components_image_effects_image_effects_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/image-effects/image-effects.service */ "./src/app/components/image-effects/image-effects.service.ts");
/* harmony import */ var _history_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./history.service */ "./src/app/services/history.service.ts");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! fabric */ "./node_modules/fabric/dist/fabric.js");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(fabric__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _components_right_panel_right_panel_update_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/right-panel/right-panel-update.service */ "./src/app/components/right-panel/right-panel-update.service.ts");
/* harmony import */ var _range_slider_update_service_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./range-slider-update-service.service */ "./src/app/services/range-slider-update-service.service.ts");













var CanvasService = /** @class */ (function () {
    function CanvasService(insertObjectService, updateObjectService, removeObjectService, canvasUpdateService, 
    /*private addImageService: AddImageService,*/
    imageEffectsService, eventService, historyService, rightPanelUpdateService, cropperUpdateService, rangeSliderUpdateService) {
        this.insertObjectService = insertObjectService;
        this.updateObjectService = updateObjectService;
        this.removeObjectService = removeObjectService;
        this.canvasUpdateService = canvasUpdateService;
        this.imageEffectsService = imageEffectsService;
        this.eventService = eventService;
        this.historyService = historyService;
        this.rightPanelUpdateService = rightPanelUpdateService;
        this.cropperUpdateService = cropperUpdateService;
        this.rangeSliderUpdateService = rangeSliderUpdateService;
        this.containerCanvases = {};
        this.allImagesWithIds = {};
        this.allImages = [];
        this.scaleFactor = 1;
        this.zoom = 0;
        this.clipX = {};
        this.clipY = {};
        this.allObjects = [];
        this.mod = 0;
        this.usedColorArr = [];
        this.disableAddToCartAlert = false;
        // for customize control corner size
        this.cornerSize = 20;
        // Object custom Properties;
        this.objProperties = ["scaleFactor", "tab", "objType", "font_file", "id", 'price', 'isSvg', 'canvasWidth', 'canvasHeight', 'imageSrc', 'src', 'imageDesignId', 'zcustomObjects'];
        // we will save background of current canvas before changing image side
        this.oldCanvasBackground = {};
        if (!this.historyService.canvasService) {
            this.historyService.initCanvasService(this);
        }
        // call to method that will create initial events
        this.initiateEvents();
    }
    /**
     * Create initial events (eg. events for canvas)
     */
    CanvasService.prototype.initiateEvents = function () {
        var _this_1 = this;
        var _this = this;
        document.onkeyup = (function (event) {
            if (_this_1.currentDocumentEvent != null)
                _this_1.currentDocumentEvent = null;
        });
        document.onkeydown = (function (event) {
            _this_1.currentDocumentEvent = event;
            if (event && event.shiftKey) {
                _this.checkObjectSelection();
            }
            if (event.keyCode === 46) { /**  Delete key **/
                var elements = document.getElementsByClassName("noDeleteObject");
                var removeObject = 0;
                for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
                    var ctl = elements_1[_i];
                    if (ctl && ctl.selectionStart) {
                        var startPos = ctl.selectionStart;
                        var endPos = ctl.selectionEnd;
                        if (ctl.value.length == startPos && ctl.value.length == endPos) {
                            removeObject++;
                        }
                    }
                    else {
                        removeObject++;
                    }
                }
                if (removeObject == elements.length) {
                    _this_1.removeCurrentObject();
                }
            }
        });
        document.ontouchend = (function (event) {
            _this_1.checkClasses(event);
        });
        // when canvas is created we have published this event
        // we are subscribing it here because as soon as canvas is created, we need to set events like object selected
        this.eventService.$sub('canvasCreated', function (canvas) {
            _this_1.setEventsForCanvas(canvas);
            _this_1.moveObjectsFromCanvasToCanvas(canvas);
        });
        this.eventService.$sub('allcanvasCreated', function () {
            if (_this_1.allObjects.length > 0) {
                _this_1.loadThisDesign(_this_1.allObjects);
            }
        });
        var self = this;
        window.addEventListener("beforeunload", function (t) {
            if (self.hasCanvasObjectOrBackgroundAll() && self.disableAddToCartAlert == false) {
                t.returnValue = "Your custom message.";
            }
        });
        this.prepareObjsToIgnore();
    };
    /**
     * This function will prepare productimage object
     * this object is used in getObjects function of current service
     * all objects that matches any of the productimage properties, will be ignored
     */
    CanvasService.prototype.prepareObjsToIgnore = function () {
        this.objsToIgnore = [
            {
                key: 'productimage',
                value: true
            }
        ];
    };
    /**
     *
     * @param event
     */
    CanvasService.prototype.checkClasses = function (event) {
        /*if(this.currentDocumentEvent != null  && this.currentDocumentEvent.shiftKey){*/
        this.checkObjectSelection();
        /*}*/
        var toggleElementEvents = {
            '.byi-products-inner,.product-tooltip': 'closeAllProducts',
            '.byi-imagecolor-list .byic_color_action , .byi-imagecolor-list .byic-colors-select,.byie-custom-color': 'closeColorPicker',
            '.byi-imagecolor-list .byic_color_action , .byi-imagecolor-list .byic-colors-select': 'closeImageEffectColorPicker',
            '.byi-fonts': 'closeFontWrapper',
            '.byi-layer': 'closeLayer',
            '.byi-mob-output-action': 'closeHeaderIcon',
            '.byi-product-attr': 'closeProductOptions',
            '.byi-general-option-mob': 'closeSideBar',
        };
        var elements = [];
        var outsideClickCounter = 0;
        for (var elementClass in toggleElementEvents) {
            var eventName = toggleElementEvents[elementClass];
            elements = document.querySelectorAll(elementClass);
            outsideClickCounter = 0;
            for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {
                var element = elements_2[_i];
                if (!element.contains(event.target)) {
                    outsideClickCounter++;
                }
            }
            if (outsideClickCounter == elements.length) {
                this.eventService.$pub(eventName);
            }
        }
        var selectClassList = event.target.classList;
        for (var i = 0; i < selectClassList.length; i++) {
            var className = selectClassList[i];
            // To discard Active Object from Canvas
            if (className == 'byi-svg-editor-box' || className == 'product-designer-main-content') {
                this.discardActiveObjectAllCanvas();
            }
        }
    };
    /**
     this method will do CRUD operation like insert/remove/update based on crudService variable
     * @param  params
     * @return {[type]}        [description]
     */
    CanvasService.prototype.objectCRUD = function (params) {
        var crudServiceString = params.crudServiceString;
        params.isCenter = params.hasOwnProperty('isCenter') ? params.isCenter : false;
        params.isHistory = params.hasOwnProperty('isHistory') ? params.isHistory : true;
        params.isSvg = params.hasOwnProperty('isSvg') ? params.isSvg : false;
        params.isObjectModify = params.hasOwnProperty('isObjectModify') ? params.isObjectModify : false;
        params.service = this;
        params.eventService = this.eventService;
        params.canvas = params.hasOwnProperty('canvas') ? params.canvas : this.currentCanvas;
        params.setActive = params.hasOwnProperty('setActive') ? params.setActive : true;
        var crudService = eval(crudServiceString);
        // This method initialise object properties
        var cmd = new crudService.init(params);
        // This method execute the current CRUD operation
        cmd.exec();
        // This method push the current service into history
        if (params.isHistory) {
            this.historyService.push(cmd);
        }
    };
    /**
     * Prepare and return property object for best fit opearation
     *
     * @param obj canvas object(if null then we will fetch current active object)
     */
    CanvasService.prototype.getBestFitProperties = function (obj) {
        if (obj === void 0) { obj = null; }
        // if no obj is provided, we will fetch current object
        // this is set as default parameter because in case of insertCanvas, we need to specify the object
        if (obj == null)
            obj = this.getActiveObject();
        // if no object is found, return from here
        if (!obj)
            return;
        // variable declaration
        var imageAspectRatio = obj.width / obj.height, canvas = this.currentCanvas, canvasAspectRatio = canvas.width / canvas.height, renderableHeight, renderableWidth, xStart, yStart, mainHeight = canvas.height - this.clipY[canvas.designarea_id], mainWidth = canvas.width - this.clipX[canvas.designarea_id], objWidth = obj.width, objHeight = obj.height;
        // If image's aspect ratio is less than canvas's we fit on height
        // and place the image centrally along width
        if (imageAspectRatio < canvasAspectRatio) {
            renderableHeight = mainHeight;
            renderableWidth = objWidth * (renderableHeight / objHeight);
            xStart = (mainWidth - renderableWidth) / 2;
            yStart = 0;
        }
        // If image's aspect ratio is greater than canvas's we fit on width
        // and place the image centrally along height
        else if (imageAspectRatio > canvasAspectRatio) {
            renderableWidth = mainWidth;
            renderableHeight = objHeight * (renderableWidth / objWidth);
            xStart = 0;
            yStart = (mainHeight - renderableHeight) / 2;
        }
        // Happy path - keep aspect ratio
        else {
            renderableHeight = mainHeight;
            renderableWidth = mainWidth;
            xStart = 0;
            yStart = 0;
        }
        // return in object format
        return { left: xStart, top: yStart, width: renderableWidth, height: renderableHeight };
    };
    /**
     * Filter best fit object based on object type
     *
     * @param bestFitProperties best fit object
     * @param obj canvas object
     */
    CanvasService.prototype.filterBestFitProperties = function (bestFitProperties, obj) {
        if (obj === void 0) { obj = null; }
        // if no object found, fetch current active object
        if (obj == null)
            obj = this.getActiveObject();
        // store objType to local variable
        var objType = obj.objType;
        // Check object type and perform operation accordingly
        switch (objType) {
            // in case of image, we will scale to best fit and remove height and width from property object
            case 'image':
                obj.scaleToHeight(bestFitProperties.height);
                obj.scaleToWidth(bestFitProperties.width);
                delete bestFitProperties.height;
                delete bestFitProperties.width;
                break;
            // in case of text, we will calculate scaleX and scaleY and remove top and left from property object
            case 'text':
            default:
                obj.textAlign = 'center';
                obj = Object.assign(obj, {
                    scaleX: (bestFitProperties.width / obj.width),
                    scaleY: (bestFitProperties.height / obj.height)
                });
                bestFitProperties = obj;
                break;
        }
        // finally return the property object
        return bestFitProperties;
    };
    /**
     * this function checks whether any object is selected on current canvas, if yes return the object, false otherwise
     */
    CanvasService.prototype.getActiveObject = function () {
        // if no canvas is selected currently, return false
        if (!this.currentCanvas)
            return false;
        // store current active obj to local var
        var obj = this.currentCanvas.getActiveObject();
        // check whether it's empty, if so replace it with false boolean
        obj = (obj) ? obj : false;
        // return above local variable
        return obj;
    };
    /**
     * Get Active object from all present canvases
     * On load template selected canvas and selected object may not be same
     */
    CanvasService.prototype.getActiveObjectFromAllCanvases = function () {
        // if no canvases present, return false
        if (!this.containerCanvases || !Object.keys(this.containerCanvases).length)
            return false;
        // variable declaration
        var allCanvases = this.containerCanvases, currCanvas, selectedObj;
        // traverse through each canvas
        for (var key in allCanvases) {
            // get canvas instance
            currCanvas = allCanvases[key];
            // get active object of current canvas instance
            selectedObj = currCanvas.getActiveObject();
            // if found, break the loop
            if (selectedObj)
                break;
        }
        // is object is found, return the same, return false otherwise
        return (selectedObj) ? selectedObj : false;
    };
    /**
     * this method will set common usefull events for specified canvas
     *
     * @param canvas canvas obj
     */
    CanvasService.prototype.setEventsForCanvas = function (canvas) {
        var _this_1 = this;
        canvas.on('object:added', function (event) {
            var obj = (event && event.target) ? event.target : false;
            if (obj && obj.hasOwnProperty('ultimatelock')) {
                obj = _this_1.applyUltimateLock(obj);
                _this_1.currentCanvas.renderAll();
            }
        });
        canvas.on('object:modified', function (event) {
            _this_1.mod++;
            _this_1.eventService.$pub('canvasObjectModified', event.target);
        });
        canvas.on('object:moving', function (event) {
            _this_1.eventService.$pub('canvasObjectMoving', event.target);
        });
        canvas.on('object:scaling', function (event) {
            _this_1.eventService.$pub('canvasObjectScaling', event.target);
        });
        canvas.on('object:scaled', function (event) {
            _this_1.eventService.$pub('canvasObjectScaled', event.target);
        });
        canvas.on('before:selection:cleared', function (event) {
            _this_1.eventService.$pub('objectBeforeSelectionCleared', event.target);
        });
        canvas.on('selection:cleared', function (event) {
            _this_1.usedColorsCounter();
            _this_1.eventService.$pub('objectSelectionCleared', event.target);
        });
        canvas.on('selection:created', function (event) {
            _this_1.checkObjectSelection();
            _this_1.usedColorsCounter();
            _this_1.eventService.$pub('objectSelectionCreated', event.target);
        });
        canvas.on('selection:updated', function (event) {
            _this_1.usedColorsCounter();
            _this_1.eventService.$pub('objectSelectionUpdated', event.target);
        });
        this.eventService.$sub('objectUpdated', function () {
            _this_1.usedColorsCounter();
        });
        this.eventService.$sub('canvasBackgroundChange', function () {
            _this_1.usedColorsCounter();
        });
    };
    CanvasService.prototype.checkObjectSelection = function () {
        var selectedObj = this.currentCanvas.getActiveObjects(), objToSelect = [], checkIfUltimateLock;
        checkIfUltimateLock = selectedObj.find(function (obj) { return (obj.ultimatelock == true); });
        if (checkIfUltimateLock && selectedObj.length > 1) {
            selectedObj.filter(function (currObj) {
                if (!currObj.ultimatelock) {
                    objToSelect.push(currObj);
                }
            });
            if (objToSelect.length > 0) {
                var canvas = this.currentCanvas;
                var temp_1 = [];
                objToSelect.forEach(function (obj) {
                    if (obj.ultimatelock != true && obj.selectable == true) {
                        temp_1.push(obj);
                    }
                });
                canvas.discardActiveObject();
                var sel = new fabric__WEBPACK_IMPORTED_MODULE_10__["fabric"].ActiveSelection(temp_1, {
                    canvas: canvas,
                });
                canvas.setActiveObject(sel);
                canvas.requestRenderAll();
            }
            else {
                this.deselectAllObjects();
            }
        }
    };
    /**
     * Deselect all objects on canvas
     */
    CanvasService.prototype.deselectAllObjects = function () {
        if (!this.currentCanvas) {
            return;
        }
        this.currentCanvas.discardActiveObject().renderAll();
    };
    /**
     * [Fetches all objects of all container canvases]
     */
    CanvasService.prototype.fetchAllObjects = function () {
        var index = 0;
        // this.allObjects = [];
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            this.allObjects[index] = [];
            this.allObjects[index] = this.getObjects(canvas);
            var background = null;
            if (canvas.backgroundColor) {
                background = { key: 'backgroundColor', val: canvas.backgroundColor };
            }
            else if (canvas.backgroundImage) {
                background = { key: 'backgroundImage', val: canvas.backgroundImage };
            }
            if (background != null)
                this.allObjects[index] = Object.assign(this.allObjects[index], { background: background });
            index++;
        }
    };
    /**
     * [It will move all objects from one canvas to another if product options are changed, Add all fetched objects to current canvas]
     * @param canvas [current canvas]
     */
    CanvasService.prototype.moveObjectsFromCanvasToCanvas = function (canvas) {
        var _this_1 = this;
        if (Object.keys(this.allObjects).length > 0) {
            var objects = this.allObjects[canvas.designarea_id];
            for (var index in objects) {
                var obj = objects[index];
                this.currentCanvas = canvas;
                var params = {
                    obj: obj,
                    properties: {},
                    crudServiceString: 'this.insertObjectService',
                    isCenter: false,
                    isHistory: false,
                };
                this.objectCRUD(params);
            }
            this.allObjects[canvas.designarea_id] = {};
        }
        if (this.oldCanvasBackground && Object.keys(this.oldCanvasBackground).length > 0) {
            var properties = {}, params_1 = {
                crudServiceString: 'this.canvasUpdateService',
                isHistory: true
            };
            properties[this.oldCanvasBackground.key] = this.oldCanvasBackground.val;
            params_1 = Object.assign(params_1, { properties: properties });
            setTimeout(function () {
                _this_1.objectCRUD(params_1);
            }, 100);
        }
    };
    CanvasService.prototype.loadThisDesign = function (designObj) {
        var _this_1 = this;
        var allCanvases = this.containerCanvases, index = 0, params = {
            obj: null, properties: {}, canvas: {}, crudServiceString: 'this.insertObjectService', isCenter: false,
            isHistory: false
        }, obj = null;
        for (var key in allCanvases) {
            if (designObj[index]) {
                obj = designObj[index];
                params.properties = {};
                params.crudServiceString = 'this.insertObjectService';
                params.canvas = allCanvases[key];
                obj.filter(function (o) {
                    params.obj = o;
                    _this_1.objectCRUD(params);
                });
                if (obj.hasOwnProperty('background')) {
                    params.properties[obj.background.key] = obj.background.val;
                    params.crudServiceString = 'this.canvasUpdateService';
                    this.objectCRUD(params);
                }
            }
            index++;
        }
    };
    /**
     * [Resize all objects of canvas based on scaleFactor]
     * @param {[type]} canvas [current canvas]
     */
    CanvasService.prototype.resizeCanvasObjects = function (canvas) {
        var objectsLen = canvas.getObjects().length;
        if (objectsLen > 0) {
            for (var i = 0; i < objectsLen; i++) {
                var obj = this.resizeObjectAsPerScale(canvas.getObjects()[i]);
                obj.setCoords();
            }
        }
    };
    CanvasService.prototype.getActiveObjectValue = function (objType, objKeyName) {
        var value = false, obj = this.getActiveObject();
        if (obj && obj.type == objType && obj[objKeyName]) {
            value = obj[objKeyName];
        }
        return value;
    };
    CanvasService.prototype.getObject = function (objtype) {
        var objCount = 0;
        var allObj = this.getObjects();
        allObj.filter(function (obj) {
            if (obj.type == objtype)
                objCount++;
        });
        return objCount;
    };
    CanvasService.prototype.calculateTax = function (tax, price, includeTax) {
        /* if (tax != null && tax != "" && includeTax === true) {
           return ((parseFloat(price) * parseFloat(tax)) / 100) + parseFloat(price);
         } else {*/
        return parseFloat(price);
        //}
    };
    /* for Price */
    CanvasService.prototype.fetchAllObjectPrices = function (priceObj) {
        var _this_1 = this;
        var totalTextPrice = 0;
        var totalClipartImgPrice = 0;
        var totalUploadImgPrice = 0;
        var totalTextExcluTaxPrice = 0;
        var totalClipartImgExcluTaxPrice = 0;
        var totalUploadImgExcluTaxPrice = 0;
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            this.getObjects(canvas).filter(function (obj) {
                if (obj.type == 'text') {
                    totalTextPrice += _this_1.calculateTax(priceObj.tax, priceObj.textPrice, priceObj.addTax);
                    totalTextExcluTaxPrice += priceObj.textPrice;
                }
                if (obj.tab == 'clipart') {
                    var clipartPrice = (obj.price != "" && obj.price != null && obj.price > 0) ? parseFloat(obj.price) : parseFloat(priceObj.addImagePrice);
                    totalClipartImgPrice += _this_1.calculateTax(priceObj.tax, clipartPrice, priceObj.addTax);
                    totalClipartImgExcluTaxPrice += clipartPrice;
                }
                if (obj.tab == 'upload') {
                    var UploadImgPrice = (parseFloat(priceObj.uploadPrice) + parseFloat(priceObj.addImagePrice));
                    totalUploadImgPrice += _this_1.calculateTax(priceObj.tax, UploadImgPrice, priceObj.addTax);
                    totalUploadImgExcluTaxPrice += UploadImgPrice;
                }
            });
        }
        return {
            totalTextPrice: totalTextPrice,
            totalClipartImgPrice: totalClipartImgPrice,
            totalUploadImgPrice: totalUploadImgPrice,
            totalTextExcluTaxPrice: totalTextExcluTaxPrice,
            totalClipartImgExcluTaxPrice: totalClipartImgExcluTaxPrice,
            totalUploadImgExcluTaxPrice: totalUploadImgExcluTaxPrice
        };
    };
    CanvasService.prototype.initZoom = function () {
        if (window.innerWidth > 1024 && window.innerHeight < 768 && this.zoom == 0) {
            this.zoom = -0.4;
        }
        if (window.innerWidth > 1024 && window.innerHeight > 900 && this.zoom == 0) {
            this.zoom = 0.2;
        }
    };
    CanvasService.prototype.initScaleFactor = function () {
        if (window.innerWidth < 640) {
            if (window.innerWidth < 640 && window.innerWidth >= 480) {
                this.scaleFactor = 1.4;
            }
            if (window.innerWidth < 480 && window.innerWidth >= 320) {
                this.scaleFactor = 1.8;
            }
            if (window.innerWidth < 320) {
                this.scaleFactor = 3.4;
            }
        }
        else {
            this.scaleFactor = 1;
        }
        this.scaleFactor = this.scaleFactor - this.zoom;
        return this.scaleFactor;
    };
    /**
     * Return data url of canvases of mentioned image id
     * @param  currentImageId [Image id of canvas]
     */
    CanvasService.prototype.getCanvasDataUrl = function (currentImageId) {
        var images = {};
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            if (this.hasCanvasObjectOrBackground(canvas)) {
                if (canvas.image_id == currentImageId) {
                    var image = canvas.toDataURL({
                        format: "png",
                        multiplier: this.scaleFactor,
                        quality: 1.0
                    });
                    image = image.substr(image.indexOf(',') + 1).toString();
                    images[key] = image;
                }
            }
        }
        return images;
    };
    /**
     * Fetch json of all canvases
     */
    CanvasService.prototype.getCanvasToJson = function () {
        var containerCanvasesJSON = {};
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            if (this.hasCanvasObjectOrBackground(canvas)) {
                var canvasJson = canvas.toJSON(this.objProperties);
                containerCanvasesJSON[key] = canvasJson;
            }
        }
        return containerCanvasesJSON;
    };
    /**
     * Fetch SVG of all canvases
     */
    CanvasService.prototype.getCanvasToSVG = function () {
        var containerCanvasesSVG = {};
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            if (this.hasCanvasObjectOrBackground(canvas)) {
                var canvasSVG = canvas.toSVG();
                for (var _b = 0, _c = this.getObjects(canvas); _b < _c.length; _b++) {
                    var obj = _c[_b];
                    if (obj.tab == "text") {
                        var fontFamily = obj.fontFamily;
                        var font_file = obj.font_file;
                        fabric__WEBPACK_IMPORTED_MODULE_10__["fabric"].fontPaths[fontFamily] = font_file;
                    }
                }
                containerCanvasesSVG[key] = canvasSVG;
            }
        }
        return containerCanvasesSVG;
    };
    /**
     * Load design based on json
     */
    CanvasService.prototype.loadDesign = function (designData) {
        var jsonObjects = JSON.parse(designData.json_objects);
        var containerCanvasesKeys = Object.keys(this.containerCanvases);
        var containerCanvasesKeysFlag = 0;
        var jsonObjectsFlag = 0;
        var data = {
            containerCanvasesKeys: containerCanvasesKeys,
            containerCanvasesKeysFlag: containerCanvasesKeysFlag,
            jsonObjectsFlag: jsonObjectsFlag,
            jsonObjects: jsonObjects,
            productId: designData.associated_product_id,
            currentProductId: designData.currentProductId,
        };
        this.loadSingleCanvasDesign(data);
    };
    /**
     * It will add object in current canvas and will call next canvas load
     */
    CanvasService.prototype.loadSingleCanvasDesign = function (data) {
        var self = this;
        var imageDesignId = data.containerCanvasesKeys[data.containerCanvasesKeysFlag];
        if (imageDesignId == undefined) {
            return;
        }
        var canvas = this.containerCanvases[imageDesignId];
        var params = {
            canvas: canvas
        };
        var currentJsonObjects = data.jsonObjects[imageDesignId];
        /**
         * If Product is different then fetch object from json object and add to canvas
         */
        if (currentJsonObjects == undefined) {
            if (data.productId != data.currentProductId) {
                currentJsonObjects = data.jsonObjects[Object.keys(data.jsonObjects)[data.containerCanvasesKeysFlag + data.jsonObjectsFlag]];
                if (currentJsonObjects == undefined) {
                    return;
                }
                data.differentProduct = true;
                if (currentJsonObjects.objects.length == 0) {
                    data.jsonObjectsFlag++;
                    self.loadSingleCanvasDesign(data);
                }
                params.differentProduct = data.differentProduct ? data.differentProduct : false;
            }
            else {
                data.containerCanvasesKeysFlag++;
                self.loadSingleCanvasDesign(data);
            }
        }
        if (currentJsonObjects == undefined) {
            return;
        }
        if (currentJsonObjects && currentJsonObjects.background) {
            canvas.setBackgroundColor(currentJsonObjects.background);
            canvas.renderAll();
        }
        fabric__WEBPACK_IMPORTED_MODULE_10__["fabric"].util.enlivenObjects(currentJsonObjects.objects, function (objectData) {
            var totalObjects = objectData.length;
            var count = 1;
            if (objectData.length > 0) {
                objectData.forEach(function (obj) {
                    params.obj = obj;
                    self.addObjectAsPerScale(params);
                    if (totalObjects == count) {
                        data.containerCanvasesKeysFlag++;
                        self.loadSingleCanvasDesign(data);
                    }
                    count++;
                });
            }
            else {
                data.containerCanvasesKeysFlag++;
                self.loadSingleCanvasDesign(data);
            }
        });
    };
    CanvasService.prototype.addSvgImage = function (obj, properties, isCenter) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var self;
            var _this_1 = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                self = this;
                return [2 /*return*/, new Promise(function (resolve, reject) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this_1, void 0, void 0, function () {
                        var _this_1 = this;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                            new fabric__WEBPACK_IMPORTED_MODULE_10__["fabric"].loadSVGFromURL(obj.src, function (svgImgObject, options) {
                                var imgObj = new fabric__WEBPACK_IMPORTED_MODULE_10__["fabric"].Group(svgImgObject);
                                imgObj['src'] = obj.src;
                                var oldFill = [];
                                //get style of orignal object
                                obj._objects.forEach(function (data) {
                                    oldFill.push(data.fill);
                                });
                                //add style to new object
                                imgObj._objects.forEach(function (data, index) {
                                    data.set({ fill: oldFill[index] });
                                });
                                _this_1.objProperties.filter(function (customProperty) {
                                    properties[customProperty] = obj[customProperty];
                                });
                                var params = {
                                    obj: imgObj,
                                    canvas: properties.canvas,
                                    properties: properties,
                                    crudServiceString: 'this.insertObjectService',
                                    isCenter: isCenter,
                                    isHistory: false,
                                };
                                self.objectCRUD(params);
                                /*this.cdr.detectChanges();*/
                                resolve();
                            });
                            return [2 /*return*/];
                        });
                    }); })];
            });
        });
    };
    /**
     * It will add object by load
     * @param objectData [canvas and object details]
     */
    CanvasService.prototype.addObjectAsPerScale = function (objectData) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this_1 = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                return [2 /*return*/, new Promise(function (resolve, reject) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this_1, void 0, void 0, function () {
                        var canvas, obj, data, canvasData, params, canvasData;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    canvas = objectData.canvas;
                                    obj = this.resizeObjectAsPerScale(objectData.obj);
                                    /**
                                  * If different product then change left top and scaleX scaleY with current canvas
                                  */
                                    if (objectData.differentProduct) {
                                        obj = this.resizeObjectAsPerCanvas(obj, canvas);
                                    }
                                    if (!(obj.type == "group")) return [3 /*break*/, 2];
                                    data = obj.toJSON();
                                    delete data.objects;
                                    data.canvas = canvas;
                                    return [4 /*yield*/, this.addSvgImage(obj, data, false)];
                                case 1:
                                    _a.sent();
                                    canvasData = { image_id: canvas.image_id, design_area_id: canvas.designarea_id };
                                    this.eventService.$pub('imageSideChangeBefore', canvasData);
                                    resolve(true);
                                    return [3 /*break*/, 3];
                                case 2:
                                    params = {
                                        obj: obj,
                                        canvas: canvas,
                                        properties: {},
                                        crudServiceString: 'this.insertObjectService',
                                        isHistory: false,
                                        isCenter: false
                                    };
                                    this.objectCRUD(params);
                                    canvasData = { image_id: canvas.image_id, design_area_id: canvas.designarea_id };
                                    this.eventService.$pub('imageSideChangeBefore', canvasData);
                                    resolve(true);
                                    _a.label = 3;
                                case 3: return [2 /*return*/];
                            }
                        });
                    }); })];
            });
        });
    };
    /**
    * It will resize object as per current canvas
    */
    CanvasService.prototype.resizeObjectAsPerCanvas = function (obj, canvas) {
        obj.left = (canvas.width * obj.left) / obj.canvasWidth;
        obj.top = (canvas.height * obj.top) / obj.canvasHeight;
        obj.scaleX = (canvas.width * obj.scaleX) / obj.canvasWidth;
        obj.scaleY = (canvas.height * obj.scaleY) / obj.canvasHeight;
        return obj;
    };
    /**
     * It will resize object as per current scaleFactor
     */
    CanvasService.prototype.resizeObjectAsPerScale = function (obj) {
        obj.top = (obj.scaleFactor * obj.top) / this.scaleFactor;
        obj.left = (obj.scaleFactor * obj.left) / this.scaleFactor;
        obj.scaleX = (obj.scaleFactor * obj.scaleX) / this.scaleFactor;
        obj.scaleY = (obj.scaleFactor * obj.scaleY) / this.scaleFactor;
        obj.scaleFactor = this.scaleFactor;
        return obj;
    };
    /**
     * It discard all active objects from canvas
     */
    CanvasService.prototype.discardActiveObjectAllCanvas = function () {
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            canvas.discardActiveObject().renderAll();
        }
    };
    CanvasService.prototype.deleteThisObject = function (obj) {
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            canvas.remove(obj).renderAll();
        }
    };
    // It will remove all objects from canvas
    CanvasService.prototype.clearCanvas = function (c) {
        if (c === void 0) { c = null; }
        if (c) {
            var objects = this.getObjects(c);
            c.backgroundColor = null;
            c.backgroundImage = null;
            if (objects.length > 0) {
                for (var _i = 0, objects_1 = objects; _i < objects_1.length; _i++) {
                    var obj = objects_1[_i];
                    var params = {
                        obj: obj,
                        canvas: c,
                        properties: null,
                        crudServiceString: 'this.removeObjectService',
                        isHistory: false,
                        removeUltimateObj: true
                    };
                    this.objectCRUD(params);
                }
            }
        }
        else {
            for (var _a = 0, _b = Object.keys(this.containerCanvases); _a < _b.length; _a++) {
                var key = _b[_a];
                var canvas = this.containerCanvases[key];
                var objects = this.getObjects(canvas);
                canvas.backgroundColor = null;
                canvas.backgroundImage = null;
                if (objects.length > 0) {
                    for (var _c = 0, objects_2 = objects; _c < objects_2.length; _c++) {
                        var obj = objects_2[_c];
                        var params = {
                            obj: obj,
                            canvas: canvas,
                            properties: null,
                            crudServiceString: 'this.removeObjectService',
                            isHistory: false,
                            removeUltimateObj: true
                        };
                        this.objectCRUD(params);
                    }
                }
                canvas.renderAll();
            }
        }
    };
    /**
     * This method clears all the history
     */
    CanvasService.prototype.clearHistory = function () {
        this.historyService.clear();
    };
    /**
    Get Object Type
    **/
    CanvasService.prototype.getObjectType = function (obj, type) {
        var response = false;
        if (obj._objects == undefined) {
            response = (obj.objType == type) ? true : false;
        }
        else {
            var stop_1 = true;
            obj._objects.forEach(function (obj) {
                if (obj.objType == type && stop_1) {
                    response = true;
                    stop_1 = false;
                }
            });
        }
        return response;
    };
    /**
    * fetch data URLs of single canvase
    */
    CanvasService.prototype.fetchSingleCanvasDataURL = function (data) {
        var canvasDataUrls = {};
        var response = {};
        if (data.containerCanvasesKeys[data.containerCanvasesKeysFlag]) {
            var imageDesignId = data.containerCanvasesKeys[data.containerCanvasesKeysFlag];
            var canvas = this.containerCanvases[imageDesignId];
            var canvasDataUrl = {};
            if (this.hasCanvasObjectOrBackground(canvas)) {
                this.setOpacity(canvas, 0);
                var canvasDataUrl_1 = canvas.toDataURL({
                    format: "png",
                    multiplier: this.fetchOutPutScaleFactor(canvas),
                    quality: 1.0
                });
                canvasDataUrl_1 = canvasDataUrl_1.substr(canvasDataUrl_1.indexOf(',') + 1).toString();
                canvasDataUrls[imageDesignId] = canvasDataUrl_1;
                this.setOpacity(canvas, 1);
            }
            response.status = 'pending';
            response.canvasDataUrls = canvasDataUrls;
        }
        else {
            response.status = 'completed';
        }
        return response;
    };
    CanvasService.prototype.setOpacity = function (canvas, opacity) {
        for (var _i = 0, _a = canvas.getObjects(); _i < _a.length; _i++) {
            var obj = _a[_i];
            if (obj.productimage == true) {
                obj.set({
                    opacity: opacity
                });
            }
        }
        canvas.renderAll();
    };
    /**
     * Return multiplier of canvas
     */
    CanvasService.prototype.fetchOutPutScaleFactor = function (canvas) {
        var multiplier;
        if (canvas.size.origWidth > canvas.size.origHeight) {
            var actiualCanvasWidth = (canvas.size.origWidth * canvas.width) / (canvas.size.toolWidth / this.scaleFactor);
            multiplier = actiualCanvasWidth / canvas.width;
        }
        else {
            var actiualCanvasHeight = (canvas.size.origHeight * canvas.height) / (canvas.size.toolHeight / this.scaleFactor);
            multiplier = actiualCanvasHeight / canvas.height;
        }
        return multiplier;
    };
    /**
     * This check if canvas has objects or background
     */
    CanvasService.prototype.hasCanvasObjectOrBackground = function (canvas) {
        var hasObjects = this.getObjects(canvas).length > 0;
        var hasBackground = canvas.backgroundColor || canvas.backgroundImage;
        return hasObjects || hasBackground;
    };
    CanvasService.prototype.hasCanvasObjectOrBackgroundAll = function () {
        var allcanvas = Object.values(this.containerCanvases), totalCanvases = allcanvas.length, i = 0, hasObjects = false, hasBackground = false;
        for (; i < totalCanvases && !hasObjects && !hasBackground; i++) {
            hasObjects = allcanvas[i].getObjects().length > 0;
            hasBackground = allcanvas[i].backgroundColor || allcanvas[i].backgroundImage;
        }
        return hasObjects || hasBackground;
    };
    CanvasService.prototype.hasAnyCanvasDesign = function () {
        var response = false;
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            if (this.hasCanvasObjectOrBackground(canvas)) {
                response = true;
            }
        }
        return response;
    };
    CanvasService.prototype.Flip = function (alignment) {
        var canvas = this.currentCanvas;
        var obj = canvas.getActiveObject();
        var flipValue;
        var properties = {};
        if (obj) {
            if (alignment == "horizontal") {
                flipValue = (obj.flipX == false) ? true : false;
                properties = { flipX: flipValue };
            }
            else {
                flipValue = (obj.flipY == false) ? true : false;
                properties = { flipY: flipValue };
            }
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
            };
            this.objectCRUD(params);
        }
    };
    CanvasService.prototype.ObjectLayer = function (option, object) {
        if (object === void 0) { object = {}; }
        var canvas = this.currentCanvas, totalObjects = Object.keys(object).length, selectedObj = (totalObjects === 0) ? canvas.getActiveObject() : object, properties = { option: option };
        var params = {
            obj: selectedObj,
            properties: properties,
            crudServiceString: 'this.rightPanelUpdateService'
        };
        this.objectCRUD(params);
    };
    CanvasService.prototype.checkSelectable = function (obj) {
        return (obj.selectable) ? true : false;
    };
    CanvasService.prototype.deleteObject = function (object) {
        if (object === void 0) { object = {}; }
        var activeObjs = this.currentCanvas.getActiveObjects();
        var removeObjects = (Object.keys(object).length === 0) ? activeObjs : object;
        var selectable = true;
        if (activeObjs.length == 0 && this.checkSelectable(removeObjects) == false) {
            selectable = false;
        }
        if (selectable) {
            var params = {
                obj: removeObjects,
                properties: null,
                crudServiceString: 'this.removeObjectService',
            };
            this.objectCRUD(params);
            this.currentCanvas.discardActiveObject();
            this.currentCanvas.requestRenderAll();
        }
    };
    CanvasService.prototype.calculateLowResolutionWarning = function () {
        var lowResolutionObjects = 0;
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            for (var _b = 0, _c = this.getObjects(canvas); _b < _c.length; _b++) {
                var obj = _c[_b];
                if (obj.type == "image") {
                    var desiredWidth = (canvas.size.origWidth * obj.scaleX * obj.width) / canvas.size.toolWidth;
                    if (desiredWidth > obj.width) {
                        lowResolutionObjects++;
                    }
                }
            }
        }
        if (lowResolutionObjects != 0) {
            return true;
        }
        return false;
    };
    CanvasService.prototype.getObjectCount = function (tab) {
        var totalCount = 0;
        for (var _i = 0, _a = Object.keys(this.containerCanvases); _i < _a.length; _i++) {
            var key = _a[_i];
            var canvas = this.containerCanvases[key];
            if (canvas != undefined) {
                var getObjs = this.getObjects(canvas);
                getObjs.filter(function (object) {
                    if (object.tab == tab) {
                        totalCount++;
                    }
                });
            }
        }
        return totalCount;
    };
    CanvasService.prototype.usedColorsCounter = function () {
        var _this_1 = this;
        this.usedColorArr = [];
        var canvasKeys = Object.keys(this.containerCanvases), canvasObjects;
        for (var _i = 0, canvasKeys_1 = canvasKeys; _i < canvasKeys_1.length; _i++) {
            var key = canvasKeys_1[_i];
            canvasObjects = this.getObjects(this.containerCanvases[key]);
            canvasObjects.forEach(function (data) {
                if (data.type == 'text') {
                    var fill = data.fill;
                    var stroke = data.stroke ? data.stroke : null;
                    var shadow = data.shadow ? data.shadow.color : null;
                    if (fill)
                        _this_1.usedColorArr.push(fill);
                    if (stroke)
                        _this_1.usedColorArr.push(stroke);
                    if (shadow) {
                        _this_1.usedColorArr.push(shadow);
                    }
                }
                if (data.objType == 'image' && data.isSvg == true) {
                    data._objects.forEach(function (svgColor) {
                        if (svgColor.fill) {
                            if (_this_1.usedColorArr.indexOf(svgColor.fill) == -1) {
                                _this_1.usedColorArr.push(svgColor.fill);
                            }
                        }
                    });
                }
            });
            var backgroundColor = this.containerCanvases[key].backgroundColor;
            if (backgroundColor) {
                this.usedColorArr.push(backgroundColor);
            }
        }
        var colorArr = [];
        for (var i = 0; i < this.usedColorArr.length; i++) {
            if (!colorArr.includes(this.usedColorArr[i])) {
                colorArr.push(this.usedColorArr[i]);
            }
        }
        this.usedColorCounter = colorArr.length;
    };
    CanvasService.prototype.applyUltimateLock = function (obj, loadDesign) {
        if (loadDesign === void 0) { loadDesign = true; }
        if (!loadDesign) {
            if (obj.ultimatelock) {
                obj.ultimatelock = obj.lockMovementX = obj.lockMovementY = false;
                obj.hasControls = true;
            }
            else {
                obj.ultimatelock = obj.lockMovementX = obj.lockMovementY = true;
                obj.hasControls = false;
            }
        }
        else {
            if (obj.ultimatelock) {
                obj.ultimatelock = obj.lockMovementX = obj.lockMovementY = true;
                obj.hasControls = false;
            }
        }
        return obj;
    };
    CanvasService.prototype.removeCurrentObject = function () {
        var activeObjects = this.currentCanvas.getActiveObjects();
        var params = {
            obj: activeObjects,
            properties: null,
            crudServiceString: 'this.removeObjectService',
        };
        this.objectCRUD(params);
    };
    /**
     * canavs object
     *
     * @param canvas
     */
    CanvasService.prototype.getObjects = function (canvas, checkActiveObj) {
        if (canvas === void 0) { canvas = null; }
        if (checkActiveObj === void 0) { checkActiveObj = false; }
        // if no canvas object is passed, current canvas will be used
        canvas = (canvas == null) ? this.currentCanvas : canvas;
        // prepare local variables
        var allObjects = (!checkActiveObj) ? canvas.getObjects() : canvas.getActiveObjects(), resultObjs = [], ignoreThis = null, self = this;
        // traverse through allObjects object
        allObjects.filter(function (currObj) {
            // ignoreThis works as a flag
            // which will check whether current object matches any of the properties specified
            // in objsToIgnore      
            ignoreThis = self.objsToIgnore.indexOf(self.objsToIgnore.find(function (objToIgnore) { return (currObj.hasOwnProperty(objToIgnore.key) && currObj[objToIgnore.key] == objToIgnore.value); }));
            // if ignoreThis is -1, that means current object does not match any properties to ignore
            // so we will push this object to our resultObjs variable
            if (ignoreThis == -1)
                resultObjs.push(currObj);
        });
        // finally return this array of object
        return resultObjs;
    };
    CanvasService.prototype.rangeSliderUndoRedo = function (properties) {
        var params = {
            obj: this.currentCanvas.getActiveObjects(),
            canvas: this.currentCanvas,
            crudServiceString: 'this.rangeSliderUpdateService'
        };
        params = Object.assign(params, { properties: properties });
        this.objectCRUD(params);
    };
    CanvasService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_insert_object_service__WEBPACK_IMPORTED_MODULE_4__["InsertObjectService"],
            _update_object_service__WEBPACK_IMPORTED_MODULE_5__["UpdateObjectService"],
            _remove_object_service__WEBPACK_IMPORTED_MODULE_6__["RemoveObjectService"],
            _canvas_update_service__WEBPACK_IMPORTED_MODULE_7__["CanvasUpdateService"],
            _components_image_effects_image_effects_service__WEBPACK_IMPORTED_MODULE_8__["ImageEffectsService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"],
            _history_service__WEBPACK_IMPORTED_MODULE_9__["HistoryService"],
            _components_right_panel_right_panel_update_service__WEBPACK_IMPORTED_MODULE_11__["RightPanelUpdateService"],
            _components_cropper_cropper_update_service__WEBPACK_IMPORTED_MODULE_1__["CropperUpdateService"],
            _range_slider_update_service_service__WEBPACK_IMPORTED_MODULE_12__["RangeSliderUpdateServiceService"]])
    ], CanvasService);
    return CanvasService;
}());



/***/ }),

/***/ "./src/app/services/customise-controls.service.ts":
/*!********************************************************!*\
  !*** ./src/app/services/customise-controls.service.ts ***!
  \********************************************************/
/*! exports provided: CustomiseControlsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomiseControlsService", function() { return CustomiseControlsService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var fabric_customise_controls__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! fabric-customise-controls */ "./node_modules/fabric-customise-controls/dist/customiseControls.js");
/* harmony import */ var fabric_customise_controls__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(fabric_customise_controls__WEBPACK_IMPORTED_MODULE_4__);





var CustomiseControlsService = /** @class */ (function () {
    function CustomiseControlsService(canvasService, eventService) {
        var _this = this;
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.eventService.$sub('objectAdded', function (obj) {
            _this.customizeControls(obj);
        });
        this.eventService.$sub('objectSelectionCreated', function (obj) {
            _this.customizeControls(obj);
        });
        this.eventService.$sub('objectSelectionUpdated', function (obj) {
            _this.customizeControls(obj);
        });
    }
    CustomiseControlsService.prototype.customizeControls = function (obj) {
        var self = this;
        if (obj) {
            obj.setControlsVisibility({
                mt: true,
                tl: true,
                tr: true,
                bl: true,
                br: true,
                mtr: false,
                mb: true,
                ml: false,
                mr: false,
            });
            self.canvasService.currentCanvas.renderAll();
        }
        fabric.Canvas.prototype.customiseControls({
            tl: {
                settings: {
                    centeredScaling: true,
                },
                action: 'scale'
            },
            tr: {
                settings: {
                    centeredScaling: true,
                },
                action: 'scale',
            },
            bl: {
                settings: {
                    centeredScaling: true,
                },
                action: 'scale',
            },
            br: {
                settings: {
                    centeredScaling: true,
                },
                action: 'scale',
            },
            mt: {
                action: 'rotate',
                cursor: 'hand',
            },
            mb: {
                action: function (e, target) {
                    self.eventService.$pub('updateContextMenu', target);
                },
                cursor: 'hand',
            },
        });
        if (navigator.userAgent.indexOf('MSIE') == -1 && navigator.userAgent.indexOf('Trident/') == -1) {
            obj.customiseCornerIcons({
                settings: {
                    cornerSize: this.canvasService.cornerSize,
                    cornerShape: 'circle',
                    cornerBackgroundColor: 'white',
                    cornerPadding: 10
                },
                tl: {
                    icon: 'assets/img/svg/top-left-arrow.svg',
                },
                tr: {
                    icon: 'assets/img/svg/top-right-arrow.svg',
                },
                bl: {
                    icon: 'assets/img/svg/bottom-left-arrow.svg',
                },
                br: {
                    icon: 'assets/img/svg/bottom-right-arrow.svg',
                },
                mt: {
                    icon: 'assets/img/svg/rotate-to-left-button.svg',
                },
                mb: {
                    icon: 'assets/img/three-dots-menu.svg',
                },
            }, function () {
                self.canvasService.currentCanvas.renderAll();
            });
        }
        else {
            obj.customiseCornerIcons({
                settings: {
                    cornerSize: this.canvasService.cornerSize,
                    cornerShape: 'circle',
                    cornerBackgroundColor: 'white',
                    cornerPadding: 10
                },
                tl: {
                    icon: '',
                },
                tr: {
                    icon: '',
                },
                bl: {
                    icon: '',
                },
                br: {
                    icon: '',
                },
                mt: {
                    icon: '',
                },
                mb: {
                    icon: '',
                },
            }, function () {
                self.canvasService.currentCanvas.renderAll();
            });
        }
    };
    CustomiseControlsService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_services_canvas_service__WEBPACK_IMPORTED_MODULE_2__["CanvasService"], angular7_pubsub__WEBPACK_IMPORTED_MODULE_3__["PubSubService"]])
    ], CustomiseControlsService);
    return CustomiseControlsService;
}());



/***/ }),

/***/ "./src/app/services/design.service.ts":
/*!********************************************!*\
  !*** ./src/app/services/design.service.ts ***!
  \********************************************/
/*! exports provided: DesignService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DesignService", function() { return DesignService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _components_price_price_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../components/price/price.service */ "./src/app/components/price/price.service.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_app_services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/services/main.service */ "./src/app/services/main.service.ts");
/* harmony import */ var src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! fabric */ "./node_modules/fabric/dist/fabric.js");
/* harmony import */ var fabric__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(fabric__WEBPACK_IMPORTED_MODULE_7__);








var DesignService = /** @class */ (function () {
    function DesignService(mainService, eventService, canvasService, translate, priceService) {
        this.mainService = mainService;
        this.eventService = eventService;
        this.canvasService = canvasService;
        this.translate = translate;
        this.priceService = priceService;
        this.sameImageIdcanvasArray = [];
        // additionalOptions(eg nameNumber)
        this.additionalOptions = {};
        // if design is already loaded flag
        this.isDesignLoaded = false;
        this.cnavasCount = 0;
        var params = this.mainService.getUrlParams(['design']);
        this.designId = params['design'];
        var self = this;
        this.eventService.$sub('allcanvasCreated', function (allImageIds) {
            if (self.designId && self.isDesignLoaded == false) {
                self.loadDesign(self.designId);
                self.isDesignLoaded = true;
            }
        });
    }
    /**
     * Save current design
     */
    DesignService.prototype.saveDesignData = function (data) {
        var _this = this;
        return new Promise(function (resolve, reject) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
            var imageId, images, containerCanvasesJson, sidesAndParentImageIDs, containerCanvasesSVG, params, url;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                imageId = this.canvasService.firstImageId;
                images = this.canvasService.getCanvasDataUrl(imageId);
                containerCanvasesJson = this.canvasService.getCanvasToJson();
                this.mainService.lastSavedData.json_objects = JSON.stringify(containerCanvasesJson);
                data.sweetAlert = data.hasOwnProperty('sweetAlert') ? data.sweetAlert : true;
                sidesAndParentImageIDs = this.fetchImageSidesParentIdsWithId(this.canvasService.allImagesWithIds);
                containerCanvasesSVG = '';
                if (this.generateSVG) {
                    // containerCanvasesSVG = await this.allSvgData();
                    containerCanvasesSVG = this.canvasService.getCanvasToSVG();
                }
                params = {
                    'dataUrl': images,
                    'product_image_data': this.canvasService.allImagesWithIds[imageId],
                    'product_id': this.mainService.productId,
                    'canvasJson': btoa(unescape(encodeURIComponent(JSON.stringify(containerCanvasesJson)))),
                    'canvasSVG': btoa(unescape(encodeURIComponent(JSON.stringify(containerCanvasesSVG)))),
                    'customer_id': this.mainService.loggedInUserId,
                    'scaleFactor': this.canvasService.scaleFactor,
                    'associated_product_id': this.mainService.associatedProductId,
                    'title': data.hasOwnProperty('title') ? data.title : '',
                    'canvas_dataurl_file': data.hasOwnProperty('canvas_dataurl_file') ? data.canvas_dataurl_file + '.txt' : '',
                    'sidesAndParentImageIDs': sidesAndParentImageIDs,
                    'prices': this.mainService.otherPrices,
                    'additional_price': this.priceService.additionalPrice,
                    'customOptionsPrice': (data.customOptionsPrice) ? data.customOptionsPrice : '',
                    'cartData': data.hasOwnProperty('cartData') ? data.cartData : null,
                    'customer_comments': data.hasOwnProperty('addnote') ? data.addnote : null,
                    'additionalOptions': this.additionalOptions
                }, url = 'productdesigner/Designs/SaveDesign?isAjax=true';
                if (data.hasOwnProperty('designId') && data.designId != null)
                    params = Object.assign(params, { design_id: data.designId });
                if (data.hasOwnProperty('qty') && data.qty != null)
                    params = Object.assign(params, { qty: data.qty });
                this.eventService.$pub("showMainLoader");
                this.mainService.post(url, params).then(function (resp) {
                    _this.eventService.$pub("hideMainLoader");
                    if (resp && resp.status == "success") {
                        if (data.hasOwnProperty('closeThisModal')) {
                            data.closeThisModal.hide();
                        }
                        if (resp.hasOwnProperty('titleExists') && resp.titleExists == true) {
                            resolve({ titleExists: true, designId: resp.design_id });
                        }
                        else if (data.sweetAlert == true) {
                            _this.canvasService.clearHistory();
                            _this.eventService.$pub('undoRedo');
                            if (!data.hasOwnProperty('disablePopup'))
                                _this.mainService.swal(_this.translate.instant("Success"), _this.translate.instant("Design saved successfully"), "success");
                            resp.product_id = _this.mainService.productId;
                            if (params.hasOwnProperty('design_id'))
                                resp = Object.assign(resp, { clearCache: true });
                            _this.eventService.$pub('designSaved', resp);
                        }
                    }
                    resolve(resp);
                });
                return [2 /*return*/];
            });
        }); });
    };
    DesignService.prototype.allSvgData = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var counter, canvasArr, index, array1, key, canvasSVgArr, finalcanvasSVgArr, i, j, canvas, subCanvas;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        counter = 0;
                        canvasArr = this.canvasService.allImages;
                        array1 = [], canvasSVgArr = {}, finalcanvasSVgArr = {};
                        for (i = 0; i < canvasArr.length; i++) {
                            if (canvasArr[i].dim.length > 1) {
                                for (j = 0; j < canvasArr[i].dim.length; j++) {
                                    index = "@" + canvasArr[i].dim[j].image_id + "&" + canvasArr[i].dim[j].designareaId;
                                    if (!array1[canvasArr[i].image_id]) {
                                        array1[canvasArr[i].image_id] = [];
                                    }
                                    array1[canvasArr[i].image_id].push(this.canvasService.containerCanvases[index]);
                                }
                            }
                        }
                        canvas = new fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].Canvas();
                        canvas.setHeight('540');
                        canvas.setWidth('540');
                        canvas.backgroundColor = 'red';
                        canvas.renderAll();
                        subCanvas = array1[15];
                        //for (let i = 0; i < subCanvas.length; i++) {
                        // let top = parseFloat(subCanvas[i].dim.y1);
                        // let left = parseFloat(subCanvas[i].dim.x1);
                        // let svg = subCanvas[i].toSVG();
                        return [4 /*yield*/, this.createSVGfromCanvas(canvas, subCanvas, canvasSVgArr, 0, counter, 0, subCanvas.length).then(function (resp) {
                                finalcanvasSVgArr = resp;
                            }).catch(function (err) { return console.log(err); })];
                    case 1:
                        //for (let i = 0; i < subCanvas.length; i++) {
                        // let top = parseFloat(subCanvas[i].dim.y1);
                        // let left = parseFloat(subCanvas[i].dim.x1);
                        // let svg = subCanvas[i].toSVG();
                        _a.sent();
                        // fabric.loadSVGFromString(svg, function (objects, options) {
                        // 	var loadedObject = fabric.util.groupSVGElements(objects, options);
                        // 	loadedObject.top = top;
                        // 	loadedObject.left = left;
                        // 	canvas.add(loadedObject);
                        // 	canvas.renderAll();
                        // 	counter++;
                        // 	if (subCanvas.length == i) {
                        // 		let canvasSVG = canvas.toSVG();
                        // 		canvasSVgArr[key] = canvasSVG;
                        // 		console.log('Start-----------------------------');
                        // 		console.log(canvasSVgArr[key]);
                        // 		console.log('End-----------------------------');
                        // 	}
                        // });				
                        // let canvasSVG = canvas.toSVG();
                        // canvasSVgArr[key] = canvasSVG;
                        // console.log(canvasSVgArr[key]);
                        // break;
                        //}
                        return [2 /*return*/, finalcanvasSVgArr];
                }
            });
        });
    };
    DesignService.prototype.createSVGfromCanvas = function (canvas, subCanvas, canvasSVgArr, key, counter, i, len) {
        var _this = this;
        var self = this;
        return new Promise(function (resolve, reject) {
            while (i != (len - 1)) {
                i = _this.demo(canvas, subCanvas, canvasSVgArr, key, counter, i, len);
            }
            if (i == (len - 1)) {
                var canvasSVG = canvas.toSVG();
                canvasSVgArr[key] = canvasSVG;
                console.log('Start-----------------------------');
                console.log(canvasSVgArr[key]);
                console.log('End-----------------------------');
                resolve(canvasSVgArr);
            }
        });
    };
    DesignService.prototype.demo = function (canvas, subCanvas, canvasSVgArr, key, counter, i, len) {
        if (subCanvas[i]) {
            var top_1 = parseFloat(subCanvas[i].dim.y1);
            var left_1 = parseFloat(subCanvas[i].dim.x1);
            var svg = subCanvas[i].toSVG();
            fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].loadSVGFromString(svg, function (objects, options) {
                var loadedObject = fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].util.groupSVGElements(objects, options);
                loadedObject.top = top_1;
                loadedObject.left = left_1;
                canvas.add(loadedObject);
                canvas.renderAll();
            });
            i++;
            return i;
        }
    };
    DesignService.prototype.fetchImageSidesParentIdsWithId = function (allImagesWithIds) {
        var sides = {};
        var parentImageIds = {};
        for (var index in allImagesWithIds) {
            var image = allImagesWithIds[index];
            sides[image.image_id] = image.image_side;
            parentImageIds[image.image_id] = image.parent_image_id;
        }
        return [sides, parentImageIds];
    };
    /**
     * Load design based on design Id
     */
    DesignService.prototype.loadDesign = function (designId) {
        var _this = this;
        var params = { 'designId': designId, 'productId': this.mainService.productId }, url = 'productdesigner/Designs/LoadDesign', cacheKey = 'LoadDesign' + designId + this.mainService.baseUrl;
        this.mainService.getData(url, params, cacheKey, null, true).then(function (designData) {
            if (designData.status == 'success') {
                _this.canvasService.clearCanvas();
                designData.currentProductId = _this.mainService.associatedProductId;
                _this.canvasService.loadDesign(designData);
                _this.mainService.lastSavedData.json_objects = designData.json_objects;
                if (designData.hasOwnProperty('prices')) {
                    var self_1 = _this;
                    setTimeout(function () {
                        var pricesObj = atob(designData.prices);
                        pricesObj = JSON.parse(pricesObj);
                        self_1.priceService.extraPriceToBeAdded.customOptionsPrice = (pricesObj.customOptionsPrice != '') ? parseFloat(pricesObj.customOptionsPrice) : 0;
                        pricesObj.qty = parseInt(pricesObj.qty);
                        if (pricesObj.qty > 1) {
                            self_1.priceService.extraPriceToBeAdded.productPrice = self_1.priceService.defaultPrice * (pricesObj.qty - 1);
                        }
                        self_1.priceService.totalQty = pricesObj.qty;
                        self_1.priceService.addThisPrice();
                    }, 500);
                }
                var self_2 = _this;
                setTimeout(function () {
                    self_2.eventService.$pub('designLoaded', designData);
                }, 500);
            }
        }).catch(function (err) { return console.log(err); });
    };
    DesignService.prototype.saveAllSidesCanvasData = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var containerCanvasesKeys = Object.keys(_this.canvasService.containerCanvases);
            var containerCanvasesKeysFlag = 0;
            var data = {
                containerCanvasesKeys: containerCanvasesKeys,
                containerCanvasesKeysFlag: containerCanvasesKeysFlag,
                timestamp: _this.getCurrentDateTimeStamp()
            };
            _this.saveSingleSideData(data, resolve);
        });
    };
    /**
     * Save single canvas data URL
     */
    DesignService.prototype.saveSingleSideData = function (data, resolve) {
        var _this = this;
        var self = this;
        var response = this.canvasService.fetchSingleCanvasDataURL(data);
        if (response.status == 'pending' && Object.keys(response.canvasDataUrls).length > 0) {
            var url = 'productdesigner/Designs/SaveSingleSideData', params = {};
            params['canvasData'] = (Object.keys(response.canvasDataUrls).length > 0) ? btoa(JSON.stringify(response.canvasDataUrls)) : '';
            params['flag'] = data.containerCanvasesKeysFlag;
            params['timestamp'] = data.timestamp;
            this.mainService.post(url, params).then(function (resp) {
                if (resp.status == 'success') {
                    if (data.containerCanvasesKeysFlag == 0) {
                        self.generateSVG = resp.generateSVG;
                    }
                    data.containerCanvasesKeysFlag++;
                    _this.saveSingleSideData(data, resolve);
                }
            });
        }
        else if (response.status == 'pending') {
            data.containerCanvasesKeysFlag++;
            this.saveSingleSideData(data, resolve);
        }
        else if (response.status == 'completed') {
            response.timestamp = data.timestamp;
            resolve(response);
        }
    };
    /**
     * Return current timestamp
     */
    /**
         * Return current timestamp
         */
    DesignService.prototype.getCurrentDateTimeStamp = function () {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1;
        var yyyy = today.getFullYear();
        if (dd < 10) {
            dd = '0' + dd;
        }
        if (mm < 10) {
            mm = '0' + mm;
        }
        var to_day = mm + dd + yyyy;
        return to_day + today.getTime();
    };
    DesignService.prototype.generateSVGDesign = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var imagesId, canvasArr, index, array1, key, canvasSVgArr, i, j, imgIdIndex, _a, _b, _i, canvas, imgId, currentImgUrl, height, width, obj, mainCanvas, canvasSVG, params, url;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        imagesId = [];
                        canvasArr = this.canvasService.allImages;
                        array1 = [], canvasSVgArr = {};
                        for (i = 0; i < canvasArr.length; i++) {
                            for (j = 0; j < canvasArr[i].dim.length; j++) {
                                index = "@" + canvasArr[i].dim[j].image_id + "&" + canvasArr[i].dim[j].designareaId;
                                if (!array1[canvasArr[i].image_id]) {
                                    array1[canvasArr[i].image_id] = [];
                                }
                                array1[canvasArr[i].image_id].push(this.canvasService.containerCanvases[index]);
                            }
                        }
                        imgIdIndex = 0;
                        _a = [];
                        for (_b in array1)
                            _a.push(_b);
                        _i = 0;
                        _c.label = 1;
                    case 1:
                        if (!(_i < _a.length)) return [3 /*break*/, 5];
                        key = _a[_i];
                        canvas = new fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].Canvas();
                        imgId = imagesId[imgIdIndex];
                        currentImgUrl = this.canvasService.allImagesWithIds[this.canvasService.activeImageId]['url'];
                        height = this.canvasService.allImages[imgIdIndex].height;
                        width = this.canvasService.allImages[imgIdIndex].width;
                        imgIdIndex++;
                        obj = array1[key];
                        this.cnavasCount = 0;
                        /*for(let i=0;i<obj.length;i++){
                            await this.loadSvgToString(obj[i], canvas).then((canvasChanges) => {
                                canvas = Object.assign(canvas, canvasChanges);
                            });
                        }*/
                        return [4 /*yield*/, this.addObjTOCanvas(obj, canvas)];
                    case 2:
                        /*for(let i=0;i<obj.length;i++){
                            await this.loadSvgToString(obj[i], canvas).then((canvasChanges) => {
                                canvas = Object.assign(canvas, canvasChanges);
                            });
                        }*/
                        _c.sent();
                        mainCanvas = canvas;
                        if (!(mainCanvas && mainCanvas.getObjects().length > 0)) return [3 /*break*/, 4];
                        canvasSVG = mainCanvas.toSVG();
                        mainCanvas = "";
                        params = {
                            designId: atob(this.designId),
                            canvasSVG: btoa(unescape(encodeURIComponent(JSON.stringify(canvasSVG))))
                        }, url = 'productdesigner/index/generateSvg';
                        return [4 /*yield*/, this.mainService.getData(url, params, null).then(function (response) {
                            }).catch(function (err) { return console.log(err); })];
                    case 3:
                        _c.sent();
                        _c.label = 4;
                    case 4:
                        _i++;
                        return [3 /*break*/, 1];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    DesignService.prototype.addObjTOCanvas = function (obj, canvas) {
        var _loop_1 = function (i) {
            canvas.setHeight(obj[i].size.origHeight);
            canvas.setWidth(obj[i].size.origHeight);
            var mul = this_1.canvasService.fetchOutPutScaleFactor(obj[i]);
            var canvasMul = mul / this_1.canvasService.scaleFactor;
            obj[i].getObjects().forEach(function (data) {
                data.top *= mul;
                data.left *= mul;
                data.left = (parseInt(obj[i].dim.x1) * canvasMul) + parseInt(data.left);
                data.top = (parseInt(obj[i].dim.y1) * canvasMul) + parseInt(data.top);
                if (data.tab == "text") {
                    var fontFamily = data.fontFamily;
                    fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].fontPaths[fontFamily] = fontFamily + '.ttf';
                }
                var clippingRect = new fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].Rect({
                    width: parseInt(obj[i].dim.width) * canvasMul,
                    height: parseInt(obj[i].dim.height) * canvasMul,
                    top: parseInt(obj[i].dim.y1) * canvasMul,
                    left: parseInt(obj[i].dim.x1) * canvasMul,
                    absolutePositioned: true
                });
                data.scaleX *= mul;
                data.scaleY *= mul;
                data.clipPath = clippingRect;
                /*canvas.add(clippingRect);*/
                canvas.add(data);
                canvas.renderAll();
            });
        };
        var this_1 = this;
        for (var i = 0; i < obj.length; i++) {
            _loop_1(i);
        }
        return canvas;
    };
    /*Currently not in use*/
    /*loadSvgToString(obj,canvas){
        let self = this;
        for(let i=0;i<obj.length;i++){
            if(obj[i].getObjects().length > 0){
                fabric.loadSVGFromString(obj[i].toSVG(),function(objects, options) {
                    var svgobj = fabric.util.groupSVGElements(objects, options);
                    svgobj.left = parseInt(obj[i].dim.x1);
                    svgobj.top = parseInt(obj[i].dim.y1);
                    canvas.add(svgobj).renderAll();
                });
            }
        }
        return canvas;
    }*/
    DesignService.prototype.loadSvgToString = function (oldCanvas, newCanvas) {
        var _this = this;
        return new Promise(function (resolve, reject) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
            var self, svgData;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                self = this;
                if (oldCanvas && oldCanvas.getObjects().length > 0) {
                    svgData = oldCanvas.toSVG();
                    fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].loadSVGFromString(svgData, function (objects, options) {
                        var svgobj = new fabric__WEBPACK_IMPORTED_MODULE_7__["fabric"].Group(objects);
                        svgobj.left = parseInt(oldCanvas.dim.x1);
                        svgobj.top = parseInt(oldCanvas.dim.y1);
                        svgobj.height = parseInt(oldCanvas.dim.height);
                        svgobj.width = parseInt(oldCanvas.dim.width);
                        newCanvas.add(svgobj).renderAll();
                        resolve(newCanvas);
                    });
                }
                return [2 /*return*/];
            });
        }); });
        /*new fabric.loadSVGFromURL("http://localhost/test.svg", (objects, options) => {
          let imgObj = fabric.util.groupSVGElements(objects, options);
          imgObj.left = parseInt(oldCanvas.dim.x1);
          imgObj.top = parseInt(oldCanvas.dim.y1);
          imgObj.height = parseInt(oldCanvas.dim.height);
          imgObj.width = parseInt(oldCanvas.dim.width);
          newCanvas.add(imgObj);
        });*/
    };
    DesignService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [src_app_services_main_service__WEBPACK_IMPORTED_MODULE_3__["MainService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_5__["PubSubService"],
            src_app_services_canvas_service__WEBPACK_IMPORTED_MODULE_4__["CanvasService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__["TranslateService"],
            _components_price_price_service__WEBPACK_IMPORTED_MODULE_1__["PriceService"]])
    ], DesignService);
    return DesignService;
}());



/***/ }),

/***/ "./src/app/services/history.service.ts":
/*!*********************************************!*\
  !*** ./src/app/services/history.service.ts ***!
  \*********************************************/
/*! exports provided: HistoryService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HistoryService", function() { return HistoryService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");



var HistoryService = /** @class */ (function () {
    function HistoryService(eventService) {
        var _this = this;
        this.eventService = eventService;
        this.undoStack = {};
        this.redoStack = {};
        // This check for if object is modified due to inbuilt fabric property
        this.eventService.$sub('canvasObjectModified', function (obj) {
            var currentState = obj._stateProperties;
            var properties = {
                fontSize: currentState.fontSize,
                left: currentState.left,
                top: currentState.top,
                angle: currentState.angle,
                scaleX: currentState.scaleX,
                scaleY: currentState.scaleY
            };
            var params = {
                obj: obj,
                properties: properties,
                crudServiceString: 'this.updateObjectService',
                isObjectModify: true
            };
            _this.canvasService.objectCRUD(params);
        });
    }
    HistoryService.prototype.initCanvasService = function (canvasService) {
        this.canvasService = canvasService;
    };
    /**
     * This Method push performed operation into stack
     * @param {any} crudService [Operation service insert/update/remove]
     */
    HistoryService.prototype.push = function (crudService) {
        var designarea_id = this.canvasService.currentCanvas.designarea_id;
        if (this.undoStack[designarea_id] == undefined) {
            this.undoStack[designarea_id] = [];
        }
        this.undoStack[designarea_id].push(crudService);
        this.eventService.$pub('undoRedo');
    };
    /**
     * This method will pop last executed operation and trigger its unexec method
     */
    HistoryService.prototype.undo = function () {
        var designarea_id = this.canvasService.currentCanvas.designarea_id;
        var crudService = this.undoStack[designarea_id].pop();
        if (crudService) {
            crudService.unexec();
        }
        // Push undostack value into redostack
        if (this.redoStack[designarea_id] == undefined) {
            this.redoStack[designarea_id] = [];
        }
        this.redoStack[designarea_id].push(crudService);
    };
    /**
     * This method will pop value from redostack and trigger its exec method
     */
    HistoryService.prototype.redo = function () {
        var designarea_id = this.canvasService.currentCanvas.designarea_id;
        var crudService = this.redoStack[designarea_id].pop();
        if (crudService) {
            crudService.exec();
        }
        this.undoStack[designarea_id].push(crudService);
    };
    /**
     * Clear undo stack and redo stack
     */
    HistoryService.prototype.clear = function () {
        this.undoStack = {};
        this.redoStack = {};
    };
    HistoryService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"]])
    ], HistoryService);
    return HistoryService;
}());



/***/ }),

/***/ "./src/app/services/insert-object.service.ts":
/*!***************************************************!*\
  !*** ./src/app/services/insert-object.service.ts ***!
  \***************************************************/
/*! exports provided: InsertObjectService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InsertObjectService", function() { return InsertObjectService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var InsertObjectService = /** @class */ (function () {
    function InsertObjectService() {
        /**
        * initializing each fabric object
        *
        * @param obj object to be added on canvas
        * @param properties object properties
        * @param isCenter flag variable that will indicate whether to centeralize the new object on canvas
        */
        this.init = function (params) {
            var obj = params.obj, properties = params.properties, canvasService = params.service, isCenter = params.hasOwnProperty('isCenter') ? params.isCenter : true, canvas = params.canvas ? params.canvas : canvasService.currentCanvas, eventService = params.eventService;
            obj.scaleFactor = canvasService.scaleFactor;
            if (!properties.id) {
                properties.id = 'id_' + Date.now();
            }
            properties.canvasWidth = canvas.width;
            properties.canvasHeight = canvas.height;
            properties.imageDesignId = '@' + canvas.image_id + '&' + canvas.designarea_id;
            // Center Scaling for object
            properties.centeredScaling = true;
            //When set to `true`, object's cache will be rerendered next render call.
            properties.dirty = true;
            properties.noScaleCache = false;
            properties.objectCaching = false;
            if (properties.objType && properties.objType == 'image' && !properties.ignoreBestFit) {
                // best fit properties
                var bestFitProperties = canvasService.getBestFitProperties(obj);
                // before filtering best fir object, we need to assign objType to current obj
                obj.objType = properties.objType;
                // filter properties
                bestFitProperties = canvasService.filterBestFitProperties(bestFitProperties, obj);
            }
            // set properties to current obj
            obj.set(properties);
            obj.isCenter = isCenter;
            return {
                /**
                * After initializing each fabric object, this method is called to apply->insert the same on canvas
                *
                */
                exec: function () {
                    // return of obj is null
                    if (!obj)
                        return;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    eventService.$pub('objectAddedBefore', obj);
                    // add obj to current canvas and render the same
                    canvas.add(obj);
                    // set coordinates
                    obj.setCoords();
                    // if isCenter flag is true, centeralize the obj
                    if (obj.isCenter === true)
                        obj.center();
                    // set current object as active
                    var allCanvas = canvasService.containerCanvases;
                    for (var key in allCanvas) {
                        allCanvas[key].discardActiveObject().renderAll();
                    }
                    canvasService.currentCanvas = canvas;
                    canvas.setActiveObject(obj);
                    // render current canvas
                    canvas.renderAll();
                    // Publish an event when new object is added
                    eventService.$pub('objectAdded', obj);
                },
                /**
                * This method will remove the object from canvas
                */
                unexec: function () {
                    if (!obj)
                        return;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    canvas.remove(obj).renderAll();
                    // publish an event when object is removed
                    eventService.$pub('objectRemoved', obj);
                },
            };
        };
    }
    InsertObjectService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], InsertObjectService);
    return InsertObjectService;
}());



/***/ }),

/***/ "./src/app/services/main.service.ts":
/*!******************************************!*\
  !*** ./src/app/services/main.service.ts ***!
  \******************************************/
/*! exports provided: MainService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MainService", function() { return MainService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngx-bootstrap/modal */ "./node_modules/ngx-bootstrap/modal/fesm5/ngx-bootstrap-modal.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var ng2_cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng2-cache */ "./node_modules/ng2-cache/esm5/ng2-cache.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _services_canvas_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/canvas.service */ "./src/app/services/canvas.service.ts");
/* harmony import */ var _services_customise_controls_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../services/customise-controls.service */ "./src/app/services/customise-controls.service.ts");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sweetalert2 */ "./node_modules/sweetalert2/dist/sweetalert2.all.js");
/* harmony import */ var sweetalert2__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var ngx_filesaver__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ngx-filesaver */ "./node_modules/ngx-filesaver/fesm5/ngx-filesaver.js");
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ngx-translate/core */ "./node_modules/@ngx-translate/core/fesm5/ngx-translate-core.js");











var MainService = /** @class */ (function () {
    /**
     *
     * @param http
     * @param _FileSaverService
     * @param cacheService
     * @param modalService
     * @param canvasService
     * @param eventService
     * @param translate
     * @param customiseControlsService
     */
    function MainService(http, _FileSaverService, cacheService, modalService, canvasService, eventService, translate, customiseControlsService) {
        var _this_1 = this;
        this.http = http;
        this._FileSaverService = _FileSaverService;
        this.cacheService = cacheService;
        this.modalService = modalService;
        this.canvasService = canvasService;
        this.eventService = eventService;
        this.translate = translate;
        this.customiseControlsService = customiseControlsService;
        this.version = '2.0.0';
        this.isDeveloperMode = false;
        this.firstTimeLoaded = false;
        this.colorData = {};
        this.containerCanvases = {};
        this.allObjects = [];
        // for Login
        this.userLoggedIn = false;
        // for Loader
        this.loaderRequests = 0;
        this.loaderResponse = 0;
        this.loaderChecked = false;
        this.tabsFlow = [];
        this.objectModification = true;
        this.lastSavedData = {};
        this.generatedImage = [];
        this.hideMe = false;
        this.isToolTipEnable = false;
        //check Admin make a design
        this.isAdmin = false;
        // choose if enableMultipleSelection is true or false
        this.enableMultipleSelection = false;
        this.nameNumber = false;
        this.isGenerateSVGDesign = false;
        this.totalMainTab = 0;
        this.clipartRequest = true;
        this.imageConfigRequest = true;
        // otherOptions to pass in Load Product
        this.otherOptions = [];
        // Flag variable that will prevent/allow user from downloading image
        this.displayDownload = false;
        if (this.firstTimeLoaded) {
            return;
        }
        this.firstTimeLoaded = true;
        this.setBasicConfiguration();
        this.canvasService.initZoom();
        this.canvasService.initScaleFactor();
        document.onclick = (function (event) {
            var demoModeClasses = ['productdesigner-mobile-view', 'productdesigner-tab-view'], isDemoModeClassFound = false;
            for (var key in demoModeClasses) {
                var domElement = window.top.document.getElementsByClassName(demoModeClasses[key]);
                if (domElement && domElement.length && domElement[0]) {
                    isDemoModeClassFound = true;
                }
            }
            if (!_this_1.isResponsive || isDemoModeClassFound) {
                _this_1.canvasService.checkClasses(event);
            }
        });
        var makeDesignStatus = document.getElementById("admin_design");
        this.isAdmin = (!makeDesignStatus) ? false : true;
        // this.isAdmin = true;
        if (this.isAdmin) {
            var namenumber_design = document.getElementById("namenumber_design");
            this.nameNumber = (!namenumber_design) ? false : true;
        }
        if (this.isAdmin) {
            var generatesvg_design = document.getElementById('generatesvg_design');
            this.isGenerateSVGDesign = (!generatesvg_design) ? false : true;
        }
    }
    /**
     * [setBasicConfiguration Set Basic URLs, params,variables]
     */
    MainService.prototype.setBasicConfiguration = function () {
        this.defaultPlaceholderImage = "";
        var placeHolder = document.getElementsByName("placeHolderUrl")[0];
        if (placeHolder) {
            this.defaultPlaceholderImage = placeHolder.value;
        }
        var base_url = document.getElementsByName("mage_base_url")[0];
        var baseUrl = atob(base_url.value);
        this.baseUrl = baseUrl;
        var store_key = document.getElementsByName("store_id")[0];
        var storeId = atob(store_key.value);
        var currency_key = document.getElementsByName("currency_code")[0];
        var currency = atob(currency_key.value);
        this.flushCache(storeId, currency);
        var params = this.getUrlParams(['id', 'design', 'item']);
        if (!params || !params['id']) {
            return;
        }
        this.productId = params['id'];
        this.canvasService.productId = params['id'];
        this.designId = (params['design']) ? params['design'] : '';
        this.itemId = (params['item']) ? params['item'] : '';
        this.initResponsive();
        var self = this;
        window.onresize = function (event) {
            self.processWindowSize(self);
        };
    };
    /**
     * Process which update all responsive supported stuffs
     * @return {[type]} [description]
     */
    MainService.prototype.processWindowSize = function (self) {
        var _this_1 = this;
        self.initResponsive();
        if (this.canvasService.currentCanvas) {
            var currObj_1 = this.canvasService.currentCanvas.getActiveObjects();
            setTimeout(function () {
                if (currObj_1.type != 'activeSelection') {
                    _this_1.eventService.$pub('selectThisObjects', currObj_1);
                }
            }, 100);
            this.canvasService.deselectAllObjects();
        }
        self.eventService.$pub('windowResize');
    };
    /**
     * update isResponsive var based on window width
     */
    MainService.prototype.initResponsive = function () {
        if (window.innerWidth <= 1024) {
            this.isResponsive = true;
        }
        else {
            this.isResponsive = false;
        }
    };
    /**
     * Fetch Param values from URL
     * @return array
     */
    MainService.prototype.getUrlParams = function (paramKey) {
        var url = location.href;
        var UrlArray = url.split("/");
        var params = [];
        for (var j = 0; j < UrlArray.length; j++) {
            if (paramKey.indexOf(UrlArray[j]) >= 0) {
                params[UrlArray[j]] = UrlArray[j + 1];
            }
        }
        return params;
    };
    /**
     * [flushCache Flush all angular cache if store id or currency changes]
     * @param {int} storeId  [Current store Id of Magento]
     * @param {string} currency [Current Currency of Magento]
     */
    MainService.prototype.flushCache = function (storeId, currency) {
        if (this.cacheService.exists('cache-storeid' + '-' + this.baseUrl)) {
            var cachedStoreId = this.cacheService.get('cache-storeid' + '-' + this.baseUrl);
            if (cachedStoreId != storeId) {
                this.cacheService.removeAll();
            }
        }
        if (this.cacheService.exists('cache-currency' + '-' + this.baseUrl)) {
            var cachedCurrency = this.cacheService.get('cache-currency' + '-' + this.baseUrl);
            if (cachedCurrency != currency) {
                this.cacheService.removeAll();
            }
        }
        this.cacheService.set('cache-storeid' + '-' + this.baseUrl, storeId, { maxAge: 15 * 60 });
        this.cacheService.set('cache-currency' + '-' + this.baseUrl, currency, { maxAge: 15 * 60 });
        if (this.isDeveloperMode) {
            this.cacheService.removeAll();
        }
    };
    /**
     * [post HTTP post method]
     * @param {string} url    [Magento Controller URL passed from component]
     * @param {object} params [Params which needs to be passed to Magento Controller]
     */
    MainService.prototype.post = function (actionURL, params, showMainLoader, httpHeaders) {
        var _this_1 = this;
        if (showMainLoader === void 0) { showMainLoader = false; }
        if (httpHeaders === void 0) { httpHeaders = null; }
        // when user has not set any headers
        // we will set default headers
        var defaultHeaders = new _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpHeaders"]();
        defaultHeaders = defaultHeaders.append("Content-type", "application/x-www-form-urlencoded");
        // defaultHeaders = defaultHeaders.append("X-Requested-With", "XMLHttpRequest");
        // determine if user has specifed any headers
        // if not, use our default headers
        var headers = (httpHeaders) ? httpHeaders : defaultHeaders;
        // show mainLoader is params is true
        if (showMainLoader === true)
            this.eventService.$pub("showMainLoader");
        // if isAjax is not set, assign the same
        actionURL = (actionURL.indexOf("isAjax") === -1) ? actionURL + '?isAjax=true' : actionURL;
        // finally hit the request
        return this.http.post(this.baseUrl + actionURL, params, { headers: headers })
            .toPromise()
            .then(function (res) { return res; })
            .finally(function () {
            // this will hide main loader
            if (showMainLoader === true)
                _this_1.eventService.$pub("hideMainLoader");
        });
    };
    MainService.prototype.postFile = function (url, fileData) {
        var headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpHeaders"]().set('Content-Type', []);
        return this.http.post(this.baseUrl + url, fileData, { headers: headers })
            .toPromise().then(function (res) { return res; });
    };
    /**
     * this is common function for all get data requests
     * if data is already present in cache, return same, fetch from api call otherwise
     *
     * @param url url to api
     * @param params request payload
     * @param cacheKey cache key
     * @param loaderComponentRef
     * 			- reference to loader component used in individual component
     * 			- this is  used when component needs to show loader untill get data finishes it's operation in same component
     * @param showMainLoader flag variable that indicates whether to show/hide main loader or sub loader
     */
    MainService.prototype.getData = function (url, params, cacheKey, loaderComponentRef, showMainLoader) {
        var _this_1 = this;
        if (loaderComponentRef === void 0) { loaderComponentRef = null; }
        if (showMainLoader === void 0) { showMainLoader = false; }
        return new Promise(function (resolve, reject) {
            // if cache is already present, return the same
            if (_this_1.cacheService.exists(cacheKey) && cacheKey != null) {
                var data = _this_1.cacheService.get(cacheKey);
                resolve(data);
            }
            // if not then fetch from api first and then store response to cache
            else {
                // as our every request will be post request, add isAjax param to url
                url += '?isAjax=true';
                // this action is for init requests
                // as on page load, we are hitting several requests from individual component
                // untill each component gets their response, we need to show main loader
                // so we are using loader checked which will indicated we are done with this process
                // loaderRequests is request counter which will keep track of total request occured
                // loaderResponse is response counter which will be compared with loaderRequests, and hide loader and change status of loaderChecked to true
                if (_this_1.loaderChecked === false) {
                    _this_1.eventService.$pub('showMainLoader');
                    _this_1.loaderRequests++;
                }
                // if loader instance is specified
                if (loaderComponentRef != null) {
                    loaderComponentRef.showSubLoader = true;
                }
                // api call
                _this_1.post(url, params, showMainLoader)
                    .then(function (data) {
                    _this_1.cacheService.set(cacheKey, data, { maxAge: 15 * 60 });
                    resolve(data);
                })
                    .catch(function (err) { return reject(err); })
                    .finally(function () {
                    // here we will hide loader and change flag to true to prevent multiple request loaders
                    if (_this_1.loaderChecked == false) {
                        _this_1.loaderResponse++;
                        if (_this_1.loaderRequests == _this_1.loaderResponse) {
                            _this_1.loaderChecked = true;
                            _this_1.eventService.$pub('hideMainLoader');
                        }
                    }
                    // if loader instance is specified
                    if (loaderComponentRef != null) {
                        loaderComponentRef.showSubLoader = false;
                    }
                });
            }
        });
    };
    MainService.prototype.getSubTabs = function (mainTabId, cacheKey) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var params, url, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        params = {
                            'data': mainTabId,
                            'product_id': this.productId,
                            'isAdmin': this.isAdmin
                        }, url = 'productdesigner/Tabs/getSubTabs';
                        cacheKey += this.productId + '-' + this.baseUrl;
                        return [4 /*yield*/, this.getData(url, params, cacheKey).then(function (responseData) {
                                data = responseData;
                            }).catch(function (err) { return console.log(err); })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, data];
                }
            });
        });
    };
    MainService.prototype.setSubTabsData = function (data, mainTabId) {
        if (mainTabId === void 0) { mainTabId = 0; }
        if (!data || !data)
            return;
        var subTabsData = data;
        var tempData = [];
        var allTabs = this.getAllTabs;
        for (var i = 0; i < subTabsData.length; i++) {
            if (subTabsData[i] == allTabs[subTabsData[i]]['id']) {
                var label = (mainTabId == subTabsData[i]) ? 'label' : 'custom_label';
                tempData.push({ id: allTabs[subTabsData[i]]['id'], label: allTabs[subTabsData[i]][label], component: allTabs[subTabsData[i]]['component'] });
            }
        }
        return tempData;
    };
    /**
     * [joinObject join array keys and values with underscore('_')]
     * @param {[type]} selectedOptions [Options which are selected from proudct option component]
     */
    MainService.prototype.joinObject = function (selectedOptions) {
        return Object.keys(selectedOptions).join('_') + '_' + Object.values(selectedOptions).join('_');
    };
    /**
     * This function will display swal alert and will return the same as promise(.then() .catch())
     *
     * @param title
     * @param msg
     * @param type
     * @param confirmButtonText
     * @param customClass
     */
    MainService.prototype.swal = function (title, msg, type, confirmButtonText, customClass) {
        if (confirmButtonText === void 0) { confirmButtonText = "Ok"; }
        if (customClass === void 0) { customClass = ""; }
        return sweetalert2__WEBPACK_IMPORTED_MODULE_8___default.a.fire({
            title: title,
            text: msg,
            type: type,
            confirmButtonText: confirmButtonText,
            customClass: customClass
        });
    };
    /**
     * This function will open modal
     * @param template
     * @param modalClass
     */
    MainService.prototype.openThisModal = function (template, modalClass) {
        if (modalClass === void 0) { modalClass = ""; }
        var obj = this.canvasService.getActiveObject();
        if (obj != false && obj.type == 'text')
            this.canvasService.deselectAllObjects();
        return this.modalService.show(template, Object.assign({}, { class: modalClass }));
    };
    /**
     * Logout user
     */
    MainService.prototype.logout = function () {
        var _this_1 = this;
        var url = "productdesigner/Customer/Logout";
        this.post(url, {}, true).then(function (resp) {
            if (resp && resp.status == "success") {
                _this_1.userLoggedIn = false;
                _this_1.eventService.$pub('customerLoggedOut');
                _this_1.swal(_this_1.translate.instant("Success"), _this_1.translate.instant("Logged out successfully"), "success");
            }
            else {
                var msg = (resp && resp.log) ? resp.log : _this_1.translate.instant("Something went wrong");
                if (msg.lastIndexOf("-") >= 0)
                    msg.substr(msg.lastIndexOf("-") + 2);
                _this_1.swal(_this_1.translate.instant("Error"), msg, "error");
            }
        });
    };
    MainService.prototype.setCookie = function (name, expires, value) {
        /*Set cookie for intro*/
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
    };
    MainService.prototype.getCookie = function (cname) {
        var name = cname + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var ca = decodedCookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    };
    /*Store Image for Preview and Download*/
    MainService.prototype.getCanvasDataUrl = function (isFirst, currentImageId, getUrlOnly) {
        if (getUrlOnly === void 0) { getUrlOnly = true; }
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var images, params, response_1;
            var _this_1 = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (isFirst) {
                            currentImageId = this.canvasService.activeImageId;
                        }
                        if (!(this.objectModification == true || this.generatedImage[currentImageId] == undefined || this.generatedImage[currentImageId] == '')) return [3 /*break*/, 2];
                        images = this.canvasService.getCanvasDataUrl(currentImageId);
                        params = {
                            'dataUrl': images,
                            'product_image_data': this.canvasService.allImagesWithIds[currentImageId],
                        };
                        return [4 /*yield*/, this.post('productdesigner/index/preview', params).then(function (data) {
                                _this_1.generatedImage[currentImageId] = data;
                                response_1 = (getUrlOnly === true) ? _this_1.generatedImage[currentImageId].base.url : Object.assign({}, data);
                                _this_1.objectModification = false;
                            }).catch(function (err) {
                                console.log(_this_1.translate.instant("Error in loading preview"), err);
                            })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, response_1];
                    case 2: return [2 /*return*/, (getUrlOnly === true) ? this.generatedImage[currentImageId].base.url : this.generatedImage[currentImageId]];
                }
            });
        });
    };
    /*Download Files*/
    MainService.prototype.downloadFiles = function (url, extension) {
        var _this_1 = this;
        if (extension === void 0) { extension = ''; }
        //Get  File Name
        var productName;
        this.eventService.$sub('getCartData', function (data) {
            productName = data.productName;
        });
        var dateObj = new Date();
        var month = dateObj.getUTCMonth() + 1;
        var day = dateObj.getUTCDate();
        var year = dateObj.getUTCFullYear();
        var newdate = year + "-" + month + "-" + day;
        var h = (dateObj.getHours() < 10) ? "0" + dateObj.getHours() : dateObj.getHours();
        var m = (dateObj.getMinutes() < 10) ? "0" + dateObj.getMinutes() : dateObj.getMinutes();
        var s = (dateObj.getSeconds() < 10) ? "0" + dateObj.getSeconds() : dateObj.getSeconds();
        var newtime = h + "-" + m + "-" + s;
        var fileName = productName + "_" + newdate + "_" + newtime + '.' + extension;
        //Download File here
        this.http.get(url, {
            observe: 'response',
            responseType: 'blob'
        }).subscribe(function (res) {
            _this_1._FileSaverService.save(res.body, fileName);
        });
    };
    /**
     *
     * @param qty
     */
    MainService.prototype.calcFinalPrice = function (qty) {
        return (this.productPrice + this.otherPrices) * qty;
    };
    /**
     *
     * @param subLoaderInstance
     * @param checkForResponsive
     */
    MainService.prototype.showHideSubLoader = function (subLoaderInstance, checkForResponsive) {
        if (checkForResponsive === void 0) { checkForResponsive = false; }
        // if subloader instance is not valid
        if (!subLoaderInstance || !subLoaderInstance.hasOwnProperty('showSubLoader'))
            return;
        // flag variable that will be used to show/hide loader
        var showLoader = false;
        // if there is no need to check responsive, directly set loader value
        if (checkForResponsive === false)
            showLoader = !subLoaderInstance.showSubLoader;
        // else check if is responsive if not true, 
        // if it is true, then by default false is been set
        // if it is false, get opposite value of sub loader
        else if (!this.isResponsive)
            showLoader = !subLoaderInstance.showSubLoader;
        // finally assign flag value to specified instance
        subLoaderInstance.showSubLoader = showLoader;
    };
    /**
     *
     * @param placeholderInstance
     */
    MainService.prototype.showHidePlaceholder = function (placeholderInstance) {
        // if subloader instance is not valid
        // if (placeholderInstance == undefined || placeholderInstance == null) return;
        // flag variable that will be used to show/hide loader
        var showPlaceholder = false;
        // else check if is responsive if not true, 
        // if it is true, then by default false is been set
        // if it is false, get opposite value of sub loader
        if (this.isResponsive)
            showPlaceholder = !placeholderInstance;
        // finally assign flag value to specified instance
        return showPlaceholder;
    };
    /*********** Infinity Scroll Section *************/
    MainService.prototype.prepareTempArrForPlaceholder = function (limit) {
        this.customPlaceholderArr = [];
        for (var i = 0; i < limit; i++) {
            this.customPlaceholderArr.push(i);
        }
    };
    MainService.prototype.processToolTip = function (tootltipData, option) {
        if (tootltipData === void 0) { tootltipData = []; }
        if (option === void 0) { option = false; }
        var self = tootltipData;
        var _this = this;
        var intro = introJs();
        var _intro = introJs();
        intro.exit();
        if (self != undefined) {
            setTimeout(function () {
                if (option) {
                    _this.isToolTipEnable = true;
                    intro.setOptions({
                        steps: self,
                        disableInteraction: false,
                        scrollToElement: false,
                        showBullets: false,
                        showButtons: false,
                        showStepNumbers: false,
                        overlayOpacity: 0.2,
                        highlightClass: "demoClass"
                    }).start();
                    intro.refresh();
                    intro.onbeforeexit(function () {
                        _this.isToolTipEnable = false;
                    });
                    setTimeout(function () { intro.exit(); _this.isToolTipEnable = false; }, 10000);
                }
                else {
                    _this.isToolTipEnable = true;
                    _intro.setOptions({
                        steps: self,
                        disableInteraction: false,
                        scrollToElement: false,
                        showBullets: false,
                        showButtons: false,
                        showStepNumbers: false,
                        overlayOpacity: 0.2
                    }).start();
                    _intro.refresh();
                    _intro.onbeforeexit(function () {
                        _this.isToolTipEnable = false;
                    });
                    setTimeout(function () { intro.exit(); _this.isToolTipEnable = false; }, 15000);
                }
            }, 500);
        }
    };
    /**************** Common Opearation Functions *****************/
    MainService.prototype.updateObjectProperties = function (obj, properties, selectAfterUpdate) {
        if (selectAfterUpdate === void 0) { selectAfterUpdate = false; }
        var params = {
            obj: obj,
            properties: properties,
            crudServiceString: 'this.updateObjectService'
        };
        params = (selectAfterUpdate === false) ? Object.assign(params, { setActive: false }) : params;
        this.canvasService.objectCRUD(params);
    };
    MainService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClient"],
            ngx_filesaver__WEBPACK_IMPORTED_MODULE_9__["FileSaverService"],
            ng2_cache__WEBPACK_IMPORTED_MODULE_3__["CacheService"],
            ngx_bootstrap_modal__WEBPACK_IMPORTED_MODULE_1__["BsModalService"],
            _services_canvas_service__WEBPACK_IMPORTED_MODULE_5__["CanvasService"],
            angular7_pubsub__WEBPACK_IMPORTED_MODULE_7__["PubSubService"],
            _ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__["TranslateService"],
            _services_customise_controls_service__WEBPACK_IMPORTED_MODULE_6__["CustomiseControlsService"]])
    ], MainService);
    return MainService;
}());



/***/ }),

/***/ "./src/app/services/range-slider-update-service.service.ts":
/*!*****************************************************************!*\
  !*** ./src/app/services/range-slider-update-service.service.ts ***!
  \*****************************************************************/
/*! exports provided: RangeSliderUpdateServiceService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RangeSliderUpdateServiceService", function() { return RangeSliderUpdateServiceService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var RangeSliderUpdateServiceService = /** @class */ (function () {
    function RangeSliderUpdateServiceService() {
        /**
         * Init the service for operation : It initialise the variables
         */
        this.init = function (params) {
            var selectedObj = params.obj, properties = params.properties, canvasService = params.service, redoStack = {}, eventService = params.eventService;
            // if no object is passed, we will get active object
            if (selectedObj == null)
                selectedObj = canvasService.getActiveObject();
            // if no active object found, return from here
            if (selectedObj == false)
                return;
            return {
                /**
                 * this function is used when special operation needs to be performed on objects(eg. bold/italic on text)
                 *
                 */
                exec: function () {
                    // if no active object found, return from here
                    if (selectedObj == false)
                        return;
                    if (redoStack && Object.keys(redoStack).length > 0) {
                        var _loop_1 = function (key) {
                            if (Array.isArray(selectedObj)) {
                                selectedObj.filter(function (currObj) { return currObj[key] = redoStack[key]; });
                            }
                            else {
                                selectedObj[key] = redoStack[key];
                            }
                        };
                        // if (Array.isArray(selectedObj)) {
                        //   selectedObj.filter(obj => {
                        //     obj = Object.assign(obj, properties);
                        //     // obj[key] = redoStack[key];
                        //   });
                        // } else {
                        //   selectedObj = Object.assign(selectedObj, properties);
                        //   // selectedObj[key] = redoStack[key];
                        // }
                        for (var key in redoStack) {
                            _loop_1(key);
                        }
                        // 
                        for (var key in properties) {
                            redoStack[key] = properties[key];
                        }
                        canvasService.currentCanvas.renderAll();
                        eventService.$pub('objectUpdated', selectedObj);
                    }
                },
                /**
                 * This function is used to revert back the last updated object while using undo redo
                 */
                unexec: function () {
                    var canvas = canvasService.currentCanvas;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    // return of obj is null
                    if (!selectedObj)
                        return;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    // 
                    // redoStack = Object.assign({}, properties);
                    // 
                    for (var key in properties) {
                        redoStack[key] = (Array.isArray(selectedObj)) ? selectedObj[0][key] : selectedObj[key];
                    }
                    // 
                    if (Array.isArray(selectedObj)) {
                        selectedObj.filter(function (obj) {
                            obj = Object.assign(obj, properties);
                            // redoStack[key] = obj[key];
                            // obj[key] = value;
                        });
                    }
                    else {
                        selectedObj = Object.assign(selectedObj, properties);
                        // redoStack[key] = selectedObj[key];
                        // selectedObj[key] = value;
                    }
                    canvasService.currentCanvas.renderAll();
                    eventService.$pub('objectUpdated', selectedObj);
                }
            };
        };
    }
    RangeSliderUpdateServiceService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], RangeSliderUpdateServiceService);
    return RangeSliderUpdateServiceService;
}());



/***/ }),

/***/ "./src/app/services/remove-object.service.ts":
/*!***************************************************!*\
  !*** ./src/app/services/remove-object.service.ts ***!
  \***************************************************/
/*! exports provided: RemoveObjectService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoveObjectService", function() { return RemoveObjectService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var RemoveObjectService = /** @class */ (function () {
    function RemoveObjectService() {
        /**
         * Remove selected/any object from canvas
         */
        this.init = function (params) {
            var obj = params.obj, properties = params.properties, canvasService = params.service, isCenter = params.hasOwnProperty('isCenter') ? params.isCenter : true, isSvg = params.hasOwnProperty('isSvg') ? params.isSvg : false, canvas = params.hasOwnProperty('canvas') ? params.canvas : canvasService.currentCanvas, eventService = params.eventService, removeUltimateObj = params.hasOwnProperty('removeUltimateObj') ? params.removeUltimateObj : false;
            // if no object is passed, we will get active object
            if (obj == null)
                obj = canvasService.getActiveObject();
            return {
                /**
       * After initializing each fabric object, this method is called to apply->insert the same on canvas
       *
       */
                exec: function () {
                    if (obj == false)
                        return;
                    // remove the object and render
                    if (Array.isArray(obj)) {
                        for (var i in obj) {
                            if (obj[i].ultimatelock != true || removeUltimateObj == true) {
                                canvas.remove(obj[i]).renderAll();
                            }
                        }
                    }
                    else {
                        if (obj.ultimatelock != true || removeUltimateObj == true) {
                            canvas.remove(obj).renderAll();
                        }
                    }
                    canvas.discardActiveObject();
                    // render current canvas
                    canvas.renderAll();
                    // publish an event when object is removed
                    eventService.$pub('objectRemoved', obj);
                },
                /**
                * This method will add the object on canvas
                */
                unexec: function () {
                    if (!obj)
                        return;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    if (Array.isArray(obj) && obj.length == 1) {
                        obj = obj[0];
                    }
                    if (Array.isArray(obj)) {
                        for (var i in obj) {
                            canvas.add(obj[i]).renderAll();
                            obj[i].setCoords();
                        }
                        // set group objects as active
                        var sel = new fabric.ActiveSelection(obj, {
                            canvas: canvas,
                        });
                        canvas.setActiveObject(sel);
                    }
                    else {
                        canvas.add(obj).renderAll();
                        obj.setCoords();
                        // set current object as active
                        canvas.setActiveObject(obj);
                    }
                    // render current canvas
                    canvas.renderAll();
                    // Publish an event when new object is added
                    eventService.$pub('objectAdded', obj);
                }
            };
        };
    }
    RemoveObjectService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], RemoveObjectService);
    return RemoveObjectService;
}());



/***/ }),

/***/ "./src/app/services/tabs.service.ts":
/*!******************************************!*\
  !*** ./src/app/services/tabs.service.ts ***!
  \******************************************/
/*! exports provided: TabsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabsService", function() { return TabsService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var TabsService = /** @class */ (function () {
    function TabsService() {
        this.parentTabsData = [];
        this.showChildTabsData = [];
        this.showChild = null;
    }
    TabsService.prototype.registerTabs = function (subTab, mainTab) {
        if (!this.parentTabsData[mainTab]) {
            this.parentTabsData[mainTab] = [];
        }
        if (this.parentTabsData[mainTab].indexOf(subTab) == -1) {
            this.parentTabsData[mainTab].push(subTab);
        }
    };
    TabsService.prototype.showChildTabs = function (currentTab) {
        this.showChild = true;
        this.showChildTabsData = [];
        for (var _i = 0, _a = this.parentTabsData[currentTab]; _i < _a.length; _i++) {
            var tab = _a[_i];
            if (this.showChildTabsData.indexOf(tab) == -1) {
                this.showChildTabsData.push(tab);
            }
        }
    };
    TabsService.prototype.checkIfExistChild = function (tab) {
        if (this.showChildTabsData.indexOf(tab) == -1) {
            return null;
        }
        return true;
    };
    TabsService.prototype.backTab = function () {
        this.showChild = null;
        this.showChildTabsData = [];
    };
    TabsService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], TabsService);
    return TabsService;
}());



/***/ }),

/***/ "./src/app/services/update-object.service.ts":
/*!***************************************************!*\
  !*** ./src/app/services/update-object.service.ts ***!
  \***************************************************/
/*! exports provided: UpdateObjectService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateObjectService", function() { return UpdateObjectService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");


var UpdateObjectService = /** @class */ (function () {
    function UpdateObjectService() {
        /**
         * Init the service for operation : It initialise the variables
         */
        this.init = function (params) {
            var obj = params.obj, properties = params.properties, canvasService = params.service, isCenter = params.hasOwnProperty('isCenter') ? params.isCenter : false, isSVG = params.hasOwnProperty('isSvg') ? params.isSvg : false, isObjectModify = params.hasOwnProperty('isObjectModify') ? params.isObjectModify : false, eventService = params.eventService, currentCanvas = (params.hasOwnProperty('canvas')) ? params.canvas : canvasService.currentCanvas, setActiveObject = (params.hasOwnProperty('setActive')) ? params.setActive : true;
            // if no object is passed, we will get active object
            if (obj == null)
                obj = canvasService.getActiveObject();
            // if no active object found, return from here
            if (obj == false)
                return;
            // if (isCenter === true) obj.center();
            // fetch object's current property in array
            var oldProperties = {};
            if (isSVG == true || isObjectModify) {
                for (var key in properties) {
                    oldProperties[key] = properties[key];
                }
            }
            else {
                for (var key in properties) {
                    if (Array.isArray(obj)) {
                        oldProperties[key] = obj[0][key];
                    }
                    else {
                        oldProperties[key] = obj[key];
                    }
                }
            }
            // If object is modified due to inbuilt fabric property then no updation required
            if (isObjectModify) {
                properties = {};
            }
            return {
                /**
                 * this function is used when special operation needs to be performed on objects(eg. bold/italic on text)
                 *
                 */
                exec: function () {
                    // if no active object found, return from here
                    if (obj == false)
                        return;
                    // set properties to current object
                    if (isSVG) {
                        obj._objects.forEach(function (data) {
                            if (data.fill && properties['old_fill'] == data.fill) {
                                data.set({ fill: properties['fill'] });
                            }
                        });
                    }
                    else {
                        if (Array.isArray(obj)) {
                            for (var i = 0; i < obj.length; i++) {
                                //obj[i] = Object.assign(obj[i], properties);
                                for (var key in properties) {
                                    var property = properties[key];
                                    var functionName = key.charAt(0).toUpperCase() + key.substr(1);
                                    if (typeof obj[i]['set' + functionName] == 'function') {
                                        obj[i]['set' + functionName](property);
                                    }
                                    else {
                                        obj[i][key] = property;
                                    }
                                }
                                obj[i].dirty = true;
                                if (obj[i].selectable)
                                    if (isCenter === true)
                                        obj[i].center();
                                obj[i].setCoords();
                            }
                            if (setActiveObject)
                                currentCanvas.setActiveObject(obj[0]);
                        }
                        else {
                            //obj = Object.assign(obj, properties);
                            for (var key in properties) {
                                var property = properties[key];
                                var functionName = key.charAt(0).toUpperCase() + key.substr(1);
                                if (typeof obj['set' + functionName] == 'function') {
                                    obj['set' + functionName](property);
                                }
                                else {
                                    obj[key] = property;
                                }
                            }
                            obj.dirty = true;
                            if (isCenter === true)
                                obj.center();
                            if (obj.selectable && setActiveObject)
                                currentCanvas.setActiveObject(obj);
                            obj.setCoords();
                        }
                    }
                    // finally update the canvas object
                    currentCanvas.calcOffset();
                    setTimeout(function () {
                        currentCanvas.renderAll();
                        // Publish an event when new object is updated
                        eventService.$pub('objectUpdated', obj);
                    }, 50);
                },
                /**
                 * This function is used to revert back the last updated object while using undo redo
                 */
                unexec: function () {
                    var canvas = currentCanvas;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    // return of obj is null
                    if (!obj)
                        return;
                    // if no canvas is selected
                    if (!canvas) {
                        return;
                    }
                    if (isObjectModify) {
                        for (var key in oldProperties) {
                            properties[key] = obj[key];
                        }
                    }
                    if (isSVG) {
                        obj._objects.forEach(function (data) {
                            if (data.fill && oldProperties['fill'] == data.fill) {
                                data.set({ fill: oldProperties['old_fill'] });
                            }
                        });
                    }
                    else {
                        // set properties to current object from undoPropertiesStack
                        if (Array.isArray(obj)) {
                            for (var i = 0; i < obj.length; i++) {
                                //obj[i] = Object.assign(obj[i], oldProperties);
                                for (var key in oldProperties) {
                                    var property = oldProperties[key];
                                    var functionName = key.charAt(0).toUpperCase() + key.substr(1);
                                    if (typeof obj[i]['set' + functionName] == 'function') {
                                        obj[i]['set' + functionName](property);
                                    }
                                    else {
                                        obj[i][key] = property;
                                    }
                                }
                                obj[i].setCoords();
                                obj[i].dirty = true;
                            }
                            if (setActiveObject)
                                currentCanvas.setActiveObject(obj[0]);
                        }
                        else {
                            //obj = Object.assign(obj, oldProperties);
                            for (var key in oldProperties) {
                                var property = oldProperties[key];
                                var functionName = key.charAt(0).toUpperCase() + key.substr(1);
                                if (typeof obj['set' + functionName] == 'function') {
                                    obj['set' + functionName](property);
                                }
                                else {
                                    obj[key] = property;
                                }
                            }
                            obj.setCoords();
                            obj.dirty = true;
                            if (setActiveObject)
                                currentCanvas.setActiveObject(obj);
                        }
                    }
                    // finally update the canvas object
                    currentCanvas.renderAll();
                    eventService.$pub('objectUpdated', obj);
                }
            };
        };
    }
    UpdateObjectService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [])
    ], UpdateObjectService);
    return UpdateObjectService;
}());



/***/ }),

/***/ "./src/app/services/update-object.service_before-undo-redo.ts":
/*!********************************************************************!*\
  !*** ./src/app/services/update-object.service_before-undo-redo.ts ***!
  \********************************************************************/
/*! exports provided: UpdateObjectService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateObjectService", function() { return UpdateObjectService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular7-pubsub */ "./node_modules/angular7-pubsub/esm/src/index.js");



var UpdateObjectService = /** @class */ (function () {
    function UpdateObjectService(eventService) {
        this.eventService = eventService;
        this.undoPropertiesStack = {};
        this.undoObjectsStack = {};
        this.redoPropertiesStack = {};
        this.redoObjectsStack = {};
        this.isSVG = false;
        this.properties = {};
    }
    /**
     * Init the service for operation : It initialise the variables
     */
    UpdateObjectService.prototype.init = function (params) {
        var obj = params.obj, properties = params.properties, service = params.service, isCenter = params.hasOwnProperty('isCenter') ? params.isCenter : false, isSvg = params.hasOwnProperty('isSvg') ? params.isSvg : false, isObjectModify = params.hasOwnProperty('isObjectModify') ? params.isObjectModify : false;
        this.canvasService = service;
        // if no object is passed, we will get active object
        if (obj == null)
            obj = this.canvasService.getActiveObject();
        // if no active object found, return from here
        if (obj == false)
            return;
        if (isCenter === true)
            obj.center();
        // fetch object's current property in array
        var oldProperties = {};
        if (isSvg == true || isObjectModify) {
            for (var key in properties) {
                oldProperties[key] = properties[key];
            }
            this.isSVG = isSvg;
        }
        else {
            for (var key in properties) {
                oldProperties[key] = obj[key];
            }
        }
        var designarea_id = this.canvasService.currentCanvas.designarea_id;
        // Push current object Properties in array with design area id
        if (this.redoPropertiesStack[designarea_id] == undefined) {
            this.redoPropertiesStack[designarea_id] = [];
        }
        // Push current object in array with design area id
        if (this.redoObjectsStack[designarea_id] == undefined) {
            this.redoObjectsStack[designarea_id] = [];
        }
        if (this.redoPropertiesStack[designarea_id].length == 0) {
            this.redoPropertiesStack[designarea_id].push(properties);
        }
        if (this.redoObjectsStack[designarea_id].length == 0) {
            this.redoObjectsStack[designarea_id].push(obj);
        }
        // Push current object Properties in array with design area id
        if (this.undoPropertiesStack[designarea_id] == undefined) {
            this.undoPropertiesStack[designarea_id] = [];
        }
        this.undoPropertiesStack[designarea_id].push(oldProperties);
        // Push current object in array with design area id
        if (this.undoObjectsStack[designarea_id] == undefined) {
            this.undoObjectsStack[designarea_id] = [];
        }
        this.undoObjectsStack[designarea_id].push(obj);
        // If object is modified due to inbuilt fabric property then no updation required
        if (isObjectModify) {
            properties = {};
        }
        this.properties = properties;
    };
    /**
   * this function is used when special operation needs to be performed on objects(eg. bold/italic on text)
   *
   */
    UpdateObjectService.prototype.exec = function () {
        var designarea_id = this.canvasService.currentCanvas.designarea_id;
        if (!this.redoObjectsStack[designarea_id])
            return;
        var obj = this.redoObjectsStack[designarea_id].pop();
        if (!this.redoPropertiesStack[designarea_id])
            return;
        var properties = this.redoPropertiesStack[designarea_id].pop();
        properties = this.properties;
        // if no active object found, return from here
        if (obj == false)
            return;
        // set properties to current object
        if (this.isSVG) {
            obj._objects.forEach(function (data) {
                if (data.fill && properties['old_fill'] == data.fill) {
                    data.set({ fill: properties['fill'] });
                }
            });
        }
        else {
            obj = Object.assign(obj, properties);
        }
        // finally update the canvas object
        var self = this;
        setTimeout(function () {
            self.canvasService.currentCanvas.renderAll();
            obj.setCoords();
            // Publish an event when new object is updated
            self.eventService.$pub('objectUpdated', obj);
        }, 50);
    };
    /**
     * This function is used to revert back the last updated object while using undo redo
     */
    UpdateObjectService.prototype.unexec = function () {
        var designarea_id = this.canvasService.currentCanvas.designarea_id;
        var obj = this.undoObjectsStack[designarea_id].pop();
        var properties = this.undoPropertiesStack[designarea_id].pop();
        var oldProperties = {};
        for (var key in properties) {
            oldProperties[key] = obj[key];
        }
        // return of obj is null
        if (!obj)
            return;
        // if no canvas is selected
        if (!this.canvasService.currentCanvas) {
            return;
        }
        if (this.isSVG) {
            obj._objects.forEach(function (data) {
                if (data.fill && properties['fill'] == data.fill) {
                    data.set({ fill: properties['old_fill'] });
                }
            });
        }
        else {
            // set properties to current object from undoPropertiesStack
            obj = Object.assign(obj, properties);
        }
        // finally update the canvas object
        this.canvasService.currentCanvas.renderAll();
        obj.setCoords();
        this.eventService.$pub('objectUpdated', obj);
        // Push undoObjects Stack value into redoObjects Stack
        this.redoObjectsStack[designarea_id].push(obj);
        this.redoPropertiesStack[designarea_id].push(oldProperties);
    };
    /**
     * Clear undo stack and redo stack objects and properties
     */
    UpdateObjectService.prototype.clear = function () {
        this.undoPropertiesStack = {};
        this.undoObjectsStack = {};
        this.redoPropertiesStack = {};
        this.redoObjectsStack = {};
    };
    UpdateObjectService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root'
        }),
        tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"]("design:paramtypes", [angular7_pubsub__WEBPACK_IMPORTED_MODULE_2__["PubSubService"]])
    ], UpdateObjectService);
    return UpdateObjectService;
}());



/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
// This file can be replaced during build by using the `fileReplacements` array.
// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
var environment = {
    production: true
};
/*
 * For easier debugging in development mode, you can import the following file
 * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
 *
 * This import should be commented out in production mode because it will have a negative impact
 * on performance if an error is thrown.
 */
// import 'zone.js/dist/zone-error';  // Included with Angular CLI.


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/fesm5/platform-browser-dynamic.js");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/app.module */ "./src/app/app.module.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");




if (_environments_environment__WEBPACK_IMPORTED_MODULE_3__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["enableProdMode"])();
}
Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__["platformBrowserDynamic"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_2__["AppModule"])
    .catch(function (err) { return console.error(err); });


/***/ }),

/***/ 0:
/*!************************************************************************************!*\
  !*** multi (webpack)-dev-server/client?http://0.0.0.0:0/sockjs-node ./src/main.ts ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! /var/www/html/BYIV2/mag228/angular/node_modules/webpack-dev-server/client/index.js?http://0.0.0.0:0/sockjs-node */"./node_modules/webpack-dev-server/client/index.js?http://0.0.0.0:0/sockjs-node");
module.exports = __webpack_require__(/*! /var/www/html/BYIV2/mag228/angular/src/main.ts */"./src/main.ts");


/***/ }),

/***/ 1:
/*!***********************!*\
  !*** jsdom (ignored) ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!********************************************************!*\
  !*** jsdom/lib/jsdom/living/generated/utils (ignored) ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 3:
/*!***************************************!*\
  !*** jsdom/lib/jsdom/utils (ignored) ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map